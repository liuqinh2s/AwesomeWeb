(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerpolicy&&(s.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?s.credentials="include":i.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();var vr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ux(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function lx(r){var e=r.default;if(typeof e=="function"){var t=function(){return e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(n){var i=Object.getOwnPropertyDescriptor(r,n);Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:function(){return r[n]}})}),t}var be={exports:{}},Me={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Do=Symbol.for("react.element"),cx=Symbol.for("react.portal"),hx=Symbol.for("react.fragment"),fx=Symbol.for("react.strict_mode"),dx=Symbol.for("react.profiler"),px=Symbol.for("react.provider"),gx=Symbol.for("react.context"),mx=Symbol.for("react.forward_ref"),vx=Symbol.for("react.suspense"),Ex=Symbol.for("react.memo"),yx=Symbol.for("react.lazy"),V0=Symbol.iterator;function xx(r){return r===null||typeof r!="object"?null:(r=V0&&r[V0]||r["@@iterator"],typeof r=="function"?r:null)}var av={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ov=Object.assign,uv={};function ua(r,e,t){this.props=r,this.context=e,this.refs=uv,this.updater=t||av}ua.prototype.isReactComponent={};ua.prototype.setState=function(r,e){if(typeof r!="object"&&typeof r!="function"&&r!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,r,e,"setState")};ua.prototype.forceUpdate=function(r){this.updater.enqueueForceUpdate(this,r,"forceUpdate")};function lv(){}lv.prototype=ua.prototype;function id(r,e,t){this.props=r,this.context=e,this.refs=uv,this.updater=t||av}var sd=id.prototype=new lv;sd.constructor=id;ov(sd,ua.prototype);sd.isPureReactComponent=!0;var G0=Array.isArray,cv=Object.prototype.hasOwnProperty,ad={current:null},hv={key:!0,ref:!0,__self:!0,__source:!0};function fv(r,e,t){var n,i={},s=null,a=null;if(e!=null)for(n in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(s=""+e.key),e)cv.call(e,n)&&!hv.hasOwnProperty(n)&&(i[n]=e[n]);var o=arguments.length-2;if(o===1)i.children=t;else if(1<o){for(var u=Array(o),l=0;l<o;l++)u[l]=arguments[l+2];i.children=u}if(r&&r.defaultProps)for(n in o=r.defaultProps,o)i[n]===void 0&&(i[n]=o[n]);return{$$typeof:Do,type:r,key:s,ref:a,props:i,_owner:ad.current}}function Ax(r,e){return{$$typeof:Do,type:r.type,key:e,ref:r.ref,props:r.props,_owner:r._owner}}function od(r){return typeof r=="object"&&r!==null&&r.$$typeof===Do}function Cx(r){var e={"=":"=0",":":"=2"};return"$"+r.replace(/[=:]/g,function(t){return e[t]})}var W0=/\/+/g;function Fc(r,e){return typeof r=="object"&&r!==null&&r.key!=null?Cx(""+r.key):e.toString(36)}function Ru(r,e,t,n,i){var s=typeof r;(s==="undefined"||s==="boolean")&&(r=null);var a=!1;if(r===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(r.$$typeof){case Do:case cx:a=!0}}if(a)return a=r,i=i(a),r=n===""?"."+Fc(a,0):n,G0(i)?(t="",r!=null&&(t=r.replace(W0,"$&/")+"/"),Ru(i,e,t,"",function(l){return l})):i!=null&&(od(i)&&(i=Ax(i,t+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(W0,"$&/")+"/")+r)),e.push(i)),1;if(a=0,n=n===""?".":n+":",G0(r))for(var o=0;o<r.length;o++){s=r[o];var u=n+Fc(s,o);a+=Ru(s,e,t,u,i)}else if(u=xx(r),typeof u=="function")for(r=u.call(r),o=0;!(s=r.next()).done;)s=s.value,u=n+Fc(s,o++),a+=Ru(s,e,t,u,i);else if(s==="object")throw e=String(r),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Xo(r,e,t){if(r==null)return r;var n=[],i=0;return Ru(r,n,"","",function(s){return e.call(t,s,i++)}),n}function Tx(r){if(r._status===-1){var e=r._result;e=e(),e.then(function(t){(r._status===0||r._status===-1)&&(r._status=1,r._result=t)},function(t){(r._status===0||r._status===-1)&&(r._status=2,r._result=t)}),r._status===-1&&(r._status=0,r._result=e)}if(r._status===1)return r._result.default;throw r._result}var ir={current:null},Lu={transition:null},Sx={ReactCurrentDispatcher:ir,ReactCurrentBatchConfig:Lu,ReactCurrentOwner:ad};Me.Children={map:Xo,forEach:function(r,e,t){Xo(r,function(){e.apply(this,arguments)},t)},count:function(r){var e=0;return Xo(r,function(){e++}),e},toArray:function(r){return Xo(r,function(e){return e})||[]},only:function(r){if(!od(r))throw Error("React.Children.only expected to receive a single React element child.");return r}};Me.Component=ua;Me.Fragment=hx;Me.Profiler=dx;Me.PureComponent=id;Me.StrictMode=fx;Me.Suspense=vx;Me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Sx;Me.cloneElement=function(r,e,t){if(r==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+r+".");var n=ov({},r.props),i=r.key,s=r.ref,a=r._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,a=ad.current),e.key!==void 0&&(i=""+e.key),r.type&&r.type.defaultProps)var o=r.type.defaultProps;for(u in e)cv.call(e,u)&&!hv.hasOwnProperty(u)&&(n[u]=e[u]===void 0&&o!==void 0?o[u]:e[u])}var u=arguments.length-2;if(u===1)n.children=t;else if(1<u){o=Array(u);for(var l=0;l<u;l++)o[l]=arguments[l+2];n.children=o}return{$$typeof:Do,type:r.type,key:i,ref:s,props:n,_owner:a}};Me.createContext=function(r){return r={$$typeof:gx,_currentValue:r,_currentValue2:r,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},r.Provider={$$typeof:px,_context:r},r.Consumer=r};Me.createElement=fv;Me.createFactory=function(r){var e=fv.bind(null,r);return e.type=r,e};Me.createRef=function(){return{current:null}};Me.forwardRef=function(r){return{$$typeof:mx,render:r}};Me.isValidElement=od;Me.lazy=function(r){return{$$typeof:yx,_payload:{_status:-1,_result:r},_init:Tx}};Me.memo=function(r,e){return{$$typeof:Ex,type:r,compare:e===void 0?null:e}};Me.startTransition=function(r){var e=Lu.transition;Lu.transition={};try{r()}finally{Lu.transition=e}};Me.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Me.useCallback=function(r,e){return ir.current.useCallback(r,e)};Me.useContext=function(r){return ir.current.useContext(r)};Me.useDebugValue=function(){};Me.useDeferredValue=function(r){return ir.current.useDeferredValue(r)};Me.useEffect=function(r,e){return ir.current.useEffect(r,e)};Me.useId=function(){return ir.current.useId()};Me.useImperativeHandle=function(r,e,t){return ir.current.useImperativeHandle(r,e,t)};Me.useInsertionEffect=function(r,e){return ir.current.useInsertionEffect(r,e)};Me.useLayoutEffect=function(r,e){return ir.current.useLayoutEffect(r,e)};Me.useMemo=function(r,e){return ir.current.useMemo(r,e)};Me.useReducer=function(r,e,t){return ir.current.useReducer(r,e,t)};Me.useRef=function(r){return ir.current.useRef(r)};Me.useState=function(r){return ir.current.useState(r)};Me.useSyncExternalStore=function(r,e,t){return ir.current.useSyncExternalStore(r,e,t)};Me.useTransition=function(){return ir.current.useTransition()};Me.version="18.2.0";(function(r){r.exports=Me})(be);const Dx=ux(be.exports);var zh={},dv={exports:{}},kr={},pv={exports:{}},gv={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(r){function e(B,U){var Z=B.length;B.push(U);e:for(;0<Z;){var oe=Z-1>>>1,re=B[oe];if(0<i(re,U))B[oe]=U,B[Z]=re,Z=oe;else break e}}function t(B){return B.length===0?null:B[0]}function n(B){if(B.length===0)return null;var U=B[0],Z=B.pop();if(Z!==U){B[0]=Z;e:for(var oe=0,re=B.length,ge=re>>>1;oe<ge;){var Ce=2*(oe+1)-1,ke=B[Ce],Ie=Ce+1,Oe=B[Ie];if(0>i(ke,Z))Ie<re&&0>i(Oe,ke)?(B[oe]=Oe,B[Ie]=Z,oe=Ie):(B[oe]=ke,B[Ce]=Z,oe=Ce);else if(Ie<re&&0>i(Oe,Z))B[oe]=Oe,B[Ie]=Z,oe=Ie;else break e}}return U}function i(B,U){var Z=B.sortIndex-U.sortIndex;return Z!==0?Z:B.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;r.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();r.unstable_now=function(){return a.now()-o}}var u=[],l=[],c=1,h=null,f=3,d=!1,m=!1,E=!1,p=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(B){for(var U=t(l);U!==null;){if(U.callback===null)n(l);else if(U.startTime<=B)n(l),U.sortIndex=U.expirationTime,e(u,U);else break;U=t(l)}}function C(B){if(E=!1,y(B),!m)if(t(u)!==null)m=!0,j(A);else{var U=t(l);U!==null&&X(C,U.startTime-B)}}function A(B,U){m=!1,E&&(E=!1,g(F),F=-1),d=!0;var Z=f;try{for(y(U),h=t(u);h!==null&&(!(h.expirationTime>U)||B&&!V());){var oe=h.callback;if(typeof oe=="function"){h.callback=null,f=h.priorityLevel;var re=oe(h.expirationTime<=U);U=r.unstable_now(),typeof re=="function"?h.callback=re:h===t(u)&&n(u),y(U)}else n(u);h=t(u)}if(h!==null)var ge=!0;else{var Ce=t(l);Ce!==null&&X(C,Ce.startTime-U),ge=!1}return ge}finally{h=null,f=Z,d=!1}}var T=!1,S=null,F=-1,k=5,R=-1;function V(){return!(r.unstable_now()-R<k)}function $(){if(S!==null){var B=r.unstable_now();R=B;var U=!0;try{U=S(!0,B)}finally{U?ne():(T=!1,S=null)}}else T=!1}var ne;if(typeof v=="function")ne=function(){v($)};else if(typeof MessageChannel<"u"){var ve=new MessageChannel,H=ve.port2;ve.port1.onmessage=$,ne=function(){H.postMessage(null)}}else ne=function(){p($,0)};function j(B){S=B,T||(T=!0,ne())}function X(B,U){F=p(function(){B(r.unstable_now())},U)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(B){B.callback=null},r.unstable_continueExecution=function(){m||d||(m=!0,j(A))},r.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<B?Math.floor(1e3/B):5},r.unstable_getCurrentPriorityLevel=function(){return f},r.unstable_getFirstCallbackNode=function(){return t(u)},r.unstable_next=function(B){switch(f){case 1:case 2:case 3:var U=3;break;default:U=f}var Z=f;f=U;try{return B()}finally{f=Z}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(B,U){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var Z=f;f=B;try{return U()}finally{f=Z}},r.unstable_scheduleCallback=function(B,U,Z){var oe=r.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?oe+Z:oe):Z=oe,B){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=Z+re,B={id:c++,callback:U,priorityLevel:B,startTime:Z,expirationTime:re,sortIndex:-1},Z>oe?(B.sortIndex=Z,e(l,B),t(u)===null&&B===t(l)&&(E?(g(F),F=-1):E=!0,X(C,Z-oe))):(B.sortIndex=re,e(u,B),m||d||(m=!0,j(A))),B},r.unstable_shouldYield=V,r.unstable_wrapCallback=function(B){var U=f;return function(){var Z=f;f=U;try{return B.apply(this,arguments)}finally{f=Z}}}})(gv);(function(r){r.exports=gv})(pv);/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mv=be.exports,Ir=pv.exports;function ce(r){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+r,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+r+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var vv=new Set,Qa={};function ss(r,e){Qs(r,e),Qs(r+"Capture",e)}function Qs(r,e){for(Qa[r]=e,r=0;r<e.length;r++)vv.add(e[r])}var qn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Vh=Object.prototype.hasOwnProperty,wx=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,H0={},j0={};function _x(r){return Vh.call(j0,r)?!0:Vh.call(H0,r)?!1:wx.test(r)?j0[r]=!0:(H0[r]=!0,!1)}function Fx(r,e,t,n){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:t!==null?!t.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function bx(r,e,t,n){if(e===null||typeof e>"u"||Fx(r,e,t,n))return!0;if(n)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function sr(r,e,t,n,i,s,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=r,this.type=e,this.sanitizeURL=s,this.removeEmptyString=a}var Vt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){Vt[r]=new sr(r,0,!1,r,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var e=r[0];Vt[e]=new sr(e,1,!1,r[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(r){Vt[r]=new sr(r,2,!1,r.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){Vt[r]=new sr(r,2,!1,r,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){Vt[r]=new sr(r,3,!1,r.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(r){Vt[r]=new sr(r,3,!0,r,null,!1,!1)});["capture","download"].forEach(function(r){Vt[r]=new sr(r,4,!1,r,null,!1,!1)});["cols","rows","size","span"].forEach(function(r){Vt[r]=new sr(r,6,!1,r,null,!1,!1)});["rowSpan","start"].forEach(function(r){Vt[r]=new sr(r,5,!1,r.toLowerCase(),null,!1,!1)});var ud=/[\-:]([a-z])/g;function ld(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var e=r.replace(ud,ld);Vt[e]=new sr(e,1,!1,r,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var e=r.replace(ud,ld);Vt[e]=new sr(e,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(r){var e=r.replace(ud,ld);Vt[e]=new sr(e,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(r){Vt[r]=new sr(r,1,!1,r.toLowerCase(),null,!1,!1)});Vt.xlinkHref=new sr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(r){Vt[r]=new sr(r,1,!1,r.toLowerCase(),null,!0,!0)});function cd(r,e,t,n){var i=Vt.hasOwnProperty(e)?Vt[e]:null;(i!==null?i.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(bx(e,t,i,n)&&(t=null),n||i===null?_x(e)&&(t===null?r.removeAttribute(e):r.setAttribute(e,""+t)):i.mustUseProperty?r[i.propertyName]=t===null?i.type===3?!1:"":t:(e=i.attributeName,n=i.attributeNamespace,t===null?r.removeAttribute(e):(i=i.type,t=i===3||i===4&&t===!0?"":""+t,n?r.setAttributeNS(n,e,t):r.setAttribute(e,t))))}var ei=mv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Zo=Symbol.for("react.element"),Rs=Symbol.for("react.portal"),Ls=Symbol.for("react.fragment"),hd=Symbol.for("react.strict_mode"),Gh=Symbol.for("react.profiler"),Ev=Symbol.for("react.provider"),yv=Symbol.for("react.context"),fd=Symbol.for("react.forward_ref"),Wh=Symbol.for("react.suspense"),Hh=Symbol.for("react.suspense_list"),dd=Symbol.for("react.memo"),li=Symbol.for("react.lazy"),xv=Symbol.for("react.offscreen"),K0=Symbol.iterator;function ya(r){return r===null||typeof r!="object"?null:(r=K0&&r[K0]||r["@@iterator"],typeof r=="function"?r:null)}var ht=Object.assign,bc;function Na(r){if(bc===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);bc=e&&e[1]||""}return`
`+bc+r}var Rc=!1;function Lc(r,e){if(!r||Rc)return"";Rc=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(l){var n=l}Reflect.construct(r,[],e)}else{try{e.call()}catch(l){n=l}r.call(e.prototype)}else{try{throw Error()}catch(l){n=l}r()}}catch(l){if(l&&n&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),s=n.stack.split(`
`),a=i.length-1,o=s.length-1;1<=a&&0<=o&&i[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==s[o]){if(a!==1||o!==1)do if(a--,o--,0>o||i[a]!==s[o]){var u=`
`+i[a].replace(" at new "," at ");return r.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",r.displayName)),u}while(1<=a&&0<=o);break}}}finally{Rc=!1,Error.prepareStackTrace=t}return(r=r?r.displayName||r.name:"")?Na(r):""}function Rx(r){switch(r.tag){case 5:return Na(r.type);case 16:return Na("Lazy");case 13:return Na("Suspense");case 19:return Na("SuspenseList");case 0:case 2:case 15:return r=Lc(r.type,!1),r;case 11:return r=Lc(r.type.render,!1),r;case 1:return r=Lc(r.type,!0),r;default:return""}}function jh(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case Ls:return"Fragment";case Rs:return"Portal";case Gh:return"Profiler";case hd:return"StrictMode";case Wh:return"Suspense";case Hh:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case yv:return(r.displayName||"Context")+".Consumer";case Ev:return(r._context.displayName||"Context")+".Provider";case fd:var e=r.render;return r=r.displayName,r||(r=e.displayName||e.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case dd:return e=r.displayName||null,e!==null?e:jh(r.type)||"Memo";case li:e=r._payload,r=r._init;try{return jh(r(e))}catch{}}return null}function Lx(r){var e=r.type;switch(r.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=e.render,r=r.displayName||r.name||"",e.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return jh(e);case 8:return e===hd?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function _i(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Av(r){var e=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Ix(r){var e=Av(r)?"checked":"value",t=Object.getOwnPropertyDescriptor(r.constructor.prototype,e),n=""+r[e];if(!r.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var i=t.get,s=t.set;return Object.defineProperty(r,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){n=""+a,s.call(this,a)}}),Object.defineProperty(r,e,{enumerable:t.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){r._valueTracker=null,delete r[e]}}}}function Qo(r){r._valueTracker||(r._valueTracker=Ix(r))}function Cv(r){if(!r)return!1;var e=r._valueTracker;if(!e)return!0;var t=e.getValue(),n="";return r&&(n=Av(r)?r.checked?"true":"false":r.value),r=n,r!==t?(e.setValue(r),!0):!1}function Hu(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function Kh(r,e){var t=e.checked;return ht({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t!=null?t:r._wrapperState.initialChecked})}function q0(r,e){var t=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;t=_i(e.value!=null?e.value:t),r._wrapperState={initialChecked:n,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Tv(r,e){e=e.checked,e!=null&&cd(r,"checked",e,!1)}function qh(r,e){Tv(r,e);var t=_i(e.value),n=e.type;if(t!=null)n==="number"?(t===0&&r.value===""||r.value!=t)&&(r.value=""+t):r.value!==""+t&&(r.value=""+t);else if(n==="submit"||n==="reset"){r.removeAttribute("value");return}e.hasOwnProperty("value")?Yh(r,e.type,t):e.hasOwnProperty("defaultValue")&&Yh(r,e.type,_i(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(r.defaultChecked=!!e.defaultChecked)}function Y0(r,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+r._wrapperState.initialValue,t||e===r.value||(r.value=e),r.defaultValue=e}t=r.name,t!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,t!==""&&(r.name=t)}function Yh(r,e,t){(e!=="number"||Hu(r.ownerDocument)!==r)&&(t==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+t&&(r.defaultValue=""+t))}var Pa=Array.isArray;function Hs(r,e,t,n){if(r=r.options,e){e={};for(var i=0;i<t.length;i++)e["$"+t[i]]=!0;for(t=0;t<r.length;t++)i=e.hasOwnProperty("$"+r[t].value),r[t].selected!==i&&(r[t].selected=i),i&&n&&(r[t].defaultSelected=!0)}else{for(t=""+_i(t),e=null,i=0;i<r.length;i++){if(r[i].value===t){r[i].selected=!0,n&&(r[i].defaultSelected=!0);return}e!==null||r[i].disabled||(e=r[i])}e!==null&&(e.selected=!0)}}function Xh(r,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ce(91));return ht({},e,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function X0(r,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(ce(92));if(Pa(t)){if(1<t.length)throw Error(ce(93));t=t[0]}e=t}e==null&&(e=""),t=e}r._wrapperState={initialValue:_i(t)}}function Sv(r,e){var t=_i(e.value),n=_i(e.defaultValue);t!=null&&(t=""+t,t!==r.value&&(r.value=t),e.defaultValue==null&&r.defaultValue!==t&&(r.defaultValue=t)),n!=null&&(r.defaultValue=""+n)}function Z0(r){var e=r.textContent;e===r._wrapperState.initialValue&&e!==""&&e!==null&&(r.value=e)}function Dv(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Zh(r,e){return r==null||r==="http://www.w3.org/1999/xhtml"?Dv(e):r==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var Jo,wv=function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,n,i){MSApp.execUnsafeLocalFunction(function(){return r(e,t,n,i)})}:r}(function(r,e){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=e;else{for(Jo=Jo||document.createElement("div"),Jo.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Jo.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;e.firstChild;)r.appendChild(e.firstChild)}});function Ja(r,e){if(e){var t=r.firstChild;if(t&&t===r.lastChild&&t.nodeType===3){t.nodeValue=e;return}}r.textContent=e}var $a={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},kx=["Webkit","ms","Moz","O"];Object.keys($a).forEach(function(r){kx.forEach(function(e){e=e+r.charAt(0).toUpperCase()+r.substring(1),$a[e]=$a[r]})});function _v(r,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||$a.hasOwnProperty(r)&&$a[r]?(""+e).trim():e+"px"}function Fv(r,e){r=r.style;for(var t in e)if(e.hasOwnProperty(t)){var n=t.indexOf("--")===0,i=_v(t,e[t],n);t==="float"&&(t="cssFloat"),n?r.setProperty(t,i):r[t]=i}}var Bx=ht({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Qh(r,e){if(e){if(Bx[r]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ce(137,r));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ce(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ce(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ce(62))}}function Jh(r,e){if(r.indexOf("-")===-1)return typeof e.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ef=null;function pd(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var tf=null,js=null,Ks=null;function Q0(r){if(r=Fo(r)){if(typeof tf!="function")throw Error(ce(280));var e=r.stateNode;e&&(e=Il(e),tf(r.stateNode,r.type,e))}}function bv(r){js?Ks?Ks.push(r):Ks=[r]:js=r}function Rv(){if(js){var r=js,e=Ks;if(Ks=js=null,Q0(r),e)for(r=0;r<e.length;r++)Q0(e[r])}}function Lv(r,e){return r(e)}function Iv(){}var Ic=!1;function kv(r,e,t){if(Ic)return r(e,t);Ic=!0;try{return Lv(r,e,t)}finally{Ic=!1,(js!==null||Ks!==null)&&(Iv(),Rv())}}function eo(r,e){var t=r.stateNode;if(t===null)return null;var n=Il(t);if(n===null)return null;t=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(r=r.type,n=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!n;break e;default:r=!1}if(r)return null;if(t&&typeof t!="function")throw Error(ce(231,e,typeof t));return t}var rf=!1;if(qn)try{var xa={};Object.defineProperty(xa,"passive",{get:function(){rf=!0}}),window.addEventListener("test",xa,xa),window.removeEventListener("test",xa,xa)}catch{rf=!1}function Ox(r,e,t,n,i,s,a,o,u){var l=Array.prototype.slice.call(arguments,3);try{e.apply(t,l)}catch(c){this.onError(c)}}var za=!1,ju=null,Ku=!1,nf=null,Nx={onError:function(r){za=!0,ju=r}};function Px(r,e,t,n,i,s,a,o,u){za=!1,ju=null,Ox.apply(Nx,arguments)}function Mx(r,e,t,n,i,s,a,o,u){if(Px.apply(this,arguments),za){if(za){var l=ju;za=!1,ju=null}else throw Error(ce(198));Ku||(Ku=!0,nf=l)}}function as(r){var e=r,t=r;if(r.alternate)for(;e.return;)e=e.return;else{r=e;do e=r,(e.flags&4098)!==0&&(t=e.return),r=e.return;while(r)}return e.tag===3?t:null}function Bv(r){if(r.tag===13){var e=r.memoizedState;if(e===null&&(r=r.alternate,r!==null&&(e=r.memoizedState)),e!==null)return e.dehydrated}return null}function J0(r){if(as(r)!==r)throw Error(ce(188))}function Ux(r){var e=r.alternate;if(!e){if(e=as(r),e===null)throw Error(ce(188));return e!==r?null:r}for(var t=r,n=e;;){var i=t.return;if(i===null)break;var s=i.alternate;if(s===null){if(n=i.return,n!==null){t=n;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===t)return J0(i),r;if(s===n)return J0(i),e;s=s.sibling}throw Error(ce(188))}if(t.return!==n.return)t=i,n=s;else{for(var a=!1,o=i.child;o;){if(o===t){a=!0,t=i,n=s;break}if(o===n){a=!0,n=i,t=s;break}o=o.sibling}if(!a){for(o=s.child;o;){if(o===t){a=!0,t=s,n=i;break}if(o===n){a=!0,n=s,t=i;break}o=o.sibling}if(!a)throw Error(ce(189))}}if(t.alternate!==n)throw Error(ce(190))}if(t.tag!==3)throw Error(ce(188));return t.stateNode.current===t?r:e}function Ov(r){return r=Ux(r),r!==null?Nv(r):null}function Nv(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var e=Nv(r);if(e!==null)return e;r=r.sibling}return null}var Pv=Ir.unstable_scheduleCallback,ep=Ir.unstable_cancelCallback,$x=Ir.unstable_shouldYield,zx=Ir.unstable_requestPaint,Et=Ir.unstable_now,Vx=Ir.unstable_getCurrentPriorityLevel,gd=Ir.unstable_ImmediatePriority,Mv=Ir.unstable_UserBlockingPriority,qu=Ir.unstable_NormalPriority,Gx=Ir.unstable_LowPriority,Uv=Ir.unstable_IdlePriority,Fl=null,wn=null;function Wx(r){if(wn&&typeof wn.onCommitFiberRoot=="function")try{wn.onCommitFiberRoot(Fl,r,void 0,(r.current.flags&128)===128)}catch{}}var pn=Math.clz32?Math.clz32:Kx,Hx=Math.log,jx=Math.LN2;function Kx(r){return r>>>=0,r===0?32:31-(Hx(r)/jx|0)|0}var eu=64,tu=4194304;function Ma(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function Yu(r,e){var t=r.pendingLanes;if(t===0)return 0;var n=0,i=r.suspendedLanes,s=r.pingedLanes,a=t&268435455;if(a!==0){var o=a&~i;o!==0?n=Ma(o):(s&=a,s!==0&&(n=Ma(s)))}else a=t&~i,a!==0?n=Ma(a):s!==0&&(n=Ma(s));if(n===0)return 0;if(e!==0&&e!==n&&(e&i)===0&&(i=n&-n,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if((n&4)!==0&&(n|=t&16),e=r.entangledLanes,e!==0)for(r=r.entanglements,e&=n;0<e;)t=31-pn(e),i=1<<t,n|=r[t],e&=~i;return n}function qx(r,e){switch(r){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Yx(r,e){for(var t=r.suspendedLanes,n=r.pingedLanes,i=r.expirationTimes,s=r.pendingLanes;0<s;){var a=31-pn(s),o=1<<a,u=i[a];u===-1?((o&t)===0||(o&n)!==0)&&(i[a]=qx(o,e)):u<=e&&(r.expiredLanes|=o),s&=~o}}function sf(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function $v(){var r=eu;return eu<<=1,(eu&4194240)===0&&(eu=64),r}function kc(r){for(var e=[],t=0;31>t;t++)e.push(r);return e}function wo(r,e,t){r.pendingLanes|=e,e!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,e=31-pn(e),r[e]=t}function Xx(r,e){var t=r.pendingLanes&~e;r.pendingLanes=e,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=e,r.mutableReadLanes&=e,r.entangledLanes&=e,e=r.entanglements;var n=r.eventTimes;for(r=r.expirationTimes;0<t;){var i=31-pn(t),s=1<<i;e[i]=0,n[i]=-1,r[i]=-1,t&=~s}}function md(r,e){var t=r.entangledLanes|=e;for(r=r.entanglements;t;){var n=31-pn(t),i=1<<n;i&e|r[n]&e&&(r[n]|=e),t&=~i}}var qe=0;function zv(r){return r&=-r,1<r?4<r?(r&268435455)!==0?16:536870912:4:1}var Vv,vd,Gv,Wv,Hv,af=!1,ru=[],yi=null,xi=null,Ai=null,to=new Map,ro=new Map,di=[],Zx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function tp(r,e){switch(r){case"focusin":case"focusout":yi=null;break;case"dragenter":case"dragleave":xi=null;break;case"mouseover":case"mouseout":Ai=null;break;case"pointerover":case"pointerout":to.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ro.delete(e.pointerId)}}function Aa(r,e,t,n,i,s){return r===null||r.nativeEvent!==s?(r={blockedOn:e,domEventName:t,eventSystemFlags:n,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Fo(e),e!==null&&vd(e)),r):(r.eventSystemFlags|=n,e=r.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),r)}function Qx(r,e,t,n,i){switch(e){case"focusin":return yi=Aa(yi,r,e,t,n,i),!0;case"dragenter":return xi=Aa(xi,r,e,t,n,i),!0;case"mouseover":return Ai=Aa(Ai,r,e,t,n,i),!0;case"pointerover":var s=i.pointerId;return to.set(s,Aa(to.get(s)||null,r,e,t,n,i)),!0;case"gotpointercapture":return s=i.pointerId,ro.set(s,Aa(ro.get(s)||null,r,e,t,n,i)),!0}return!1}function jv(r){var e=Gi(r.target);if(e!==null){var t=as(e);if(t!==null){if(e=t.tag,e===13){if(e=Bv(t),e!==null){r.blockedOn=e,Hv(r.priority,function(){Gv(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){r.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Iu(r){if(r.blockedOn!==null)return!1;for(var e=r.targetContainers;0<e.length;){var t=of(r.domEventName,r.eventSystemFlags,e[0],r.nativeEvent);if(t===null){t=r.nativeEvent;var n=new t.constructor(t.type,t);ef=n,t.target.dispatchEvent(n),ef=null}else return e=Fo(t),e!==null&&vd(e),r.blockedOn=t,!1;e.shift()}return!0}function rp(r,e,t){Iu(r)&&t.delete(e)}function Jx(){af=!1,yi!==null&&Iu(yi)&&(yi=null),xi!==null&&Iu(xi)&&(xi=null),Ai!==null&&Iu(Ai)&&(Ai=null),to.forEach(rp),ro.forEach(rp)}function Ca(r,e){r.blockedOn===e&&(r.blockedOn=null,af||(af=!0,Ir.unstable_scheduleCallback(Ir.unstable_NormalPriority,Jx)))}function no(r){function e(i){return Ca(i,r)}if(0<ru.length){Ca(ru[0],r);for(var t=1;t<ru.length;t++){var n=ru[t];n.blockedOn===r&&(n.blockedOn=null)}}for(yi!==null&&Ca(yi,r),xi!==null&&Ca(xi,r),Ai!==null&&Ca(Ai,r),to.forEach(e),ro.forEach(e),t=0;t<di.length;t++)n=di[t],n.blockedOn===r&&(n.blockedOn=null);for(;0<di.length&&(t=di[0],t.blockedOn===null);)jv(t),t.blockedOn===null&&di.shift()}var qs=ei.ReactCurrentBatchConfig,Xu=!0;function eA(r,e,t,n){var i=qe,s=qs.transition;qs.transition=null;try{qe=1,Ed(r,e,t,n)}finally{qe=i,qs.transition=s}}function tA(r,e,t,n){var i=qe,s=qs.transition;qs.transition=null;try{qe=4,Ed(r,e,t,n)}finally{qe=i,qs.transition=s}}function Ed(r,e,t,n){if(Xu){var i=of(r,e,t,n);if(i===null)Gc(r,e,n,Zu,t),tp(r,n);else if(Qx(i,r,e,t,n))n.stopPropagation();else if(tp(r,n),e&4&&-1<Zx.indexOf(r)){for(;i!==null;){var s=Fo(i);if(s!==null&&Vv(s),s=of(r,e,t,n),s===null&&Gc(r,e,n,Zu,t),s===i)break;i=s}i!==null&&n.stopPropagation()}else Gc(r,e,n,null,t)}}var Zu=null;function of(r,e,t,n){if(Zu=null,r=pd(n),r=Gi(r),r!==null)if(e=as(r),e===null)r=null;else if(t=e.tag,t===13){if(r=Bv(e),r!==null)return r;r=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;r=null}else e!==r&&(r=null);return Zu=r,null}function Kv(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Vx()){case gd:return 1;case Mv:return 4;case qu:case Gx:return 16;case Uv:return 536870912;default:return 16}default:return 16}}var gi=null,yd=null,ku=null;function qv(){if(ku)return ku;var r,e=yd,t=e.length,n,i="value"in gi?gi.value:gi.textContent,s=i.length;for(r=0;r<t&&e[r]===i[r];r++);var a=t-r;for(n=1;n<=a&&e[t-n]===i[s-n];n++);return ku=i.slice(r,1<n?1-n:void 0)}function Bu(r){var e=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&e===13&&(r=13)):r=e,r===10&&(r=13),32<=r||r===13?r:0}function nu(){return!0}function np(){return!1}function Br(r){function e(t,n,i,s,a){this._reactName=t,this._targetInst=i,this.type=n,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var o in r)r.hasOwnProperty(o)&&(t=r[o],this[o]=t?t(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?nu:np,this.isPropagationStopped=np,this}return ht(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=nu)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=nu)},persist:function(){},isPersistent:nu}),e}var la={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xd=Br(la),_o=ht({},la,{view:0,detail:0}),rA=Br(_o),Bc,Oc,Ta,bl=ht({},_o,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ad,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Ta&&(Ta&&r.type==="mousemove"?(Bc=r.screenX-Ta.screenX,Oc=r.screenY-Ta.screenY):Oc=Bc=0,Ta=r),Bc)},movementY:function(r){return"movementY"in r?r.movementY:Oc}}),ip=Br(bl),nA=ht({},bl,{dataTransfer:0}),iA=Br(nA),sA=ht({},_o,{relatedTarget:0}),Nc=Br(sA),aA=ht({},la,{animationName:0,elapsedTime:0,pseudoElement:0}),oA=Br(aA),uA=ht({},la,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),lA=Br(uA),cA=ht({},la,{data:0}),sp=Br(cA),hA={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pA(r){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(r):(r=dA[r])?!!e[r]:!1}function Ad(){return pA}var gA=ht({},_o,{key:function(r){if(r.key){var e=hA[r.key]||r.key;if(e!=="Unidentified")return e}return r.type==="keypress"?(r=Bu(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?fA[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ad,charCode:function(r){return r.type==="keypress"?Bu(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Bu(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),mA=Br(gA),vA=ht({},bl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ap=Br(vA),EA=ht({},_o,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ad}),yA=Br(EA),xA=ht({},la,{propertyName:0,elapsedTime:0,pseudoElement:0}),AA=Br(xA),CA=ht({},bl,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),TA=Br(CA),SA=[9,13,27,32],Cd=qn&&"CompositionEvent"in window,Va=null;qn&&"documentMode"in document&&(Va=document.documentMode);var DA=qn&&"TextEvent"in window&&!Va,Yv=qn&&(!Cd||Va&&8<Va&&11>=Va),op=String.fromCharCode(32),up=!1;function Xv(r,e){switch(r){case"keyup":return SA.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Zv(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Is=!1;function wA(r,e){switch(r){case"compositionend":return Zv(e);case"keypress":return e.which!==32?null:(up=!0,op);case"textInput":return r=e.data,r===op&&up?null:r;default:return null}}function _A(r,e){if(Is)return r==="compositionend"||!Cd&&Xv(r,e)?(r=qv(),ku=yd=gi=null,Is=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Yv&&e.locale!=="ko"?null:e.data;default:return null}}var FA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function lp(r){var e=r&&r.nodeName&&r.nodeName.toLowerCase();return e==="input"?!!FA[r.type]:e==="textarea"}function Qv(r,e,t,n){bv(n),e=Qu(e,"onChange"),0<e.length&&(t=new xd("onChange","change",null,t,n),r.push({event:t,listeners:e}))}var Ga=null,io=null;function bA(r){lE(r,0)}function Rl(r){var e=Os(r);if(Cv(e))return r}function RA(r,e){if(r==="change")return e}var Jv=!1;if(qn){var Pc;if(qn){var Mc="oninput"in document;if(!Mc){var cp=document.createElement("div");cp.setAttribute("oninput","return;"),Mc=typeof cp.oninput=="function"}Pc=Mc}else Pc=!1;Jv=Pc&&(!document.documentMode||9<document.documentMode)}function hp(){Ga&&(Ga.detachEvent("onpropertychange",eE),io=Ga=null)}function eE(r){if(r.propertyName==="value"&&Rl(io)){var e=[];Qv(e,io,r,pd(r)),kv(bA,e)}}function LA(r,e,t){r==="focusin"?(hp(),Ga=e,io=t,Ga.attachEvent("onpropertychange",eE)):r==="focusout"&&hp()}function IA(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Rl(io)}function kA(r,e){if(r==="click")return Rl(e)}function BA(r,e){if(r==="input"||r==="change")return Rl(e)}function OA(r,e){return r===e&&(r!==0||1/r===1/e)||r!==r&&e!==e}var vn=typeof Object.is=="function"?Object.is:OA;function so(r,e){if(vn(r,e))return!0;if(typeof r!="object"||r===null||typeof e!="object"||e===null)return!1;var t=Object.keys(r),n=Object.keys(e);if(t.length!==n.length)return!1;for(n=0;n<t.length;n++){var i=t[n];if(!Vh.call(e,i)||!vn(r[i],e[i]))return!1}return!0}function fp(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function dp(r,e){var t=fp(r);r=0;for(var n;t;){if(t.nodeType===3){if(n=r+t.textContent.length,r<=e&&n>=e)return{node:t,offset:e-r};r=n}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=fp(t)}}function tE(r,e){return r&&e?r===e?!0:r&&r.nodeType===3?!1:e&&e.nodeType===3?tE(r,e.parentNode):"contains"in r?r.contains(e):r.compareDocumentPosition?!!(r.compareDocumentPosition(e)&16):!1:!1}function rE(){for(var r=window,e=Hu();e instanceof r.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)r=e.contentWindow;else break;e=Hu(r.document)}return e}function Td(r){var e=r&&r.nodeName&&r.nodeName.toLowerCase();return e&&(e==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||e==="textarea"||r.contentEditable==="true")}function NA(r){var e=rE(),t=r.focusedElem,n=r.selectionRange;if(e!==t&&t&&t.ownerDocument&&tE(t.ownerDocument.documentElement,t)){if(n!==null&&Td(t)){if(e=n.start,r=n.end,r===void 0&&(r=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(r,t.value.length);else if(r=(e=t.ownerDocument||document)&&e.defaultView||window,r.getSelection){r=r.getSelection();var i=t.textContent.length,s=Math.min(n.start,i);n=n.end===void 0?s:Math.min(n.end,i),!r.extend&&s>n&&(i=n,n=s,s=i),i=dp(t,s);var a=dp(t,n);i&&a&&(r.rangeCount!==1||r.anchorNode!==i.node||r.anchorOffset!==i.offset||r.focusNode!==a.node||r.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),r.removeAllRanges(),s>n?(r.addRange(e),r.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),r.addRange(e)))}}for(e=[],r=t;r=r.parentNode;)r.nodeType===1&&e.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)r=e[t],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var PA=qn&&"documentMode"in document&&11>=document.documentMode,ks=null,uf=null,Wa=null,lf=!1;function pp(r,e,t){var n=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;lf||ks==null||ks!==Hu(n)||(n=ks,"selectionStart"in n&&Td(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Wa&&so(Wa,n)||(Wa=n,n=Qu(uf,"onSelect"),0<n.length&&(e=new xd("onSelect","select",null,e,t),r.push({event:e,listeners:n}),e.target=ks)))}function iu(r,e){var t={};return t[r.toLowerCase()]=e.toLowerCase(),t["Webkit"+r]="webkit"+e,t["Moz"+r]="moz"+e,t}var Bs={animationend:iu("Animation","AnimationEnd"),animationiteration:iu("Animation","AnimationIteration"),animationstart:iu("Animation","AnimationStart"),transitionend:iu("Transition","TransitionEnd")},Uc={},nE={};qn&&(nE=document.createElement("div").style,"AnimationEvent"in window||(delete Bs.animationend.animation,delete Bs.animationiteration.animation,delete Bs.animationstart.animation),"TransitionEvent"in window||delete Bs.transitionend.transition);function Ll(r){if(Uc[r])return Uc[r];if(!Bs[r])return r;var e=Bs[r],t;for(t in e)if(e.hasOwnProperty(t)&&t in nE)return Uc[r]=e[t];return r}var iE=Ll("animationend"),sE=Ll("animationiteration"),aE=Ll("animationstart"),oE=Ll("transitionend"),uE=new Map,gp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ri(r,e){uE.set(r,e),ss(e,[r])}for(var $c=0;$c<gp.length;$c++){var zc=gp[$c],MA=zc.toLowerCase(),UA=zc[0].toUpperCase()+zc.slice(1);Ri(MA,"on"+UA)}Ri(iE,"onAnimationEnd");Ri(sE,"onAnimationIteration");Ri(aE,"onAnimationStart");Ri("dblclick","onDoubleClick");Ri("focusin","onFocus");Ri("focusout","onBlur");Ri(oE,"onTransitionEnd");Qs("onMouseEnter",["mouseout","mouseover"]);Qs("onMouseLeave",["mouseout","mouseover"]);Qs("onPointerEnter",["pointerout","pointerover"]);Qs("onPointerLeave",["pointerout","pointerover"]);ss("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ss("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ss("onBeforeInput",["compositionend","keypress","textInput","paste"]);ss("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ss("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ss("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ua="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$A=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ua));function mp(r,e,t){var n=r.type||"unknown-event";r.currentTarget=t,Mx(n,e,void 0,r),r.currentTarget=null}function lE(r,e){e=(e&4)!==0;for(var t=0;t<r.length;t++){var n=r[t],i=n.event;n=n.listeners;e:{var s=void 0;if(e)for(var a=n.length-1;0<=a;a--){var o=n[a],u=o.instance,l=o.currentTarget;if(o=o.listener,u!==s&&i.isPropagationStopped())break e;mp(i,o,l),s=u}else for(a=0;a<n.length;a++){if(o=n[a],u=o.instance,l=o.currentTarget,o=o.listener,u!==s&&i.isPropagationStopped())break e;mp(i,o,l),s=u}}}if(Ku)throw r=nf,Ku=!1,nf=null,r}function et(r,e){var t=e[pf];t===void 0&&(t=e[pf]=new Set);var n=r+"__bubble";t.has(n)||(cE(e,r,2,!1),t.add(n))}function Vc(r,e,t){var n=0;e&&(n|=4),cE(t,r,n,e)}var su="_reactListening"+Math.random().toString(36).slice(2);function ao(r){if(!r[su]){r[su]=!0,vv.forEach(function(t){t!=="selectionchange"&&($A.has(t)||Vc(t,!1,r),Vc(t,!0,r))});var e=r.nodeType===9?r:r.ownerDocument;e===null||e[su]||(e[su]=!0,Vc("selectionchange",!1,e))}}function cE(r,e,t,n){switch(Kv(e)){case 1:var i=eA;break;case 4:i=tA;break;default:i=Ed}t=i.bind(null,e,t,r),i=void 0,!rf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?r.addEventListener(e,t,{capture:!0,passive:i}):r.addEventListener(e,t,!0):i!==void 0?r.addEventListener(e,t,{passive:i}):r.addEventListener(e,t,!1)}function Gc(r,e,t,n,i){var s=n;if((e&1)===0&&(e&2)===0&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var o=n.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(a===4)for(a=n.return;a!==null;){var u=a.tag;if((u===3||u===4)&&(u=a.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;a=a.return}for(;o!==null;){if(a=Gi(o),a===null)return;if(u=a.tag,u===5||u===6){n=s=a;continue e}o=o.parentNode}}n=n.return}kv(function(){var l=s,c=pd(t),h=[];e:{var f=uE.get(r);if(f!==void 0){var d=xd,m=r;switch(r){case"keypress":if(Bu(t)===0)break e;case"keydown":case"keyup":d=mA;break;case"focusin":m="focus",d=Nc;break;case"focusout":m="blur",d=Nc;break;case"beforeblur":case"afterblur":d=Nc;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":d=ip;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":d=iA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":d=yA;break;case iE:case sE:case aE:d=oA;break;case oE:d=AA;break;case"scroll":d=rA;break;case"wheel":d=TA;break;case"copy":case"cut":case"paste":d=lA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":d=ap}var E=(e&4)!==0,p=!E&&r==="scroll",g=E?f!==null?f+"Capture":null:f;E=[];for(var v=l,y;v!==null;){y=v;var C=y.stateNode;if(y.tag===5&&C!==null&&(y=C,g!==null&&(C=eo(v,g),C!=null&&E.push(oo(v,C,y)))),p)break;v=v.return}0<E.length&&(f=new d(f,m,null,t,c),h.push({event:f,listeners:E}))}}if((e&7)===0){e:{if(f=r==="mouseover"||r==="pointerover",d=r==="mouseout"||r==="pointerout",f&&t!==ef&&(m=t.relatedTarget||t.fromElement)&&(Gi(m)||m[Yn]))break e;if((d||f)&&(f=c.window===c?c:(f=c.ownerDocument)?f.defaultView||f.parentWindow:window,d?(m=t.relatedTarget||t.toElement,d=l,m=m?Gi(m):null,m!==null&&(p=as(m),m!==p||m.tag!==5&&m.tag!==6)&&(m=null)):(d=null,m=l),d!==m)){if(E=ip,C="onMouseLeave",g="onMouseEnter",v="mouse",(r==="pointerout"||r==="pointerover")&&(E=ap,C="onPointerLeave",g="onPointerEnter",v="pointer"),p=d==null?f:Os(d),y=m==null?f:Os(m),f=new E(C,v+"leave",d,t,c),f.target=p,f.relatedTarget=y,C=null,Gi(c)===l&&(E=new E(g,v+"enter",m,t,c),E.target=y,E.relatedTarget=p,C=E),p=C,d&&m)t:{for(E=d,g=m,v=0,y=E;y;y=ms(y))v++;for(y=0,C=g;C;C=ms(C))y++;for(;0<v-y;)E=ms(E),v--;for(;0<y-v;)g=ms(g),y--;for(;v--;){if(E===g||g!==null&&E===g.alternate)break t;E=ms(E),g=ms(g)}E=null}else E=null;d!==null&&vp(h,f,d,E,!1),m!==null&&p!==null&&vp(h,p,m,E,!0)}}e:{if(f=l?Os(l):window,d=f.nodeName&&f.nodeName.toLowerCase(),d==="select"||d==="input"&&f.type==="file")var A=RA;else if(lp(f))if(Jv)A=BA;else{A=IA;var T=LA}else(d=f.nodeName)&&d.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(A=kA);if(A&&(A=A(r,l))){Qv(h,A,t,c);break e}T&&T(r,f,l),r==="focusout"&&(T=f._wrapperState)&&T.controlled&&f.type==="number"&&Yh(f,"number",f.value)}switch(T=l?Os(l):window,r){case"focusin":(lp(T)||T.contentEditable==="true")&&(ks=T,uf=l,Wa=null);break;case"focusout":Wa=uf=ks=null;break;case"mousedown":lf=!0;break;case"contextmenu":case"mouseup":case"dragend":lf=!1,pp(h,t,c);break;case"selectionchange":if(PA)break;case"keydown":case"keyup":pp(h,t,c)}var S;if(Cd)e:{switch(r){case"compositionstart":var F="onCompositionStart";break e;case"compositionend":F="onCompositionEnd";break e;case"compositionupdate":F="onCompositionUpdate";break e}F=void 0}else Is?Xv(r,t)&&(F="onCompositionEnd"):r==="keydown"&&t.keyCode===229&&(F="onCompositionStart");F&&(Yv&&t.locale!=="ko"&&(Is||F!=="onCompositionStart"?F==="onCompositionEnd"&&Is&&(S=qv()):(gi=c,yd="value"in gi?gi.value:gi.textContent,Is=!0)),T=Qu(l,F),0<T.length&&(F=new sp(F,r,null,t,c),h.push({event:F,listeners:T}),S?F.data=S:(S=Zv(t),S!==null&&(F.data=S)))),(S=DA?wA(r,t):_A(r,t))&&(l=Qu(l,"onBeforeInput"),0<l.length&&(c=new sp("onBeforeInput","beforeinput",null,t,c),h.push({event:c,listeners:l}),c.data=S))}lE(h,e)})}function oo(r,e,t){return{instance:r,listener:e,currentTarget:t}}function Qu(r,e){for(var t=e+"Capture",n=[];r!==null;){var i=r,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=eo(r,t),s!=null&&n.unshift(oo(r,s,i)),s=eo(r,e),s!=null&&n.push(oo(r,s,i))),r=r.return}return n}function ms(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function vp(r,e,t,n,i){for(var s=e._reactName,a=[];t!==null&&t!==n;){var o=t,u=o.alternate,l=o.stateNode;if(u!==null&&u===n)break;o.tag===5&&l!==null&&(o=l,i?(u=eo(t,s),u!=null&&a.unshift(oo(t,u,o))):i||(u=eo(t,s),u!=null&&a.push(oo(t,u,o)))),t=t.return}a.length!==0&&r.push({event:e,listeners:a})}var zA=/\r\n?/g,VA=/\u0000|\uFFFD/g;function Ep(r){return(typeof r=="string"?r:""+r).replace(zA,`
`).replace(VA,"")}function au(r,e,t){if(e=Ep(e),Ep(r)!==e&&t)throw Error(ce(425))}function Ju(){}var cf=null,hf=null;function ff(r,e){return r==="textarea"||r==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var df=typeof setTimeout=="function"?setTimeout:void 0,GA=typeof clearTimeout=="function"?clearTimeout:void 0,yp=typeof Promise=="function"?Promise:void 0,WA=typeof queueMicrotask=="function"?queueMicrotask:typeof yp<"u"?function(r){return yp.resolve(null).then(r).catch(HA)}:df;function HA(r){setTimeout(function(){throw r})}function Wc(r,e){var t=e,n=0;do{var i=t.nextSibling;if(r.removeChild(t),i&&i.nodeType===8)if(t=i.data,t==="/$"){if(n===0){r.removeChild(i),no(e);return}n--}else t!=="$"&&t!=="$?"&&t!=="$!"||n++;t=i}while(t);no(e)}function Ci(r){for(;r!=null;r=r.nextSibling){var e=r.nodeType;if(e===1||e===3)break;if(e===8){if(e=r.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return r}function xp(r){r=r.previousSibling;for(var e=0;r;){if(r.nodeType===8){var t=r.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return r;e--}else t==="/$"&&e++}r=r.previousSibling}return null}var ca=Math.random().toString(36).slice(2),Sn="__reactFiber$"+ca,uo="__reactProps$"+ca,Yn="__reactContainer$"+ca,pf="__reactEvents$"+ca,jA="__reactListeners$"+ca,KA="__reactHandles$"+ca;function Gi(r){var e=r[Sn];if(e)return e;for(var t=r.parentNode;t;){if(e=t[Yn]||t[Sn]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(r=xp(r);r!==null;){if(t=r[Sn])return t;r=xp(r)}return e}r=t,t=r.parentNode}return null}function Fo(r){return r=r[Sn]||r[Yn],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function Os(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(ce(33))}function Il(r){return r[uo]||null}var gf=[],Ns=-1;function Li(r){return{current:r}}function rt(r){0>Ns||(r.current=gf[Ns],gf[Ns]=null,Ns--)}function Je(r,e){Ns++,gf[Ns]=r.current,r.current=e}var Fi={},Yt=Li(Fi),yr=Li(!1),Xi=Fi;function Js(r,e){var t=r.type.contextTypes;if(!t)return Fi;var n=r.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in t)i[s]=e[s];return n&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=e,r.__reactInternalMemoizedMaskedChildContext=i),i}function xr(r){return r=r.childContextTypes,r!=null}function el(){rt(yr),rt(Yt)}function Ap(r,e,t){if(Yt.current!==Fi)throw Error(ce(168));Je(Yt,e),Je(yr,t)}function hE(r,e,t){var n=r.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return t;n=n.getChildContext();for(var i in n)if(!(i in e))throw Error(ce(108,Lx(r)||"Unknown",i));return ht({},t,n)}function tl(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||Fi,Xi=Yt.current,Je(Yt,r),Je(yr,yr.current),!0}function Cp(r,e,t){var n=r.stateNode;if(!n)throw Error(ce(169));t?(r=hE(r,e,Xi),n.__reactInternalMemoizedMergedChildContext=r,rt(yr),rt(Yt),Je(Yt,r)):rt(yr),Je(yr,t)}var Vn=null,kl=!1,Hc=!1;function fE(r){Vn===null?Vn=[r]:Vn.push(r)}function qA(r){kl=!0,fE(r)}function Ii(){if(!Hc&&Vn!==null){Hc=!0;var r=0,e=qe;try{var t=Vn;for(qe=1;r<t.length;r++){var n=t[r];do n=n(!0);while(n!==null)}Vn=null,kl=!1}catch(i){throw Vn!==null&&(Vn=Vn.slice(r+1)),Pv(gd,Ii),i}finally{qe=e,Hc=!1}}return null}var Ps=[],Ms=0,rl=null,nl=0,Gr=[],Wr=0,Zi=null,Gn=1,Wn="";function Mi(r,e){Ps[Ms++]=nl,Ps[Ms++]=rl,rl=r,nl=e}function dE(r,e,t){Gr[Wr++]=Gn,Gr[Wr++]=Wn,Gr[Wr++]=Zi,Zi=r;var n=Gn;r=Wn;var i=32-pn(n)-1;n&=~(1<<i),t+=1;var s=32-pn(e)+i;if(30<s){var a=i-i%5;s=(n&(1<<a)-1).toString(32),n>>=a,i-=a,Gn=1<<32-pn(e)+i|t<<i|n,Wn=s+r}else Gn=1<<s|t<<i|n,Wn=r}function Sd(r){r.return!==null&&(Mi(r,1),dE(r,1,0))}function Dd(r){for(;r===rl;)rl=Ps[--Ms],Ps[Ms]=null,nl=Ps[--Ms],Ps[Ms]=null;for(;r===Zi;)Zi=Gr[--Wr],Gr[Wr]=null,Wn=Gr[--Wr],Gr[Wr]=null,Gn=Gr[--Wr],Gr[Wr]=null}var Lr=null,Rr=null,at=!1,hn=null;function pE(r,e){var t=Hr(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=r,e=r.deletions,e===null?(r.deletions=[t],r.flags|=16):e.push(t)}function Tp(r,e){switch(r.tag){case 5:var t=r.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(r.stateNode=e,Lr=r,Rr=Ci(e.firstChild),!0):!1;case 6:return e=r.pendingProps===""||e.nodeType!==3?null:e,e!==null?(r.stateNode=e,Lr=r,Rr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Zi!==null?{id:Gn,overflow:Wn}:null,r.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=Hr(18,null,null,0),t.stateNode=e,t.return=r,r.child=t,Lr=r,Rr=null,!0):!1;default:return!1}}function mf(r){return(r.mode&1)!==0&&(r.flags&128)===0}function vf(r){if(at){var e=Rr;if(e){var t=e;if(!Tp(r,e)){if(mf(r))throw Error(ce(418));e=Ci(t.nextSibling);var n=Lr;e&&Tp(r,e)?pE(n,t):(r.flags=r.flags&-4097|2,at=!1,Lr=r)}}else{if(mf(r))throw Error(ce(418));r.flags=r.flags&-4097|2,at=!1,Lr=r}}}function Sp(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;Lr=r}function ou(r){if(r!==Lr)return!1;if(!at)return Sp(r),at=!0,!1;var e;if((e=r.tag!==3)&&!(e=r.tag!==5)&&(e=r.type,e=e!=="head"&&e!=="body"&&!ff(r.type,r.memoizedProps)),e&&(e=Rr)){if(mf(r))throw gE(),Error(ce(418));for(;e;)pE(r,e),e=Ci(e.nextSibling)}if(Sp(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(ce(317));e:{for(r=r.nextSibling,e=0;r;){if(r.nodeType===8){var t=r.data;if(t==="/$"){if(e===0){Rr=Ci(r.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}r=r.nextSibling}Rr=null}}else Rr=Lr?Ci(r.stateNode.nextSibling):null;return!0}function gE(){for(var r=Rr;r;)r=Ci(r.nextSibling)}function ea(){Rr=Lr=null,at=!1}function wd(r){hn===null?hn=[r]:hn.push(r)}var YA=ei.ReactCurrentBatchConfig;function ln(r,e){if(r&&r.defaultProps){e=ht({},e),r=r.defaultProps;for(var t in r)e[t]===void 0&&(e[t]=r[t]);return e}return e}var il=Li(null),sl=null,Us=null,_d=null;function Fd(){_d=Us=sl=null}function bd(r){var e=il.current;rt(il),r._currentValue=e}function Ef(r,e,t){for(;r!==null;){var n=r.alternate;if((r.childLanes&e)!==e?(r.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),r===t)break;r=r.return}}function Ys(r,e){sl=r,_d=Us=null,r=r.dependencies,r!==null&&r.firstContext!==null&&((r.lanes&e)!==0&&(Er=!0),r.firstContext=null)}function Kr(r){var e=r._currentValue;if(_d!==r)if(r={context:r,memoizedValue:e,next:null},Us===null){if(sl===null)throw Error(ce(308));Us=r,sl.dependencies={lanes:0,firstContext:r}}else Us=Us.next=r;return e}var Wi=null;function Rd(r){Wi===null?Wi=[r]:Wi.push(r)}function mE(r,e,t,n){var i=e.interleaved;return i===null?(t.next=t,Rd(e)):(t.next=i.next,i.next=t),e.interleaved=t,Xn(r,n)}function Xn(r,e){r.lanes|=e;var t=r.alternate;for(t!==null&&(t.lanes|=e),t=r,r=r.return;r!==null;)r.childLanes|=e,t=r.alternate,t!==null&&(t.childLanes|=e),t=r,r=r.return;return t.tag===3?t.stateNode:null}var ci=!1;function Ld(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function vE(r,e){r=r.updateQueue,e.updateQueue===r&&(e.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function jn(r,e){return{eventTime:r,lane:e,tag:0,payload:null,callback:null,next:null}}function Ti(r,e,t){var n=r.updateQueue;if(n===null)return null;if(n=n.shared,(ze&2)!==0){var i=n.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),n.pending=e,Xn(r,t)}return i=n.interleaved,i===null?(e.next=e,Rd(n)):(e.next=i.next,i.next=e),n.interleaved=e,Xn(r,t)}function Ou(r,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var n=e.lanes;n&=r.pendingLanes,t|=n,e.lanes=t,md(r,t)}}function Dp(r,e){var t=r.updateQueue,n=r.alternate;if(n!==null&&(n=n.updateQueue,t===n)){var i=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var a={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?i=s=a:s=s.next=a,t=t.next}while(t!==null);s===null?i=s=e:s=s.next=e}else i=s=e;t={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:n.shared,effects:n.effects},r.updateQueue=t;return}r=t.lastBaseUpdate,r===null?t.firstBaseUpdate=e:r.next=e,t.lastBaseUpdate=e}function al(r,e,t,n){var i=r.updateQueue;ci=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var u=o,l=u.next;u.next=null,a===null?s=l:a.next=l,a=u;var c=r.alternate;c!==null&&(c=c.updateQueue,o=c.lastBaseUpdate,o!==a&&(o===null?c.firstBaseUpdate=l:o.next=l,c.lastBaseUpdate=u))}if(s!==null){var h=i.baseState;a=0,c=l=u=null,o=s;do{var f=o.lane,d=o.eventTime;if((n&f)===f){c!==null&&(c=c.next={eventTime:d,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var m=r,E=o;switch(f=e,d=t,E.tag){case 1:if(m=E.payload,typeof m=="function"){h=m.call(d,h,f);break e}h=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=E.payload,f=typeof m=="function"?m.call(d,h,f):m,f==null)break e;h=ht({},h,f);break e;case 2:ci=!0}}o.callback!==null&&o.lane!==0&&(r.flags|=64,f=i.effects,f===null?i.effects=[o]:f.push(o))}else d={eventTime:d,lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},c===null?(l=c=d,u=h):c=c.next=d,a|=f;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;f=o,o=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(1);if(c===null&&(u=h),i.baseState=u,i.firstBaseUpdate=l,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do a|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Ji|=a,r.lanes=a,r.memoizedState=h}}function wp(r,e,t){if(r=e.effects,e.effects=null,r!==null)for(e=0;e<r.length;e++){var n=r[e],i=n.callback;if(i!==null){if(n.callback=null,n=t,typeof i!="function")throw Error(ce(191,i));i.call(n)}}}var EE=new mv.Component().refs;function yf(r,e,t,n){e=r.memoizedState,t=t(n,e),t=t==null?e:ht({},e,t),r.memoizedState=t,r.lanes===0&&(r.updateQueue.baseState=t)}var Bl={isMounted:function(r){return(r=r._reactInternals)?as(r)===r:!1},enqueueSetState:function(r,e,t){r=r._reactInternals;var n=nr(),i=Di(r),s=jn(n,i);s.payload=e,t!=null&&(s.callback=t),e=Ti(r,s,i),e!==null&&(gn(e,r,i,n),Ou(e,r,i))},enqueueReplaceState:function(r,e,t){r=r._reactInternals;var n=nr(),i=Di(r),s=jn(n,i);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=Ti(r,s,i),e!==null&&(gn(e,r,i,n),Ou(e,r,i))},enqueueForceUpdate:function(r,e){r=r._reactInternals;var t=nr(),n=Di(r),i=jn(t,n);i.tag=2,e!=null&&(i.callback=e),e=Ti(r,i,n),e!==null&&(gn(e,r,n,t),Ou(e,r,n))}};function _p(r,e,t,n,i,s,a){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(n,s,a):e.prototype&&e.prototype.isPureReactComponent?!so(t,n)||!so(i,s):!0}function yE(r,e,t){var n=!1,i=Fi,s=e.contextType;return typeof s=="object"&&s!==null?s=Kr(s):(i=xr(e)?Xi:Yt.current,n=e.contextTypes,s=(n=n!=null)?Js(r,i):Fi),e=new e(t,s),r.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Bl,r.stateNode=e,e._reactInternals=r,n&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=i,r.__reactInternalMemoizedMaskedChildContext=s),e}function Fp(r,e,t,n){r=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,n),e.state!==r&&Bl.enqueueReplaceState(e,e.state,null)}function xf(r,e,t,n){var i=r.stateNode;i.props=t,i.state=r.memoizedState,i.refs=EE,Ld(r);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Kr(s):(s=xr(e)?Xi:Yt.current,i.context=Js(r,s)),i.state=r.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(yf(r,e,s,t),i.state=r.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Bl.enqueueReplaceState(i,i.state,null),al(r,t,i,n),i.state=r.memoizedState),typeof i.componentDidMount=="function"&&(r.flags|=4194308)}function Sa(r,e,t){if(r=t.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(ce(309));var n=t.stateNode}if(!n)throw Error(ce(147,r));var i=n,s=""+r;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(a){var o=i.refs;o===EE&&(o=i.refs={}),a===null?delete o[s]:o[s]=a},e._stringRef=s,e)}if(typeof r!="string")throw Error(ce(284));if(!t._owner)throw Error(ce(290,r))}return r}function uu(r,e){throw r=Object.prototype.toString.call(e),Error(ce(31,r==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":r))}function bp(r){var e=r._init;return e(r._payload)}function xE(r){function e(g,v){if(r){var y=g.deletions;y===null?(g.deletions=[v],g.flags|=16):y.push(v)}}function t(g,v){if(!r)return null;for(;v!==null;)e(g,v),v=v.sibling;return null}function n(g,v){for(g=new Map;v!==null;)v.key!==null?g.set(v.key,v):g.set(v.index,v),v=v.sibling;return g}function i(g,v){return g=wi(g,v),g.index=0,g.sibling=null,g}function s(g,v,y){return g.index=y,r?(y=g.alternate,y!==null?(y=y.index,y<v?(g.flags|=2,v):y):(g.flags|=2,v)):(g.flags|=1048576,v)}function a(g){return r&&g.alternate===null&&(g.flags|=2),g}function o(g,v,y,C){return v===null||v.tag!==6?(v=Qc(y,g.mode,C),v.return=g,v):(v=i(v,y),v.return=g,v)}function u(g,v,y,C){var A=y.type;return A===Ls?c(g,v,y.props.children,C,y.key):v!==null&&(v.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===li&&bp(A)===v.type)?(C=i(v,y.props),C.ref=Sa(g,v,y),C.return=g,C):(C=zu(y.type,y.key,y.props,null,g.mode,C),C.ref=Sa(g,v,y),C.return=g,C)}function l(g,v,y,C){return v===null||v.tag!==4||v.stateNode.containerInfo!==y.containerInfo||v.stateNode.implementation!==y.implementation?(v=Jc(y,g.mode,C),v.return=g,v):(v=i(v,y.children||[]),v.return=g,v)}function c(g,v,y,C,A){return v===null||v.tag!==7?(v=Ki(y,g.mode,C,A),v.return=g,v):(v=i(v,y),v.return=g,v)}function h(g,v,y){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Qc(""+v,g.mode,y),v.return=g,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Zo:return y=zu(v.type,v.key,v.props,null,g.mode,y),y.ref=Sa(g,null,v),y.return=g,y;case Rs:return v=Jc(v,g.mode,y),v.return=g,v;case li:var C=v._init;return h(g,C(v._payload),y)}if(Pa(v)||ya(v))return v=Ki(v,g.mode,y,null),v.return=g,v;uu(g,v)}return null}function f(g,v,y,C){var A=v!==null?v.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return A!==null?null:o(g,v,""+y,C);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Zo:return y.key===A?u(g,v,y,C):null;case Rs:return y.key===A?l(g,v,y,C):null;case li:return A=y._init,f(g,v,A(y._payload),C)}if(Pa(y)||ya(y))return A!==null?null:c(g,v,y,C,null);uu(g,y)}return null}function d(g,v,y,C,A){if(typeof C=="string"&&C!==""||typeof C=="number")return g=g.get(y)||null,o(v,g,""+C,A);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Zo:return g=g.get(C.key===null?y:C.key)||null,u(v,g,C,A);case Rs:return g=g.get(C.key===null?y:C.key)||null,l(v,g,C,A);case li:var T=C._init;return d(g,v,y,T(C._payload),A)}if(Pa(C)||ya(C))return g=g.get(y)||null,c(v,g,C,A,null);uu(v,C)}return null}function m(g,v,y,C){for(var A=null,T=null,S=v,F=v=0,k=null;S!==null&&F<y.length;F++){S.index>F?(k=S,S=null):k=S.sibling;var R=f(g,S,y[F],C);if(R===null){S===null&&(S=k);break}r&&S&&R.alternate===null&&e(g,S),v=s(R,v,F),T===null?A=R:T.sibling=R,T=R,S=k}if(F===y.length)return t(g,S),at&&Mi(g,F),A;if(S===null){for(;F<y.length;F++)S=h(g,y[F],C),S!==null&&(v=s(S,v,F),T===null?A=S:T.sibling=S,T=S);return at&&Mi(g,F),A}for(S=n(g,S);F<y.length;F++)k=d(S,g,F,y[F],C),k!==null&&(r&&k.alternate!==null&&S.delete(k.key===null?F:k.key),v=s(k,v,F),T===null?A=k:T.sibling=k,T=k);return r&&S.forEach(function(V){return e(g,V)}),at&&Mi(g,F),A}function E(g,v,y,C){var A=ya(y);if(typeof A!="function")throw Error(ce(150));if(y=A.call(y),y==null)throw Error(ce(151));for(var T=A=null,S=v,F=v=0,k=null,R=y.next();S!==null&&!R.done;F++,R=y.next()){S.index>F?(k=S,S=null):k=S.sibling;var V=f(g,S,R.value,C);if(V===null){S===null&&(S=k);break}r&&S&&V.alternate===null&&e(g,S),v=s(V,v,F),T===null?A=V:T.sibling=V,T=V,S=k}if(R.done)return t(g,S),at&&Mi(g,F),A;if(S===null){for(;!R.done;F++,R=y.next())R=h(g,R.value,C),R!==null&&(v=s(R,v,F),T===null?A=R:T.sibling=R,T=R);return at&&Mi(g,F),A}for(S=n(g,S);!R.done;F++,R=y.next())R=d(S,g,F,R.value,C),R!==null&&(r&&R.alternate!==null&&S.delete(R.key===null?F:R.key),v=s(R,v,F),T===null?A=R:T.sibling=R,T=R);return r&&S.forEach(function($){return e(g,$)}),at&&Mi(g,F),A}function p(g,v,y,C){if(typeof y=="object"&&y!==null&&y.type===Ls&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case Zo:e:{for(var A=y.key,T=v;T!==null;){if(T.key===A){if(A=y.type,A===Ls){if(T.tag===7){t(g,T.sibling),v=i(T,y.props.children),v.return=g,g=v;break e}}else if(T.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===li&&bp(A)===T.type){t(g,T.sibling),v=i(T,y.props),v.ref=Sa(g,T,y),v.return=g,g=v;break e}t(g,T);break}else e(g,T);T=T.sibling}y.type===Ls?(v=Ki(y.props.children,g.mode,C,y.key),v.return=g,g=v):(C=zu(y.type,y.key,y.props,null,g.mode,C),C.ref=Sa(g,v,y),C.return=g,g=C)}return a(g);case Rs:e:{for(T=y.key;v!==null;){if(v.key===T)if(v.tag===4&&v.stateNode.containerInfo===y.containerInfo&&v.stateNode.implementation===y.implementation){t(g,v.sibling),v=i(v,y.children||[]),v.return=g,g=v;break e}else{t(g,v);break}else e(g,v);v=v.sibling}v=Jc(y,g.mode,C),v.return=g,g=v}return a(g);case li:return T=y._init,p(g,v,T(y._payload),C)}if(Pa(y))return m(g,v,y,C);if(ya(y))return E(g,v,y,C);uu(g,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,v!==null&&v.tag===6?(t(g,v.sibling),v=i(v,y),v.return=g,g=v):(t(g,v),v=Qc(y,g.mode,C),v.return=g,g=v),a(g)):t(g,v)}return p}var ta=xE(!0),AE=xE(!1),bo={},_n=Li(bo),lo=Li(bo),co=Li(bo);function Hi(r){if(r===bo)throw Error(ce(174));return r}function Id(r,e){switch(Je(co,e),Je(lo,r),Je(_n,bo),r=e.nodeType,r){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Zh(null,"");break;default:r=r===8?e.parentNode:e,e=r.namespaceURI||null,r=r.tagName,e=Zh(e,r)}rt(_n),Je(_n,e)}function ra(){rt(_n),rt(lo),rt(co)}function CE(r){Hi(co.current);var e=Hi(_n.current),t=Zh(e,r.type);e!==t&&(Je(lo,r),Je(_n,t))}function kd(r){lo.current===r&&(rt(_n),rt(lo))}var ut=Li(0);function ol(r){for(var e=r;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if((e.flags&128)!==0)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===r)break;for(;e.sibling===null;){if(e.return===null||e.return===r)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var jc=[];function Bd(){for(var r=0;r<jc.length;r++)jc[r]._workInProgressVersionPrimary=null;jc.length=0}var Nu=ei.ReactCurrentDispatcher,Kc=ei.ReactCurrentBatchConfig,Qi=0,ct=null,Dt=null,Lt=null,ul=!1,Ha=!1,ho=0,XA=0;function Ht(){throw Error(ce(321))}function Od(r,e){if(e===null)return!1;for(var t=0;t<e.length&&t<r.length;t++)if(!vn(r[t],e[t]))return!1;return!0}function Nd(r,e,t,n,i,s){if(Qi=s,ct=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Nu.current=r===null||r.memoizedState===null?eC:tC,r=t(n,i),Ha){s=0;do{if(Ha=!1,ho=0,25<=s)throw Error(ce(301));s+=1,Lt=Dt=null,e.updateQueue=null,Nu.current=rC,r=t(n,i)}while(Ha)}if(Nu.current=ll,e=Dt!==null&&Dt.next!==null,Qi=0,Lt=Dt=ct=null,ul=!1,e)throw Error(ce(300));return r}function Pd(){var r=ho!==0;return ho=0,r}function An(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Lt===null?ct.memoizedState=Lt=r:Lt=Lt.next=r,Lt}function qr(){if(Dt===null){var r=ct.alternate;r=r!==null?r.memoizedState:null}else r=Dt.next;var e=Lt===null?ct.memoizedState:Lt.next;if(e!==null)Lt=e,Dt=r;else{if(r===null)throw Error(ce(310));Dt=r,r={memoizedState:Dt.memoizedState,baseState:Dt.baseState,baseQueue:Dt.baseQueue,queue:Dt.queue,next:null},Lt===null?ct.memoizedState=Lt=r:Lt=Lt.next=r}return Lt}function fo(r,e){return typeof e=="function"?e(r):e}function qc(r){var e=qr(),t=e.queue;if(t===null)throw Error(ce(311));t.lastRenderedReducer=r;var n=Dt,i=n.baseQueue,s=t.pending;if(s!==null){if(i!==null){var a=i.next;i.next=s.next,s.next=a}n.baseQueue=i=s,t.pending=null}if(i!==null){s=i.next,n=n.baseState;var o=a=null,u=null,l=s;do{var c=l.lane;if((Qi&c)===c)u!==null&&(u=u.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),n=l.hasEagerState?l.eagerState:r(n,l.action);else{var h={lane:c,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};u===null?(o=u=h,a=n):u=u.next=h,ct.lanes|=c,Ji|=c}l=l.next}while(l!==null&&l!==s);u===null?a=n:u.next=o,vn(n,e.memoizedState)||(Er=!0),e.memoizedState=n,e.baseState=a,e.baseQueue=u,t.lastRenderedState=n}if(r=t.interleaved,r!==null){i=r;do s=i.lane,ct.lanes|=s,Ji|=s,i=i.next;while(i!==r)}else i===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function Yc(r){var e=qr(),t=e.queue;if(t===null)throw Error(ce(311));t.lastRenderedReducer=r;var n=t.dispatch,i=t.pending,s=e.memoizedState;if(i!==null){t.pending=null;var a=i=i.next;do s=r(s,a.action),a=a.next;while(a!==i);vn(s,e.memoizedState)||(Er=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,n]}function TE(){}function SE(r,e){var t=ct,n=qr(),i=e(),s=!vn(n.memoizedState,i);if(s&&(n.memoizedState=i,Er=!0),n=n.queue,Md(_E.bind(null,t,n,r),[r]),n.getSnapshot!==e||s||Lt!==null&&Lt.memoizedState.tag&1){if(t.flags|=2048,po(9,wE.bind(null,t,n,i,e),void 0,null),It===null)throw Error(ce(349));(Qi&30)!==0||DE(t,e,i)}return i}function DE(r,e,t){r.flags|=16384,r={getSnapshot:e,value:t},e=ct.updateQueue,e===null?(e={lastEffect:null,stores:null},ct.updateQueue=e,e.stores=[r]):(t=e.stores,t===null?e.stores=[r]:t.push(r))}function wE(r,e,t,n){e.value=t,e.getSnapshot=n,FE(e)&&bE(r)}function _E(r,e,t){return t(function(){FE(e)&&bE(r)})}function FE(r){var e=r.getSnapshot;r=r.value;try{var t=e();return!vn(r,t)}catch{return!0}}function bE(r){var e=Xn(r,1);e!==null&&gn(e,r,1,-1)}function Rp(r){var e=An();return typeof r=="function"&&(r=r()),e.memoizedState=e.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:fo,lastRenderedState:r},e.queue=r,r=r.dispatch=JA.bind(null,ct,r),[e.memoizedState,r]}function po(r,e,t,n){return r={tag:r,create:e,destroy:t,deps:n,next:null},e=ct.updateQueue,e===null?(e={lastEffect:null,stores:null},ct.updateQueue=e,e.lastEffect=r.next=r):(t=e.lastEffect,t===null?e.lastEffect=r.next=r:(n=t.next,t.next=r,r.next=n,e.lastEffect=r)),r}function RE(){return qr().memoizedState}function Pu(r,e,t,n){var i=An();ct.flags|=r,i.memoizedState=po(1|e,t,void 0,n===void 0?null:n)}function Ol(r,e,t,n){var i=qr();n=n===void 0?null:n;var s=void 0;if(Dt!==null){var a=Dt.memoizedState;if(s=a.destroy,n!==null&&Od(n,a.deps)){i.memoizedState=po(e,t,s,n);return}}ct.flags|=r,i.memoizedState=po(1|e,t,s,n)}function Lp(r,e){return Pu(8390656,8,r,e)}function Md(r,e){return Ol(2048,8,r,e)}function LE(r,e){return Ol(4,2,r,e)}function IE(r,e){return Ol(4,4,r,e)}function kE(r,e){if(typeof e=="function")return r=r(),e(r),function(){e(null)};if(e!=null)return r=r(),e.current=r,function(){e.current=null}}function BE(r,e,t){return t=t!=null?t.concat([r]):null,Ol(4,4,kE.bind(null,e,r),t)}function Ud(){}function OE(r,e){var t=qr();e=e===void 0?null:e;var n=t.memoizedState;return n!==null&&e!==null&&Od(e,n[1])?n[0]:(t.memoizedState=[r,e],r)}function NE(r,e){var t=qr();e=e===void 0?null:e;var n=t.memoizedState;return n!==null&&e!==null&&Od(e,n[1])?n[0]:(r=r(),t.memoizedState=[r,e],r)}function PE(r,e,t){return(Qi&21)===0?(r.baseState&&(r.baseState=!1,Er=!0),r.memoizedState=t):(vn(t,e)||(t=$v(),ct.lanes|=t,Ji|=t,r.baseState=!0),e)}function ZA(r,e){var t=qe;qe=t!==0&&4>t?t:4,r(!0);var n=Kc.transition;Kc.transition={};try{r(!1),e()}finally{qe=t,Kc.transition=n}}function ME(){return qr().memoizedState}function QA(r,e,t){var n=Di(r);if(t={lane:n,action:t,hasEagerState:!1,eagerState:null,next:null},UE(r))$E(e,t);else if(t=mE(r,e,t,n),t!==null){var i=nr();gn(t,r,n,i),zE(t,e,n)}}function JA(r,e,t){var n=Di(r),i={lane:n,action:t,hasEagerState:!1,eagerState:null,next:null};if(UE(r))$E(e,i);else{var s=r.alternate;if(r.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,o=s(a,t);if(i.hasEagerState=!0,i.eagerState=o,vn(o,a)){var u=e.interleaved;u===null?(i.next=i,Rd(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}t=mE(r,e,i,n),t!==null&&(i=nr(),gn(t,r,n,i),zE(t,e,n))}}function UE(r){var e=r.alternate;return r===ct||e!==null&&e===ct}function $E(r,e){Ha=ul=!0;var t=r.pending;t===null?e.next=e:(e.next=t.next,t.next=e),r.pending=e}function zE(r,e,t){if((t&4194240)!==0){var n=e.lanes;n&=r.pendingLanes,t|=n,e.lanes=t,md(r,t)}}var ll={readContext:Kr,useCallback:Ht,useContext:Ht,useEffect:Ht,useImperativeHandle:Ht,useInsertionEffect:Ht,useLayoutEffect:Ht,useMemo:Ht,useReducer:Ht,useRef:Ht,useState:Ht,useDebugValue:Ht,useDeferredValue:Ht,useTransition:Ht,useMutableSource:Ht,useSyncExternalStore:Ht,useId:Ht,unstable_isNewReconciler:!1},eC={readContext:Kr,useCallback:function(r,e){return An().memoizedState=[r,e===void 0?null:e],r},useContext:Kr,useEffect:Lp,useImperativeHandle:function(r,e,t){return t=t!=null?t.concat([r]):null,Pu(4194308,4,kE.bind(null,e,r),t)},useLayoutEffect:function(r,e){return Pu(4194308,4,r,e)},useInsertionEffect:function(r,e){return Pu(4,2,r,e)},useMemo:function(r,e){var t=An();return e=e===void 0?null:e,r=r(),t.memoizedState=[r,e],r},useReducer:function(r,e,t){var n=An();return e=t!==void 0?t(e):e,n.memoizedState=n.baseState=e,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:e},n.queue=r,r=r.dispatch=QA.bind(null,ct,r),[n.memoizedState,r]},useRef:function(r){var e=An();return r={current:r},e.memoizedState=r},useState:Rp,useDebugValue:Ud,useDeferredValue:function(r){return An().memoizedState=r},useTransition:function(){var r=Rp(!1),e=r[0];return r=ZA.bind(null,r[1]),An().memoizedState=r,[e,r]},useMutableSource:function(){},useSyncExternalStore:function(r,e,t){var n=ct,i=An();if(at){if(t===void 0)throw Error(ce(407));t=t()}else{if(t=e(),It===null)throw Error(ce(349));(Qi&30)!==0||DE(n,e,t)}i.memoizedState=t;var s={value:t,getSnapshot:e};return i.queue=s,Lp(_E.bind(null,n,s,r),[r]),n.flags|=2048,po(9,wE.bind(null,n,s,t,e),void 0,null),t},useId:function(){var r=An(),e=It.identifierPrefix;if(at){var t=Wn,n=Gn;t=(n&~(1<<32-pn(n)-1)).toString(32)+t,e=":"+e+"R"+t,t=ho++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=XA++,e=":"+e+"r"+t.toString(32)+":";return r.memoizedState=e},unstable_isNewReconciler:!1},tC={readContext:Kr,useCallback:OE,useContext:Kr,useEffect:Md,useImperativeHandle:BE,useInsertionEffect:LE,useLayoutEffect:IE,useMemo:NE,useReducer:qc,useRef:RE,useState:function(){return qc(fo)},useDebugValue:Ud,useDeferredValue:function(r){var e=qr();return PE(e,Dt.memoizedState,r)},useTransition:function(){var r=qc(fo)[0],e=qr().memoizedState;return[r,e]},useMutableSource:TE,useSyncExternalStore:SE,useId:ME,unstable_isNewReconciler:!1},rC={readContext:Kr,useCallback:OE,useContext:Kr,useEffect:Md,useImperativeHandle:BE,useInsertionEffect:LE,useLayoutEffect:IE,useMemo:NE,useReducer:Yc,useRef:RE,useState:function(){return Yc(fo)},useDebugValue:Ud,useDeferredValue:function(r){var e=qr();return Dt===null?e.memoizedState=r:PE(e,Dt.memoizedState,r)},useTransition:function(){var r=Yc(fo)[0],e=qr().memoizedState;return[r,e]},useMutableSource:TE,useSyncExternalStore:SE,useId:ME,unstable_isNewReconciler:!1};function na(r,e){try{var t="",n=e;do t+=Rx(n),n=n.return;while(n);var i=t}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:r,source:e,stack:i,digest:null}}function Xc(r,e,t){return{value:r,source:null,stack:t!=null?t:null,digest:e!=null?e:null}}function Af(r,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var nC=typeof WeakMap=="function"?WeakMap:Map;function VE(r,e,t){t=jn(-1,t),t.tag=3,t.payload={element:null};var n=e.value;return t.callback=function(){hl||(hl=!0,Lf=n),Af(r,e)},t}function GE(r,e,t){t=jn(-1,t),t.tag=3;var n=r.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;t.payload=function(){return n(i)},t.callback=function(){Af(r,e)}}var s=r.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){Af(r,e),typeof n!="function"&&(Si===null?Si=new Set([this]):Si.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),t}function Ip(r,e,t){var n=r.pingCache;if(n===null){n=r.pingCache=new nC;var i=new Set;n.set(e,i)}else i=n.get(e),i===void 0&&(i=new Set,n.set(e,i));i.has(t)||(i.add(t),r=vC.bind(null,r,e,t),e.then(r,r))}function kp(r){do{var e;if((e=r.tag===13)&&(e=r.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return r;r=r.return}while(r!==null);return null}function Bp(r,e,t,n,i){return(r.mode&1)===0?(r===e?r.flags|=65536:(r.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=jn(-1,1),e.tag=2,Ti(t,e,1))),t.lanes|=1),r):(r.flags|=65536,r.lanes=i,r)}var iC=ei.ReactCurrentOwner,Er=!1;function rr(r,e,t,n){e.child=r===null?AE(e,null,t,n):ta(e,r.child,t,n)}function Op(r,e,t,n,i){t=t.render;var s=e.ref;return Ys(e,i),n=Nd(r,e,t,n,s,i),t=Pd(),r!==null&&!Er?(e.updateQueue=r.updateQueue,e.flags&=-2053,r.lanes&=~i,Zn(r,e,i)):(at&&t&&Sd(e),e.flags|=1,rr(r,e,n,i),e.child)}function Np(r,e,t,n,i){if(r===null){var s=t.type;return typeof s=="function"&&!Kd(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,WE(r,e,s,n,i)):(r=zu(t.type,null,n,e,e.mode,i),r.ref=e.ref,r.return=e,e.child=r)}if(s=r.child,(r.lanes&i)===0){var a=s.memoizedProps;if(t=t.compare,t=t!==null?t:so,t(a,n)&&r.ref===e.ref)return Zn(r,e,i)}return e.flags|=1,r=wi(s,n),r.ref=e.ref,r.return=e,e.child=r}function WE(r,e,t,n,i){if(r!==null){var s=r.memoizedProps;if(so(s,n)&&r.ref===e.ref)if(Er=!1,e.pendingProps=n=s,(r.lanes&i)!==0)(r.flags&131072)!==0&&(Er=!0);else return e.lanes=r.lanes,Zn(r,e,i)}return Cf(r,e,t,n,i)}function HE(r,e,t){var n=e.pendingProps,i=n.children,s=r!==null?r.memoizedState:null;if(n.mode==="hidden")if((e.mode&1)===0)e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Je(zs,br),br|=t;else{if((t&1073741824)===0)return r=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:r,cachePool:null,transitions:null},e.updateQueue=null,Je(zs,br),br|=r,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=s!==null?s.baseLanes:t,Je(zs,br),br|=n}else s!==null?(n=s.baseLanes|t,e.memoizedState=null):n=t,Je(zs,br),br|=n;return rr(r,e,i,t),e.child}function jE(r,e){var t=e.ref;(r===null&&t!==null||r!==null&&r.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function Cf(r,e,t,n,i){var s=xr(t)?Xi:Yt.current;return s=Js(e,s),Ys(e,i),t=Nd(r,e,t,n,s,i),n=Pd(),r!==null&&!Er?(e.updateQueue=r.updateQueue,e.flags&=-2053,r.lanes&=~i,Zn(r,e,i)):(at&&n&&Sd(e),e.flags|=1,rr(r,e,t,i),e.child)}function Pp(r,e,t,n,i){if(xr(t)){var s=!0;tl(e)}else s=!1;if(Ys(e,i),e.stateNode===null)Mu(r,e),yE(e,t,n),xf(e,t,n,i),n=!0;else if(r===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var u=a.context,l=t.contextType;typeof l=="object"&&l!==null?l=Kr(l):(l=xr(t)?Xi:Yt.current,l=Js(e,l));var c=t.getDerivedStateFromProps,h=typeof c=="function"||typeof a.getSnapshotBeforeUpdate=="function";h||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==n||u!==l)&&Fp(e,a,n,l),ci=!1;var f=e.memoizedState;a.state=f,al(e,n,a,i),u=e.memoizedState,o!==n||f!==u||yr.current||ci?(typeof c=="function"&&(yf(e,t,c,n),u=e.memoizedState),(o=ci||_p(e,t,o,n,f,u,l))?(h||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=u),a.props=n,a.state=u,a.context=l,n=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{a=e.stateNode,vE(r,e),o=e.memoizedProps,l=e.type===e.elementType?o:ln(e.type,o),a.props=l,h=e.pendingProps,f=a.context,u=t.contextType,typeof u=="object"&&u!==null?u=Kr(u):(u=xr(t)?Xi:Yt.current,u=Js(e,u));var d=t.getDerivedStateFromProps;(c=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==h||f!==u)&&Fp(e,a,n,u),ci=!1,f=e.memoizedState,a.state=f,al(e,n,a,i);var m=e.memoizedState;o!==h||f!==m||yr.current||ci?(typeof d=="function"&&(yf(e,t,d,n),m=e.memoizedState),(l=ci||_p(e,t,l,n,f,m,u)||!1)?(c||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,m,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,m,u)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===r.memoizedProps&&f===r.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===r.memoizedProps&&f===r.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=m),a.props=n,a.state=m,a.context=u,n=l):(typeof a.componentDidUpdate!="function"||o===r.memoizedProps&&f===r.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===r.memoizedProps&&f===r.memoizedState||(e.flags|=1024),n=!1)}return Tf(r,e,t,n,s,i)}function Tf(r,e,t,n,i,s){jE(r,e);var a=(e.flags&128)!==0;if(!n&&!a)return i&&Cp(e,t,!1),Zn(r,e,s);n=e.stateNode,iC.current=e;var o=a&&typeof t.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,r!==null&&a?(e.child=ta(e,r.child,null,s),e.child=ta(e,null,o,s)):rr(r,e,o,s),e.memoizedState=n.state,i&&Cp(e,t,!0),e.child}function KE(r){var e=r.stateNode;e.pendingContext?Ap(r,e.pendingContext,e.pendingContext!==e.context):e.context&&Ap(r,e.context,!1),Id(r,e.containerInfo)}function Mp(r,e,t,n,i){return ea(),wd(i),e.flags|=256,rr(r,e,t,n),e.child}var Sf={dehydrated:null,treeContext:null,retryLane:0};function Df(r){return{baseLanes:r,cachePool:null,transitions:null}}function qE(r,e,t){var n=e.pendingProps,i=ut.current,s=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=r!==null&&r.memoizedState===null?!1:(i&2)!==0),o?(s=!0,e.flags&=-129):(r===null||r.memoizedState!==null)&&(i|=1),Je(ut,i&1),r===null)return vf(e),r=e.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?((e.mode&1)===0?e.lanes=1:r.data==="$!"?e.lanes=8:e.lanes=1073741824,null):(a=n.children,r=n.fallback,s?(n=e.mode,s=e.child,a={mode:"hidden",children:a},(n&1)===0&&s!==null?(s.childLanes=0,s.pendingProps=a):s=Ml(a,n,0,null),r=Ki(r,n,t,null),s.return=e,r.return=e,s.sibling=r,e.child=s,e.child.memoizedState=Df(t),e.memoizedState=Sf,r):$d(e,a));if(i=r.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return sC(r,e,a,n,o,i,t);if(s){s=n.fallback,a=e.mode,i=r.child,o=i.sibling;var u={mode:"hidden",children:n.children};return(a&1)===0&&e.child!==i?(n=e.child,n.childLanes=0,n.pendingProps=u,e.deletions=null):(n=wi(i,u),n.subtreeFlags=i.subtreeFlags&14680064),o!==null?s=wi(o,s):(s=Ki(s,a,t,null),s.flags|=2),s.return=e,n.return=e,n.sibling=s,e.child=n,n=s,s=e.child,a=r.child.memoizedState,a=a===null?Df(t):{baseLanes:a.baseLanes|t,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=r.childLanes&~t,e.memoizedState=Sf,n}return s=r.child,r=s.sibling,n=wi(s,{mode:"visible",children:n.children}),(e.mode&1)===0&&(n.lanes=t),n.return=e,n.sibling=null,r!==null&&(t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)),e.child=n,e.memoizedState=null,n}function $d(r,e){return e=Ml({mode:"visible",children:e},r.mode,0,null),e.return=r,r.child=e}function lu(r,e,t,n){return n!==null&&wd(n),ta(e,r.child,null,t),r=$d(e,e.pendingProps.children),r.flags|=2,e.memoizedState=null,r}function sC(r,e,t,n,i,s,a){if(t)return e.flags&256?(e.flags&=-257,n=Xc(Error(ce(422))),lu(r,e,a,n)):e.memoizedState!==null?(e.child=r.child,e.flags|=128,null):(s=n.fallback,i=e.mode,n=Ml({mode:"visible",children:n.children},i,0,null),s=Ki(s,i,a,null),s.flags|=2,n.return=e,s.return=e,n.sibling=s,e.child=n,(e.mode&1)!==0&&ta(e,r.child,null,a),e.child.memoizedState=Df(a),e.memoizedState=Sf,s);if((e.mode&1)===0)return lu(r,e,a,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var o=n.dgst;return n=o,s=Error(ce(419)),n=Xc(s,n,void 0),lu(r,e,a,n)}if(o=(a&r.childLanes)!==0,Er||o){if(n=It,n!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=(i&(n.suspendedLanes|a))!==0?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Xn(r,i),gn(n,r,i,-1))}return jd(),n=Xc(Error(ce(421))),lu(r,e,a,n)}return i.data==="$?"?(e.flags|=128,e.child=r.child,e=EC.bind(null,r),i._reactRetry=e,null):(r=s.treeContext,Rr=Ci(i.nextSibling),Lr=e,at=!0,hn=null,r!==null&&(Gr[Wr++]=Gn,Gr[Wr++]=Wn,Gr[Wr++]=Zi,Gn=r.id,Wn=r.overflow,Zi=e),e=$d(e,n.children),e.flags|=4096,e)}function Up(r,e,t){r.lanes|=e;var n=r.alternate;n!==null&&(n.lanes|=e),Ef(r.return,e,t)}function Zc(r,e,t,n,i){var s=r.memoizedState;s===null?r.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:t,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=t,s.tailMode=i)}function YE(r,e,t){var n=e.pendingProps,i=n.revealOrder,s=n.tail;if(rr(r,e,n.children,t),n=ut.current,(n&2)!==0)n=n&1|2,e.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=e.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&Up(r,t,e);else if(r.tag===19)Up(r,t,e);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break e;for(;r.sibling===null;){if(r.return===null||r.return===e)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}n&=1}if(Je(ut,n),(e.mode&1)===0)e.memoizedState=null;else switch(i){case"forwards":for(t=e.child,i=null;t!==null;)r=t.alternate,r!==null&&ol(r)===null&&(i=t),t=t.sibling;t=i,t===null?(i=e.child,e.child=null):(i=t.sibling,t.sibling=null),Zc(e,!1,i,t,s);break;case"backwards":for(t=null,i=e.child,e.child=null;i!==null;){if(r=i.alternate,r!==null&&ol(r)===null){e.child=i;break}r=i.sibling,i.sibling=t,t=i,i=r}Zc(e,!0,t,null,s);break;case"together":Zc(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Mu(r,e){(e.mode&1)===0&&r!==null&&(r.alternate=null,e.alternate=null,e.flags|=2)}function Zn(r,e,t){if(r!==null&&(e.dependencies=r.dependencies),Ji|=e.lanes,(t&e.childLanes)===0)return null;if(r!==null&&e.child!==r.child)throw Error(ce(153));if(e.child!==null){for(r=e.child,t=wi(r,r.pendingProps),e.child=t,t.return=e;r.sibling!==null;)r=r.sibling,t=t.sibling=wi(r,r.pendingProps),t.return=e;t.sibling=null}return e.child}function aC(r,e,t){switch(e.tag){case 3:KE(e),ea();break;case 5:CE(e);break;case 1:xr(e.type)&&tl(e);break;case 4:Id(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,i=e.memoizedProps.value;Je(il,n._currentValue),n._currentValue=i;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(Je(ut,ut.current&1),e.flags|=128,null):(t&e.child.childLanes)!==0?qE(r,e,t):(Je(ut,ut.current&1),r=Zn(r,e,t),r!==null?r.sibling:null);Je(ut,ut.current&1);break;case 19:if(n=(t&e.childLanes)!==0,(r.flags&128)!==0){if(n)return YE(r,e,t);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Je(ut,ut.current),n)break;return null;case 22:case 23:return e.lanes=0,HE(r,e,t)}return Zn(r,e,t)}var XE,wf,ZE,QE;XE=function(r,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)r.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};wf=function(){};ZE=function(r,e,t,n){var i=r.memoizedProps;if(i!==n){r=e.stateNode,Hi(_n.current);var s=null;switch(t){case"input":i=Kh(r,i),n=Kh(r,n),s=[];break;case"select":i=ht({},i,{value:void 0}),n=ht({},n,{value:void 0}),s=[];break;case"textarea":i=Xh(r,i),n=Xh(r,n),s=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(r.onclick=Ju)}Qh(t,n);var a;t=null;for(l in i)if(!n.hasOwnProperty(l)&&i.hasOwnProperty(l)&&i[l]!=null)if(l==="style"){var o=i[l];for(a in o)o.hasOwnProperty(a)&&(t||(t={}),t[a]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Qa.hasOwnProperty(l)?s||(s=[]):(s=s||[]).push(l,null));for(l in n){var u=n[l];if(o=i!=null?i[l]:void 0,n.hasOwnProperty(l)&&u!==o&&(u!=null||o!=null))if(l==="style")if(o){for(a in o)!o.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(t||(t={}),t[a]="");for(a in u)u.hasOwnProperty(a)&&o[a]!==u[a]&&(t||(t={}),t[a]=u[a])}else t||(s||(s=[]),s.push(l,t)),t=u;else l==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,o=o?o.__html:void 0,u!=null&&o!==u&&(s=s||[]).push(l,u)):l==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(l,""+u):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(Qa.hasOwnProperty(l)?(u!=null&&l==="onScroll"&&et("scroll",r),s||o===u||(s=[])):(s=s||[]).push(l,u))}t&&(s=s||[]).push("style",t);var l=s;(e.updateQueue=l)&&(e.flags|=4)}};QE=function(r,e,t,n){t!==n&&(e.flags|=4)};function Da(r,e){if(!at)switch(r.tailMode){case"hidden":e=r.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?r.tail=null:t.sibling=null;break;case"collapsed":t=r.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e||r.tail===null?r.tail=null:r.tail.sibling=null:n.sibling=null}}function jt(r){var e=r.alternate!==null&&r.alternate.child===r.child,t=0,n=0;if(e)for(var i=r.child;i!==null;)t|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=r,i=i.sibling;else for(i=r.child;i!==null;)t|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=r,i=i.sibling;return r.subtreeFlags|=n,r.childLanes=t,e}function oC(r,e,t){var n=e.pendingProps;switch(Dd(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return jt(e),null;case 1:return xr(e.type)&&el(),jt(e),null;case 3:return n=e.stateNode,ra(),rt(yr),rt(Yt),Bd(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(r===null||r.child===null)&&(ou(e)?e.flags|=4:r===null||r.memoizedState.isDehydrated&&(e.flags&256)===0||(e.flags|=1024,hn!==null&&(Bf(hn),hn=null))),wf(r,e),jt(e),null;case 5:kd(e);var i=Hi(co.current);if(t=e.type,r!==null&&e.stateNode!=null)ZE(r,e,t,n,i),r.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(ce(166));return jt(e),null}if(r=Hi(_n.current),ou(e)){n=e.stateNode,t=e.type;var s=e.memoizedProps;switch(n[Sn]=e,n[uo]=s,r=(e.mode&1)!==0,t){case"dialog":et("cancel",n),et("close",n);break;case"iframe":case"object":case"embed":et("load",n);break;case"video":case"audio":for(i=0;i<Ua.length;i++)et(Ua[i],n);break;case"source":et("error",n);break;case"img":case"image":case"link":et("error",n),et("load",n);break;case"details":et("toggle",n);break;case"input":q0(n,s),et("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},et("invalid",n);break;case"textarea":X0(n,s),et("invalid",n)}Qh(t,s),i=null;for(var a in s)if(s.hasOwnProperty(a)){var o=s[a];a==="children"?typeof o=="string"?n.textContent!==o&&(s.suppressHydrationWarning!==!0&&au(n.textContent,o,r),i=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(s.suppressHydrationWarning!==!0&&au(n.textContent,o,r),i=["children",""+o]):Qa.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&et("scroll",n)}switch(t){case"input":Qo(n),Y0(n,s,!0);break;case"textarea":Qo(n),Z0(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=Ju)}n=i,e.updateQueue=n,n!==null&&(e.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=Dv(t)),r==="http://www.w3.org/1999/xhtml"?t==="script"?(r=a.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof n.is=="string"?r=a.createElement(t,{is:n.is}):(r=a.createElement(t),t==="select"&&(a=r,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):r=a.createElementNS(r,t),r[Sn]=e,r[uo]=n,XE(r,e,!1,!1),e.stateNode=r;e:{switch(a=Jh(t,n),t){case"dialog":et("cancel",r),et("close",r),i=n;break;case"iframe":case"object":case"embed":et("load",r),i=n;break;case"video":case"audio":for(i=0;i<Ua.length;i++)et(Ua[i],r);i=n;break;case"source":et("error",r),i=n;break;case"img":case"image":case"link":et("error",r),et("load",r),i=n;break;case"details":et("toggle",r),i=n;break;case"input":q0(r,n),i=Kh(r,n),et("invalid",r);break;case"option":i=n;break;case"select":r._wrapperState={wasMultiple:!!n.multiple},i=ht({},n,{value:void 0}),et("invalid",r);break;case"textarea":X0(r,n),i=Xh(r,n),et("invalid",r);break;default:i=n}Qh(t,i),o=i;for(s in o)if(o.hasOwnProperty(s)){var u=o[s];s==="style"?Fv(r,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&wv(r,u)):s==="children"?typeof u=="string"?(t!=="textarea"||u!=="")&&Ja(r,u):typeof u=="number"&&Ja(r,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Qa.hasOwnProperty(s)?u!=null&&s==="onScroll"&&et("scroll",r):u!=null&&cd(r,s,u,a))}switch(t){case"input":Qo(r),Y0(r,n,!1);break;case"textarea":Qo(r),Z0(r);break;case"option":n.value!=null&&r.setAttribute("value",""+_i(n.value));break;case"select":r.multiple=!!n.multiple,s=n.value,s!=null?Hs(r,!!n.multiple,s,!1):n.defaultValue!=null&&Hs(r,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(r.onclick=Ju)}switch(t){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return jt(e),null;case 6:if(r&&e.stateNode!=null)QE(r,e,r.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(ce(166));if(t=Hi(co.current),Hi(_n.current),ou(e)){if(n=e.stateNode,t=e.memoizedProps,n[Sn]=e,(s=n.nodeValue!==t)&&(r=Lr,r!==null))switch(r.tag){case 3:au(n.nodeValue,t,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&au(n.nodeValue,t,(r.mode&1)!==0)}s&&(e.flags|=4)}else n=(t.nodeType===9?t:t.ownerDocument).createTextNode(n),n[Sn]=e,e.stateNode=n}return jt(e),null;case 13:if(rt(ut),n=e.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(at&&Rr!==null&&(e.mode&1)!==0&&(e.flags&128)===0)gE(),ea(),e.flags|=98560,s=!1;else if(s=ou(e),n!==null&&n.dehydrated!==null){if(r===null){if(!s)throw Error(ce(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(ce(317));s[Sn]=e}else ea(),(e.flags&128)===0&&(e.memoizedState=null),e.flags|=4;jt(e),s=!1}else hn!==null&&(Bf(hn),hn=null),s=!0;if(!s)return e.flags&65536?e:null}return(e.flags&128)!==0?(e.lanes=t,e):(n=n!==null,n!==(r!==null&&r.memoizedState!==null)&&n&&(e.child.flags|=8192,(e.mode&1)!==0&&(r===null||(ut.current&1)!==0?wt===0&&(wt=3):jd())),e.updateQueue!==null&&(e.flags|=4),jt(e),null);case 4:return ra(),wf(r,e),r===null&&ao(e.stateNode.containerInfo),jt(e),null;case 10:return bd(e.type._context),jt(e),null;case 17:return xr(e.type)&&el(),jt(e),null;case 19:if(rt(ut),s=e.memoizedState,s===null)return jt(e),null;if(n=(e.flags&128)!==0,a=s.rendering,a===null)if(n)Da(s,!1);else{if(wt!==0||r!==null&&(r.flags&128)!==0)for(r=e.child;r!==null;){if(a=ol(r),a!==null){for(e.flags|=128,Da(s,!1),n=a.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=t,t=e.child;t!==null;)s=t,r=n,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=r,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,r=a.dependencies,s.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),t=t.sibling;return Je(ut,ut.current&1|2),e.child}r=r.sibling}s.tail!==null&&Et()>ia&&(e.flags|=128,n=!0,Da(s,!1),e.lanes=4194304)}else{if(!n)if(r=ol(a),r!==null){if(e.flags|=128,n=!0,t=r.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),Da(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!at)return jt(e),null}else 2*Et()-s.renderingStartTime>ia&&t!==1073741824&&(e.flags|=128,n=!0,Da(s,!1),e.lanes=4194304);s.isBackwards?(a.sibling=e.child,e.child=a):(t=s.last,t!==null?t.sibling=a:e.child=a,s.last=a)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Et(),e.sibling=null,t=ut.current,Je(ut,n?t&1|2:t&1),e):(jt(e),null);case 22:case 23:return Hd(),n=e.memoizedState!==null,r!==null&&r.memoizedState!==null!==n&&(e.flags|=8192),n&&(e.mode&1)!==0?(br&1073741824)!==0&&(jt(e),e.subtreeFlags&6&&(e.flags|=8192)):jt(e),null;case 24:return null;case 25:return null}throw Error(ce(156,e.tag))}function uC(r,e){switch(Dd(e),e.tag){case 1:return xr(e.type)&&el(),r=e.flags,r&65536?(e.flags=r&-65537|128,e):null;case 3:return ra(),rt(yr),rt(Yt),Bd(),r=e.flags,(r&65536)!==0&&(r&128)===0?(e.flags=r&-65537|128,e):null;case 5:return kd(e),null;case 13:if(rt(ut),r=e.memoizedState,r!==null&&r.dehydrated!==null){if(e.alternate===null)throw Error(ce(340));ea()}return r=e.flags,r&65536?(e.flags=r&-65537|128,e):null;case 19:return rt(ut),null;case 4:return ra(),null;case 10:return bd(e.type._context),null;case 22:case 23:return Hd(),null;case 24:return null;default:return null}}var cu=!1,qt=!1,lC=typeof WeakSet=="function"?WeakSet:Set,Ae=null;function $s(r,e){var t=r.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(n){dt(r,e,n)}else t.current=null}function _f(r,e,t){try{t()}catch(n){dt(r,e,n)}}var $p=!1;function cC(r,e){if(cf=Xu,r=rE(),Td(r)){if("selectionStart"in r)var t={start:r.selectionStart,end:r.selectionEnd};else e:{t=(t=r.ownerDocument)&&t.defaultView||window;var n=t.getSelection&&t.getSelection();if(n&&n.rangeCount!==0){t=n.anchorNode;var i=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var a=0,o=-1,u=-1,l=0,c=0,h=r,f=null;t:for(;;){for(var d;h!==t||i!==0&&h.nodeType!==3||(o=a+i),h!==s||n!==0&&h.nodeType!==3||(u=a+n),h.nodeType===3&&(a+=h.nodeValue.length),(d=h.firstChild)!==null;)f=h,h=d;for(;;){if(h===r)break t;if(f===t&&++l===i&&(o=a),f===s&&++c===n&&(u=a),(d=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=d}t=o===-1||u===-1?null:{start:o,end:u}}else t=null}t=t||{start:0,end:0}}else t=null;for(hf={focusedElem:r,selectionRange:t},Xu=!1,Ae=e;Ae!==null;)if(e=Ae,r=e.child,(e.subtreeFlags&1028)!==0&&r!==null)r.return=e,Ae=r;else for(;Ae!==null;){e=Ae;try{var m=e.alternate;if((e.flags&1024)!==0)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var E=m.memoizedProps,p=m.memoizedState,g=e.stateNode,v=g.getSnapshotBeforeUpdate(e.elementType===e.type?E:ln(e.type,E),p);g.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var y=e.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ce(163))}}catch(C){dt(e,e.return,C)}if(r=e.sibling,r!==null){r.return=e.return,Ae=r;break}Ae=e.return}return m=$p,$p=!1,m}function ja(r,e,t){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&r)===r){var s=i.destroy;i.destroy=void 0,s!==void 0&&_f(e,t,s)}i=i.next}while(i!==n)}}function Nl(r,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&r)===r){var n=t.create;t.destroy=n()}t=t.next}while(t!==e)}}function Ff(r){var e=r.ref;if(e!==null){var t=r.stateNode;switch(r.tag){case 5:r=t;break;default:r=t}typeof e=="function"?e(r):e.current=r}}function JE(r){var e=r.alternate;e!==null&&(r.alternate=null,JE(e)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(e=r.stateNode,e!==null&&(delete e[Sn],delete e[uo],delete e[pf],delete e[jA],delete e[KA])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function ey(r){return r.tag===5||r.tag===3||r.tag===4}function zp(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||ey(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function bf(r,e,t){var n=r.tag;if(n===5||n===6)r=r.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(r,e):t.insertBefore(r,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(r,t)):(e=t,e.appendChild(r)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=Ju));else if(n!==4&&(r=r.child,r!==null))for(bf(r,e,t),r=r.sibling;r!==null;)bf(r,e,t),r=r.sibling}function Rf(r,e,t){var n=r.tag;if(n===5||n===6)r=r.stateNode,e?t.insertBefore(r,e):t.appendChild(r);else if(n!==4&&(r=r.child,r!==null))for(Rf(r,e,t),r=r.sibling;r!==null;)Rf(r,e,t),r=r.sibling}var Pt=null,cn=!1;function ni(r,e,t){for(t=t.child;t!==null;)ty(r,e,t),t=t.sibling}function ty(r,e,t){if(wn&&typeof wn.onCommitFiberUnmount=="function")try{wn.onCommitFiberUnmount(Fl,t)}catch{}switch(t.tag){case 5:qt||$s(t,e);case 6:var n=Pt,i=cn;Pt=null,ni(r,e,t),Pt=n,cn=i,Pt!==null&&(cn?(r=Pt,t=t.stateNode,r.nodeType===8?r.parentNode.removeChild(t):r.removeChild(t)):Pt.removeChild(t.stateNode));break;case 18:Pt!==null&&(cn?(r=Pt,t=t.stateNode,r.nodeType===8?Wc(r.parentNode,t):r.nodeType===1&&Wc(r,t),no(r)):Wc(Pt,t.stateNode));break;case 4:n=Pt,i=cn,Pt=t.stateNode.containerInfo,cn=!0,ni(r,e,t),Pt=n,cn=i;break;case 0:case 11:case 14:case 15:if(!qt&&(n=t.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var s=i,a=s.destroy;s=s.tag,a!==void 0&&((s&2)!==0||(s&4)!==0)&&_f(t,e,a),i=i.next}while(i!==n)}ni(r,e,t);break;case 1:if(!qt&&($s(t,e),n=t.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=t.memoizedProps,n.state=t.memoizedState,n.componentWillUnmount()}catch(o){dt(t,e,o)}ni(r,e,t);break;case 21:ni(r,e,t);break;case 22:t.mode&1?(qt=(n=qt)||t.memoizedState!==null,ni(r,e,t),qt=n):ni(r,e,t);break;default:ni(r,e,t)}}function Vp(r){var e=r.updateQueue;if(e!==null){r.updateQueue=null;var t=r.stateNode;t===null&&(t=r.stateNode=new lC),e.forEach(function(n){var i=yC.bind(null,r,n);t.has(n)||(t.add(n),n.then(i,i))})}}function rn(r,e){var t=e.deletions;if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];try{var s=r,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:Pt=o.stateNode,cn=!1;break e;case 3:Pt=o.stateNode.containerInfo,cn=!0;break e;case 4:Pt=o.stateNode.containerInfo,cn=!0;break e}o=o.return}if(Pt===null)throw Error(ce(160));ty(s,a,i),Pt=null,cn=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(l){dt(i,e,l)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)ry(e,r),e=e.sibling}function ry(r,e){var t=r.alternate,n=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(rn(e,r),yn(r),n&4){try{ja(3,r,r.return),Nl(3,r)}catch(E){dt(r,r.return,E)}try{ja(5,r,r.return)}catch(E){dt(r,r.return,E)}}break;case 1:rn(e,r),yn(r),n&512&&t!==null&&$s(t,t.return);break;case 5:if(rn(e,r),yn(r),n&512&&t!==null&&$s(t,t.return),r.flags&32){var i=r.stateNode;try{Ja(i,"")}catch(E){dt(r,r.return,E)}}if(n&4&&(i=r.stateNode,i!=null)){var s=r.memoizedProps,a=t!==null?t.memoizedProps:s,o=r.type,u=r.updateQueue;if(r.updateQueue=null,u!==null)try{o==="input"&&s.type==="radio"&&s.name!=null&&Tv(i,s),Jh(o,a);var l=Jh(o,s);for(a=0;a<u.length;a+=2){var c=u[a],h=u[a+1];c==="style"?Fv(i,h):c==="dangerouslySetInnerHTML"?wv(i,h):c==="children"?Ja(i,h):cd(i,c,h,l)}switch(o){case"input":qh(i,s);break;case"textarea":Sv(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var d=s.value;d!=null?Hs(i,!!s.multiple,d,!1):f!==!!s.multiple&&(s.defaultValue!=null?Hs(i,!!s.multiple,s.defaultValue,!0):Hs(i,!!s.multiple,s.multiple?[]:"",!1))}i[uo]=s}catch(E){dt(r,r.return,E)}}break;case 6:if(rn(e,r),yn(r),n&4){if(r.stateNode===null)throw Error(ce(162));i=r.stateNode,s=r.memoizedProps;try{i.nodeValue=s}catch(E){dt(r,r.return,E)}}break;case 3:if(rn(e,r),yn(r),n&4&&t!==null&&t.memoizedState.isDehydrated)try{no(e.containerInfo)}catch(E){dt(r,r.return,E)}break;case 4:rn(e,r),yn(r);break;case 13:rn(e,r),yn(r),i=r.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Gd=Et())),n&4&&Vp(r);break;case 22:if(c=t!==null&&t.memoizedState!==null,r.mode&1?(qt=(l=qt)||c,rn(e,r),qt=l):rn(e,r),yn(r),n&8192){if(l=r.memoizedState!==null,(r.stateNode.isHidden=l)&&!c&&(r.mode&1)!==0)for(Ae=r,c=r.child;c!==null;){for(h=Ae=c;Ae!==null;){switch(f=Ae,d=f.child,f.tag){case 0:case 11:case 14:case 15:ja(4,f,f.return);break;case 1:$s(f,f.return);var m=f.stateNode;if(typeof m.componentWillUnmount=="function"){n=f,t=f.return;try{e=n,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(E){dt(n,t,E)}}break;case 5:$s(f,f.return);break;case 22:if(f.memoizedState!==null){Wp(h);continue}}d!==null?(d.return=f,Ae=d):Wp(h)}c=c.sibling}e:for(c=null,h=r;;){if(h.tag===5){if(c===null){c=h;try{i=h.stateNode,l?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(o=h.stateNode,u=h.memoizedProps.style,a=u!=null&&u.hasOwnProperty("display")?u.display:null,o.style.display=_v("display",a))}catch(E){dt(r,r.return,E)}}}else if(h.tag===6){if(c===null)try{h.stateNode.nodeValue=l?"":h.memoizedProps}catch(E){dt(r,r.return,E)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===r)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===r)break e;for(;h.sibling===null;){if(h.return===null||h.return===r)break e;c===h&&(c=null),h=h.return}c===h&&(c=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:rn(e,r),yn(r),n&4&&Vp(r);break;case 21:break;default:rn(e,r),yn(r)}}function yn(r){var e=r.flags;if(e&2){try{e:{for(var t=r.return;t!==null;){if(ey(t)){var n=t;break e}t=t.return}throw Error(ce(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(Ja(i,""),n.flags&=-33);var s=zp(r);Rf(r,s,i);break;case 3:case 4:var a=n.stateNode.containerInfo,o=zp(r);bf(r,o,a);break;default:throw Error(ce(161))}}catch(u){dt(r,r.return,u)}r.flags&=-3}e&4096&&(r.flags&=-4097)}function hC(r,e,t){Ae=r,ny(r)}function ny(r,e,t){for(var n=(r.mode&1)!==0;Ae!==null;){var i=Ae,s=i.child;if(i.tag===22&&n){var a=i.memoizedState!==null||cu;if(!a){var o=i.alternate,u=o!==null&&o.memoizedState!==null||qt;o=cu;var l=qt;if(cu=a,(qt=u)&&!l)for(Ae=i;Ae!==null;)a=Ae,u=a.child,a.tag===22&&a.memoizedState!==null?Hp(i):u!==null?(u.return=a,Ae=u):Hp(i);for(;s!==null;)Ae=s,ny(s),s=s.sibling;Ae=i,cu=o,qt=l}Gp(r)}else(i.subtreeFlags&8772)!==0&&s!==null?(s.return=i,Ae=s):Gp(r)}}function Gp(r){for(;Ae!==null;){var e=Ae;if((e.flags&8772)!==0){var t=e.alternate;try{if((e.flags&8772)!==0)switch(e.tag){case 0:case 11:case 15:qt||Nl(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!qt)if(t===null)n.componentDidMount();else{var i=e.elementType===e.type?t.memoizedProps:ln(e.type,t.memoizedProps);n.componentDidUpdate(i,t.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&wp(e,s,n);break;case 3:var a=e.updateQueue;if(a!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}wp(e,a,t)}break;case 5:var o=e.stateNode;if(t===null&&e.flags&4){t=o;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&t.focus();break;case"img":u.src&&(t.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var l=e.alternate;if(l!==null){var c=l.memoizedState;if(c!==null){var h=c.dehydrated;h!==null&&no(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ce(163))}qt||e.flags&512&&Ff(e)}catch(f){dt(e,e.return,f)}}if(e===r){Ae=null;break}if(t=e.sibling,t!==null){t.return=e.return,Ae=t;break}Ae=e.return}}function Wp(r){for(;Ae!==null;){var e=Ae;if(e===r){Ae=null;break}var t=e.sibling;if(t!==null){t.return=e.return,Ae=t;break}Ae=e.return}}function Hp(r){for(;Ae!==null;){var e=Ae;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{Nl(4,e)}catch(u){dt(e,t,u)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var i=e.return;try{n.componentDidMount()}catch(u){dt(e,i,u)}}var s=e.return;try{Ff(e)}catch(u){dt(e,s,u)}break;case 5:var a=e.return;try{Ff(e)}catch(u){dt(e,a,u)}}}catch(u){dt(e,e.return,u)}if(e===r){Ae=null;break}var o=e.sibling;if(o!==null){o.return=e.return,Ae=o;break}Ae=e.return}}var fC=Math.ceil,cl=ei.ReactCurrentDispatcher,zd=ei.ReactCurrentOwner,jr=ei.ReactCurrentBatchConfig,ze=0,It=null,At=null,zt=0,br=0,zs=Li(0),wt=0,go=null,Ji=0,Pl=0,Vd=0,Ka=null,pr=null,Gd=0,ia=1/0,Un=null,hl=!1,Lf=null,Si=null,hu=!1,mi=null,fl=0,qa=0,If=null,Uu=-1,$u=0;function nr(){return(ze&6)!==0?Et():Uu!==-1?Uu:Uu=Et()}function Di(r){return(r.mode&1)===0?1:(ze&2)!==0&&zt!==0?zt&-zt:YA.transition!==null?($u===0&&($u=$v()),$u):(r=qe,r!==0||(r=window.event,r=r===void 0?16:Kv(r.type)),r)}function gn(r,e,t,n){if(50<qa)throw qa=0,If=null,Error(ce(185));wo(r,t,n),((ze&2)===0||r!==It)&&(r===It&&((ze&2)===0&&(Pl|=t),wt===4&&pi(r,zt)),Ar(r,n),t===1&&ze===0&&(e.mode&1)===0&&(ia=Et()+500,kl&&Ii()))}function Ar(r,e){var t=r.callbackNode;Yx(r,e);var n=Yu(r,r===It?zt:0);if(n===0)t!==null&&ep(t),r.callbackNode=null,r.callbackPriority=0;else if(e=n&-n,r.callbackPriority!==e){if(t!=null&&ep(t),e===1)r.tag===0?qA(jp.bind(null,r)):fE(jp.bind(null,r)),WA(function(){(ze&6)===0&&Ii()}),t=null;else{switch(zv(n)){case 1:t=gd;break;case 4:t=Mv;break;case 16:t=qu;break;case 536870912:t=Uv;break;default:t=qu}t=hy(t,iy.bind(null,r))}r.callbackPriority=e,r.callbackNode=t}}function iy(r,e){if(Uu=-1,$u=0,(ze&6)!==0)throw Error(ce(327));var t=r.callbackNode;if(Xs()&&r.callbackNode!==t)return null;var n=Yu(r,r===It?zt:0);if(n===0)return null;if((n&30)!==0||(n&r.expiredLanes)!==0||e)e=dl(r,n);else{e=n;var i=ze;ze|=2;var s=ay();(It!==r||zt!==e)&&(Un=null,ia=Et()+500,ji(r,e));do try{gC();break}catch(o){sy(r,o)}while(1);Fd(),cl.current=s,ze=i,At!==null?e=0:(It=null,zt=0,e=wt)}if(e!==0){if(e===2&&(i=sf(r),i!==0&&(n=i,e=kf(r,i))),e===1)throw t=go,ji(r,0),pi(r,n),Ar(r,Et()),t;if(e===6)pi(r,n);else{if(i=r.current.alternate,(n&30)===0&&!dC(i)&&(e=dl(r,n),e===2&&(s=sf(r),s!==0&&(n=s,e=kf(r,s))),e===1))throw t=go,ji(r,0),pi(r,n),Ar(r,Et()),t;switch(r.finishedWork=i,r.finishedLanes=n,e){case 0:case 1:throw Error(ce(345));case 2:Ui(r,pr,Un);break;case 3:if(pi(r,n),(n&130023424)===n&&(e=Gd+500-Et(),10<e)){if(Yu(r,0)!==0)break;if(i=r.suspendedLanes,(i&n)!==n){nr(),r.pingedLanes|=r.suspendedLanes&i;break}r.timeoutHandle=df(Ui.bind(null,r,pr,Un),e);break}Ui(r,pr,Un);break;case 4:if(pi(r,n),(n&4194240)===n)break;for(e=r.eventTimes,i=-1;0<n;){var a=31-pn(n);s=1<<a,a=e[a],a>i&&(i=a),n&=~s}if(n=i,n=Et()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*fC(n/1960))-n,10<n){r.timeoutHandle=df(Ui.bind(null,r,pr,Un),n);break}Ui(r,pr,Un);break;case 5:Ui(r,pr,Un);break;default:throw Error(ce(329))}}}return Ar(r,Et()),r.callbackNode===t?iy.bind(null,r):null}function kf(r,e){var t=Ka;return r.current.memoizedState.isDehydrated&&(ji(r,e).flags|=256),r=dl(r,e),r!==2&&(e=pr,pr=t,e!==null&&Bf(e)),r}function Bf(r){pr===null?pr=r:pr.push.apply(pr,r)}function dC(r){for(var e=r;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var n=0;n<t.length;n++){var i=t[n],s=i.getSnapshot;i=i.value;try{if(!vn(s(),i))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===r)break;for(;e.sibling===null;){if(e.return===null||e.return===r)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function pi(r,e){for(e&=~Vd,e&=~Pl,r.suspendedLanes|=e,r.pingedLanes&=~e,r=r.expirationTimes;0<e;){var t=31-pn(e),n=1<<t;r[t]=-1,e&=~n}}function jp(r){if((ze&6)!==0)throw Error(ce(327));Xs();var e=Yu(r,0);if((e&1)===0)return Ar(r,Et()),null;var t=dl(r,e);if(r.tag!==0&&t===2){var n=sf(r);n!==0&&(e=n,t=kf(r,n))}if(t===1)throw t=go,ji(r,0),pi(r,e),Ar(r,Et()),t;if(t===6)throw Error(ce(345));return r.finishedWork=r.current.alternate,r.finishedLanes=e,Ui(r,pr,Un),Ar(r,Et()),null}function Wd(r,e){var t=ze;ze|=1;try{return r(e)}finally{ze=t,ze===0&&(ia=Et()+500,kl&&Ii())}}function es(r){mi!==null&&mi.tag===0&&(ze&6)===0&&Xs();var e=ze;ze|=1;var t=jr.transition,n=qe;try{if(jr.transition=null,qe=1,r)return r()}finally{qe=n,jr.transition=t,ze=e,(ze&6)===0&&Ii()}}function Hd(){br=zs.current,rt(zs)}function ji(r,e){r.finishedWork=null,r.finishedLanes=0;var t=r.timeoutHandle;if(t!==-1&&(r.timeoutHandle=-1,GA(t)),At!==null)for(t=At.return;t!==null;){var n=t;switch(Dd(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&el();break;case 3:ra(),rt(yr),rt(Yt),Bd();break;case 5:kd(n);break;case 4:ra();break;case 13:rt(ut);break;case 19:rt(ut);break;case 10:bd(n.type._context);break;case 22:case 23:Hd()}t=t.return}if(It=r,At=r=wi(r.current,null),zt=br=e,wt=0,go=null,Vd=Pl=Ji=0,pr=Ka=null,Wi!==null){for(e=0;e<Wi.length;e++)if(t=Wi[e],n=t.interleaved,n!==null){t.interleaved=null;var i=n.next,s=t.pending;if(s!==null){var a=s.next;s.next=i,n.next=a}t.pending=n}Wi=null}return r}function sy(r,e){do{var t=At;try{if(Fd(),Nu.current=ll,ul){for(var n=ct.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}ul=!1}if(Qi=0,Lt=Dt=ct=null,Ha=!1,ho=0,zd.current=null,t===null||t.return===null){wt=1,go=e,At=null;break}e:{var s=r,a=t.return,o=t,u=e;if(e=zt,o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var l=u,c=o,h=c.tag;if((c.mode&1)===0&&(h===0||h===11||h===15)){var f=c.alternate;f?(c.updateQueue=f.updateQueue,c.memoizedState=f.memoizedState,c.lanes=f.lanes):(c.updateQueue=null,c.memoizedState=null)}var d=kp(a);if(d!==null){d.flags&=-257,Bp(d,a,o,s,e),d.mode&1&&Ip(s,l,e),e=d,u=l;var m=e.updateQueue;if(m===null){var E=new Set;E.add(u),e.updateQueue=E}else m.add(u);break e}else{if((e&1)===0){Ip(s,l,e),jd();break e}u=Error(ce(426))}}else if(at&&o.mode&1){var p=kp(a);if(p!==null){(p.flags&65536)===0&&(p.flags|=256),Bp(p,a,o,s,e),wd(na(u,o));break e}}s=u=na(u,o),wt!==4&&(wt=2),Ka===null?Ka=[s]:Ka.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var g=VE(s,u,e);Dp(s,g);break e;case 1:o=u;var v=s.type,y=s.stateNode;if((s.flags&128)===0&&(typeof v.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Si===null||!Si.has(y)))){s.flags|=65536,e&=-e,s.lanes|=e;var C=GE(s,o,e);Dp(s,C);break e}}s=s.return}while(s!==null)}uy(t)}catch(A){e=A,At===t&&t!==null&&(At=t=t.return);continue}break}while(1)}function ay(){var r=cl.current;return cl.current=ll,r===null?ll:r}function jd(){(wt===0||wt===3||wt===2)&&(wt=4),It===null||(Ji&268435455)===0&&(Pl&268435455)===0||pi(It,zt)}function dl(r,e){var t=ze;ze|=2;var n=ay();(It!==r||zt!==e)&&(Un=null,ji(r,e));do try{pC();break}catch(i){sy(r,i)}while(1);if(Fd(),ze=t,cl.current=n,At!==null)throw Error(ce(261));return It=null,zt=0,wt}function pC(){for(;At!==null;)oy(At)}function gC(){for(;At!==null&&!$x();)oy(At)}function oy(r){var e=cy(r.alternate,r,br);r.memoizedProps=r.pendingProps,e===null?uy(r):At=e,zd.current=null}function uy(r){var e=r;do{var t=e.alternate;if(r=e.return,(e.flags&32768)===0){if(t=oC(t,e,br),t!==null){At=t;return}}else{if(t=uC(t,e),t!==null){t.flags&=32767,At=t;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{wt=6,At=null;return}}if(e=e.sibling,e!==null){At=e;return}At=e=r}while(e!==null);wt===0&&(wt=5)}function Ui(r,e,t){var n=qe,i=jr.transition;try{jr.transition=null,qe=1,mC(r,e,t,n)}finally{jr.transition=i,qe=n}return null}function mC(r,e,t,n){do Xs();while(mi!==null);if((ze&6)!==0)throw Error(ce(327));t=r.finishedWork;var i=r.finishedLanes;if(t===null)return null;if(r.finishedWork=null,r.finishedLanes=0,t===r.current)throw Error(ce(177));r.callbackNode=null,r.callbackPriority=0;var s=t.lanes|t.childLanes;if(Xx(r,s),r===It&&(At=It=null,zt=0),(t.subtreeFlags&2064)===0&&(t.flags&2064)===0||hu||(hu=!0,hy(qu,function(){return Xs(),null})),s=(t.flags&15990)!==0,(t.subtreeFlags&15990)!==0||s){s=jr.transition,jr.transition=null;var a=qe;qe=1;var o=ze;ze|=4,zd.current=null,cC(r,t),ry(t,r),NA(hf),Xu=!!cf,hf=cf=null,r.current=t,hC(t),zx(),ze=o,qe=a,jr.transition=s}else r.current=t;if(hu&&(hu=!1,mi=r,fl=i),s=r.pendingLanes,s===0&&(Si=null),Wx(t.stateNode),Ar(r,Et()),e!==null)for(n=r.onRecoverableError,t=0;t<e.length;t++)i=e[t],n(i.value,{componentStack:i.stack,digest:i.digest});if(hl)throw hl=!1,r=Lf,Lf=null,r;return(fl&1)!==0&&r.tag!==0&&Xs(),s=r.pendingLanes,(s&1)!==0?r===If?qa++:(qa=0,If=r):qa=0,Ii(),null}function Xs(){if(mi!==null){var r=zv(fl),e=jr.transition,t=qe;try{if(jr.transition=null,qe=16>r?16:r,mi===null)var n=!1;else{if(r=mi,mi=null,fl=0,(ze&6)!==0)throw Error(ce(331));var i=ze;for(ze|=4,Ae=r.current;Ae!==null;){var s=Ae,a=s.child;if((Ae.flags&16)!==0){var o=s.deletions;if(o!==null){for(var u=0;u<o.length;u++){var l=o[u];for(Ae=l;Ae!==null;){var c=Ae;switch(c.tag){case 0:case 11:case 15:ja(8,c,s)}var h=c.child;if(h!==null)h.return=c,Ae=h;else for(;Ae!==null;){c=Ae;var f=c.sibling,d=c.return;if(JE(c),c===l){Ae=null;break}if(f!==null){f.return=d,Ae=f;break}Ae=d}}}var m=s.alternate;if(m!==null){var E=m.child;if(E!==null){m.child=null;do{var p=E.sibling;E.sibling=null,E=p}while(E!==null)}}Ae=s}}if((s.subtreeFlags&2064)!==0&&a!==null)a.return=s,Ae=a;else e:for(;Ae!==null;){if(s=Ae,(s.flags&2048)!==0)switch(s.tag){case 0:case 11:case 15:ja(9,s,s.return)}var g=s.sibling;if(g!==null){g.return=s.return,Ae=g;break e}Ae=s.return}}var v=r.current;for(Ae=v;Ae!==null;){a=Ae;var y=a.child;if((a.subtreeFlags&2064)!==0&&y!==null)y.return=a,Ae=y;else e:for(a=v;Ae!==null;){if(o=Ae,(o.flags&2048)!==0)try{switch(o.tag){case 0:case 11:case 15:Nl(9,o)}}catch(A){dt(o,o.return,A)}if(o===a){Ae=null;break e}var C=o.sibling;if(C!==null){C.return=o.return,Ae=C;break e}Ae=o.return}}if(ze=i,Ii(),wn&&typeof wn.onPostCommitFiberRoot=="function")try{wn.onPostCommitFiberRoot(Fl,r)}catch{}n=!0}return n}finally{qe=t,jr.transition=e}}return!1}function Kp(r,e,t){e=na(t,e),e=VE(r,e,1),r=Ti(r,e,1),e=nr(),r!==null&&(wo(r,1,e),Ar(r,e))}function dt(r,e,t){if(r.tag===3)Kp(r,r,t);else for(;e!==null;){if(e.tag===3){Kp(e,r,t);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Si===null||!Si.has(n))){r=na(t,r),r=GE(e,r,1),e=Ti(e,r,1),r=nr(),e!==null&&(wo(e,1,r),Ar(e,r));break}}e=e.return}}function vC(r,e,t){var n=r.pingCache;n!==null&&n.delete(e),e=nr(),r.pingedLanes|=r.suspendedLanes&t,It===r&&(zt&t)===t&&(wt===4||wt===3&&(zt&130023424)===zt&&500>Et()-Gd?ji(r,0):Vd|=t),Ar(r,e)}function ly(r,e){e===0&&((r.mode&1)===0?e=1:(e=tu,tu<<=1,(tu&130023424)===0&&(tu=4194304)));var t=nr();r=Xn(r,e),r!==null&&(wo(r,e,t),Ar(r,t))}function EC(r){var e=r.memoizedState,t=0;e!==null&&(t=e.retryLane),ly(r,t)}function yC(r,e){var t=0;switch(r.tag){case 13:var n=r.stateNode,i=r.memoizedState;i!==null&&(t=i.retryLane);break;case 19:n=r.stateNode;break;default:throw Error(ce(314))}n!==null&&n.delete(e),ly(r,t)}var cy;cy=function(r,e,t){if(r!==null)if(r.memoizedProps!==e.pendingProps||yr.current)Er=!0;else{if((r.lanes&t)===0&&(e.flags&128)===0)return Er=!1,aC(r,e,t);Er=(r.flags&131072)!==0}else Er=!1,at&&(e.flags&1048576)!==0&&dE(e,nl,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Mu(r,e),r=e.pendingProps;var i=Js(e,Yt.current);Ys(e,t),i=Nd(null,e,n,r,i,t);var s=Pd();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,xr(n)?(s=!0,tl(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Ld(e),i.updater=Bl,e.stateNode=i,i._reactInternals=e,xf(e,n,r,t),e=Tf(null,e,n,!0,s,t)):(e.tag=0,at&&s&&Sd(e),rr(null,e,i,t),e=e.child),e;case 16:n=e.elementType;e:{switch(Mu(r,e),r=e.pendingProps,i=n._init,n=i(n._payload),e.type=n,i=e.tag=AC(n),r=ln(n,r),i){case 0:e=Cf(null,e,n,r,t);break e;case 1:e=Pp(null,e,n,r,t);break e;case 11:e=Op(null,e,n,r,t);break e;case 14:e=Np(null,e,n,ln(n.type,r),t);break e}throw Error(ce(306,n,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:ln(n,i),Cf(r,e,n,i,t);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:ln(n,i),Pp(r,e,n,i,t);case 3:e:{if(KE(e),r===null)throw Error(ce(387));n=e.pendingProps,s=e.memoizedState,i=s.element,vE(r,e),al(e,n,null,t);var a=e.memoizedState;if(n=a.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=na(Error(ce(423)),e),e=Mp(r,e,n,t,i);break e}else if(n!==i){i=na(Error(ce(424)),e),e=Mp(r,e,n,t,i);break e}else for(Rr=Ci(e.stateNode.containerInfo.firstChild),Lr=e,at=!0,hn=null,t=AE(e,null,n,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(ea(),n===i){e=Zn(r,e,t);break e}rr(r,e,n,t)}e=e.child}return e;case 5:return CE(e),r===null&&vf(e),n=e.type,i=e.pendingProps,s=r!==null?r.memoizedProps:null,a=i.children,ff(n,i)?a=null:s!==null&&ff(n,s)&&(e.flags|=32),jE(r,e),rr(r,e,a,t),e.child;case 6:return r===null&&vf(e),null;case 13:return qE(r,e,t);case 4:return Id(e,e.stateNode.containerInfo),n=e.pendingProps,r===null?e.child=ta(e,null,n,t):rr(r,e,n,t),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:ln(n,i),Op(r,e,n,i,t);case 7:return rr(r,e,e.pendingProps,t),e.child;case 8:return rr(r,e,e.pendingProps.children,t),e.child;case 12:return rr(r,e,e.pendingProps.children,t),e.child;case 10:e:{if(n=e.type._context,i=e.pendingProps,s=e.memoizedProps,a=i.value,Je(il,n._currentValue),n._currentValue=a,s!==null)if(vn(s.value,a)){if(s.children===i.children&&!yr.current){e=Zn(r,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var o=s.dependencies;if(o!==null){a=s.child;for(var u=o.firstContext;u!==null;){if(u.context===n){if(s.tag===1){u=jn(-1,t&-t),u.tag=2;var l=s.updateQueue;if(l!==null){l=l.shared;var c=l.pending;c===null?u.next=u:(u.next=c.next,c.next=u),l.pending=u}}s.lanes|=t,u=s.alternate,u!==null&&(u.lanes|=t),Ef(s.return,t,e),o.lanes|=t;break}u=u.next}}else if(s.tag===10)a=s.type===e.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(ce(341));a.lanes|=t,o=a.alternate,o!==null&&(o.lanes|=t),Ef(a,t,e),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===e){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}rr(r,e,i.children,t),e=e.child}return e;case 9:return i=e.type,n=e.pendingProps.children,Ys(e,t),i=Kr(i),n=n(i),e.flags|=1,rr(r,e,n,t),e.child;case 14:return n=e.type,i=ln(n,e.pendingProps),i=ln(n.type,i),Np(r,e,n,i,t);case 15:return WE(r,e,e.type,e.pendingProps,t);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:ln(n,i),Mu(r,e),e.tag=1,xr(n)?(r=!0,tl(e)):r=!1,Ys(e,t),yE(e,n,i),xf(e,n,i,t),Tf(null,e,n,!0,r,t);case 19:return YE(r,e,t);case 22:return HE(r,e,t)}throw Error(ce(156,e.tag))};function hy(r,e){return Pv(r,e)}function xC(r,e,t,n){this.tag=r,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Hr(r,e,t,n){return new xC(r,e,t,n)}function Kd(r){return r=r.prototype,!(!r||!r.isReactComponent)}function AC(r){if(typeof r=="function")return Kd(r)?1:0;if(r!=null){if(r=r.$$typeof,r===fd)return 11;if(r===dd)return 14}return 2}function wi(r,e){var t=r.alternate;return t===null?(t=Hr(r.tag,e,r.key,r.mode),t.elementType=r.elementType,t.type=r.type,t.stateNode=r.stateNode,t.alternate=r,r.alternate=t):(t.pendingProps=e,t.type=r.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=r.flags&14680064,t.childLanes=r.childLanes,t.lanes=r.lanes,t.child=r.child,t.memoizedProps=r.memoizedProps,t.memoizedState=r.memoizedState,t.updateQueue=r.updateQueue,e=r.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=r.sibling,t.index=r.index,t.ref=r.ref,t}function zu(r,e,t,n,i,s){var a=2;if(n=r,typeof r=="function")Kd(r)&&(a=1);else if(typeof r=="string")a=5;else e:switch(r){case Ls:return Ki(t.children,i,s,e);case hd:a=8,i|=8;break;case Gh:return r=Hr(12,t,e,i|2),r.elementType=Gh,r.lanes=s,r;case Wh:return r=Hr(13,t,e,i),r.elementType=Wh,r.lanes=s,r;case Hh:return r=Hr(19,t,e,i),r.elementType=Hh,r.lanes=s,r;case xv:return Ml(t,i,s,e);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case Ev:a=10;break e;case yv:a=9;break e;case fd:a=11;break e;case dd:a=14;break e;case li:a=16,n=null;break e}throw Error(ce(130,r==null?r:typeof r,""))}return e=Hr(a,t,e,i),e.elementType=r,e.type=n,e.lanes=s,e}function Ki(r,e,t,n){return r=Hr(7,r,n,e),r.lanes=t,r}function Ml(r,e,t,n){return r=Hr(22,r,n,e),r.elementType=xv,r.lanes=t,r.stateNode={isHidden:!1},r}function Qc(r,e,t){return r=Hr(6,r,null,e),r.lanes=t,r}function Jc(r,e,t){return e=Hr(4,r.children!==null?r.children:[],r.key,e),e.lanes=t,e.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},e}function CC(r,e,t,n,i){this.tag=e,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=kc(0),this.expirationTimes=kc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=kc(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function qd(r,e,t,n,i,s,a,o,u){return r=new CC(r,e,t,o,u),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Hr(3,null,null,e),r.current=s,s.stateNode=r,s.memoizedState={element:n,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ld(s),r}function TC(r,e,t){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Rs,key:n==null?null:""+n,children:r,containerInfo:e,implementation:t}}function fy(r){if(!r)return Fi;r=r._reactInternals;e:{if(as(r)!==r||r.tag!==1)throw Error(ce(170));var e=r;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(xr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ce(171))}if(r.tag===1){var t=r.type;if(xr(t))return hE(r,t,e)}return e}function dy(r,e,t,n,i,s,a,o,u){return r=qd(t,n,!0,r,i,s,a,o,u),r.context=fy(null),t=r.current,n=nr(),i=Di(t),s=jn(n,i),s.callback=e!=null?e:null,Ti(t,s,i),r.current.lanes=i,wo(r,i,n),Ar(r,n),r}function Ul(r,e,t,n){var i=e.current,s=nr(),a=Di(i);return t=fy(t),e.context===null?e.context=t:e.pendingContext=t,e=jn(s,a),e.payload={element:r},n=n===void 0?null:n,n!==null&&(e.callback=n),r=Ti(i,e,a),r!==null&&(gn(r,i,a,s),Ou(r,i,a)),a}function pl(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function qp(r,e){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var t=r.retryLane;r.retryLane=t!==0&&t<e?t:e}}function Yd(r,e){qp(r,e),(r=r.alternate)&&qp(r,e)}function SC(){return null}var py=typeof reportError=="function"?reportError:function(r){console.error(r)};function Xd(r){this._internalRoot=r}$l.prototype.render=Xd.prototype.render=function(r){var e=this._internalRoot;if(e===null)throw Error(ce(409));Ul(r,e,null,null)};$l.prototype.unmount=Xd.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var e=r.containerInfo;es(function(){Ul(null,r,null,null)}),e[Yn]=null}};function $l(r){this._internalRoot=r}$l.prototype.unstable_scheduleHydration=function(r){if(r){var e=Wv();r={blockedOn:null,target:r,priority:e};for(var t=0;t<di.length&&e!==0&&e<di[t].priority;t++);di.splice(t,0,r),t===0&&jv(r)}};function Zd(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function zl(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function Yp(){}function DC(r,e,t,n,i){if(i){if(typeof n=="function"){var s=n;n=function(){var l=pl(a);s.call(l)}}var a=dy(e,n,r,0,null,!1,!1,"",Yp);return r._reactRootContainer=a,r[Yn]=a.current,ao(r.nodeType===8?r.parentNode:r),es(),a}for(;i=r.lastChild;)r.removeChild(i);if(typeof n=="function"){var o=n;n=function(){var l=pl(u);o.call(l)}}var u=qd(r,0,!1,null,null,!1,!1,"",Yp);return r._reactRootContainer=u,r[Yn]=u.current,ao(r.nodeType===8?r.parentNode:r),es(function(){Ul(e,u,t,n)}),u}function Vl(r,e,t,n,i){var s=t._reactRootContainer;if(s){var a=s;if(typeof i=="function"){var o=i;i=function(){var u=pl(a);o.call(u)}}Ul(e,a,r,i)}else a=DC(t,e,r,i,n);return pl(a)}Vv=function(r){switch(r.tag){case 3:var e=r.stateNode;if(e.current.memoizedState.isDehydrated){var t=Ma(e.pendingLanes);t!==0&&(md(e,t|1),Ar(e,Et()),(ze&6)===0&&(ia=Et()+500,Ii()))}break;case 13:es(function(){var n=Xn(r,1);if(n!==null){var i=nr();gn(n,r,1,i)}}),Yd(r,1)}};vd=function(r){if(r.tag===13){var e=Xn(r,134217728);if(e!==null){var t=nr();gn(e,r,134217728,t)}Yd(r,134217728)}};Gv=function(r){if(r.tag===13){var e=Di(r),t=Xn(r,e);if(t!==null){var n=nr();gn(t,r,e,n)}Yd(r,e)}};Wv=function(){return qe};Hv=function(r,e){var t=qe;try{return qe=r,e()}finally{qe=t}};tf=function(r,e,t){switch(e){case"input":if(qh(r,t),e=t.name,t.type==="radio"&&e!=null){for(t=r;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var n=t[e];if(n!==r&&n.form===r.form){var i=Il(n);if(!i)throw Error(ce(90));Cv(n),qh(n,i)}}}break;case"textarea":Sv(r,t);break;case"select":e=t.value,e!=null&&Hs(r,!!t.multiple,e,!1)}};Lv=Wd;Iv=es;var wC={usingClientEntryPoint:!1,Events:[Fo,Os,Il,bv,Rv,Wd]},wa={findFiberByHostInstance:Gi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},_C={bundleType:wa.bundleType,version:wa.version,rendererPackageName:wa.rendererPackageName,rendererConfig:wa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ei.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=Ov(r),r===null?null:r.stateNode},findFiberByHostInstance:wa.findFiberByHostInstance||SC,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var fu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fu.isDisabled&&fu.supportsFiber)try{Fl=fu.inject(_C),wn=fu}catch{}}kr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=wC;kr.createPortal=function(r,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Zd(e))throw Error(ce(200));return TC(r,e,null,t)};kr.createRoot=function(r,e){if(!Zd(r))throw Error(ce(299));var t=!1,n="",i=py;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=qd(r,1,!1,null,null,t,!1,n,i),r[Yn]=e.current,ao(r.nodeType===8?r.parentNode:r),new Xd(e)};kr.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var e=r._reactInternals;if(e===void 0)throw typeof r.render=="function"?Error(ce(188)):(r=Object.keys(r).join(","),Error(ce(268,r)));return r=Ov(e),r=r===null?null:r.stateNode,r};kr.flushSync=function(r){return es(r)};kr.hydrate=function(r,e,t){if(!zl(e))throw Error(ce(200));return Vl(null,r,e,!0,t)};kr.hydrateRoot=function(r,e,t){if(!Zd(r))throw Error(ce(405));var n=t!=null&&t.hydratedSources||null,i=!1,s="",a=py;if(t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),e=dy(e,null,r,1,t!=null?t:null,i,!1,s,a),r[Yn]=e.current,ao(r),n)for(r=0;r<n.length;r++)t=n[r],i=t._getVersion,i=i(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,i]:e.mutableSourceEagerHydrationData.push(t,i);return new $l(e)};kr.render=function(r,e,t){if(!zl(e))throw Error(ce(200));return Vl(null,r,e,!1,t)};kr.unmountComponentAtNode=function(r){if(!zl(r))throw Error(ce(40));return r._reactRootContainer?(es(function(){Vl(null,null,r,!1,function(){r._reactRootContainer=null,r[Yn]=null})}),!0):!1};kr.unstable_batchedUpdates=Wd;kr.unstable_renderSubtreeIntoContainer=function(r,e,t,n){if(!zl(t))throw Error(ce(200));if(r==null||r._reactInternals===void 0)throw Error(ce(38));return Vl(r,e,t,!1,n)};kr.version="18.2.0-next-9e3b772b8-20220608";(function(r){function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}e(),r.exports=kr})(dv);var Xp=dv.exports;zh.createRoot=Xp.createRoot,zh.hydrateRoot=Xp.hydrateRoot;/**
 * @remix-run/router v1.6.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function mo(){return mo=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},mo.apply(this,arguments)}var vi;(function(r){r.Pop="POP",r.Push="PUSH",r.Replace="REPLACE"})(vi||(vi={}));const Zp="popstate";function FC(r){r===void 0&&(r={});function e(n,i){let{pathname:s,search:a,hash:o}=n.location;return Of("",{pathname:s,search:a,hash:o},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(n,i){return typeof i=="string"?i:gy(i)}return RC(e,t,null,r)}function _t(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function Qd(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function bC(){return Math.random().toString(36).substr(2,8)}function Qp(r,e){return{usr:r.state,key:r.key,idx:e}}function Of(r,e,t,n){return t===void 0&&(t=null),mo({pathname:typeof r=="string"?r:r.pathname,search:"",hash:""},typeof e=="string"?ha(e):e,{state:t,key:e&&e.key||n||bC()})}function gy(r){let{pathname:e="/",search:t="",hash:n=""}=r;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function ha(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substr(t),r=r.substr(0,t));let n=r.indexOf("?");n>=0&&(e.search=r.substr(n),r=r.substr(0,n)),r&&(e.pathname=r)}return e}function RC(r,e,t,n){n===void 0&&(n={});let{window:i=document.defaultView,v5Compat:s=!1}=n,a=i.history,o=vi.Pop,u=null,l=c();l==null&&(l=0,a.replaceState(mo({},a.state,{idx:l}),""));function c(){return(a.state||{idx:null}).idx}function h(){o=vi.Pop;let p=c(),g=p==null?null:p-l;l=p,u&&u({action:o,location:E.location,delta:g})}function f(p,g){o=vi.Push;let v=Of(E.location,p,g);t&&t(v,p),l=c()+1;let y=Qp(v,l),C=E.createHref(v);try{a.pushState(y,"",C)}catch{i.location.assign(C)}s&&u&&u({action:o,location:E.location,delta:1})}function d(p,g){o=vi.Replace;let v=Of(E.location,p,g);t&&t(v,p),l=c();let y=Qp(v,l),C=E.createHref(v);a.replaceState(y,"",C),s&&u&&u({action:o,location:E.location,delta:0})}function m(p){let g=i.location.origin!=="null"?i.location.origin:i.location.href,v=typeof p=="string"?p:gy(p);return _t(g,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,g)}let E={get action(){return o},get location(){return r(i,a)},listen(p){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(Zp,h),u=p,()=>{i.removeEventListener(Zp,h),u=null}},createHref(p){return e(i,p)},createURL:m,encodeLocation(p){let g=m(p);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:f,replace:d,go(p){return a.go(p)}};return E}var Jp;(function(r){r.data="data",r.deferred="deferred",r.redirect="redirect",r.error="error"})(Jp||(Jp={}));function LC(r,e,t){t===void 0&&(t="/");let n=typeof e=="string"?ha(e):e,i=Ey(n.pathname||"/",t);if(i==null)return null;let s=my(r);IC(s);let a=null;for(let o=0;a==null&&o<s.length;++o)a=zC(s[o],WC(i));return a}function my(r,e,t,n){e===void 0&&(e=[]),t===void 0&&(t=[]),n===void 0&&(n="");let i=(s,a,o)=>{let u={relativePath:o===void 0?s.path||"":o,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};u.relativePath.startsWith("/")&&(_t(u.relativePath.startsWith(n),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(n.length));let l=qi([n,u.relativePath]),c=t.concat(u);s.children&&s.children.length>0&&(_t(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),my(s.children,e,c,l)),!(s.path==null&&!s.index)&&e.push({path:l,score:UC(l,s.index),routesMeta:c})};return r.forEach((s,a)=>{var o;if(s.path===""||!((o=s.path)!=null&&o.includes("?")))i(s,a);else for(let u of vy(s.path))i(s,a,u)}),e}function vy(r){let e=r.split("/");if(e.length===0)return[];let[t,...n]=e,i=t.endsWith("?"),s=t.replace(/\?$/,"");if(n.length===0)return i?[s,""]:[s];let a=vy(n.join("/")),o=[];return o.push(...a.map(u=>u===""?s:[s,u].join("/"))),i&&o.push(...a),o.map(u=>r.startsWith("/")&&u===""?"/":u)}function IC(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:$C(e.routesMeta.map(n=>n.childrenIndex),t.routesMeta.map(n=>n.childrenIndex)))}const kC=/^:\w+$/,BC=3,OC=2,NC=1,PC=10,MC=-2,eg=r=>r==="*";function UC(r,e){let t=r.split("/"),n=t.length;return t.some(eg)&&(n+=MC),e&&(n+=OC),t.filter(i=>!eg(i)).reduce((i,s)=>i+(kC.test(s)?BC:s===""?NC:PC),n)}function $C(r,e){return r.length===e.length&&r.slice(0,-1).every((n,i)=>n===e[i])?r[r.length-1]-e[e.length-1]:0}function zC(r,e){let{routesMeta:t}=r,n={},i="/",s=[];for(let a=0;a<t.length;++a){let o=t[a],u=a===t.length-1,l=i==="/"?e:e.slice(i.length)||"/",c=VC({path:o.relativePath,caseSensitive:o.caseSensitive,end:u},l);if(!c)return null;Object.assign(n,c.params);let h=o.route;s.push({params:n,pathname:qi([i,c.pathname]),pathnameBase:XC(qi([i,c.pathnameBase])),route:h}),c.pathnameBase!=="/"&&(i=qi([i,c.pathnameBase]))}return s}function VC(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,n]=GC(r.path,r.caseSensitive,r.end),i=e.match(t);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:n.reduce((l,c,h)=>{if(c==="*"){let f=o[h]||"";a=s.slice(0,s.length-f.length).replace(/(.)\/+$/,"$1")}return l[c]=HC(o[h]||"",c),l},{}),pathname:s,pathnameBase:a,pattern:r}}function GC(r,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),Qd(r==="*"||!r.endsWith("*")||r.endsWith("/*"),'Route path "'+r+'" will be treated as if it were '+('"'+r.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+r.replace(/\*$/,"/*")+'".'));let n=[],i="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(a,o)=>(n.push(o),"/([^\\/]+)"));return r.endsWith("*")?(n.push("*"),i+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":r!==""&&r!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),n]}function WC(r){try{return decodeURI(r)}catch(e){return Qd(!1,'The URL path "'+r+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),r}}function HC(r,e){try{return decodeURIComponent(r)}catch(t){return Qd(!1,'The value for the URL param "'+e+'" will not be decoded because'+(' the string "'+r+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+t+").")),r}}function Ey(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,n=r.charAt(t);return n&&n!=="/"?null:r.slice(t)||"/"}function jC(r,e){e===void 0&&(e="/");let{pathname:t,search:n="",hash:i=""}=typeof r=="string"?ha(r):r;return{pathname:t?t.startsWith("/")?t:KC(t,e):e,search:ZC(n),hash:QC(i)}}function KC(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function eh(r,e,t,n){return"Cannot include a '"+r+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function qC(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function YC(r,e,t,n){n===void 0&&(n=!1);let i;typeof r=="string"?i=ha(r):(i=mo({},r),_t(!i.pathname||!i.pathname.includes("?"),eh("?","pathname","search",i)),_t(!i.pathname||!i.pathname.includes("#"),eh("#","pathname","hash",i)),_t(!i.search||!i.search.includes("#"),eh("#","search","hash",i)));let s=r===""||i.pathname==="",a=s?"/":i.pathname,o;if(n||a==null)o=t;else{let h=e.length-1;if(a.startsWith("..")){let f=a.split("/");for(;f[0]==="..";)f.shift(),h-=1;i.pathname=f.join("/")}o=h>=0?e[h]:"/"}let u=jC(i,o),l=a&&a!=="/"&&a.endsWith("/"),c=(s||a===".")&&t.endsWith("/");return!u.pathname.endsWith("/")&&(l||c)&&(u.pathname+="/"),u}const qi=r=>r.join("/").replace(/\/\/+/g,"/"),XC=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),ZC=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,QC=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function JC(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}const eT=["post","put","patch","delete"];[...eT];var Gl={exports:{}},Wl={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tT=be.exports,rT=Symbol.for("react.element"),nT=Symbol.for("react.fragment"),iT=Object.prototype.hasOwnProperty,sT=tT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,aT={key:!0,ref:!0,__self:!0,__source:!0};function yy(r,e,t){var n,i={},s=null,a=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(a=e.ref);for(n in e)iT.call(e,n)&&!aT.hasOwnProperty(n)&&(i[n]=e[n]);if(r&&r.defaultProps)for(n in e=r.defaultProps,e)i[n]===void 0&&(i[n]=e[n]);return{$$typeof:rT,type:r,key:s,ref:a,props:i,_owner:sT.current}}Wl.Fragment=nT;Wl.jsx=yy;Wl.jsxs=yy;(function(r){r.exports=Wl})(Gl);const Xt=Gl.exports.Fragment,pe=Gl.exports.jsx,Ut=Gl.exports.jsxs;/**
 * React Router v6.11.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function gl(){return gl=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},gl.apply(this,arguments)}const Jd=be.exports.createContext(null),oT=be.exports.createContext(null),Hl=be.exports.createContext(null),jl=be.exports.createContext(null),os=be.exports.createContext({outlet:null,matches:[],isDataRoute:!1}),xy=be.exports.createContext(null);function Kl(){return be.exports.useContext(jl)!=null}function Ay(){return Kl()||_t(!1),be.exports.useContext(jl).location}function Cy(r){be.exports.useContext(Hl).static||be.exports.useLayoutEffect(r)}function Ty(){let{isDataRoute:r}=be.exports.useContext(os);return r?xT():uT()}function uT(){Kl()||_t(!1);let r=be.exports.useContext(Jd),{basename:e,navigator:t}=be.exports.useContext(Hl),{matches:n}=be.exports.useContext(os),{pathname:i}=Ay(),s=JSON.stringify(qC(n).map(u=>u.pathnameBase)),a=be.exports.useRef(!1);return Cy(()=>{a.current=!0}),be.exports.useCallback(function(u,l){if(l===void 0&&(l={}),!a.current)return;if(typeof u=="number"){t.go(u);return}let c=YC(u,JSON.parse(s),i,l.relative==="path");r==null&&e!=="/"&&(c.pathname=c.pathname==="/"?e:qi([e,c.pathname])),(l.replace?t.replace:t.push)(c,l.state,l)},[e,t,s,i,r])}function Ro(){let{matches:r}=be.exports.useContext(os),e=r[r.length-1];return e?e.params:{}}function lT(r,e){return cT(r,e)}function cT(r,e,t){Kl()||_t(!1);let{navigator:n}=be.exports.useContext(Hl),{matches:i}=be.exports.useContext(os),s=i[i.length-1],a=s?s.params:{};s&&s.pathname;let o=s?s.pathnameBase:"/";s&&s.route;let u=Ay(),l;if(e){var c;let E=typeof e=="string"?ha(e):e;o==="/"||((c=E.pathname)==null?void 0:c.startsWith(o))||_t(!1),l=E}else l=u;let h=l.pathname||"/",f=o==="/"?h:h.slice(o.length)||"/",d=LC(r,{pathname:f}),m=gT(d&&d.map(E=>Object.assign({},E,{params:Object.assign({},a,E.params),pathname:qi([o,n.encodeLocation?n.encodeLocation(E.pathname).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?o:qi([o,n.encodeLocation?n.encodeLocation(E.pathnameBase).pathname:E.pathnameBase])})),i,t);return e&&m?pe(jl.Provider,{value:{location:gl({pathname:"/",search:"",hash:"",state:null,key:"default"},l),navigationType:vi.Pop},children:m}):m}function hT(){let r=yT(),e=JC(r)?r.status+" "+r.statusText:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null;return Ut(Xt,{children:[pe("h2",{children:"Unexpected Application Error!"}),pe("h3",{style:{fontStyle:"italic"},children:e}),t?pe("pre",{style:{padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},children:t}):null,null]})}const fT=pe(hT,{});class dT extends be.exports.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error?pe(os.Provider,{value:this.props.routeContext,children:pe(xy.Provider,{value:this.state.error,children:this.props.component})}):this.props.children}}function pT(r){let{routeContext:e,match:t,children:n}=r,i=be.exports.useContext(Jd);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),pe(os.Provider,{value:e,children:n})}function gT(r,e,t){var n;if(e===void 0&&(e=[]),t===void 0&&(t=null),r==null){var i;if((i=t)!=null&&i.errors)r=t.matches;else return null}let s=r,a=(n=t)==null?void 0:n.errors;if(a!=null){let o=s.findIndex(u=>u.route.id&&(a==null?void 0:a[u.route.id]));o>=0||_t(!1),s=s.slice(0,Math.min(s.length,o+1))}return s.reduceRight((o,u,l)=>{let c=u.route.id?a==null?void 0:a[u.route.id]:null,h=null;t&&(h=u.route.errorElement||fT);let f=e.concat(s.slice(0,l+1)),d=()=>{let m;return c?m=h:u.route.Component?m=be.exports.createElement(u.route.Component,null):u.route.element?m=u.route.element:m=o,pe(pT,{match:u,routeContext:{outlet:o,matches:f,isDataRoute:t!=null},children:m})};return t&&(u.route.ErrorBoundary||u.route.errorElement||l===0)?pe(dT,{location:t.location,revalidation:t.revalidation,component:h,error:c,children:d(),routeContext:{outlet:null,matches:f,isDataRoute:!0}}):d()},null)}var Nf;(function(r){r.UseBlocker="useBlocker",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate"})(Nf||(Nf={}));var vo;(function(r){r.UseBlocker="useBlocker",r.UseLoaderData="useLoaderData",r.UseActionData="useActionData",r.UseRouteError="useRouteError",r.UseNavigation="useNavigation",r.UseRouteLoaderData="useRouteLoaderData",r.UseMatches="useMatches",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r.UseRouteId="useRouteId"})(vo||(vo={}));function mT(r){let e=be.exports.useContext(Jd);return e||_t(!1),e}function vT(r){let e=be.exports.useContext(oT);return e||_t(!1),e}function ET(r){let e=be.exports.useContext(os);return e||_t(!1),e}function Sy(r){let e=ET(),t=e.matches[e.matches.length-1];return t.route.id||_t(!1),t.route.id}function yT(){var r;let e=be.exports.useContext(xy),t=vT(vo.UseRouteError),n=Sy(vo.UseRouteError);return e||((r=t.errors)==null?void 0:r[n])}function xT(){let{router:r}=mT(Nf.UseNavigateStable),e=Sy(vo.UseNavigateStable),t=be.exports.useRef(!1);return Cy(()=>{t.current=!0}),be.exports.useCallback(function(i,s){s===void 0&&(s={}),t.current&&(typeof i=="number"?r.navigate(i):r.navigate(i,gl({fromRouteId:e},s)))},[r,e])}function $i(r){_t(!1)}function AT(r){let{basename:e="/",children:t=null,location:n,navigationType:i=vi.Pop,navigator:s,static:a=!1}=r;Kl()&&_t(!1);let o=e.replace(/^\/*/,"/"),u=be.exports.useMemo(()=>({basename:o,navigator:s,static:a}),[o,s,a]);typeof n=="string"&&(n=ha(n));let{pathname:l="/",search:c="",hash:h="",state:f=null,key:d="default"}=n,m=be.exports.useMemo(()=>{let E=Ey(l,o);return E==null?null:{location:{pathname:E,search:c,hash:h,state:f,key:d},navigationType:i}},[o,l,c,h,f,d,i]);return m==null?null:pe(Hl.Provider,{value:u,children:pe(jl.Provider,{children:t,value:m})})}function CT(r){let{children:e,location:t}=r;return lT(Pf(e),t)}var tg;(function(r){r[r.pending=0]="pending",r[r.success=1]="success",r[r.error=2]="error"})(tg||(tg={}));new Promise(()=>{});function Pf(r,e){e===void 0&&(e=[]);let t=[];return be.exports.Children.forEach(r,(n,i)=>{if(!be.exports.isValidElement(n))return;let s=[...e,i];if(n.type===be.exports.Fragment){t.push.apply(t,Pf(n.props.children,s));return}n.type!==$i&&_t(!1),!n.props.index||!n.props.children||_t(!1);let a={id:n.props.id||s.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(a.children=Pf(n.props.children,s)),t.push(a)}),t}/**
 * React Router DOM v6.11.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function TT(r){let{basename:e,children:t,window:n}=r,i=be.exports.useRef();i.current==null&&(i.current=FC({window:n,v5Compat:!0}));let s=i.current,[a,o]=be.exports.useState({action:s.action,location:s.location});return be.exports.useLayoutEffect(()=>s.listen(o),[s]),pe(AT,{basename:e,children:t,location:a.location,navigationType:a.action,navigator:s})}var rg;(function(r){r.UseScrollRestoration="useScrollRestoration",r.UseSubmitImpl="useSubmitImpl",r.UseFetcher="useFetcher"})(rg||(rg={}));var ng;(function(r){r.UseFetchers="useFetchers",r.UseScrollRestoration="useScrollRestoration"})(ng||(ng={}));const ST=r=>{const{score:e}=r;return pe(Xt,{children:pe("span",{className:"star "+(()=>{let n=e/2;const i=Math.floor(n/10);let s=Math.floor(n%10);return s>0&&(s=5),n=i*10+s,"star"+n})()})})},Dy=r=>{const{score:e}=r;return pe(Xt,{children:Ut("div",{children:[pe(ST,{score:e}),pe("span",{style:{color:"#ffac2d"},children:Number(e/10).toFixed(1)})]})})};const DT=r=>{const{data:e}=r,{cover:t,name:n,score:i,details:s}=e,{date:a,directors:o,actors:u,types:l,region:c,alias:h,intro:f}=s,d=m=>Array.isArray(m)?m.join(" / "):m;return pe(Xt,{children:Ut("div",{className:"video-card",children:[pe("img",{style:{width:"40%",display:"block",paddingRight:"10px"},src:t}),Ut("div",{className:"info",children:[Ut("div",{children:[pe("h1",{className:"title",children:n}),pe("span",{className:"date",children:` (${a})`}),pe(Dy,{score:i})]}),Ut("div",{className:"property",children:[pe("span",{className:"key",children:"\u5BFC\u6F14 : "}),pe("span",{className:"value",children:d(o)})]}),Ut("div",{className:"property",children:[pe("span",{className:"key",children:"\u4E3B\u6F14 : "}),pe("span",{className:"value",children:d(u)})]}),Ut("div",{className:"property",children:[pe("span",{className:"key",children:"\u7C7B\u578B: "}),pe("span",{className:"value",children:d(l)})]}),Ut("div",{className:"property",children:[pe("span",{className:"key",children:"\u5236\u7247\u56FD\u5BB6/\u5730\u533A : "}),pe("span",{className:"value",children:d(c)})]}),Ut("div",{className:"property",children:[pe("span",{className:"key",children:"\u53C8\u540D : "}),pe("span",{className:"value",children:d(h)})]}),Ut("div",{className:"property",children:[pe("span",{className:"key",children:"\u7B80\u4ECB : "}),pe("span",{className:"value",children:f})]})]})]})})};function wT(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var wy={exports:{}};(function(r,e){(function(t){var n=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,i=/^(?=([^\/?#]*))\1([^]*)$/,s=/(?:\/|^)\.(?=\/)/g,a=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,o={buildAbsoluteURL:function(u,l,c){if(c=c||{},u=u.trim(),l=l.trim(),!l){if(!c.alwaysNormalize)return u;var h=o.parseURL(u);if(!h)throw new Error("Error trying to parse base URL.");return h.path=o.normalizePath(h.path),o.buildURLFromParts(h)}var f=o.parseURL(l);if(!f)throw new Error("Error trying to parse relative URL.");if(f.scheme)return c.alwaysNormalize?(f.path=o.normalizePath(f.path),o.buildURLFromParts(f)):l;var d=o.parseURL(u);if(!d)throw new Error("Error trying to parse base URL.");if(!d.netLoc&&d.path&&d.path[0]!=="/"){var m=i.exec(d.path);d.netLoc=m[1],d.path=m[2]}d.netLoc&&!d.path&&(d.path="/");var E={scheme:d.scheme,netLoc:f.netLoc,path:null,params:f.params,query:f.query,fragment:f.fragment};if(!f.netLoc&&(E.netLoc=d.netLoc,f.path[0]!=="/"))if(!f.path)E.path=d.path,f.params||(E.params=d.params,f.query||(E.query=d.query));else{var p=d.path,g=p.substring(0,p.lastIndexOf("/")+1)+f.path;E.path=o.normalizePath(g)}return E.path===null&&(E.path=c.alwaysNormalize?o.normalizePath(f.path):f.path),o.buildURLFromParts(E)},parseURL:function(u){var l=n.exec(u);return l?{scheme:l[1]||"",netLoc:l[2]||"",path:l[3]||"",params:l[4]||"",query:l[5]||"",fragment:l[6]||""}:null},normalizePath:function(u){for(u=u.split("").reverse().join("").replace(s,"");u.length!==(u=u.replace(a,"")).length;);return u.split("").reverse().join("")},buildURLFromParts:function(u){return u.scheme+u.netLoc+u.path+u.params+u.query+u.fragment}};r.exports=o})()})(wy);var e0=wy.exports;function ig(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function Cr(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ig(Object(t),!0).forEach(function(n){_T(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):ig(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function _T(r,e,t){return e=bT(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Ft(){return Ft=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Ft.apply(this,arguments)}function FT(r,e){if(typeof r!="object"||r===null)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function bT(r){var e=FT(r,"string");return typeof e=="symbol"?e:String(e)}const De=Number.isFinite||function(r){return typeof r=="number"&&isFinite(r)};let D=function(r){return r.MEDIA_ATTACHING="hlsMediaAttaching",r.MEDIA_ATTACHED="hlsMediaAttached",r.MEDIA_DETACHING="hlsMediaDetaching",r.MEDIA_DETACHED="hlsMediaDetached",r.BUFFER_RESET="hlsBufferReset",r.BUFFER_CODECS="hlsBufferCodecs",r.BUFFER_CREATED="hlsBufferCreated",r.BUFFER_APPENDING="hlsBufferAppending",r.BUFFER_APPENDED="hlsBufferAppended",r.BUFFER_EOS="hlsBufferEos",r.BUFFER_FLUSHING="hlsBufferFlushing",r.BUFFER_FLUSHED="hlsBufferFlushed",r.MANIFEST_LOADING="hlsManifestLoading",r.MANIFEST_LOADED="hlsManifestLoaded",r.MANIFEST_PARSED="hlsManifestParsed",r.LEVEL_SWITCHING="hlsLevelSwitching",r.LEVEL_SWITCHED="hlsLevelSwitched",r.LEVEL_LOADING="hlsLevelLoading",r.LEVEL_LOADED="hlsLevelLoaded",r.LEVEL_UPDATED="hlsLevelUpdated",r.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",r.LEVELS_UPDATED="hlsLevelsUpdated",r.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",r.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",r.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",r.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",r.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",r.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",r.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",r.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",r.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",r.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",r.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",r.CUES_PARSED="hlsCuesParsed",r.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",r.INIT_PTS_FOUND="hlsInitPtsFound",r.FRAG_LOADING="hlsFragLoading",r.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",r.FRAG_LOADED="hlsFragLoaded",r.FRAG_DECRYPTED="hlsFragDecrypted",r.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",r.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",r.FRAG_PARSING_METADATA="hlsFragParsingMetadata",r.FRAG_PARSED="hlsFragParsed",r.FRAG_BUFFERED="hlsFragBuffered",r.FRAG_CHANGED="hlsFragChanged",r.FPS_DROP="hlsFpsDrop",r.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",r.ERROR="hlsError",r.DESTROYING="hlsDestroying",r.KEY_LOADING="hlsKeyLoading",r.KEY_LOADED="hlsKeyLoaded",r.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",r.BACK_BUFFER_REACHED="hlsBackBufferReached",r}({}),_e=function(r){return r.NETWORK_ERROR="networkError",r.MEDIA_ERROR="mediaError",r.KEY_SYSTEM_ERROR="keySystemError",r.MUX_ERROR="muxError",r.OTHER_ERROR="otherError",r}({}),J=function(r){return r.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",r.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",r.KEY_SYSTEM_NO_SESSION="keySystemNoSession",r.KEY_SYSTEM_NO_CONFIGURED_LICENSE="keySystemNoConfiguredLicense",r.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",r.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED="keySystemServerCertificateRequestFailed",r.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED="keySystemServerCertificateUpdateFailed",r.KEY_SYSTEM_SESSION_UPDATE_FAILED="keySystemSessionUpdateFailed",r.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED="keySystemStatusOutputRestricted",r.KEY_SYSTEM_STATUS_INTERNAL_ERROR="keySystemStatusInternalError",r.MANIFEST_LOAD_ERROR="manifestLoadError",r.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",r.MANIFEST_PARSING_ERROR="manifestParsingError",r.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",r.LEVEL_EMPTY_ERROR="levelEmptyError",r.LEVEL_LOAD_ERROR="levelLoadError",r.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",r.LEVEL_PARSING_ERROR="levelParsingError",r.LEVEL_SWITCH_ERROR="levelSwitchError",r.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",r.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",r.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",r.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",r.FRAG_LOAD_ERROR="fragLoadError",r.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",r.FRAG_DECRYPT_ERROR="fragDecryptError",r.FRAG_PARSING_ERROR="fragParsingError",r.FRAG_GAP="fragGap",r.REMUX_ALLOC_ERROR="remuxAllocError",r.KEY_LOAD_ERROR="keyLoadError",r.KEY_LOAD_TIMEOUT="keyLoadTimeOut",r.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",r.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",r.BUFFER_APPEND_ERROR="bufferAppendError",r.BUFFER_APPENDING_ERROR="bufferAppendingError",r.BUFFER_STALLED_ERROR="bufferStalledError",r.BUFFER_FULL_ERROR="bufferFullError",r.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",r.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",r.INTERNAL_EXCEPTION="internalException",r.INTERNAL_ABORTED="aborted",r.UNKNOWN="unknown",r}({});const zi=function(){},Mf={trace:zi,debug:zi,log:zi,warn:zi,info:zi,error:zi};let Ya=Mf;function RT(r){const e=self.console[r];return e?e.bind(self.console,`[${r}] >`):zi}function LT(r,...e){e.forEach(function(t){Ya[t]=r[t]?r[t].bind(r):RT(t)})}function IT(r,e){if(self.console&&r===!0||typeof r=="object"){LT(r,"debug","log","info","warn","error");try{Ya.log(`Debug logs enabled for "${e}" in hls.js version 1.4.4`)}catch{Ya=Mf}}else Ya=Mf}const G=Ya,kT=/^(\d+)x(\d+)$/,sg=/(.+?)=(".*?"|.*?)(?:,|$)/g;class ot{constructor(e){typeof e=="string"&&(e=ot.parseAttrList(e));for(const t in e)e.hasOwnProperty(t)&&(t.substring(0,2)==="X-"&&(this.clientAttrs=this.clientAttrs||[],this.clientAttrs.push(t)),this[t]=e[t])}decimalInteger(e){const t=parseInt(this[e],10);return t>Number.MAX_SAFE_INTEGER?1/0:t}hexadecimalInteger(e){if(this[e]){let t=(this[e]||"0x").slice(2);t=(t.length&1?"0":"")+t;const n=new Uint8Array(t.length/2);for(let i=0;i<t.length/2;i++)n[i]=parseInt(t.slice(i*2,i*2+2),16);return n}else return null}hexadecimalIntegerAsNumber(e){const t=parseInt(this[e],16);return t>Number.MAX_SAFE_INTEGER?1/0:t}decimalFloatingPoint(e){return parseFloat(this[e])}optionalFloat(e,t){const n=this[e];return n?parseFloat(n):t}enumeratedString(e){return this[e]}bool(e){return this[e]==="YES"}decimalResolution(e){const t=kT.exec(this[e]);if(t!==null)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}}static parseAttrList(e){let t;const n={},i='"';for(sg.lastIndex=0;(t=sg.exec(e))!==null;){let s=t[2];s.indexOf(i)===0&&s.lastIndexOf(i)===s.length-1&&(s=s.slice(1,-1));const a=t[1].trim();n[a]=s}return n}}function BT(r){return r!=="ID"&&r!=="CLASS"&&r!=="START-DATE"&&r!=="DURATION"&&r!=="END-DATE"&&r!=="END-ON-NEXT"}function OT(r){return r==="SCTE35-OUT"||r==="SCTE35-IN"}class _y{constructor(e,t){if(this.attr=void 0,this._startDate=void 0,this._endDate=void 0,this._badValueForSameId=void 0,t){const n=t.attr;for(const i in n)if(Object.prototype.hasOwnProperty.call(e,i)&&e[i]!==n[i]){G.warn(`DATERANGE tag attribute: "${i}" does not match for tags with ID: "${e.ID}"`),this._badValueForSameId=i;break}e=Ft(new ot({}),n,e)}if(this.attr=e,this._startDate=new Date(e["START-DATE"]),"END-DATE"in this.attr){const n=new Date(this.attr["END-DATE"]);De(n.getTime())&&(this._endDate=n)}}get id(){return this.attr.ID}get class(){return this.attr.CLASS}get startDate(){return this._startDate}get endDate(){if(this._endDate)return this._endDate;const e=this.duration;return e!==null?new Date(this._startDate.getTime()+e*1e3):null}get duration(){if("DURATION"in this.attr){const e=this.attr.decimalFloatingPoint("DURATION");if(De(e))return e}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}get plannedDuration(){return"PLANNED-DURATION"in this.attr?this.attr.decimalFloatingPoint("PLANNED-DURATION"):null}get endOnNext(){return this.attr.bool("END-ON-NEXT")}get isValid(){return!!this.id&&!this._badValueForSameId&&De(this.startDate.getTime())&&(this.duration===null||this.duration>=0)&&(!this.endOnNext||!!this.class)}}class ql{constructor(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}}var Xe={AUDIO:"audio",VIDEO:"video",AUDIOVIDEO:"audiovideo"};class Fy{constructor(e){this._byteRange=null,this._url=null,this.baseurl=void 0,this.relurl=void 0,this.elementaryStreams={[Xe.AUDIO]:null,[Xe.VIDEO]:null,[Xe.AUDIOVIDEO]:null},this.baseurl=e}setByteRange(e,t){const n=e.split("@",2),i=[];n.length===1?i[0]=t?t.byteRangeEndOffset:0:i[0]=parseInt(n[1]),i[1]=parseInt(n[0])+i[0],this._byteRange=i}get byteRange(){return this._byteRange?this._byteRange:[]}get byteRangeStartOffset(){return this.byteRange[0]}get byteRangeEndOffset(){return this.byteRange[1]}get url(){return!this._url&&this.baseurl&&this.relurl&&(this._url=e0.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""}set url(e){this._url=e}}class th extends Fy{constructor(e,t){super(t),this._decryptdata=null,this.rawProgramDateTime=null,this.programDateTime=null,this.tagList=[],this.duration=0,this.sn=0,this.levelkeys=void 0,this.type=void 0,this.loader=null,this.keyLoader=null,this.level=-1,this.cc=0,this.startPTS=void 0,this.endPTS=void 0,this.startDTS=void 0,this.endDTS=void 0,this.start=0,this.deltaPTS=void 0,this.maxStartPTS=void 0,this.minEndPTS=void 0,this.stats=new ql,this.urlId=0,this.data=void 0,this.bitrateTest=!1,this.title=null,this.initSegment=null,this.endList=void 0,this.gap=void 0,this.type=e}get decryptdata(){const{levelkeys:e}=this;if(!e&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkeys&&!this.levelkeys.NONE){const t=this.levelkeys.identity;if(t)this._decryptdata=t.getDecryptData(this.sn);else{const n=Object.keys(this.levelkeys);if(n.length===1)return this._decryptdata=this.levelkeys[n[0]].getDecryptData(this.sn)}}return this._decryptdata}get end(){return this.start+this.duration}get endProgramDateTime(){if(this.programDateTime===null||!De(this.programDateTime))return null;const e=De(this.duration)?this.duration:0;return this.programDateTime+e*1e3}get encrypted(){var e;if((e=this._decryptdata)!=null&&e.encrypted)return!0;if(this.levelkeys){const t=Object.keys(this.levelkeys),n=t.length;if(n>1||n===1&&this.levelkeys[t[0]].encrypted)return!0}return!1}setKeyFormat(e){if(this.levelkeys){const t=this.levelkeys[e];t&&!this._decryptdata&&(this._decryptdata=t.getDecryptData(this.sn))}}abortRequests(){var e,t;(e=this.loader)==null||e.abort(),(t=this.keyLoader)==null||t.abort()}setElementaryStreamInfo(e,t,n,i,s,a=!1){const{elementaryStreams:o}=this,u=o[e];if(!u){o[e]={startPTS:t,endPTS:n,startDTS:i,endDTS:s,partial:a};return}u.startPTS=Math.min(u.startPTS,t),u.endPTS=Math.max(u.endPTS,n),u.startDTS=Math.min(u.startDTS,i),u.endDTS=Math.max(u.endDTS,s)}clearElementaryStreamInfo(){const{elementaryStreams:e}=this;e[Xe.AUDIO]=null,e[Xe.VIDEO]=null,e[Xe.AUDIOVIDEO]=null}}class NT extends Fy{constructor(e,t,n,i,s){super(n),this.fragOffset=0,this.duration=0,this.gap=!1,this.independent=!1,this.relurl=void 0,this.fragment=void 0,this.index=void 0,this.stats=new ql,this.duration=e.decimalFloatingPoint("DURATION"),this.gap=e.bool("GAP"),this.independent=e.bool("INDEPENDENT"),this.relurl=e.enumeratedString("URI"),this.fragment=t,this.index=i;const a=e.enumeratedString("BYTERANGE");a&&this.setByteRange(a,s),s&&(this.fragOffset=s.fragOffset+s.duration)}get start(){return this.fragment.start+this.fragOffset}get end(){return this.start+this.duration}get loaded(){const{elementaryStreams:e}=this;return!!(e.audio||e.video||e.audiovideo)}}const PT=10;class MT{constructor(e){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.dateRanges=void 0,this.live=!0,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.availabilityDelay=void 0,this.misses=0,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.encryptedFragments=void 0,this.playlistParsingError=null,this.variableList=null,this.hasVariableRefs=!1,this.fragments=[],this.encryptedFragments=[],this.dateRanges={},this.url=e}reloaded(e){if(!e){this.advanced=!0,this.updated=!0;return}const t=this.lastPartSn-e.lastPartSn,n=this.lastPartIndex-e.lastPartIndex;this.updated=this.endSN!==e.endSN||!!n||!!t,this.advanced=this.endSN>e.endSN||t>0||t===0&&n>0,this.updated||this.advanced?this.misses=Math.floor(e.misses*.6):this.misses=e.misses+1,this.availabilityDelay=e.availabilityDelay}get hasProgramDateTime(){return this.fragments.length?De(this.fragments[this.fragments.length-1].programDateTime):!1}get levelTargetDuration(){return this.averagetargetduration||this.targetduration||PT}get drift(){const e=this.driftEndTime-this.driftStartTime;return e>0?(this.driftEnd-this.driftStart)*1e3/e:1}get edge(){return this.partEnd||this.fragmentEnd}get partEnd(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].end:this.fragmentEnd}get fragmentEnd(){var e;return(e=this.fragments)!=null&&e.length?this.fragments[this.fragments.length-1].end:0}get age(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}get lastPartIndex(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].index:-1}get lastPartSn(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}}function t0(r){return Uint8Array.from(atob(r),e=>e.charCodeAt(0))}function UT(r){const e=by(r).subarray(0,16),t=new Uint8Array(16);return t.set(e,16-e.length),t}function $T(r){const e=function(n,i,s){const a=n[i];n[i]=n[s],n[s]=a};e(r,0,3),e(r,1,2),e(r,4,5),e(r,6,7)}function zT(r){const e=r.split(":");let t=null;if(e[0]==="data"&&e.length===2){const n=e[1].split(";"),i=n[n.length-1].split(",");if(i.length===2){const s=i[0]==="base64",a=i[1];s?(n.splice(-1,1),t=t0(a)):t=UT(a)}}return t}function by(r){return Uint8Array.from(unescape(encodeURIComponent(r)),e=>e.charCodeAt(0))}var lt={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.fps",PLAYREADY:"com.microsoft.playready",WIDEVINE:"com.widevine.alpha"},gr={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.streamingkeydelivery",PLAYREADY:"com.microsoft.playready",WIDEVINE:"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"};function ag(r){switch(r){case gr.FAIRPLAY:return lt.FAIRPLAY;case gr.PLAYREADY:return lt.PLAYREADY;case gr.WIDEVINE:return lt.WIDEVINE;case gr.CLEARKEY:return lt.CLEARKEY}}var Ry={WIDEVINE:"edef8ba979d64acea3c827dcd51d21ed"};function VT(r){if(r===Ry.WIDEVINE)return lt.WIDEVINE}function og(r){switch(r){case lt.FAIRPLAY:return gr.FAIRPLAY;case lt.PLAYREADY:return gr.PLAYREADY;case lt.WIDEVINE:return gr.WIDEVINE;case lt.CLEARKEY:return gr.CLEARKEY}}function rh(r){const{drmSystems:e,widevineLicenseUrl:t}=r,n=e?[lt.FAIRPLAY,lt.WIDEVINE,lt.PLAYREADY,lt.CLEARKEY].filter(i=>!!e[i]):[];return!n[lt.WIDEVINE]&&t&&n.push(lt.WIDEVINE),n}const Ly=function(){return typeof self<"u"&&self.navigator&&self.navigator.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null}();function GT(r,e,t,n){let i;switch(r){case lt.FAIRPLAY:i=["cenc","sinf"];break;case lt.WIDEVINE:case lt.PLAYREADY:i=["cenc"];break;case lt.CLEARKEY:i=["cenc","keyids"];break;default:throw new Error(`Unknown key-system: ${r}`)}return WT(i,e,t,n)}function WT(r,e,t,n){return[{initDataTypes:r,persistentState:n.persistentState||"not-allowed",distinctiveIdentifier:n.distinctiveIdentifier||"not-allowed",sessionTypes:n.sessionTypes||[n.sessionType||"temporary"],audioCapabilities:e.map(s=>({contentType:`audio/mp4; codecs="${s}"`,robustness:n.audioRobustness||"",encryptionScheme:n.audioEncryptionScheme||null})),videoCapabilities:t.map(s=>({contentType:`video/mp4; codecs="${s}"`,robustness:n.videoRobustness||"",encryptionScheme:n.videoEncryptionScheme||null}))}]}function Yi(r,e,t){return Uint8Array.prototype.slice?r.slice(e,t):new Uint8Array(Array.prototype.slice.call(r,e,t))}const r0=(r,e)=>e+10<=r.length&&r[e]===73&&r[e+1]===68&&r[e+2]===51&&r[e+3]<255&&r[e+4]<255&&r[e+6]<128&&r[e+7]<128&&r[e+8]<128&&r[e+9]<128,Iy=(r,e)=>e+10<=r.length&&r[e]===51&&r[e+1]===68&&r[e+2]===73&&r[e+3]<255&&r[e+4]<255&&r[e+6]<128&&r[e+7]<128&&r[e+8]<128&&r[e+9]<128,ml=(r,e)=>{const t=e;let n=0;for(;r0(r,e);){n+=10;const i=Yl(r,e+6);n+=i,Iy(r,e+10)&&(n+=10),e+=n}if(n>0)return r.subarray(t,t+n)},Yl=(r,e)=>{let t=0;return t=(r[e]&127)<<21,t|=(r[e+1]&127)<<14,t|=(r[e+2]&127)<<7,t|=r[e+3]&127,t},HT=(r,e)=>r0(r,e)&&Yl(r,e+6)+10<=r.length-e,jT=r=>{const e=By(r);for(let t=0;t<e.length;t++){const n=e[t];if(ky(n))return QT(n)}},ky=r=>r&&r.key==="PRIV"&&r.info==="com.apple.streaming.transportStreamTimestamp",KT=r=>{const e=String.fromCharCode(r[0],r[1],r[2],r[3]),t=Yl(r,4),n=10;return{type:e,size:t,data:r.subarray(n,n+t)}},By=r=>{let e=0;const t=[];for(;r0(r,e);){const n=Yl(r,e+6);e+=10;const i=e+n;for(;e+8<i;){const s=KT(r.subarray(e)),a=qT(s);a&&t.push(a),e+=s.size+10}Iy(r,e)&&(e+=10)}return t},qT=r=>r.type==="PRIV"?YT(r):r.type[0]==="W"?ZT(r):XT(r),YT=r=>{if(r.size<2)return;const e=Fn(r.data,!0),t=new Uint8Array(r.data.subarray(e.length+1));return{key:r.type,info:e,data:t.buffer}},XT=r=>{if(r.size<2)return;if(r.type==="TXXX"){let t=1;const n=Fn(r.data.subarray(t),!0);t+=n.length+1;const i=Fn(r.data.subarray(t));return{key:r.type,info:n,data:i}}const e=Fn(r.data.subarray(1));return{key:r.type,data:e}},ZT=r=>{if(r.type==="WXXX"){if(r.size<2)return;let t=1;const n=Fn(r.data.subarray(t),!0);t+=n.length+1;const i=Fn(r.data.subarray(t));return{key:r.type,info:n,data:i}}const e=Fn(r.data);return{key:r.type,data:e}},QT=r=>{if(r.data.byteLength===8){const e=new Uint8Array(r.data),t=e[3]&1;let n=(e[4]<<23)+(e[5]<<15)+(e[6]<<7)+e[7];return n/=45,t&&(n+=4772185884e-2),Math.round(n)}},Fn=(r,e=!1)=>{const t=JT();if(t){const l=t.decode(r);if(e){const c=l.indexOf("\0");return c!==-1?l.substring(0,c):l}return l.replace(/\0/g,"")}const n=r.length;let i,s,a,o="",u=0;for(;u<n;){if(i=r[u++],i===0&&e)return o;if(i===0||i===3)continue;switch(i>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:o+=String.fromCharCode(i);break;case 12:case 13:s=r[u++],o+=String.fromCharCode((i&31)<<6|s&63);break;case 14:s=r[u++],a=r[u++],o+=String.fromCharCode((i&15)<<12|(s&63)<<6|(a&63)<<0);break}}return o};let nh;function JT(){return!nh&&typeof self.TextDecoder<"u"&&(nh=new self.TextDecoder("utf-8")),nh}const Cn={hexDump:function(r){let e="";for(let t=0;t<r.length;t++){let n=r[t].toString(16);n.length<2&&(n="0"+n),e+=n}return e}},vl=Math.pow(2,32)-1,eS=[].push,Oy={video:1,audio:2,id3:3,text:4};function Mt(r){return String.fromCharCode.apply(null,r)}function Ny(r,e){const t=r[e]<<8|r[e+1];return t<0?65536+t:t}function Re(r,e){const t=Py(r,e);return t<0?4294967296+t:t}function Py(r,e){return r[e]<<24|r[e+1]<<16|r[e+2]<<8|r[e+3]}function ih(r,e,t){r[e]=t>>24,r[e+1]=t>>16&255,r[e+2]=t>>8&255,r[e+3]=t&255}function $e(r,e){const t=[];if(!e.length)return t;const n=r.byteLength;for(let i=0;i<n;){const s=Re(r,i),a=Mt(r.subarray(i+4,i+8)),o=s>1?i+s:n;if(a===e[0])if(e.length===1)t.push(r.subarray(i+8,o));else{const u=$e(r.subarray(i+8,o),e.slice(1));u.length&&eS.apply(t,u)}i=o}return t}function tS(r){const e=[],t=r[0];let n=8;const i=Re(r,n);n+=4;const s=0,a=0;t===0?n+=8:n+=16,n+=2;let o=r.length+a;const u=Ny(r,n);n+=2;for(let l=0;l<u;l++){let c=n;const h=Re(r,c);c+=4;const f=h&2147483647;if((h&2147483648)>>>31===1)return G.warn("SIDX has hierarchical references (not supported)"),null;const m=Re(r,c);c+=4,e.push({referenceSize:f,subsegmentDuration:m,info:{duration:m/i,start:o,end:o+f-1}}),o+=f,c+=4,n=c}return{earliestPresentationTime:s,timescale:i,version:t,referencesCount:u,references:e}}function My(r){const e=[],t=$e(r,["moov","trak"]);for(let i=0;i<t.length;i++){const s=t[i],a=$e(s,["tkhd"])[0];if(a){let o=a[0],u=o===0?12:20;const l=Re(a,u),c=$e(s,["mdia","mdhd"])[0];if(c){o=c[0],u=o===0?12:20;const h=Re(c,u),f=$e(s,["mdia","hdlr"])[0];if(f){const d=Mt(f.subarray(8,12)),m={soun:Xe.AUDIO,vide:Xe.VIDEO}[d];if(m){const E=$e(s,["mdia","minf","stbl","stsd"])[0];let p;E&&(p=Mt(E.subarray(12,16))),e[l]={timescale:h,type:m},e[m]={timescale:h,id:l,codec:p}}}}}}return $e(r,["moov","mvex","trex"]).forEach(i=>{const s=Re(i,4),a=e[s];a&&(a.default={duration:Re(i,12),flags:Re(i,20)})}),e}function rS(r,e){if(!r||!e)return r;const t=e.keyId;return t&&e.isCommonEncryption&&$e(r,["moov","trak"]).forEach(i=>{const a=$e(i,["mdia","minf","stbl","stsd"])[0].subarray(8);let o=$e(a,["enca"]);const u=o.length>0;u||(o=$e(a,["encv"])),o.forEach(l=>{const c=u?l.subarray(28):l.subarray(78);$e(c,["sinf"]).forEach(f=>{const d=Uy(f);if(d){const m=d.subarray(8,24);m.some(E=>E!==0)||(G.log(`[eme] Patching keyId in 'enc${u?"a":"v"}>sinf>>tenc' box: ${Cn.hexDump(m)} -> ${Cn.hexDump(t)}`),d.set(t,8))}})})}),r}function Uy(r){const e=$e(r,["schm"])[0];if(e){const t=Mt(e.subarray(4,8));if(t==="cbcs"||t==="cenc")return $e(r,["schi","tenc"])[0]}return G.error("[eme] missing 'schm' box"),null}function nS(r,e){return $e(e,["moof","traf"]).reduce((t,n)=>{const i=$e(n,["tfdt"])[0],s=i[0],a=$e(n,["tfhd"]).reduce((o,u)=>{const l=Re(u,4),c=r[l];if(c){let h=Re(i,4);if(s===1){if(h===vl)return G.warn("[mp4-demuxer]: Ignoring assumed invalid signed 64-bit track fragment decode time"),o;h*=vl+1,h+=Re(i,8)}const f=c.timescale||9e4,d=h/f;if(isFinite(d)&&(o===null||d<o))return d}return o},null);return a!==null&&isFinite(a)&&(t===null||a<t)?a:t},null)}function iS(r,e){let t=0,n=0,i=0;const s=$e(r,["moof","traf"]);for(let a=0;a<s.length;a++){const o=s[a],u=$e(o,["tfhd"])[0],l=Re(u,4),c=e[l];if(!c)continue;const h=c.default,f=Re(u,0)|(h==null?void 0:h.flags);let d=h==null?void 0:h.duration;f&8&&(f&2?d=Re(u,12):d=Re(u,8));const m=c.timescale||9e4,E=$e(o,["trun"]);for(let p=0;p<E.length;p++){if(t=sS(E[p]),!t&&d){const g=Re(E[p],4);t=d*g}c.type===Xe.VIDEO?n+=t/m:c.type===Xe.AUDIO&&(i+=t/m)}}if(n===0&&i===0){let a=0;const o=$e(r,["sidx"]);for(let u=0;u<o.length;u++){const l=tS(o[u]);l!=null&&l.references&&(a+=l.references.reduce((c,h)=>c+h.info.duration||0,0))}return a}return n||i}function sS(r){const e=Re(r,0);let t=8;e&1&&(t+=4),e&4&&(t+=4);let n=0;const i=Re(r,4);for(let s=0;s<i;s++){if(e&256){const a=Re(r,t);n+=a,t+=4}e&512&&(t+=4),e&1024&&(t+=4),e&2048&&(t+=4)}return n}function aS(r,e,t){$e(e,["moof","traf"]).forEach(n=>{$e(n,["tfhd"]).forEach(i=>{const s=Re(i,4),a=r[s];if(!a)return;const o=a.timescale||9e4;$e(n,["tfdt"]).forEach(u=>{const l=u[0];let c=Re(u,4);if(l===0)c-=t*o,c=Math.max(c,0),ih(u,4,c);else{c*=Math.pow(2,32),c+=Re(u,8),c-=t*o,c=Math.max(c,0);const h=Math.floor(c/(vl+1)),f=Math.floor(c%(vl+1));ih(u,4,h),ih(u,8,f)}})})})}function oS(r){const e={valid:null,remainder:null},t=$e(r,["moof"]);if(t){if(t.length<2)return e.remainder=r,e}else return e;const n=t[t.length-1];return e.valid=Yi(r,0,n.byteOffset-8),e.remainder=Yi(r,n.byteOffset-8),e}function ts(r,e){const t=new Uint8Array(r.length+e.length);return t.set(r),t.set(e,r.length),t}function ug(r,e){const t=[],n=e.samples,i=e.timescale,s=e.id;let a=!1;return $e(n,["moof"]).map(u=>{const l=u.byteOffset-8;$e(u,["traf"]).map(h=>{const f=$e(h,["tfdt"]).map(d=>{const m=d[0];let E=Re(d,4);return m===1&&(E*=Math.pow(2,32),E+=Re(d,8)),E/i})[0];return f!==void 0&&(r=f),$e(h,["tfhd"]).map(d=>{const m=Re(d,4),E=Re(d,0)&16777215,p=(E&1)!==0,g=(E&2)!==0,v=(E&8)!==0;let y=0;const C=(E&16)!==0;let A=0;const T=(E&32)!==0;let S=8;m===s&&(p&&(S+=8),g&&(S+=4),v&&(y=Re(d,S),S+=4),C&&(A=Re(d,S),S+=4),T&&(S+=4),e.type==="video"&&(a=uS(e.codec)),$e(h,["trun"]).map(F=>{const k=F[0],R=Re(F,0)&16777215,V=(R&1)!==0;let $=0;const ne=(R&4)!==0,ve=(R&256)!==0;let H=0;const j=(R&512)!==0;let X=0;const B=(R&1024)!==0,U=(R&2048)!==0;let Z=0;const oe=Re(F,4);let re=8;V&&($=Re(F,re),re+=4),ne&&(re+=4);let ge=$+l;for(let Ce=0;Ce<oe;Ce++){if(ve?(H=Re(F,re),re+=4):H=y,j?(X=Re(F,re),re+=4):X=A,B&&(re+=4),U&&(k===0?Z=Re(F,re):Z=Py(F,re),re+=4),e.type===Xe.VIDEO){let ke=0;for(;ke<X;){const Ie=Re(n,ge);if(ge+=4,lS(a,n[ge])){const Oe=n.subarray(ge,ge+Ie);$y(Oe,a?2:1,r+Z/i,t)}ge+=Ie,ke+=Ie+4}}r+=H/i}}))})})}),t}function uS(r){if(!r)return!1;const e=r.indexOf("."),t=e<0?r:r.substring(0,e);return t==="hvc1"||t==="hev1"||t==="dvh1"||t==="dvhe"}function lS(r,e){if(r){const t=e>>1&63;return t===39||t===40}else return(e&31)===6}function $y(r,e,t,n){const i=zy(r);let s=0;s+=e;let a=0,o=0,u=!1,l=0;for(;s<i.length;){a=0;do{if(s>=i.length)break;l=i[s++],a+=l}while(l===255);o=0;do{if(s>=i.length)break;l=i[s++],o+=l}while(l===255);const c=i.length-s;if(!u&&a===4&&s<i.length){if(u=!0,i[s++]===181){const f=Ny(i,s);if(s+=2,f===49){const d=Re(i,s);if(s+=4,d===1195456820){const m=i[s++];if(m===3){const E=i[s++],p=31&E,g=64&E,v=g?2+p*3:0,y=new Uint8Array(v);if(g){y[0]=E;for(let C=1;C<v;C++)y[C]=i[s++]}n.push({type:m,payloadType:a,pts:t,bytes:y})}}}}}else if(a===5&&o<c){if(u=!0,o>16){const h=[];for(let m=0;m<16;m++){const E=i[s++].toString(16);h.push(E.length==1?"0"+E:E),(m===3||m===5||m===7||m===9)&&h.push("-")}const f=o-16,d=new Uint8Array(f);for(let m=0;m<f;m++)d[m]=i[s++];n.push({payloadType:a,pts:t,uuid:h.join(""),userData:Fn(d),userDataBytes:d})}}else if(o<c)s+=o;else if(o>c)break}}function zy(r){const e=r.byteLength,t=[];let n=1;for(;n<e-2;)r[n]===0&&r[n+1]===0&&r[n+2]===3?(t.push(n+2),n+=2):n++;if(t.length===0)return r;const i=e-t.length,s=new Uint8Array(i);let a=0;for(n=0;n<i;a++,n++)a===t[0]&&(a++,t.shift()),s[n]=r[a];return s}function cS(r){const e=r[0];let t="",n="",i=0,s=0,a=0,o=0,u=0,l=0;if(e===0){for(;Mt(r.subarray(l,l+1))!=="\0";)t+=Mt(r.subarray(l,l+1)),l+=1;for(t+=Mt(r.subarray(l,l+1)),l+=1;Mt(r.subarray(l,l+1))!=="\0";)n+=Mt(r.subarray(l,l+1)),l+=1;n+=Mt(r.subarray(l,l+1)),l+=1,i=Re(r,12),s=Re(r,16),o=Re(r,20),u=Re(r,24),l=28}else if(e===1){l+=4,i=Re(r,l),l+=4;const h=Re(r,l);l+=4;const f=Re(r,l);for(l+=4,a=2**32*h+f,Number.isSafeInteger(a)||(a=Number.MAX_SAFE_INTEGER,G.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),o=Re(r,l),l+=4,u=Re(r,l),l+=4;Mt(r.subarray(l,l+1))!=="\0";)t+=Mt(r.subarray(l,l+1)),l+=1;for(t+=Mt(r.subarray(l,l+1)),l+=1;Mt(r.subarray(l,l+1))!=="\0";)n+=Mt(r.subarray(l,l+1)),l+=1;n+=Mt(r.subarray(l,l+1)),l+=1}const c=r.subarray(l,r.byteLength);return{schemeIdUri:t,value:n,timeScale:i,presentationTime:a,presentationTimeDelta:s,eventDuration:o,id:u,payload:c}}function hS(r,...e){const t=e.length;let n=8,i=t;for(;i--;)n+=e[i].byteLength;const s=new Uint8Array(n);for(s[0]=n>>24&255,s[1]=n>>16&255,s[2]=n>>8&255,s[3]=n&255,s.set(r,4),i=0,n=8;i<t;i++)s.set(e[i],n),n+=e[i].byteLength;return s}function fS(r,e,t){if(r.byteLength!==16)throw new RangeError("Invalid system id");let n,i;if(e){n=1,i=new Uint8Array(e.length*16);for(let o=0;o<e.length;o++){const u=e[o];if(u.byteLength!==16)throw new RangeError("Invalid key");i.set(u,o*16)}}else n=0,i=new Uint8Array;let s;n>0?(s=new Uint8Array(4),e.length>0&&new DataView(s.buffer).setUint32(0,e.length,!1)):s=new Uint8Array;const a=new Uint8Array(4);return t&&t.byteLength>0&&new DataView(a.buffer).setUint32(0,t.byteLength,!1),hS([112,115,115,104],new Uint8Array([n,0,0,0]),r,s,i,a,t||new Uint8Array)}function dS(r){if(!(r instanceof ArrayBuffer)||r.byteLength<32)return null;const e={version:0,systemId:"",kids:null,data:null},t=new DataView(r),n=t.getUint32(0);if(r.byteLength!==n&&n>44||t.getUint32(4)!==1886614376||(e.version=t.getUint32(8)>>>24,e.version>1))return null;e.systemId=Cn.hexDump(new Uint8Array(r,12,16));const s=t.getUint32(28);if(e.version===0){if(n-32<s)return null;e.data=new Uint8Array(r,32,s)}else if(e.version===1){e.kids=[];for(let a=0;a<s;a++)e.kids.push(new Uint8Array(r,32+a*16,16))}return e}let du={};class Eo{static clearKeyUriToKeyIdMap(){du={}}constructor(e,t,n,i=[1],s=null){this.uri=void 0,this.method=void 0,this.keyFormat=void 0,this.keyFormatVersions=void 0,this.encrypted=void 0,this.isCommonEncryption=void 0,this.iv=null,this.key=null,this.keyId=null,this.pssh=null,this.method=e,this.uri=t,this.keyFormat=n,this.keyFormatVersions=i,this.iv=s,this.encrypted=e?e!=="NONE":!1,this.isCommonEncryption=this.encrypted&&e!=="AES-128"}isSupported(){if(this.method){if(this.method==="AES-128"||this.method==="NONE")return!0;if(this.keyFormat==="identity")return this.method==="SAMPLE-AES";switch(this.keyFormat){case gr.FAIRPLAY:case gr.WIDEVINE:case gr.PLAYREADY:case gr.CLEARKEY:return["ISO-23001-7","SAMPLE-AES","SAMPLE-AES-CENC","SAMPLE-AES-CTR"].indexOf(this.method)!==-1}}return!1}getDecryptData(e){if(!this.encrypted||!this.uri)return null;if(this.method==="AES-128"&&this.uri&&!this.iv){typeof e!="number"&&(this.method==="AES-128"&&!this.iv&&G.warn(`missing IV for initialization segment with method="${this.method}" - compliance issue`),e=0);const n=pS(e);return new Eo(this.method,this.uri,"identity",this.keyFormatVersions,n)}const t=zT(this.uri);if(t)switch(this.keyFormat){case gr.WIDEVINE:this.pssh=t,t.length>=22&&(this.keyId=t.subarray(t.length-22,t.length-6));break;case gr.PLAYREADY:{const n=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);this.pssh=fS(n,null,t);const i=new Uint16Array(t.buffer,t.byteOffset,t.byteLength/2),s=String.fromCharCode.apply(null,Array.from(i)),a=s.substring(s.indexOf("<"),s.length),l=new DOMParser().parseFromString(a,"text/xml").getElementsByTagName("KID")[0];if(l){const c=l.childNodes[0]?l.childNodes[0].nodeValue:l.getAttribute("VALUE");if(c){const h=t0(c).subarray(0,16);$T(h),this.keyId=h}}break}default:{let n=t.subarray(0,16);if(n.length!==16){const i=new Uint8Array(16);i.set(n,16-n.length),n=i}this.keyId=n;break}}if(!this.keyId||this.keyId.byteLength!==16){let n=du[this.uri];if(!n){const i=Object.keys(du).length%Number.MAX_SAFE_INTEGER;n=new Uint8Array(16),new DataView(n.buffer,12,4).setUint32(0,i),du[this.uri]=n}this.keyId=n}return this}}function pS(r){const e=new Uint8Array(16);for(let t=12;t<16;t++)e[t]=r>>8*(15-t)&255;return e}const Vy=/\{\$([a-zA-Z0-9-_]+)\}/g;function lg(r){return Vy.test(r)}function fr(r,e,t){if(r.variableList!==null||r.hasVariableRefs)for(let n=t.length;n--;){const i=t[n],s=e[i];s&&(e[i]=Uf(r,s))}}function Uf(r,e){if(r.variableList!==null||r.hasVariableRefs){const t=r.variableList;return e.replace(Vy,n=>{const i=n.substring(2,n.length-1),s=t==null?void 0:t[i];return s===void 0?(r.playlistParsingError||(r.playlistParsingError=new Error(`Missing preceding EXT-X-DEFINE tag for Variable Reference: "${i}"`)),n):s})}return e}function cg(r,e,t){let n=r.variableList;n||(r.variableList=n={});let i,s;if("QUERYPARAM"in e){i=e.QUERYPARAM;try{const a=new self.URL(t).searchParams;if(a.has(i))s=a.get(i);else throw new Error(`"${i}" does not match any query parameter in URI: "${t}"`)}catch(a){r.playlistParsingError||(r.playlistParsingError=new Error(`EXT-X-DEFINE QUERYPARAM: ${a.message}`))}}else i=e.NAME,s=e.VALUE;i in n?r.playlistParsingError||(r.playlistParsingError=new Error(`EXT-X-DEFINE duplicate Variable Name declarations: "${i}"`)):n[i]=s||""}function gS(r,e,t){const n=e.IMPORT;if(t&&n in t){let i=r.variableList;i||(r.variableList=i={}),i[n]=t[n]}else r.playlistParsingError||(r.playlistParsingError=new Error(`EXT-X-DEFINE IMPORT attribute not found in Multivariant Playlist: "${n}"`))}function Xl(){if(!(typeof self>"u"))return self.MediaSource||self.WebKitMediaSource}const mS={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,av01:!0,drac:!0,dva1:!0,dvav:!0,dvh1:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0},text:{stpp:!0,wvtt:!0}},hg=Xl();function vS(r,e){const t=mS[e];return!!t&&t[r.slice(0,4)]===!0}function sh(r,e){var t;return(t=hg==null?void 0:hg.isTypeSupported(`${e||"video"}/mp4;codecs="${r}"`))!=null?t:!1}const fg=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-(SESSION-DATA|SESSION-KEY|DEFINE|CONTENT-STEERING|START):([^\r\n]*)[\r\n]+/g,dg=/#EXT-X-MEDIA:(.*)/g,ES=/^#EXT(?:INF|-X-TARGETDURATION):/m,pg=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[\S ]*)/.source,/#EXT-X-BYTERANGE:*(.+)/.source,/#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/#.*/.source].join("|"),"g"),yS=new RegExp([/#(EXTM3U)/.source,/#EXT-X-(DATERANGE|DEFINE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|"));class dn{static findGroup(e,t){for(let n=0;n<e.length;n++){const i=e[n];if(i.id===t)return i}}static convertAVC1ToAVCOTI(e){const t=e.split(".");if(t.length>2){let n=t.shift()+".";return n+=parseInt(t.shift()).toString(16),n+=("000"+parseInt(t.shift()).toString(16)).slice(-4),n}return e}static resolve(e,t){return e0.buildAbsoluteURL(t,e,{alwaysNormalize:!0})}static isMediaPlaylist(e){return ES.test(e)}static parseMasterPlaylist(e,t){const n=lg(e),i={contentSteering:null,levels:[],playlistParsingError:null,sessionData:null,sessionKeys:null,startTimeOffset:null,variableList:null,hasVariableRefs:n},s=[];fg.lastIndex=0;let a;for(;(a=fg.exec(e))!=null;)if(a[1]){var o;const l=new ot(a[1]);fr(i,l,["CODECS","SUPPLEMENTAL-CODECS","ALLOWED-CPC","PATHWAY-ID","STABLE-VARIANT-ID","AUDIO","VIDEO","SUBTITLES","CLOSED-CAPTIONS","NAME"]);const c=Uf(i,a[2]),h={attrs:l,bitrate:l.decimalInteger("AVERAGE-BANDWIDTH")||l.decimalInteger("BANDWIDTH"),name:l.NAME,url:dn.resolve(c,t)},f=l.decimalResolution("RESOLUTION");f&&(h.width=f.width,h.height=f.height),xS((l.CODECS||"").split(/[ ,]+/).filter(d=>d),h),h.videoCodec&&h.videoCodec.indexOf("avc1")!==-1&&(h.videoCodec=dn.convertAVC1ToAVCOTI(h.videoCodec)),(o=h.unknownCodecs)!=null&&o.length||s.push(h),i.levels.push(h)}else if(a[3]){const l=a[3],c=a[4];switch(l){case"SESSION-DATA":{const h=new ot(c);fr(i,h,["DATA-ID","LANGUAGE","VALUE","URI"]);const f=h["DATA-ID"];f&&(i.sessionData===null&&(i.sessionData={}),i.sessionData[f]=h);break}case"SESSION-KEY":{const h=gg(c,t,i);h.encrypted&&h.isSupported()?(i.sessionKeys===null&&(i.sessionKeys=[]),i.sessionKeys.push(h)):G.warn(`[Keys] Ignoring invalid EXT-X-SESSION-KEY tag: "${c}"`);break}case"DEFINE":{{const h=new ot(c);fr(i,h,["NAME","VALUE","QUERYPARAM"]),cg(i,h,t)}break}case"CONTENT-STEERING":{const h=new ot(c);fr(i,h,["SERVER-URI","PATHWAY-ID"]),i.contentSteering={uri:dn.resolve(h["SERVER-URI"],t),pathwayId:h["PATHWAY-ID"]||"."};break}case"START":{i.startTimeOffset=mg(c);break}}}const u=s.length>0&&s.length<i.levels.length;return i.levels=u?s:i.levels,i.levels.length===0&&(i.playlistParsingError=new Error("no levels found in manifest")),i}static parseMasterPlaylistMedia(e,t,n){let i;const s={},a=n.levels,o={AUDIO:a.map(l=>({id:l.attrs.AUDIO,audioCodec:l.audioCodec})),SUBTITLES:a.map(l=>({id:l.attrs.SUBTITLES,textCodec:l.textCodec})),"CLOSED-CAPTIONS":[]};let u=0;for(dg.lastIndex=0;(i=dg.exec(e))!==null;){const l=new ot(i[1]),c=l.TYPE;if(c){const h=o[c],f=s[c]||[];s[c]=f,fr(n,l,["URI","GROUP-ID","LANGUAGE","ASSOC-LANGUAGE","STABLE-RENDITION-ID","NAME","INSTREAM-ID","CHARACTERISTICS","CHANNELS"]);const d={attrs:l,bitrate:0,id:u++,groupId:l["GROUP-ID"]||"",instreamId:l["INSTREAM-ID"],name:l.NAME||l.LANGUAGE||"",type:c,default:l.bool("DEFAULT"),autoselect:l.bool("AUTOSELECT"),forced:l.bool("FORCED"),lang:l.LANGUAGE,url:l.URI?dn.resolve(l.URI,t):""};if(h!=null&&h.length){const m=dn.findGroup(h,d.groupId)||h[0];vg(d,m,"audioCodec"),vg(d,m,"textCodec")}f.push(d)}}return s}static parseLevelPlaylist(e,t,n,i,s,a){const o=new MT(t),u=o.fragments;let l=null,c=0,h=0,f=0,d=0,m=null,E=new th(i,t),p,g,v,y=-1,C=!1;for(pg.lastIndex=0,o.m3u8=e,o.hasVariableRefs=lg(e);(p=pg.exec(e))!==null;){C&&(C=!1,E=new th(i,t),E.start=f,E.sn=c,E.cc=d,E.level=n,l&&(E.initSegment=l,E.rawProgramDateTime=l.rawProgramDateTime,l.rawProgramDateTime=null));const F=p[1];if(F){E.duration=parseFloat(F);const k=(" "+p[2]).slice(1);E.title=k||null,E.tagList.push(k?["INF",F,k]:["INF",F])}else if(p[3]){if(De(E.duration)){E.start=f,v&&xg(E,v,o),E.sn=c,E.level=n,E.cc=d,E.urlId=s,u.push(E);const k=(" "+p[3]).slice(1);E.relurl=Uf(o,k),Eg(E,m),m=E,f+=E.duration,c++,h=0,C=!0}}else if(p[4]){const k=(" "+p[4]).slice(1);m?E.setByteRange(k,m):E.setByteRange(k)}else if(p[5])E.rawProgramDateTime=(" "+p[5]).slice(1),E.tagList.push(["PROGRAM-DATE-TIME",E.rawProgramDateTime]),y===-1&&(y=u.length);else{if(p=p[0].match(yS),!p){G.warn("No matches on slow regex match for level playlist!");continue}for(g=1;g<p.length&&!(typeof p[g]<"u");g++);const k=(" "+p[g]).slice(1),R=(" "+p[g+1]).slice(1),V=p[g+2]?(" "+p[g+2]).slice(1):"";switch(k){case"PLAYLIST-TYPE":o.type=R.toUpperCase();break;case"MEDIA-SEQUENCE":c=o.startSN=parseInt(R);break;case"SKIP":{const $=new ot(R);fr(o,$,["RECENTLY-REMOVED-DATERANGES"]);const ne=$.decimalInteger("SKIPPED-SEGMENTS");if(De(ne)){o.skippedSegments=ne;for(let H=ne;H--;)u.unshift(null);c+=ne}const ve=$.enumeratedString("RECENTLY-REMOVED-DATERANGES");ve&&(o.recentlyRemovedDateranges=ve.split("	"));break}case"TARGETDURATION":o.targetduration=Math.max(parseInt(R),1);break;case"VERSION":o.version=parseInt(R);break;case"EXTM3U":break;case"ENDLIST":o.live=!1;break;case"#":(R||V)&&E.tagList.push(V?[R,V]:[R]);break;case"DISCONTINUITY":d++,E.tagList.push(["DIS"]);break;case"GAP":E.gap=!0,E.tagList.push([k]);break;case"BITRATE":E.tagList.push([k,R]);break;case"DATERANGE":{const $=new ot(R);fr(o,$,["ID","CLASS","START-DATE","END-DATE","SCTE35-CMD","SCTE35-OUT","SCTE35-IN"]),fr(o,$,$.clientAttrs);const ne=new _y($,o.dateRanges[$.ID]);ne.isValid||o.skippedSegments?o.dateRanges[ne.id]=ne:G.warn(`Ignoring invalid DATERANGE tag: "${R}"`),E.tagList.push(["EXT-X-DATERANGE",R]);break}case"DEFINE":{{const $=new ot(R);fr(o,$,["NAME","VALUE","IMPORT","QUERYPARAM"]),"IMPORT"in $?gS(o,$,a):cg(o,$,t)}break}case"DISCONTINUITY-SEQUENCE":d=parseInt(R);break;case"KEY":{const $=gg(R,t,o);if($.isSupported()){if($.method==="NONE"){v=void 0;break}v||(v={}),v[$.keyFormat]&&(v=Ft({},v)),v[$.keyFormat]=$}else G.warn(`[Keys] Ignoring invalid EXT-X-KEY tag: "${R}"`);break}case"START":o.startTimeOffset=mg(R);break;case"MAP":{const $=new ot(R);if(fr(o,$,["BYTERANGE","URI"]),E.duration){const ne=new th(i,t);yg(ne,$,n,v),l=ne,E.initSegment=l,l.rawProgramDateTime&&!E.rawProgramDateTime&&(E.rawProgramDateTime=l.rawProgramDateTime)}else yg(E,$,n,v),l=E,C=!0;break}case"SERVER-CONTROL":{const $=new ot(R);o.canBlockReload=$.bool("CAN-BLOCK-RELOAD"),o.canSkipUntil=$.optionalFloat("CAN-SKIP-UNTIL",0),o.canSkipDateRanges=o.canSkipUntil>0&&$.bool("CAN-SKIP-DATERANGES"),o.partHoldBack=$.optionalFloat("PART-HOLD-BACK",0),o.holdBack=$.optionalFloat("HOLD-BACK",0);break}case"PART-INF":{const $=new ot(R);o.partTarget=$.decimalFloatingPoint("PART-TARGET");break}case"PART":{let $=o.partList;$||($=o.partList=[]);const ne=h>0?$[$.length-1]:void 0,ve=h++,H=new ot(R);fr(o,H,["BYTERANGE","URI"]);const j=new NT(H,E,t,ve,ne);$.push(j),E.duration+=j.duration;break}case"PRELOAD-HINT":{const $=new ot(R);fr(o,$,["URI"]),o.preloadHint=$;break}case"RENDITION-REPORT":{const $=new ot(R);fr(o,$,["URI"]),o.renditionReports=o.renditionReports||[],o.renditionReports.push($);break}default:G.warn(`line parsed but not handled: ${p}`);break}}}m&&!m.relurl?(u.pop(),f-=m.duration,o.partList&&(o.fragmentHint=m)):o.partList&&(Eg(E,m),E.cc=d,o.fragmentHint=E,v&&xg(E,v,o));const A=u.length,T=u[0],S=u[A-1];if(f+=o.skippedSegments*o.targetduration,f>0&&A&&S){o.averagetargetduration=f/A;const F=S.sn;o.endSN=F!=="initSegment"?F:0,o.live||(S.endList=!0),T&&(o.startCC=T.cc)}else o.endSN=0,o.startCC=0;return o.fragmentHint&&(f+=o.fragmentHint.duration),o.totalduration=f,o.endCC=d,y>0&&AS(u,y),o}}function gg(r,e,t){var n,i;const s=new ot(r);fr(t,s,["KEYFORMAT","KEYFORMATVERSIONS","URI","IV","URI"]);const a=(n=s.METHOD)!=null?n:"",o=s.URI,u=s.hexadecimalInteger("IV"),l=s.KEYFORMATVERSIONS,c=(i=s.KEYFORMAT)!=null?i:"identity";o&&s.IV&&!u&&G.error(`Invalid IV: ${s.IV}`);const h=o?dn.resolve(o,e):"",f=(l||"1").split("/").map(Number).filter(Number.isFinite);return new Eo(a,h,c,f,u)}function mg(r){const t=new ot(r).decimalFloatingPoint("TIME-OFFSET");return De(t)?t:null}function xS(r,e){["video","audio","text"].forEach(t=>{const n=r.filter(i=>vS(i,t));if(n.length){const i=n.filter(s=>s.lastIndexOf("avc1",0)===0||s.lastIndexOf("mp4a",0)===0);e[`${t}Codec`]=i.length>0?i[0]:n[0],r=r.filter(s=>n.indexOf(s)===-1)}}),e.unknownCodecs=r}function vg(r,e,t){const n=e[t];n&&(r[t]=n)}function AS(r,e){let t=r[e];for(let n=e;n--;){const i=r[n];if(!i)return;i.programDateTime=t.programDateTime-i.duration*1e3,t=i}}function Eg(r,e){r.rawProgramDateTime?r.programDateTime=Date.parse(r.rawProgramDateTime):e!=null&&e.programDateTime&&(r.programDateTime=e.endProgramDateTime),De(r.programDateTime)||(r.programDateTime=null,r.rawProgramDateTime=null)}function yg(r,e,t,n){r.relurl=e.URI,e.BYTERANGE&&r.setByteRange(e.BYTERANGE),r.level=t,r.sn="initSegment",n&&(r.levelkeys=n),r.initSegment=null}function xg(r,e,t){r.levelkeys=e;const{encryptedFragments:n}=t;(!n.length||n[n.length-1].levelkeys!==e)&&Object.keys(e).some(i=>e[i].isCommonEncryption)&&n.push(r)}var Ge={MANIFEST:"manifest",LEVEL:"level",AUDIO_TRACK:"audioTrack",SUBTITLE_TRACK:"subtitleTrack"},Fe={MAIN:"main",AUDIO:"audio",SUBTITLE:"subtitle"};function Ag(r){const{type:e}=r;switch(e){case Ge.AUDIO_TRACK:return Fe.AUDIO;case Ge.SUBTITLE_TRACK:return Fe.SUBTITLE;default:return Fe.MAIN}}function ah(r,e){let t=r.url;return(t===void 0||t.indexOf("data:")===0)&&(t=e.url),t}class CS{constructor(e){this.hls=void 0,this.loaders=Object.create(null),this.variableList=null,this.hls=e,this.registerListeners()}startLoad(e){}stopLoad(){this.destroyInternalLoaders()}registerListeners(){const{hls:e}=this;e.on(D.MANIFEST_LOADING,this.onManifestLoading,this),e.on(D.LEVEL_LOADING,this.onLevelLoading,this),e.on(D.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.on(D.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)}unregisterListeners(){const{hls:e}=this;e.off(D.MANIFEST_LOADING,this.onManifestLoading,this),e.off(D.LEVEL_LOADING,this.onLevelLoading,this),e.off(D.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.off(D.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)}createInternalLoader(e){const t=this.hls.config,n=t.pLoader,i=t.loader,s=n||i,a=new s(t);return this.loaders[e.type]=a,a}getInternalLoader(e){return this.loaders[e.type]}resetInternalLoader(e){this.loaders[e]&&delete this.loaders[e]}destroyInternalLoaders(){for(const e in this.loaders){const t=this.loaders[e];t&&t.destroy(),this.resetInternalLoader(e)}}destroy(){this.variableList=null,this.unregisterListeners(),this.destroyInternalLoaders()}onManifestLoading(e,t){const{url:n}=t;this.variableList=null,this.load({id:null,level:0,responseType:"text",type:Ge.MANIFEST,url:n,deliveryDirectives:null})}onLevelLoading(e,t){const{id:n,level:i,url:s,deliveryDirectives:a}=t;this.load({id:n,level:i,responseType:"text",type:Ge.LEVEL,url:s,deliveryDirectives:a})}onAudioTrackLoading(e,t){const{id:n,groupId:i,url:s,deliveryDirectives:a}=t;this.load({id:n,groupId:i,level:null,responseType:"text",type:Ge.AUDIO_TRACK,url:s,deliveryDirectives:a})}onSubtitleTrackLoading(e,t){const{id:n,groupId:i,url:s,deliveryDirectives:a}=t;this.load({id:n,groupId:i,level:null,responseType:"text",type:Ge.SUBTITLE_TRACK,url:s,deliveryDirectives:a})}load(e){var t;const n=this.hls.config;let i=this.getInternalLoader(e);if(i){const l=i.context;if(l&&l.url===e.url){G.trace("[playlist-loader]: playlist request ongoing");return}G.log(`[playlist-loader]: aborting previous loader for type: ${e.type}`),i.abort()}let s;if(e.type===Ge.MANIFEST?s=n.manifestLoadPolicy.default:s=Ft({},n.playlistLoadPolicy.default,{timeoutRetry:null,errorRetry:null}),i=this.createInternalLoader(e),(t=e.deliveryDirectives)!=null&&t.part){let l;if(e.type===Ge.LEVEL&&e.level!==null?l=this.hls.levels[e.level].details:e.type===Ge.AUDIO_TRACK&&e.id!==null?l=this.hls.audioTracks[e.id].details:e.type===Ge.SUBTITLE_TRACK&&e.id!==null&&(l=this.hls.subtitleTracks[e.id].details),l){const c=l.partTarget,h=l.targetduration;if(c&&h){const f=Math.max(c*3,h*.8)*1e3;s=Ft({},s,{maxTimeToFirstByteMs:Math.min(f,s.maxTimeToFirstByteMs),maxLoadTimeMs:Math.min(f,s.maxTimeToFirstByteMs)})}}}const a=s.errorRetry||s.timeoutRetry||{},o={loadPolicy:s,timeout:s.maxLoadTimeMs,maxRetry:a.maxNumRetry||0,retryDelay:a.retryDelayMs||0,maxRetryDelay:a.maxRetryDelayMs||0},u={onSuccess:(l,c,h,f)=>{const d=this.getInternalLoader(h);this.resetInternalLoader(h.type);const m=l.data;if(m.indexOf("#EXTM3U")!==0){this.handleManifestParsingError(l,h,new Error("no EXTM3U delimiter"),f||null,c);return}c.parsing.start=performance.now(),dn.isMediaPlaylist(m)?this.handleTrackOrLevelPlaylist(l,c,h,f||null,d):this.handleMasterPlaylist(l,c,h,f)},onError:(l,c,h,f)=>{this.handleNetworkError(c,h,!1,l,f)},onTimeout:(l,c,h)=>{this.handleNetworkError(c,h,!0,void 0,l)}};i.load(e,o,u)}handleMasterPlaylist(e,t,n,i){const s=this.hls,a=e.data,o=ah(e,n),u=dn.parseMasterPlaylist(a,o);if(u.playlistParsingError){this.handleManifestParsingError(e,n,u.playlistParsingError,i,t);return}const{contentSteering:l,levels:c,sessionData:h,sessionKeys:f,startTimeOffset:d,variableList:m}=u;this.variableList=m;const{AUDIO:E=[],SUBTITLES:p,"CLOSED-CAPTIONS":g}=dn.parseMasterPlaylistMedia(a,o,u);E.length&&!E.some(y=>!y.url)&&c[0].audioCodec&&!c[0].attrs.AUDIO&&(G.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),E.unshift({type:"main",name:"main",groupId:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new ot({}),bitrate:0,url:""})),s.trigger(D.MANIFEST_LOADED,{levels:c,audioTracks:E,subtitles:p,captions:g,contentSteering:l,url:o,stats:t,networkDetails:i,sessionData:h,sessionKeys:f,startTimeOffset:d,variableList:m})}handleTrackOrLevelPlaylist(e,t,n,i,s){const a=this.hls,{id:o,level:u,type:l}=n,c=ah(e,n),h=De(o)?o:0,f=De(u)?u:h,d=Ag(n),m=dn.parseLevelPlaylist(e.data,c,f,d,h,this.variableList);if(l===Ge.MANIFEST){const E={attrs:new ot({}),bitrate:0,details:m,name:"",url:c};a.trigger(D.MANIFEST_LOADED,{levels:[E],audioTracks:[],url:c,stats:t,networkDetails:i,sessionData:null,sessionKeys:null,contentSteering:null,startTimeOffset:null,variableList:null})}t.parsing.end=performance.now(),n.levelDetails=m,this.handlePlaylistLoaded(m,e,t,n,i,s)}handleManifestParsingError(e,t,n,i,s){this.hls.trigger(D.ERROR,{type:_e.NETWORK_ERROR,details:J.MANIFEST_PARSING_ERROR,fatal:t.type===Ge.MANIFEST,url:e.url,err:n,error:n,reason:n.message,response:e,context:t,networkDetails:i,stats:s})}handleNetworkError(e,t,n=!1,i,s){let a=`A network ${n?"timeout":"error"+(i?" (status "+i.code+")":"")} occurred while loading ${e.type}`;e.type===Ge.LEVEL?a+=`: ${e.level} id: ${e.id}`:(e.type===Ge.AUDIO_TRACK||e.type===Ge.SUBTITLE_TRACK)&&(a+=` id: ${e.id} group-id: "${e.groupId}"`);const o=new Error(a);G.warn(`[playlist-loader]: ${a}`);let u=J.UNKNOWN,l=!1;const c=this.getInternalLoader(e);switch(e.type){case Ge.MANIFEST:u=n?J.MANIFEST_LOAD_TIMEOUT:J.MANIFEST_LOAD_ERROR,l=!0;break;case Ge.LEVEL:u=n?J.LEVEL_LOAD_TIMEOUT:J.LEVEL_LOAD_ERROR,l=!1;break;case Ge.AUDIO_TRACK:u=n?J.AUDIO_TRACK_LOAD_TIMEOUT:J.AUDIO_TRACK_LOAD_ERROR,l=!1;break;case Ge.SUBTITLE_TRACK:u=n?J.SUBTITLE_TRACK_LOAD_TIMEOUT:J.SUBTITLE_LOAD_ERROR,l=!1;break}c&&this.resetInternalLoader(e.type);const h={type:_e.NETWORK_ERROR,details:u,fatal:l,url:e.url,loader:c,context:e,error:o,networkDetails:t,stats:s};if(i){const f=(t==null?void 0:t.url)||e.url;h.response=Cr({url:f,data:void 0},i)}this.hls.trigger(D.ERROR,h)}handlePlaylistLoaded(e,t,n,i,s,a){const o=this.hls,{type:u,level:l,id:c,groupId:h,deliveryDirectives:f}=i,d=ah(t,i),m=Ag(i),E=typeof i.level=="number"&&m===Fe.MAIN?l:void 0;if(!e.fragments.length){const g=new Error("No Segments found in Playlist");o.trigger(D.ERROR,{type:_e.NETWORK_ERROR,details:J.LEVEL_EMPTY_ERROR,fatal:!1,url:d,error:g,reason:g.message,response:t,context:i,level:E,parent:m,networkDetails:s,stats:n});return}e.targetduration||(e.playlistParsingError=new Error("Missing Target Duration"));const p=e.playlistParsingError;if(p){o.trigger(D.ERROR,{type:_e.NETWORK_ERROR,details:J.LEVEL_PARSING_ERROR,fatal:!1,url:d,error:p,reason:p.message,response:t,context:i,level:E,parent:m,networkDetails:s,stats:n});return}switch(e.live&&a&&(a.getCacheAge&&(e.ageHeader=a.getCacheAge()||0),(!a.getCacheAge||isNaN(e.ageHeader))&&(e.ageHeader=0)),u){case Ge.MANIFEST:case Ge.LEVEL:o.trigger(D.LEVEL_LOADED,{details:e,level:E||0,id:c||0,stats:n,networkDetails:s,deliveryDirectives:f});break;case Ge.AUDIO_TRACK:o.trigger(D.AUDIO_TRACK_LOADED,{details:e,id:c||0,groupId:h||"",stats:n,networkDetails:s,deliveryDirectives:f});break;case Ge.SUBTITLE_TRACK:o.trigger(D.SUBTITLE_TRACK_LOADED,{details:e,id:c||0,groupId:h||"",stats:n,networkDetails:s,deliveryDirectives:f});break}}}function Gy(r,e){let t;try{t=new Event("addtrack")}catch{t=document.createEvent("Event"),t.initEvent("addtrack",!1,!1)}t.track=r,e.dispatchEvent(t)}function Wy(r,e){const t=r.mode;if(t==="disabled"&&(r.mode="hidden"),r.cues&&!r.cues.getCueById(e.id))try{if(r.addCue(e),!r.cues.getCueById(e.id))throw new Error(`addCue is failed for: ${e}`)}catch(n){G.debug(`[texttrack-utils]: ${n}`);const i=new self.TextTrackCue(e.startTime,e.endTime,e.text);i.id=e.id,r.addCue(i)}t==="disabled"&&(r.mode=t)}function Vs(r){const e=r.mode;if(e==="disabled"&&(r.mode="hidden"),r.cues)for(let t=r.cues.length;t--;)r.removeCue(r.cues[t]);e==="disabled"&&(r.mode=e)}function $f(r,e,t,n){const i=r.mode;if(i==="disabled"&&(r.mode="hidden"),r.cues&&r.cues.length>0){const s=SS(r.cues,e,t);for(let a=0;a<s.length;a++)(!n||n(s[a]))&&r.removeCue(s[a])}i==="disabled"&&(r.mode=i)}function TS(r,e){if(e<r[0].startTime)return 0;const t=r.length-1;if(e>r[t].endTime)return-1;let n=0,i=t;for(;n<=i;){const s=Math.floor((i+n)/2);if(e<r[s].startTime)i=s-1;else if(e>r[s].startTime&&n<t)n=s+1;else return s}return r[n].startTime-e<e-r[i].startTime?n:i}function SS(r,e,t){const n=[],i=TS(r,e);if(i>-1)for(let s=i,a=r.length;s<a;s++){const o=r[s];if(o.startTime>=e&&o.endTime<=t)n.push(o);else if(o.startTime>t)return n}return n}var fn={audioId3:"org.id3",dateRange:"com.apple.quicktime.HLS",emsg:"https://aomedia.org/emsg/ID3"};const DS=.25;function zf(){if(!(typeof self>"u"))return self.WebKitDataCue||self.VTTCue||self.TextTrackCue}const pu=(()=>{const r=zf();try{new r(0,Number.POSITIVE_INFINITY,"")}catch{return Number.MAX_VALUE}return Number.POSITIVE_INFINITY})();function oh(r,e){return r.getTime()/1e3-e}function wS(r){return Uint8Array.from(r.replace(/^0x/,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")).buffer}class _S{constructor(e){this.hls=void 0,this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=e,this._registerListeners()}destroy(){this._unregisterListeners(),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=null}_registerListeners(){const{hls:e}=this;e.on(D.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(D.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(D.MANIFEST_LOADING,this.onManifestLoading,this),e.on(D.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.on(D.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(D.LEVEL_UPDATED,this.onLevelUpdated,this)}_unregisterListeners(){const{hls:e}=this;e.off(D.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(D.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(D.MANIFEST_LOADING,this.onManifestLoading,this),e.off(D.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.off(D.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(D.LEVEL_UPDATED,this.onLevelUpdated,this)}onMediaAttached(e,t){this.media=t.media}onMediaDetaching(){!this.id3Track||(Vs(this.id3Track),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={})}onManifestLoading(){this.dateRangeCuesAppended={}}createTrack(e){const t=this.getID3Track(e.textTracks);return t.mode="hidden",t}getID3Track(e){if(!!this.media){for(let t=0;t<e.length;t++){const n=e[t];if(n.kind==="metadata"&&n.label==="id3")return Gy(n,this.media),n}return this.media.addTextTrack("metadata","id3")}}onFragParsingMetadata(e,t){if(!this.media)return;const{hls:{config:{enableEmsgMetadataCues:n,enableID3MetadataCues:i}}}=this;if(!n&&!i)return;const{samples:s}=t;this.id3Track||(this.id3Track=this.createTrack(this.media));const a=zf();for(let o=0;o<s.length;o++){const u=s[o].type;if(u===fn.emsg&&!n||!i)continue;const l=By(s[o].data);if(l){const c=s[o].pts;let h=c+s[o].duration;h>pu&&(h=pu),h-c<=0&&(h=c+DS);for(let d=0;d<l.length;d++){const m=l[d];if(!ky(m)){this.updateId3CueEnds(c);const E=new a(c,h,"");E.value=m,u&&(E.type=u),this.id3Track.addCue(E)}}}}}updateId3CueEnds(e){var t;const n=(t=this.id3Track)==null?void 0:t.cues;if(n)for(let i=n.length;i--;){const s=n[i];s.startTime<e&&s.endTime===pu&&(s.endTime=e)}}onBufferFlushing(e,{startOffset:t,endOffset:n,type:i}){const{id3Track:s,hls:a}=this;if(!a)return;const{config:{enableEmsgMetadataCues:o,enableID3MetadataCues:u}}=a;if(s&&(o||u)){let l;i==="audio"?l=c=>c.type===fn.audioId3&&u:i==="video"?l=c=>c.type===fn.emsg&&o:l=c=>c.type===fn.audioId3&&u||c.type===fn.emsg&&o,$f(s,t,n,l)}}onLevelUpdated(e,{details:t}){if(!this.media||!t.hasProgramDateTime||!this.hls.config.enableDateRangeMetadataCues)return;const{dateRangeCuesAppended:n,id3Track:i}=this,{dateRanges:s}=t,a=Object.keys(s);if(i){const c=Object.keys(n).filter(h=>!a.includes(h));for(let h=c.length;h--;){const f=c[h];Object.keys(n[f].cues).forEach(d=>{i.removeCue(n[f].cues[d])}),delete n[f]}}const o=t.fragments[t.fragments.length-1];if(a.length===0||!De(o==null?void 0:o.programDateTime))return;this.id3Track||(this.id3Track=this.createTrack(this.media));const u=o.programDateTime/1e3-o.start,l=zf();for(let c=0;c<a.length;c++){const h=a[c],f=s[h],d=n[h],m=(d==null?void 0:d.cues)||{};let E=(d==null?void 0:d.durationKnown)||!1;const p=oh(f.startDate,u);let g=pu;const v=f.endDate;if(v)g=oh(v,u),E=!0;else if(f.endOnNext&&!E){const C=a.reduce((A,T)=>{const S=s[T];return S.class===f.class&&S.id!==T&&S.startDate>f.startDate&&A.push(S),A},[]).sort((A,T)=>A.startDate.getTime()-T.startDate.getTime())[0];C&&(g=oh(C.startDate,u),E=!0)}const y=Object.keys(f.attr);for(let C=0;C<y.length;C++){const A=y[C];if(!BT(A))continue;let T=m[A];if(T)E&&!d.durationKnown&&(T.endTime=g);else{let S=f.attr[A];T=new l(p,g,""),OT(A)&&(S=wS(S)),T.value={key:A,data:S},T.type=fn.dateRange,T.id=h,this.id3Track.addCue(T),m[A]=T}}n[h]={cues:m,dateRange:f,durationKnown:E}}}}class FS{constructor(e){this.hls=void 0,this.config=void 0,this.media=null,this.levelDetails=null,this.currentTime=0,this.stallCount=0,this._latency=null,this.timeupdateHandler=()=>this.timeupdate(),this.hls=e,this.config=e.config,this.registerListeners()}get latency(){return this._latency||0}get maxLatency(){const{config:e,levelDetails:t}=this;return e.liveMaxLatencyDuration!==void 0?e.liveMaxLatencyDuration:t?e.liveMaxLatencyDurationCount*t.targetduration:0}get targetLatency(){const{levelDetails:e}=this;if(e===null)return null;const{holdBack:t,partHoldBack:n,targetduration:i}=e,{liveSyncDuration:s,liveSyncDurationCount:a,lowLatencyMode:o}=this.config,u=this.hls.userConfig;let l=o&&n||t;(u.liveSyncDuration||u.liveSyncDurationCount||l===0)&&(l=s!==void 0?s:a*i);const c=i,h=1;return l+Math.min(this.stallCount*h,c)}get liveSyncPosition(){const e=this.estimateLiveEdge(),t=this.targetLatency,n=this.levelDetails;if(e===null||t===null||n===null)return null;const i=n.edge,s=e-t-this.edgeStalled,a=i-n.totalduration,o=i-(this.config.lowLatencyMode&&n.partTarget||n.targetduration);return Math.min(Math.max(a,s),o)}get drift(){const{levelDetails:e}=this;return e===null?1:e.drift}get edgeStalled(){const{levelDetails:e}=this;if(e===null)return 0;const t=(this.config.lowLatencyMode&&e.partTarget||e.targetduration)*3;return Math.max(e.age-t,0)}get forwardBufferLength(){const{media:e,levelDetails:t}=this;if(!e||!t)return 0;const n=e.buffered.length;return(n?e.buffered.end(n-1):t.edge)-this.currentTime}destroy(){this.unregisterListeners(),this.onMediaDetaching(),this.levelDetails=null,this.hls=this.timeupdateHandler=null}registerListeners(){this.hls.on(D.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(D.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.on(D.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(D.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.on(D.ERROR,this.onError,this)}unregisterListeners(){this.hls.off(D.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(D.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.off(D.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(D.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.off(D.ERROR,this.onError,this)}onMediaAttached(e,t){this.media=t.media,this.media.addEventListener("timeupdate",this.timeupdateHandler)}onMediaDetaching(){this.media&&(this.media.removeEventListener("timeupdate",this.timeupdateHandler),this.media=null)}onManifestLoading(){this.levelDetails=null,this._latency=null,this.stallCount=0}onLevelUpdated(e,{details:t}){this.levelDetails=t,t.advanced&&this.timeupdate(),!t.live&&this.media&&this.media.removeEventListener("timeupdate",this.timeupdateHandler)}onError(e,t){var n;t.details===J.BUFFER_STALLED_ERROR&&(this.stallCount++,(n=this.levelDetails)!=null&&n.live&&G.warn("[playback-rate-controller]: Stall detected, adjusting target latency"))}timeupdate(){const{media:e,levelDetails:t}=this;if(!e||!t)return;this.currentTime=e.currentTime;const n=this.computeLatency();if(n===null)return;this._latency=n;const{lowLatencyMode:i,maxLiveSyncPlaybackRate:s}=this.config;if(!i||s===1)return;const a=this.targetLatency;if(a===null)return;const o=n-a,u=Math.min(this.maxLatency,a+t.targetduration),l=o<u;if(t.live&&l&&o>.05&&this.forwardBufferLength>1){const c=Math.min(2,Math.max(1,s)),h=Math.round(2/(1+Math.exp(-.75*o-this.edgeStalled))*20)/20;e.playbackRate=Math.min(c,Math.max(1,h))}else e.playbackRate!==1&&e.playbackRate!==0&&(e.playbackRate=1)}estimateLiveEdge(){const{levelDetails:e}=this;return e===null?null:e.edge+e.age}computeLatency(){const e=this.estimateLiveEdge();return e===null?null:e-this.currentTime}}const Vf=["NONE","TYPE-0","TYPE-1",null];var Xa={No:"",Yes:"YES",v2:"v2"};function bS(r,e){const{canSkipUntil:t,canSkipDateRanges:n,endSN:i}=r,s=e!==void 0?e-i:0;return t&&s<t?n?Xa.v2:Xa.Yes:Xa.No}class Cg{constructor(e,t,n){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=e,this.part=t,this.skip=n}addDirectives(e){const t=new self.URL(e);return this.msn!==void 0&&t.searchParams.set("_HLS_msn",this.msn.toString()),this.part!==void 0&&t.searchParams.set("_HLS_part",this.part.toString()),this.skip&&t.searchParams.set("_HLS_skip",this.skip),t.href}}class yo{constructor(e){this._attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.videoCodec=void 0,this.width=void 0,this.unknownCodecs=void 0,this.audioGroupIds=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.textGroupIds=void 0,this.url=void 0,this._urlId=0,this.url=[e.url],this._attrs=[e.attrs],this.bitrate=e.bitrate,e.details&&(this.details=e.details),this.id=e.id||0,this.name=e.name,this.width=e.width||0,this.height=e.height||0,this.audioCodec=e.audioCodec,this.videoCodec=e.videoCodec,this.unknownCodecs=e.unknownCodecs,this.codecSet=[e.videoCodec,e.audioCodec].filter(t=>t).join(",").replace(/\.[^.,]+/g,"")}get maxBitrate(){return Math.max(this.realBitrate,this.bitrate)}get attrs(){return this._attrs[this._urlId]}get pathwayId(){return this.attrs["PATHWAY-ID"]||"."}get uri(){return this.url[this._urlId]||""}get urlId(){return this._urlId}set urlId(e){const t=e%this.url.length;this._urlId!==t&&(this.fragmentError=0,this.loadError=0,this.details=void 0,this._urlId=t)}get audioGroupId(){var e;return(e=this.audioGroupIds)==null?void 0:e[this.urlId]}get textGroupId(){var e;return(e=this.textGroupIds)==null?void 0:e[this.urlId]}addFallback(e){this.url.push(e.url),this._attrs.push(e.attrs)}}function uh(r,e){const t=e.startPTS;if(De(t)){let n=0,i;e.sn>r.sn?(n=t-r.start,i=r):(n=r.start-t,i=e),i.duration!==n&&(i.duration=n)}else e.sn>r.sn?r.cc===e.cc&&r.minEndPTS?e.start=r.start+(r.minEndPTS-r.start):e.start=r.start+r.duration:e.start=Math.max(r.start-e.duration,0)}function Hy(r,e,t,n,i,s){n-t<=0&&(G.warn("Fragment should have a positive duration",e),n=t+e.duration,s=i+e.duration);let o=t,u=n;const l=e.startPTS,c=e.endPTS;if(De(l)){const p=Math.abs(l-t);De(e.deltaPTS)?e.deltaPTS=Math.max(p,e.deltaPTS):e.deltaPTS=p,o=Math.max(t,l),t=Math.min(t,l),i=Math.min(i,e.startDTS),u=Math.min(n,c),n=Math.max(n,c),s=Math.max(s,e.endDTS)}const h=t-e.start;e.start!==0&&(e.start=t),e.duration=n-e.start,e.startPTS=t,e.maxStartPTS=o,e.startDTS=i,e.endPTS=n,e.minEndPTS=u,e.endDTS=s;const f=e.sn;if(!r||f<r.startSN||f>r.endSN)return 0;let d;const m=f-r.startSN,E=r.fragments;for(E[m]=e,d=m;d>0;d--)uh(E[d],E[d-1]);for(d=m;d<E.length-1;d++)uh(E[d],E[d+1]);return r.fragmentHint&&uh(E[E.length-1],r.fragmentHint),r.PTSKnown=r.alignedSliding=!0,h}function RS(r,e){let t=null;const n=r.fragments;for(let u=n.length-1;u>=0;u--){const l=n[u].initSegment;if(l){t=l;break}}r.fragmentHint&&delete r.fragmentHint.endPTS;let i=0,s;if(kS(r,e,(u,l)=>{u.relurl&&(i=u.cc-l.cc),De(u.startPTS)&&De(u.endPTS)&&(l.start=l.startPTS=u.startPTS,l.startDTS=u.startDTS,l.maxStartPTS=u.maxStartPTS,l.endPTS=u.endPTS,l.endDTS=u.endDTS,l.minEndPTS=u.minEndPTS,l.duration=u.endPTS-u.startPTS,l.duration&&(s=l),e.PTSKnown=e.alignedSliding=!0),l.elementaryStreams=u.elementaryStreams,l.loader=u.loader,l.stats=u.stats,l.urlId=u.urlId,u.initSegment&&(l.initSegment=u.initSegment,t=u.initSegment)}),t&&(e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments).forEach(l=>{var c;(!l.initSegment||l.initSegment.relurl===((c=t)==null?void 0:c.relurl))&&(l.initSegment=t)}),e.skippedSegments)if(e.deltaUpdateFailed=e.fragments.some(u=>!u),e.deltaUpdateFailed){G.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(let u=e.skippedSegments;u--;)e.fragments.shift();e.startSN=e.fragments[0].sn,e.startCC=e.fragments[0].cc}else e.canSkipDateRanges&&(e.dateRanges=LS(r.dateRanges,e.dateRanges,e.recentlyRemovedDateranges));const a=e.fragments;if(i){G.warn("discontinuity sliding from playlist, take drift into account");for(let u=0;u<a.length;u++)a[u].cc+=i}e.skippedSegments&&(e.startCC=e.fragments[0].cc),IS(r.partList,e.partList,(u,l)=>{l.elementaryStreams=u.elementaryStreams,l.stats=u.stats}),s?Hy(e,s,s.startPTS,s.endPTS,s.startDTS,s.endDTS):jy(r,e),a.length&&(e.totalduration=e.edge-a[0].start),e.driftStartTime=r.driftStartTime,e.driftStart=r.driftStart;const o=e.advancedDateTime;if(e.advanced&&o){const u=e.edge;e.driftStart||(e.driftStartTime=o,e.driftStart=u),e.driftEndTime=o,e.driftEnd=u}else e.driftEndTime=r.driftEndTime,e.driftEnd=r.driftEnd,e.advancedDateTime=r.advancedDateTime}function LS(r,e,t){const n=Ft({},r);return t&&t.forEach(i=>{delete n[i]}),Object.keys(e).forEach(i=>{const s=new _y(e[i].attr,n[i]);s.isValid?n[i]=s:G.warn(`Ignoring invalid Playlist Delta Update DATERANGE tag: "${JSON.stringify(e[i].attr)}"`)}),n}function IS(r,e,t){if(r&&e){let n=0;for(let i=0,s=r.length;i<=s;i++){const a=r[i],o=e[i+n];a&&o&&a.index===o.index&&a.fragment.sn===o.fragment.sn?t(a,o):n--}}}function kS(r,e,t){const n=e.skippedSegments,i=Math.max(r.startSN,e.startSN)-e.startSN,s=(r.fragmentHint?1:0)+(n?e.endSN:Math.min(r.endSN,e.endSN))-e.startSN,a=e.startSN-r.startSN,o=e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments,u=r.fragmentHint?r.fragments.concat(r.fragmentHint):r.fragments;for(let l=i;l<=s;l++){const c=u[a+l];let h=o[l];n&&!h&&l<n&&(h=e.fragments[l]=c),c&&h&&t(c,h)}}function jy(r,e){const t=e.startSN+e.skippedSegments-r.startSN,n=r.fragments;t<0||t>=n.length||Gf(e,n[t].start)}function Gf(r,e){if(e){const t=r.fragments;for(let n=r.skippedSegments;n<t.length;n++)t[n].start+=e;r.fragmentHint&&(r.fragmentHint.start+=e)}}function BS(r,e=1/0){let t=1e3*r.targetduration;if(r.updated){const n=r.fragments,i=4;if(n.length&&t*i>e){const s=n[n.length-1].duration*1e3;s<t&&(t=s)}}else t/=2;return Math.round(t)}function OS(r,e,t){if(!(r!=null&&r.details))return null;const n=r.details;let i=n.fragments[e-n.startSN];return i||(i=n.fragmentHint,i&&i.sn===e)?i:e<n.startSN&&t&&t.sn===e?t:null}function Tg(r,e,t){var n;return r!=null&&r.details?Ky((n=r.details)==null?void 0:n.partList,e,t):null}function Ky(r,e,t){if(r)for(let n=r.length;n--;){const i=r[n];if(i.index===t&&i.fragment.sn===e)return i}return null}function El(r){switch(r.details){case J.FRAG_LOAD_TIMEOUT:case J.KEY_LOAD_TIMEOUT:case J.LEVEL_LOAD_TIMEOUT:case J.MANIFEST_LOAD_TIMEOUT:return!0}return!1}function Sg(r,e){const t=El(e);return r.default[`${t?"timeout":"error"}Retry`]}function n0(r,e){const t=r.backoff==="linear"?1:Math.pow(2,e);return Math.min(t*r.retryDelayMs,r.maxRetryDelayMs)}function Dg(r){return Cr(Cr({},r),{errorRetry:null,timeoutRetry:null})}function yl(r,e,t,n){return!!r&&e<r.maxNumRetry&&(NS(n)||!!t)}function NS(r){return r===0&&navigator.onLine===!1||!!r&&(r<400||r>499)}const qy={search:function(r,e){let t=0,n=r.length-1,i=null,s=null;for(;t<=n;){i=(t+n)/2|0,s=r[i];const a=e(s);if(a>0)t=i+1;else if(a<0)n=i-1;else return s}return null}};function PS(r,e,t){if(e===null||!Array.isArray(r)||!r.length||!De(e))return null;const n=r[0].programDateTime;if(e<(n||0))return null;const i=r[r.length-1].endProgramDateTime;if(e>=(i||0))return null;t=t||0;for(let s=0;s<r.length;++s){const a=r[s];if(MS(e,t,a))return a}return null}function xo(r,e,t=0,n=0){let i=null;if(r?i=e[r.sn-e[0].sn+1]||null:t===0&&e[0].start===0&&(i=e[0]),i&&Wf(t,n,i)===0)return i;const s=qy.search(e,Wf.bind(null,t,n));return s&&(s!==r||!i)?s:i}function Wf(r=0,e=0,t){if(t.start<=r&&t.start+t.duration>r)return 0;const n=Math.min(e,t.duration+(t.deltaPTS?t.deltaPTS:0));return t.start+t.duration-n<=r?1:t.start-n>r&&t.start?-1:0}function MS(r,e,t){const n=Math.min(e,t.duration+(t.deltaPTS?t.deltaPTS:0))*1e3;return(t.endProgramDateTime||0)-n>r}function US(r,e){return qy.search(r,t=>t.cc<e?1:t.cc>e?-1:0)}const $S=3e5;var dr={DoNothing:0,SendEndCallback:1,SendAlternateToPenaltyBox:2,RemoveAlternatePermanently:3,InsertDiscontinuity:4,RetryRequest:5},on={None:0,MoveAllAlternatesMatchingHost:1,MoveAllAlternatesMatchingHDCP:2,SwitchToSDR:4};class zS{constructor(e){this.hls=void 0,this.playlistError=0,this.penalizedRenditions={},this.log=void 0,this.warn=void 0,this.error=void 0,this.hls=e,this.log=G.log.bind(G,"[info]:"),this.warn=G.warn.bind(G,"[warning]:"),this.error=G.error.bind(G,"[error]:"),this.registerListeners()}registerListeners(){const e=this.hls;e.on(D.ERROR,this.onError,this),e.on(D.MANIFEST_LOADING,this.onManifestLoading,this),e.on(D.LEVEL_UPDATED,this.onLevelUpdated,this)}unregisterListeners(){const e=this.hls;!e||(e.off(D.ERROR,this.onError,this),e.off(D.ERROR,this.onErrorOut,this),e.off(D.MANIFEST_LOADING,this.onManifestLoading,this),e.off(D.LEVEL_UPDATED,this.onLevelUpdated,this))}destroy(){this.unregisterListeners(),this.hls=null,this.penalizedRenditions={}}startLoad(e){this.playlistError=0}stopLoad(){}getVariantLevelIndex(e){return(e==null?void 0:e.type)===Fe.MAIN?e.level:this.hls.loadLevel}onManifestLoading(){this.playlistError=0,this.penalizedRenditions={}}onLevelUpdated(){this.playlistError=0}onError(e,t){var n;if(t.fatal)return;const i=this.hls,s=t.context;switch(t.details){case J.FRAG_LOAD_ERROR:case J.FRAG_LOAD_TIMEOUT:case J.KEY_LOAD_ERROR:case J.KEY_LOAD_TIMEOUT:t.errorAction=this.getFragRetryOrSwitchAction(t);return;case J.FRAG_GAP:case J.FRAG_PARSING_ERROR:case J.FRAG_DECRYPT_ERROR:{t.errorAction=this.getFragRetryOrSwitchAction(t),t.errorAction.action=dr.SendAlternateToPenaltyBox;return}case J.LEVEL_EMPTY_ERROR:case J.LEVEL_PARSING_ERROR:{var a,o;const u=t.parent===Fe.MAIN?t.level:i.loadLevel;t.details===J.LEVEL_EMPTY_ERROR&&!!((a=t.context)!=null&&(o=a.levelDetails)!=null&&o.live)?t.errorAction=this.getPlaylistRetryOrSwitchAction(t,u):(t.levelRetry=!1,t.errorAction=this.getLevelSwitchAction(t,u))}return;case J.LEVEL_LOAD_ERROR:case J.LEVEL_LOAD_TIMEOUT:typeof(s==null?void 0:s.level)=="number"&&(t.errorAction=this.getPlaylistRetryOrSwitchAction(t,s.level));return;case J.AUDIO_TRACK_LOAD_ERROR:case J.AUDIO_TRACK_LOAD_TIMEOUT:case J.SUBTITLE_LOAD_ERROR:case J.SUBTITLE_TRACK_LOAD_TIMEOUT:if(s){const u=i.levels[i.loadLevel];if(u&&(s.type===Ge.AUDIO_TRACK&&s.groupId===u.audioGroupId||s.type===Ge.SUBTITLE_TRACK&&s.groupId===u.textGroupId)){t.errorAction=this.getPlaylistRetryOrSwitchAction(t,i.loadLevel),t.errorAction.action=dr.SendAlternateToPenaltyBox,t.errorAction.flags=on.MoveAllAlternatesMatchingHost;return}}return;case J.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:{const u=i.levels[i.loadLevel],l=u==null?void 0:u.attrs["HDCP-LEVEL"];l&&(t.errorAction={action:dr.SendAlternateToPenaltyBox,flags:on.MoveAllAlternatesMatchingHDCP,hdcpLevel:l})}return;case J.BUFFER_ADD_CODEC_ERROR:case J.REMUX_ALLOC_ERROR:t.errorAction=this.getLevelSwitchAction(t,(n=t.level)!=null?n:i.loadLevel);return;case J.INTERNAL_EXCEPTION:case J.BUFFER_APPENDING_ERROR:case J.BUFFER_APPEND_ERROR:case J.BUFFER_FULL_ERROR:case J.LEVEL_SWITCH_ERROR:case J.BUFFER_STALLED_ERROR:case J.BUFFER_SEEK_OVER_HOLE:case J.BUFFER_NUDGE_ON_STALL:t.errorAction={action:dr.DoNothing,flags:on.None};return}if(t.type===_e.KEY_SYSTEM_ERROR){const u=this.getVariantLevelIndex(t.frag);t.levelRetry=!1,t.errorAction=this.getLevelSwitchAction(t,u);return}}getPlaylistRetryOrSwitchAction(e,t){var n;const i=this.hls,s=Sg(i.config.playlistLoadPolicy,e),a=this.playlistError++,o=(n=e.response)==null?void 0:n.code;if(yl(s,a,El(e),o))return{action:dr.RetryRequest,flags:on.None,retryConfig:s,retryCount:a};const l=this.getLevelSwitchAction(e,t);return s&&(l.retryConfig=s,l.retryCount=a),l}getFragRetryOrSwitchAction(e){const t=this.hls,n=this.getVariantLevelIndex(e.frag),i=t.levels[n],{fragLoadPolicy:s,keyLoadPolicy:a}=t.config,o=Sg(e.details.startsWith("key")?a:s,e),u=t.levels.reduce((h,f)=>h+f.fragmentError,0);if(i){var l;e.details!==J.FRAG_GAP&&i.fragmentError++;const h=(l=e.response)==null?void 0:l.code;if(yl(o,u,El(e),h))return{action:dr.RetryRequest,flags:on.None,retryConfig:o,retryCount:u}}const c=this.getLevelSwitchAction(e,n);return o&&(c.retryConfig=o,c.retryCount=u),c}getLevelSwitchAction(e,t){const n=this.hls;t==null&&(t=n.loadLevel);const i=this.hls.levels[t];if(i&&(i.loadError++,n.autoLevelEnabled)){var s,a;let o=-1;const u=n.levels,l=(s=e.frag)==null?void 0:s.type,{type:c,groupId:h}=(a=e.context)!=null?a:{};for(let f=u.length;f--;){const d=(f+n.loadLevel)%u.length;if(d!==n.loadLevel&&u[d].loadError===0){const m=u[d];if(e.details===J.FRAG_GAP&&e.frag){const E=u[d].details;if(E){const p=xo(e.frag,E.fragments,e.frag.start);if(p!=null&&p.gap)continue}}else{if(c===Ge.AUDIO_TRACK&&h===m.audioGroupId||c===Ge.SUBTITLE_TRACK&&h===m.textGroupId)continue;if(l===Fe.AUDIO&&i.audioGroupId===m.audioGroupId||l===Fe.SUBTITLE&&i.textGroupId===m.textGroupId)continue}o=d;break}}if(o>-1&&n.loadLevel!==o)return e.levelRetry=!0,this.playlistError=0,{action:dr.SendAlternateToPenaltyBox,flags:on.None,nextAutoLevel:o}}return{action:dr.SendAlternateToPenaltyBox,flags:on.MoveAllAlternatesMatchingHost}}onErrorOut(e,t){var n;switch((n=t.errorAction)==null?void 0:n.action){case dr.DoNothing:break;case dr.SendAlternateToPenaltyBox:this.sendAlternateToPenaltyBox(t),!t.errorAction.resolved&&t.details!==J.FRAG_GAP&&(t.fatal=!0);break}if(t.fatal){this.hls.stopLoad();return}}sendAlternateToPenaltyBox(e){const t=this.hls,n=e.errorAction;if(!n)return;const{flags:i,hdcpLevel:s,nextAutoLevel:a}=n;switch(i){case on.None:this.switchLevel(e,a);break;case on.MoveAllAlternatesMatchingHost:n.resolved||(n.resolved=this.redundantFailover(e));break;case on.MoveAllAlternatesMatchingHDCP:s&&(t.maxHdcpLevel=Vf[Vf.indexOf(s)-1],n.resolved=!0),this.warn(`Restricting playback to HDCP-LEVEL of "${t.maxHdcpLevel}" or lower`);break}n.resolved||this.switchLevel(e,a)}switchLevel(e,t){t!==void 0&&e.errorAction&&(this.warn(`switching to level ${t} after ${e.details}`),this.hls.nextAutoLevel=t,e.errorAction.resolved=!0,this.hls.nextLoadLevel=this.hls.nextAutoLevel)}redundantFailover(e){const{hls:t,penalizedRenditions:n}=this,i=e.parent===Fe.MAIN?e.level:t.loadLevel,s=t.levels[i],a=s.url.length,o=e.frag?e.frag.urlId:s.urlId;s.urlId===o&&(!e.frag||s.details)&&this.penalizeRendition(s,e);for(let u=1;u<a;u++){const l=(o+u)%a,c=n[l];if(!c||VS(c,e,n[o]))return this.warn(`Switching to Redundant Stream ${l+1}/${a}: "${s.url[l]}" after ${e.details}`),this.playlistError=0,t.levels.forEach(h=>{h.urlId=l}),t.nextLoadLevel=i,!0}return!1}penalizeRendition(e,t){const{penalizedRenditions:n}=this,i=n[e.urlId]||{lastErrorPerfMs:0,errors:[],details:void 0};i.lastErrorPerfMs=performance.now(),i.errors.push(t),i.details=e.details,n[e.urlId]=i}}function VS(r,e,t){if(performance.now()-r.lastErrorPerfMs>$S)return!0;const n=r.details;if(e.details===J.FRAG_GAP&&n&&e.frag){const i=e.frag.start,s=xo(null,n.fragments,i);if(s&&!s.gap)return!0}if(t&&r.errors.length<t.errors.length){const i=r.errors[r.errors.length-1];if(n&&i.frag&&e.frag&&Math.abs(i.frag.start-e.frag.start)>n.targetduration*3)return!0}return!1}class i0{constructor(e,t){this.hls=void 0,this.timer=-1,this.requestScheduled=-1,this.canLoad=!1,this.log=void 0,this.warn=void 0,this.log=G.log.bind(G,`${t}:`),this.warn=G.warn.bind(G,`${t}:`),this.hls=e}destroy(){this.clearTimer(),this.hls=this.log=this.warn=null}clearTimer(){clearTimeout(this.timer),this.timer=-1}startLoad(){this.canLoad=!0,this.requestScheduled=-1,this.loadPlaylist()}stopLoad(){this.canLoad=!1,this.clearTimer()}switchParams(e,t){const n=t==null?void 0:t.renditionReports;if(n){let i=-1;for(let s=0;s<n.length;s++){const a=n[s];let o;try{o=new self.URL(a.URI,t.url).href}catch(u){G.warn(`Could not construct new URL for Rendition Report: ${u}`),o=a.URI||""}if(o===e){i=s;break}else o===e.substring(0,o.length)&&(i=s)}if(i!==-1){const s=n[i],a=parseInt(s["LAST-MSN"])||(t==null?void 0:t.lastPartSn);let o=parseInt(s["LAST-PART"])||(t==null?void 0:t.lastPartIndex);if(this.hls.config.lowLatencyMode){const u=Math.min(t.age-t.partTarget,t.targetduration);o>=0&&u>t.partTarget&&(o+=1)}return new Cg(a,o>=0?o:void 0,Xa.No)}}}loadPlaylist(e){this.requestScheduled===-1&&(this.requestScheduled=self.performance.now())}shouldLoadPlaylist(e){return this.canLoad&&!!e&&!!e.url&&(!e.details||e.details.live)}shouldReloadPlaylist(e){return this.timer===-1&&this.requestScheduled===-1&&this.shouldLoadPlaylist(e)}playlistLoaded(e,t,n){const{details:i,stats:s}=t,a=self.performance.now(),o=s.loading.first?Math.max(0,a-s.loading.first):0;if(i.advancedDateTime=Date.now()-o,i.live||n!=null&&n.live){if(i.reloaded(n),n&&this.log(`live playlist ${e} ${i.advanced?"REFRESHED "+i.lastPartSn+"-"+i.lastPartIndex:"MISSED"}`),n&&i.fragments.length>0&&RS(n,i),!this.canLoad||!i.live)return;let u,l,c;if(i.canBlockReload&&i.endSN&&i.advanced){const p=this.hls.config.lowLatencyMode,g=i.lastPartSn,v=i.endSN,y=i.lastPartIndex,C=y!==-1,A=g===v,T=p?0:y;C?(l=A?v+1:g,c=A?T:y+1):l=v+1;const S=i.age,F=S+i.ageHeader;let k=Math.min(F-i.partTarget,i.targetduration*1.5);if(k>0){if(n&&k>n.tuneInGoal)this.warn(`CDN Tune-in goal increased from: ${n.tuneInGoal} to: ${k} with playlist age: ${i.age}`),k=0;else{const R=Math.floor(k/i.targetduration);if(l+=R,c!==void 0){const V=Math.round(k%i.targetduration/i.partTarget);c+=V}this.log(`CDN Tune-in age: ${i.ageHeader}s last advanced ${S.toFixed(2)}s goal: ${k} skip sn ${R} to part ${c}`)}i.tuneInGoal=k}if(u=this.getDeliveryDirectives(i,t.deliveryDirectives,l,c),p||!A){this.loadPlaylist(u);return}}else i.canBlockReload&&(u=this.getDeliveryDirectives(i,t.deliveryDirectives,l,c));const h=this.hls.mainForwardBufferInfo,f=h?h.end-h.len:0,d=(i.edge-f)*1e3,m=BS(i,d);i.updated&&a>this.requestScheduled+m&&(this.requestScheduled=s.loading.start),l!==void 0&&i.canBlockReload?this.requestScheduled=s.loading.first+m-(i.partTarget*1e3||1e3):this.requestScheduled===-1||this.requestScheduled+m<a?this.requestScheduled=a:this.requestScheduled-a<=0&&(this.requestScheduled+=m);let E=this.requestScheduled-a;E=Math.max(0,E),this.log(`reload live playlist ${e} in ${Math.round(E)} ms`),this.timer=self.setTimeout(()=>this.loadPlaylist(u),E)}else this.clearTimer()}getDeliveryDirectives(e,t,n,i){let s=bS(e,n);return t!=null&&t.skip&&e.deltaUpdateFailed&&(n=t.msn,i=t.part,s=Xa.No),new Cg(n,i,s)}checkRetry(e){const t=e.details,n=El(e),i=e.errorAction,{action:s,retryCount:a=0,retryConfig:o}=i||{},u=!!i&&!!o&&(s===dr.RetryRequest||!i.resolved&&s===dr.SendAlternateToPenaltyBox);if(u){var l;if(this.requestScheduled=-1,a>=o.maxNumRetry)return!1;if(n&&(l=e.context)!=null&&l.deliveryDirectives)this.warn(`Retrying playlist loading ${a+1}/${o.maxNumRetry} after "${t}" without delivery-directives`),this.loadPlaylist();else{const c=n0(o,a);this.timer=self.setTimeout(()=>this.loadPlaylist(),c),this.warn(`Retrying playlist loading ${a+1}/${o.maxNumRetry} after "${t}" in ${c}ms`)}e.levelRetry=!0,i.resolved=!0}return u}}let lh;class GS extends i0{constructor(e,t){super(e,"[level-controller]"),this._levels=[],this._firstLevel=-1,this._startLevel=void 0,this.currentLevel=null,this.currentLevelIndex=-1,this.manualLevelIndex=-1,this.steering=void 0,this.onParsedComplete=void 0,this.steering=t,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(D.MANIFEST_LOADING,this.onManifestLoading,this),e.on(D.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(D.LEVEL_LOADED,this.onLevelLoaded,this),e.on(D.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(D.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.on(D.FRAG_LOADED,this.onFragLoaded,this),e.on(D.ERROR,this.onError,this)}_unregisterListeners(){const{hls:e}=this;e.off(D.MANIFEST_LOADING,this.onManifestLoading,this),e.off(D.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(D.LEVEL_LOADED,this.onLevelLoaded,this),e.off(D.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(D.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.off(D.FRAG_LOADED,this.onFragLoaded,this),e.off(D.ERROR,this.onError,this)}destroy(){this._unregisterListeners(),this.steering=null,this.resetLevels(),super.destroy()}startLoad(){this._levels.forEach(t=>{t.loadError=0,t.fragmentError=0}),super.startLoad()}resetLevels(){this._startLevel=void 0,this.manualLevelIndex=-1,this.currentLevelIndex=-1,this.currentLevel=null,this._levels=[]}onManifestLoading(e,t){this.resetLevels()}onManifestLoaded(e,t){const n=[],i={};let s;t.levels.forEach(a=>{var o;const u=a.attrs;((o=a.audioCodec)==null?void 0:o.indexOf("mp4a.40.34"))!==-1&&(lh||(lh=/chrome|firefox/i.test(navigator.userAgent)),lh&&(a.audioCodec=void 0));const{AUDIO:l,CODECS:c,"FRAME-RATE":h,"PATHWAY-ID":f,RESOLUTION:d,SUBTITLES:m}=u,p=`${`${f||"."}-`}${a.bitrate}-${d}-${h}-${c}`;s=i[p],s?s.addFallback(a):(s=new yo(a),i[p]=s,n.push(s)),xl(s,"audio",l),xl(s,"text",m)}),this.filterAndSortMediaOptions(n,t)}filterAndSortMediaOptions(e,t){let n=[],i=[],s=!1,a=!1,o=!1,u=e.filter(({audioCodec:d,videoCodec:m,width:E,height:p,unknownCodecs:g})=>(s||(s=!!(E&&p)),a||(a=!!m),o||(o=!!d),!(g!=null&&g.length)&&(!d||sh(d,"audio"))&&(!m||sh(m,"video"))));if((s||a)&&o&&(u=u.filter(({videoCodec:d,width:m,height:E})=>!!d||!!(m&&E))),u.length===0){Promise.resolve().then(()=>{if(this.hls){const d=new Error("no level with compatible codecs found in manifest");this.hls.trigger(D.ERROR,{type:_e.MEDIA_ERROR,details:J.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:t.url,error:d,reason:d.message})}});return}t.audioTracks&&(n=t.audioTracks.filter(d=>!d.audioCodec||sh(d.audioCodec,"audio")),wg(n)),t.subtitles&&(i=t.subtitles,wg(i));const l=u.slice(0);u.sort((d,m)=>d.attrs["HDCP-LEVEL"]!==m.attrs["HDCP-LEVEL"]?(d.attrs["HDCP-LEVEL"]||"")>(m.attrs["HDCP-LEVEL"]||"")?1:-1:d.bitrate!==m.bitrate?d.bitrate-m.bitrate:d.attrs["FRAME-RATE"]!==m.attrs["FRAME-RATE"]?d.attrs.decimalFloatingPoint("FRAME-RATE")-m.attrs.decimalFloatingPoint("FRAME-RATE"):d.attrs.SCORE!==m.attrs.SCORE?d.attrs.decimalFloatingPoint("SCORE")-m.attrs.decimalFloatingPoint("SCORE"):s&&d.height!==m.height?d.height-m.height:0);let c=l[0];if(this.steering&&(u=this.steering.filterParsedLevels(u),u.length!==l.length)){for(let d=0;d<l.length;d++)if(l[d].pathwayId===u[0].pathwayId){c=l[d];break}}this._levels=u;for(let d=0;d<u.length;d++)if(u[d]===c){this._firstLevel=d,this.log(`manifest loaded, ${u.length} level(s) found, first bitrate: ${c.bitrate}`);break}const h=o&&!a,f={levels:u,audioTracks:n,subtitleTracks:i,sessionData:t.sessionData,sessionKeys:t.sessionKeys,firstLevel:this._firstLevel,stats:t.stats,audio:o,video:a,altAudio:!h&&n.some(d=>!!d.url)};this.hls.trigger(D.MANIFEST_PARSED,f),(this.hls.config.autoStartLoad||this.hls.forceStartLoad)&&this.hls.startLoad(this.hls.config.startPosition)}get levels(){return this._levels.length===0?null:this._levels}get level(){return this.currentLevelIndex}set level(e){const t=this._levels;if(t.length===0)return;if(e<0||e>=t.length){const c=new Error("invalid level idx"),h=e<0;if(this.hls.trigger(D.ERROR,{type:_e.OTHER_ERROR,details:J.LEVEL_SWITCH_ERROR,level:e,fatal:h,error:c,reason:c.message}),h)return;e=Math.min(e,t.length-1)}const n=this.currentLevelIndex,i=this.currentLevel,s=i?i.attrs["PATHWAY-ID"]:void 0,a=t[e],o=a.attrs["PATHWAY-ID"];if(this.currentLevelIndex=e,this.currentLevel=a,n===e&&a.details&&i&&s===o)return;this.log(`Switching to level ${e}${o?" with Pathway "+o:""} from level ${n}${s?" with Pathway "+s:""}`);const u=Ft({},a,{level:e,maxBitrate:a.maxBitrate,attrs:a.attrs,uri:a.uri,urlId:a.urlId});delete u._attrs,delete u._urlId,this.hls.trigger(D.LEVEL_SWITCHING,u);const l=a.details;if(!l||l.live){const c=this.switchParams(a.uri,i==null?void 0:i.details);this.loadPlaylist(c)}}get manualLevel(){return this.manualLevelIndex}set manualLevel(e){this.manualLevelIndex=e,this._startLevel===void 0&&(this._startLevel=e),e!==-1&&(this.level=e)}get firstLevel(){return this._firstLevel}set firstLevel(e){this._firstLevel=e}get startLevel(){if(this._startLevel===void 0){const e=this.hls.config.startLevel;return e!==void 0?e:this._firstLevel}else return this._startLevel}set startLevel(e){this._startLevel=e}onError(e,t){t.fatal||!t.context||t.context.type===Ge.LEVEL&&t.context.level===this.level&&this.checkRetry(t)}onFragLoaded(e,{frag:t}){if(t!==void 0&&t.type===Fe.MAIN){const n=this._levels[t.level];n!==void 0&&(n.loadError=0)}}onLevelLoaded(e,t){var n;const{level:i,details:s}=t,a=this._levels[i];if(!a){var o;this.warn(`Invalid level index ${i}`),(o=t.deliveryDirectives)!=null&&o.skip&&(s.deltaUpdateFailed=!0);return}i===this.currentLevelIndex?(a.fragmentError===0&&(a.loadError=0),this.playlistLoaded(i,t,a.details)):(n=t.deliveryDirectives)!=null&&n.skip&&(s.deltaUpdateFailed=!0)}onAudioTrackSwitched(e,t){const n=this.currentLevel;if(!n)return;const i=this.hls.audioTracks[t.id].groupId;if(n.audioGroupIds&&n.audioGroupId!==i){let s=-1;for(let a=0;a<n.audioGroupIds.length;a++)if(n.audioGroupIds[a]===i){s=a;break}s!==-1&&s!==n.urlId&&(n.urlId=s,this.canLoad&&this.startLoad())}}loadPlaylist(e){super.loadPlaylist();const t=this.currentLevelIndex,n=this.currentLevel;if(n&&this.shouldLoadPlaylist(n)){const i=n.urlId;let s=n.uri;if(e)try{s=e.addDirectives(s)}catch(o){this.warn(`Could not construct new URL with HLS Delivery Directives: ${o}`)}const a=n.attrs["PATHWAY-ID"];this.log(`Loading level index ${t}${(e==null?void 0:e.msn)!==void 0?" at sn "+e.msn+" part "+e.part:""} with${a?" Pathway "+a:""} URI ${i+1}/${n.url.length} ${s}`),this.clearTimer(),this.hls.trigger(D.LEVEL_LOADING,{url:s,level:t,id:i,deliveryDirectives:e||null})}}get nextLoadLevel(){return this.manualLevelIndex!==-1?this.manualLevelIndex:this.hls.nextAutoLevel}set nextLoadLevel(e){this.level=e,this.manualLevelIndex===-1&&(this.hls.nextAutoLevel=e)}removeLevel(e,t){const n=(s,a)=>a!==t,i=this._levels.filter((s,a)=>a!==e?!0:s.url.length>1&&t!==void 0?(s.url=s.url.filter(n),s.audioGroupIds&&(s.audioGroupIds=s.audioGroupIds.filter(n)),s.textGroupIds&&(s.textGroupIds=s.textGroupIds.filter(n)),s.urlId=0,!0):(this.steering&&this.steering.removeLevel(s),!1));this.hls.trigger(D.LEVELS_UPDATED,{levels:i})}onLevelsUpdated(e,{levels:t}){t.forEach((n,i)=>{const{details:s}=n;s!=null&&s.fragments&&s.fragments.forEach(a=>{a.level=i})}),this._levels=t}}function xl(r,e,t){!t||(e==="audio"?(r.audioGroupIds||(r.audioGroupIds=[]),r.audioGroupIds[r.url.length-1]=t):e==="text"&&(r.textGroupIds||(r.textGroupIds=[]),r.textGroupIds[r.url.length-1]=t))}function wg(r){const e={};r.forEach(t=>{const n=t.groupId||"";t.id=e[n]=e[n]||0,e[n]++})}var $t={NOT_LOADED:"NOT_LOADED",APPENDING:"APPENDING",PARTIAL:"PARTIAL",OK:"OK"};class WS{constructor(e){this.activePartLists=Object.create(null),this.endListFragments=Object.create(null),this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hasGaps=!1,this.hls=e,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(D.BUFFER_APPENDED,this.onBufferAppended,this),e.on(D.FRAG_BUFFERED,this.onFragBuffered,this),e.on(D.FRAG_LOADED,this.onFragLoaded,this)}_unregisterListeners(){const{hls:e}=this;e.off(D.BUFFER_APPENDED,this.onBufferAppended,this),e.off(D.FRAG_BUFFERED,this.onFragBuffered,this),e.off(D.FRAG_LOADED,this.onFragLoaded,this)}destroy(){this._unregisterListeners(),this.fragments=this.activePartLists=this.endListFragments=this.timeRanges=null}getAppendedFrag(e,t){const n=this.activePartLists[t];if(n)for(let i=n.length;i--;){const s=n[i];if(!s)break;const a=s.end;if(s.start<=e&&a!==null&&e<=a)return s}return this.getBufferedFrag(e,t)}getBufferedFrag(e,t){const{fragments:n}=this,i=Object.keys(n);for(let s=i.length;s--;){const a=n[i[s]];if((a==null?void 0:a.body.type)===t&&a.buffered){const o=a.body;if(o.start<=e&&e<=o.end)return o}}return null}detectEvictedFragments(e,t,n,i){this.timeRanges&&(this.timeRanges[e]=t);const s=(i==null?void 0:i.fragment.sn)||-1;Object.keys(this.fragments).forEach(a=>{const o=this.fragments[a];if(!o||s>=o.body.sn)return;if(!o.buffered&&!o.loaded){o.body.type===n&&this.removeFragment(o.body);return}const u=o.range[e];!u||u.time.some(l=>{const c=!this.isTimeBuffered(l.startPTS,l.endPTS,t);return c&&this.removeFragment(o.body),c})})}detectPartialFragments(e){const t=this.timeRanges,{frag:n,part:i}=e;if(!t||n.sn==="initSegment")return;const s=vs(n),a=this.fragments[s];if(!a)return;const o=!n.relurl;Object.keys(t).forEach(u=>{const l=n.elementaryStreams[u];if(!l)return;const c=t[u],h=o||l.partial===!0;a.range[u]=this.getBufferedTimes(n,i,h,c)}),a.loaded=null,Object.keys(a.range).length?(a.buffered=!0,a.body.endList&&(this.endListFragments[a.body.type]=a),gu(a)||this.removeParts(n.sn-1,n.type)):this.removeFragment(a.body)}removeParts(e,t){const n=this.activePartLists[t];!n||(this.activePartLists[t]=n.filter(i=>i.fragment.sn>=e))}fragBuffered(e,t){const n=vs(e);let i=this.fragments[n];!i&&t&&(i=this.fragments[n]={body:e,appendedPTS:null,loaded:null,buffered:!1,range:Object.create(null)},e.gap&&(this.hasGaps=!0)),i&&(i.loaded=null,i.buffered=!0)}getBufferedTimes(e,t,n,i){const s={time:[],partial:n},a=e.start,o=e.end,u=e.minEndPTS||o,l=e.maxStartPTS||a;for(let c=0;c<i.length;c++){const h=i.start(c)-this.bufferPadding,f=i.end(c)+this.bufferPadding;if(l>=h&&u<=f){s.time.push({startPTS:Math.max(a,i.start(c)),endPTS:Math.min(o,i.end(c))});break}else if(a<f&&o>h)s.partial=!0,s.time.push({startPTS:Math.max(a,i.start(c)),endPTS:Math.min(o,i.end(c))});else if(o<=h)break}return s}getPartialFragment(e){let t=null,n,i,s,a=0;const{bufferPadding:o,fragments:u}=this;return Object.keys(u).forEach(l=>{const c=u[l];!c||gu(c)&&(i=c.body.start-o,s=c.body.end+o,e>=i&&e<=s&&(n=Math.min(e-i,s-e),a<=n&&(t=c.body,a=n)))}),t}isEndListAppended(e){const t=this.endListFragments[e];return t!==void 0&&(t.buffered||gu(t))}getState(e){const t=vs(e),n=this.fragments[t];return n?n.buffered?gu(n)?$t.PARTIAL:$t.OK:$t.APPENDING:$t.NOT_LOADED}isTimeBuffered(e,t,n){let i,s;for(let a=0;a<n.length;a++){if(i=n.start(a)-this.bufferPadding,s=n.end(a)+this.bufferPadding,e>=i&&t<=s)return!0;if(t<=i)return!1}return!1}onFragLoaded(e,t){const{frag:n,part:i}=t;if(n.sn==="initSegment"||n.bitrateTest)return;const s=i?null:t,a=vs(n);this.fragments[a]={body:n,appendedPTS:null,loaded:s,buffered:!1,range:Object.create(null)}}onBufferAppended(e,t){const{frag:n,part:i,timeRanges:s}=t;if(n.sn==="initSegment")return;const a=n.type;if(i){let o=this.activePartLists[a];o||(this.activePartLists[a]=o=[]),o.push(i)}this.timeRanges=s,Object.keys(s).forEach(o=>{const u=s[o];this.detectEvictedFragments(o,u,a,i)})}onFragBuffered(e,t){this.detectPartialFragments(t)}hasFragment(e){const t=vs(e);return!!this.fragments[t]}hasParts(e){var t;return!!((t=this.activePartLists[e])!=null&&t.length)}removeFragmentsInRange(e,t,n,i,s){i&&!this.hasGaps||Object.keys(this.fragments).forEach(a=>{const o=this.fragments[a];if(!o)return;const u=o.body;u.type!==n||i&&!u.gap||u.start<t&&u.end>e&&(o.buffered||s)&&this.removeFragment(u)})}removeFragment(e){const t=vs(e);e.stats.loaded=0,e.clearElementaryStreamInfo();const n=this.activePartLists[e.type];if(n){const i=e.sn;this.activePartLists[e.type]=n.filter(s=>s.fragment.sn!==i)}delete this.fragments[t],e.endList&&delete this.endListFragments[e.type]}removeAllFragments(){this.fragments=Object.create(null),this.endListFragments=Object.create(null),this.activePartLists=Object.create(null),this.hasGaps=!1}}function gu(r){var e,t,n;return r.buffered&&(r.body.gap||((e=r.range.video)==null?void 0:e.partial)||((t=r.range.audio)==null?void 0:t.partial)||((n=r.range.audiovideo)==null?void 0:n.partial))}function vs(r){return`${r.type}_${r.level}_${r.urlId}_${r.sn}`}const _g=Math.pow(2,17);class HS{constructor(e){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=e}destroy(){this.loader&&(this.loader.destroy(),this.loader=null)}abort(){this.loader&&this.loader.abort()}load(e,t){const n=e.url;if(!n)return Promise.reject(new $n({type:_e.NETWORK_ERROR,details:J.FRAG_LOAD_ERROR,fatal:!1,frag:e,error:new Error(`Fragment does not have a ${n?"part list":"url"}`),networkDetails:null}));this.abort();const i=this.config,s=i.fLoader,a=i.loader;return new Promise((o,u)=>{if(this.loader&&this.loader.destroy(),e.gap){u(bg(e));return}const l=this.loader=e.loader=s?new s(i):new a(i),c=Fg(e),h=Dg(i.fragLoadPolicy.default),f={loadPolicy:h,timeout:h.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:e.sn==="initSegment"?1/0:_g};e.stats=l.stats,l.load(c,f,{onSuccess:(d,m,E,p)=>{this.resetLoader(e,l);let g=d.data;E.resetIV&&e.decryptdata&&(e.decryptdata.iv=new Uint8Array(g.slice(0,16)),g=g.slice(16)),o({frag:e,part:null,payload:g,networkDetails:p})},onError:(d,m,E,p)=>{this.resetLoader(e,l),u(new $n({type:_e.NETWORK_ERROR,details:J.FRAG_LOAD_ERROR,fatal:!1,frag:e,response:Cr({url:n,data:void 0},d),error:new Error(`HTTP Error ${d.code} ${d.text}`),networkDetails:E,stats:p}))},onAbort:(d,m,E)=>{this.resetLoader(e,l),u(new $n({type:_e.NETWORK_ERROR,details:J.INTERNAL_ABORTED,fatal:!1,frag:e,error:new Error("Aborted"),networkDetails:E,stats:d}))},onTimeout:(d,m,E)=>{this.resetLoader(e,l),u(new $n({type:_e.NETWORK_ERROR,details:J.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,error:new Error(`Timeout after ${f.timeout}ms`),networkDetails:E,stats:d}))},onProgress:(d,m,E,p)=>{t&&t({frag:e,part:null,payload:E,networkDetails:p})}})})}loadPart(e,t,n){this.abort();const i=this.config,s=i.fLoader,a=i.loader;return new Promise((o,u)=>{if(this.loader&&this.loader.destroy(),e.gap||t.gap){u(bg(e,t));return}const l=this.loader=e.loader=s?new s(i):new a(i),c=Fg(e,t),h=Dg(i.fragLoadPolicy.default),f={loadPolicy:h,timeout:h.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:_g};t.stats=l.stats,l.load(c,f,{onSuccess:(d,m,E,p)=>{this.resetLoader(e,l),this.updateStatsFromPart(e,t);const g={frag:e,part:t,payload:d.data,networkDetails:p};n(g),o(g)},onError:(d,m,E,p)=>{this.resetLoader(e,l),u(new $n({type:_e.NETWORK_ERROR,details:J.FRAG_LOAD_ERROR,fatal:!1,frag:e,part:t,response:Cr({url:c.url,data:void 0},d),error:new Error(`HTTP Error ${d.code} ${d.text}`),networkDetails:E,stats:p}))},onAbort:(d,m,E)=>{e.stats.aborted=t.stats.aborted,this.resetLoader(e,l),u(new $n({type:_e.NETWORK_ERROR,details:J.INTERNAL_ABORTED,fatal:!1,frag:e,part:t,error:new Error("Aborted"),networkDetails:E,stats:d}))},onTimeout:(d,m,E)=>{this.resetLoader(e,l),u(new $n({type:_e.NETWORK_ERROR,details:J.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,part:t,error:new Error(`Timeout after ${f.timeout}ms`),networkDetails:E,stats:d}))}})})}updateStatsFromPart(e,t){const n=e.stats,i=t.stats,s=i.total;if(n.loaded+=i.loaded,s){const u=Math.round(e.duration/t.duration),l=Math.min(Math.round(n.loaded/s),u),h=(u-l)*Math.round(n.loaded/l);n.total=n.loaded+h}else n.total=Math.max(n.loaded,n.total);const a=n.loading,o=i.loading;a.start?a.first+=o.first-o.start:(a.start=o.start,a.first=o.first),a.end=o.end}resetLoader(e,t){e.loader=null,this.loader===t&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),t.destroy()}}function Fg(r,e=null){const t=e||r,n={frag:r,part:e,responseType:"arraybuffer",url:t.url,headers:{},rangeStart:0,rangeEnd:0},i=t.byteRangeStartOffset,s=t.byteRangeEndOffset;if(De(i)&&De(s)){var a;let o=i,u=s;if(r.sn==="initSegment"&&((a=r.decryptdata)==null?void 0:a.method)==="AES-128"){const l=s-i;l%16&&(u=s+(16-l%16)),i!==0&&(n.resetIV=!0,o=i-16)}n.rangeStart=o,n.rangeEnd=u}return n}function bg(r,e){const t=new Error(`GAP ${r.gap?"tag":"attribute"} found`),n={type:_e.MEDIA_ERROR,details:J.FRAG_GAP,fatal:!1,frag:r,error:t,networkDetails:null};return e&&(n.part=e),(e||r).stats.aborted=!0,new $n(n)}class $n extends Error{constructor(e){super(e.error.message),this.data=void 0,this.data=e}}class jS{constructor(e){this.config=void 0,this.keyUriToKeyInfo={},this.emeController=null,this.config=e}abort(e){for(const t in this.keyUriToKeyInfo){const n=this.keyUriToKeyInfo[t].loader;if(n){if(e&&e!==n.context.frag.type)return;n.abort()}}}detach(){for(const e in this.keyUriToKeyInfo){const t=this.keyUriToKeyInfo[e];(t.mediaKeySessionContext||t.decryptdata.isCommonEncryption)&&delete this.keyUriToKeyInfo[e]}}destroy(){this.detach();for(const e in this.keyUriToKeyInfo){const t=this.keyUriToKeyInfo[e].loader;t&&t.destroy()}this.keyUriToKeyInfo={}}createKeyLoadError(e,t=J.KEY_LOAD_ERROR,n,i,s){return new $n({type:_e.NETWORK_ERROR,details:t,fatal:!1,frag:e,response:s,error:n,networkDetails:i})}loadClear(e,t){if(this.emeController&&this.config.emeEnabled){const{sn:n,cc:i}=e;for(let s=0;s<t.length;s++){const a=t[s];if(i<=a.cc&&(n==="initSegment"||a.sn==="initSegment"||n<a.sn)){this.emeController.selectKeySystemFormat(a).then(o=>{a.setKeyFormat(o)});break}}}}load(e){return!e.decryptdata&&e.encrypted&&this.emeController?this.emeController.selectKeySystemFormat(e).then(t=>this.loadInternal(e,t)):this.loadInternal(e)}loadInternal(e,t){var n,i;t&&e.setKeyFormat(t);const s=e.decryptdata;if(!s){const l=new Error(t?`Expected frag.decryptdata to be defined after setting format ${t}`:"Missing decryption data on fragment in onKeyLoading");return Promise.reject(this.createKeyLoadError(e,J.KEY_LOAD_ERROR,l))}const a=s.uri;if(!a)return Promise.reject(this.createKeyLoadError(e,J.KEY_LOAD_ERROR,new Error(`Invalid key URI: "${a}"`)));let o=this.keyUriToKeyInfo[a];if((n=o)!=null&&n.decryptdata.key)return s.key=o.decryptdata.key,Promise.resolve({frag:e,keyInfo:o});if((i=o)!=null&&i.keyLoadPromise){var u;switch((u=o.mediaKeySessionContext)==null?void 0:u.keyStatus){case void 0:case"status-pending":case"usable":case"usable-in-future":return o.keyLoadPromise.then(l=>(s.key=l.keyInfo.decryptdata.key,{frag:e,keyInfo:o}))}}switch(o=this.keyUriToKeyInfo[a]={decryptdata:s,keyLoadPromise:null,loader:null,mediaKeySessionContext:null},s.method){case"ISO-23001-7":case"SAMPLE-AES":case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return s.keyFormat==="identity"?this.loadKeyHTTP(o,e):this.loadKeyEME(o,e);case"AES-128":return this.loadKeyHTTP(o,e);default:return Promise.reject(this.createKeyLoadError(e,J.KEY_LOAD_ERROR,new Error(`Key supplied with unsupported METHOD: "${s.method}"`)))}}loadKeyEME(e,t){const n={frag:t,keyInfo:e};if(this.emeController&&this.config.emeEnabled){const i=this.emeController.loadKey(n);if(i)return(e.keyLoadPromise=i.then(s=>(e.mediaKeySessionContext=s,n))).catch(s=>{throw e.keyLoadPromise=null,s})}return Promise.resolve(n)}loadKeyHTTP(e,t){const n=this.config,i=n.loader,s=new i(n);return t.keyLoader=e.loader=s,e.keyLoadPromise=new Promise((a,o)=>{const u={keyInfo:e,frag:t,responseType:"arraybuffer",url:e.decryptdata.uri},l=n.keyLoadPolicy.default,c={loadPolicy:l,timeout:l.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},h={onSuccess:(f,d,m,E)=>{const{frag:p,keyInfo:g,url:v}=m;if(!p.decryptdata||g!==this.keyUriToKeyInfo[v])return o(this.createKeyLoadError(p,J.KEY_LOAD_ERROR,new Error("after key load, decryptdata unset or changed"),E));g.decryptdata.key=p.decryptdata.key=new Uint8Array(f.data),p.keyLoader=null,g.loader=null,a({frag:p,keyInfo:g})},onError:(f,d,m,E)=>{this.resetLoader(d),o(this.createKeyLoadError(t,J.KEY_LOAD_ERROR,new Error(`HTTP Error ${f.code} loading key ${f.text}`),m,Cr({url:u.url,data:void 0},f)))},onTimeout:(f,d,m)=>{this.resetLoader(d),o(this.createKeyLoadError(t,J.KEY_LOAD_TIMEOUT,new Error("key loading timed out"),m))},onAbort:(f,d,m)=>{this.resetLoader(d),o(this.createKeyLoadError(t,J.INTERNAL_ABORTED,new Error("key loading aborted"),m))}};s.load(u,c,h)})}resetLoader(e){const{frag:t,keyInfo:n,url:i}=e,s=n.loader;t.keyLoader===s&&(t.keyLoader=null,n.loader=null),delete this.keyUriToKeyInfo[i],s&&s.destroy()}}class KS{constructor(){this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}destroy(){this.onHandlerDestroying(),this.onHandlerDestroyed()}onHandlerDestroying(){this.clearNextTick(),this.clearInterval()}onHandlerDestroyed(){}hasInterval(){return!!this._tickInterval}hasNextTick(){return!!this._tickTimer}setInterval(e){return this._tickInterval?!1:(this._tickCallCount=0,this._tickInterval=self.setInterval(this._boundTick,e),!0)}clearInterval(){return this._tickInterval?(self.clearInterval(this._tickInterval),this._tickInterval=null,!0):!1}clearNextTick(){return this._tickTimer?(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0):!1}tick(){this._tickCallCount++,this._tickCallCount===1&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)}tickImmediate(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)}doTick(){}}const qS={length:0,start:()=>0,end:()=>0};class tt{static isBuffered(e,t){try{if(e){const n=tt.getBuffered(e);for(let i=0;i<n.length;i++)if(t>=n.start(i)&&t<=n.end(i))return!0}}catch{}return!1}static bufferInfo(e,t,n){try{if(e){const i=tt.getBuffered(e),s=[];let a;for(a=0;a<i.length;a++)s.push({start:i.start(a),end:i.end(a)});return this.bufferedInfo(s,t,n)}}catch{}return{len:0,start:t,end:t,nextStart:void 0}}static bufferedInfo(e,t,n){t=Math.max(0,t),e.sort(function(l,c){const h=l.start-c.start;return h||c.end-l.end});let i=[];if(n)for(let l=0;l<e.length;l++){const c=i.length;if(c){const h=i[c-1].end;e[l].start-h<n?e[l].end>h&&(i[c-1].end=e[l].end):i.push(e[l])}else i.push(e[l])}else i=e;let s=0,a,o=t,u=t;for(let l=0;l<i.length;l++){const c=i[l].start,h=i[l].end;if(t+n>=c&&t<h)o=c,u=h,s=u-t;else if(t+n<c){a=c;break}}return{len:s,start:o||0,end:u||0,nextStart:a}}static getBuffered(e){try{return e.buffered}catch(t){return G.log("failed to get media.buffered",t),qS}}}class s0{constructor(e,t,n,i=0,s=-1,a=!1){this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing=mu(),this.buffering={audio:mu(),video:mu(),audiovideo:mu()},this.level=e,this.sn=t,this.id=n,this.size=i,this.part=s,this.partial=a}}function mu(){return{start:0,executeStart:0,executeEnd:0,end:0}}function Yy(r,e){let t=null;for(let n=0,i=r.length;n<i;n++){const s=r[n];if(s&&s.cc===e){t=s;break}}return t}function YS(r,e,t){return!!(e.details&&(t.endCC>t.startCC||r&&r.cc<t.startCC))}function XS(r,e,t=0){const n=r.fragments,i=e.fragments;if(!i.length||!n.length){G.log("No fragments to align");return}const s=Yy(n,i[0].cc);if(!s||s&&!s.startPTS){G.log("No frag in previous level to align on");return}return s}function Rg(r,e){if(r){const t=r.start+e;r.start=r.startPTS=t,r.endPTS=t+r.duration}}function a0(r,e){const t=e.fragments;for(let n=0,i=t.length;n<i;n++)Rg(t[n],r);e.fragmentHint&&Rg(e.fragmentHint,r),e.alignedSliding=!0}function ZS(r,e,t){!e||(QS(r,t,e),!t.alignedSliding&&e.details&&JS(t,e.details),!t.alignedSliding&&e.details&&!t.skippedSegments&&jy(e.details,t))}function QS(r,e,t){if(YS(r,t,e)){const n=XS(t.details,e);n&&De(n.start)&&(G.log(`Adjusting PTS using last level due to CC increase within current level ${e.url}`),a0(n.start,e))}}function JS(r,e){if(!e.fragments.length||!r.hasProgramDateTime||!e.hasProgramDateTime)return;const t=e.fragments[0].programDateTime,n=r.fragments[0].programDateTime,i=(n-t)/1e3+e.fragments[0].start;i&&De(i)&&(G.log(`Adjusting PTS using programDateTime delta ${n-t}ms, sliding:${i.toFixed(3)} ${r.url} `),a0(i,r))}function Xy(r,e){if(!r.hasProgramDateTime||!e.hasProgramDateTime)return;const t=r.fragments,n=e.fragments;if(!t.length||!n.length)return;const i=Math.round(n.length/2)-1,s=n[i],a=Yy(t,s.cc)||t[Math.round(t.length/2)-1],o=s.programDateTime,u=a.programDateTime;if(o===null||u===null)return;const l=(u-o)/1e3-(a.start-s.start);a0(l,r)}class eD{constructor(e,t){this.subtle=void 0,this.aesIV=void 0,this.subtle=e,this.aesIV=t}decrypt(e,t){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e)}}class tD{constructor(e,t){this.subtle=void 0,this.key=void 0,this.subtle=e,this.key=t}expandKey(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])}}function rD(r){const e=r.byteLength,t=e&&new DataView(r.buffer).getUint8(e-1);return t?Yi(r,0,e-t):r}class nD{constructor(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}uint8ArrayToUint32Array_(e){const t=new DataView(e),n=new Uint32Array(4);for(let i=0;i<4;i++)n[i]=t.getUint32(i*4);return n}initTable(){const e=this.sBox,t=this.invSBox,n=this.subMix,i=n[0],s=n[1],a=n[2],o=n[3],u=this.invSubMix,l=u[0],c=u[1],h=u[2],f=u[3],d=new Uint32Array(256);let m=0,E=0,p=0;for(p=0;p<256;p++)p<128?d[p]=p<<1:d[p]=p<<1^283;for(p=0;p<256;p++){let g=E^E<<1^E<<2^E<<3^E<<4;g=g>>>8^g&255^99,e[m]=g,t[g]=m;const v=d[m],y=d[v],C=d[y];let A=d[g]*257^g*16843008;i[m]=A<<24|A>>>8,s[m]=A<<16|A>>>16,a[m]=A<<8|A>>>24,o[m]=A,A=C*16843009^y*65537^v*257^m*16843008,l[g]=A<<24|A>>>8,c[g]=A<<16|A>>>16,h[g]=A<<8|A>>>24,f[g]=A,m?(m=v^d[d[d[C^v]]],E^=d[d[E]]):m=E=1}}expandKey(e){const t=this.uint8ArrayToUint32Array_(e);let n=!0,i=0;for(;i<t.length&&n;)n=t[i]===this.key[i],i++;if(n)return;this.key=t;const s=this.keySize=t.length;if(s!==4&&s!==6&&s!==8)throw new Error("Invalid aes key size="+s);const a=this.ksRows=(s+6+1)*4;let o,u;const l=this.keySchedule=new Uint32Array(a),c=this.invKeySchedule=new Uint32Array(a),h=this.sBox,f=this.rcon,d=this.invSubMix,m=d[0],E=d[1],p=d[2],g=d[3];let v,y;for(o=0;o<a;o++){if(o<s){v=l[o]=t[o];continue}y=v,o%s===0?(y=y<<8|y>>>24,y=h[y>>>24]<<24|h[y>>>16&255]<<16|h[y>>>8&255]<<8|h[y&255],y^=f[o/s|0]<<24):s>6&&o%s===4&&(y=h[y>>>24]<<24|h[y>>>16&255]<<16|h[y>>>8&255]<<8|h[y&255]),l[o]=v=(l[o-s]^y)>>>0}for(u=0;u<a;u++)o=a-u,u&3?y=l[o]:y=l[o-4],u<4||o<=4?c[u]=y:c[u]=m[h[y>>>24]]^E[h[y>>>16&255]]^p[h[y>>>8&255]]^g[h[y&255]],c[u]=c[u]>>>0}networkToHostOrderSwap(e){return e<<24|(e&65280)<<8|(e&16711680)>>8|e>>>24}decrypt(e,t,n){const i=this.keySize+6,s=this.invKeySchedule,a=this.invSBox,o=this.invSubMix,u=o[0],l=o[1],c=o[2],h=o[3],f=this.uint8ArrayToUint32Array_(n);let d=f[0],m=f[1],E=f[2],p=f[3];const g=new Int32Array(e),v=new Int32Array(g.length);let y,C,A,T,S,F,k,R,V,$,ne,ve,H,j;const X=this.networkToHostOrderSwap;for(;t<g.length;){for(V=X(g[t]),$=X(g[t+1]),ne=X(g[t+2]),ve=X(g[t+3]),S=V^s[0],F=ve^s[1],k=ne^s[2],R=$^s[3],H=4,j=1;j<i;j++)y=u[S>>>24]^l[F>>16&255]^c[k>>8&255]^h[R&255]^s[H],C=u[F>>>24]^l[k>>16&255]^c[R>>8&255]^h[S&255]^s[H+1],A=u[k>>>24]^l[R>>16&255]^c[S>>8&255]^h[F&255]^s[H+2],T=u[R>>>24]^l[S>>16&255]^c[F>>8&255]^h[k&255]^s[H+3],S=y,F=C,k=A,R=T,H=H+4;y=a[S>>>24]<<24^a[F>>16&255]<<16^a[k>>8&255]<<8^a[R&255]^s[H],C=a[F>>>24]<<24^a[k>>16&255]<<16^a[R>>8&255]<<8^a[S&255]^s[H+1],A=a[k>>>24]<<24^a[R>>16&255]<<16^a[S>>8&255]<<8^a[F&255]^s[H+2],T=a[R>>>24]<<24^a[S>>16&255]<<16^a[F>>8&255]<<8^a[k&255]^s[H+3],v[t]=X(y^d),v[t+1]=X(T^m),v[t+2]=X(A^E),v[t+3]=X(C^p),d=V,m=$,E=ne,p=ve,t=t+4}return v.buffer}}const iD=16;class o0{constructor(e,{removePKCS7Padding:t=!0}={}){if(this.logEnabled=!0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.useSoftware=void 0,this.useSoftware=e.enableSoftwareAES,this.removePKCS7Padding=t,t)try{const n=self.crypto;n&&(this.subtle=n.subtle||n.webkitSubtle)}catch{}this.subtle===null&&(this.useSoftware=!0)}destroy(){this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null}isSync(){return this.useSoftware}flush(){const{currentResult:e,remainderData:t}=this;if(!e||t)return this.reset(),null;const n=new Uint8Array(e);return this.reset(),this.removePKCS7Padding?rD(n):n}reset(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)}decrypt(e,t,n){return this.useSoftware?new Promise((i,s)=>{this.softwareDecrypt(new Uint8Array(e),t,n);const a=this.flush();a?i(a.buffer):s(new Error("[softwareDecrypt] Failed to decrypt data"))}):this.webCryptoDecrypt(new Uint8Array(e),t,n)}softwareDecrypt(e,t,n){const{currentIV:i,currentResult:s,remainderData:a}=this;this.logOnce("JS AES decrypt"),a&&(e=ts(a,e),this.remainderData=null);const o=this.getValidChunk(e);if(!o.length)return null;i&&(n=i);let u=this.softwareDecrypter;u||(u=this.softwareDecrypter=new nD),u.expandKey(t);const l=s;return this.currentResult=u.decrypt(o.buffer,0,n),this.currentIV=Yi(o,-16).buffer,l||null}webCryptoDecrypt(e,t,n){const i=this.subtle;return(this.key!==t||!this.fastAesKey)&&(this.key=t,this.fastAesKey=new tD(i,t)),this.fastAesKey.expandKey().then(s=>i?(this.logOnce("WebCrypto AES decrypt"),new eD(i,new Uint8Array(n)).decrypt(e.buffer,s)):Promise.reject(new Error("web crypto not initialized"))).catch(s=>(G.warn(`[decrypter]: WebCrypto Error, disable WebCrypto API, ${s.name}: ${s.message}`),this.onWebCryptoError(e,t,n)))}onWebCryptoError(e,t,n){this.useSoftware=!0,this.logEnabled=!0,this.softwareDecrypt(e,t,n);const i=this.flush();if(i)return i.buffer;throw new Error("WebCrypto and softwareDecrypt: failed to decrypt data")}getValidChunk(e){let t=e;const n=e.length-e.length%iD;return n!==e.length&&(t=Yi(e,0,n),this.remainderData=Yi(e,n)),t}logOnce(e){!this.logEnabled||(G.log(`[decrypter]: ${e}`),this.logEnabled=!1)}}const sD={toString:function(r){let e="";const t=r.length;for(let n=0;n<t;n++)e+=`[${r.start(n).toFixed(3)}-${r.end(n).toFixed(3)}]`;return e}},se={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"};class u0 extends KS{constructor(e,t,n,i,s){super(),this.hls=void 0,this.fragPrevious=null,this.fragCurrent=null,this.fragmentTracker=void 0,this.transmuxer=null,this._state=se.STOPPED,this.playlistType=void 0,this.media=null,this.mediaBuffer=null,this.config=void 0,this.bitrateTest=!1,this.lastCurrentTime=0,this.nextLoadPosition=0,this.startPosition=0,this.startTimeOffset=null,this.loadedmetadata=!1,this.retryDate=0,this.levels=null,this.fragmentLoader=void 0,this.keyLoader=void 0,this.levelLastLoaded=null,this.startFragRequested=!1,this.decrypter=void 0,this.initPTS=[],this.onvseeking=null,this.onvended=null,this.logPrefix="",this.log=void 0,this.warn=void 0,this.playlistType=s,this.logPrefix=i,this.log=G.log.bind(G,`${i}:`),this.warn=G.warn.bind(G,`${i}:`),this.hls=e,this.fragmentLoader=new HS(e.config),this.keyLoader=n,this.fragmentTracker=t,this.config=e.config,this.decrypter=new o0(e.config),e.on(D.MANIFEST_LOADED,this.onManifestLoaded,this)}doTick(){this.onTickEnd()}onTickEnd(){}startLoad(e){}stopLoad(){this.fragmentLoader.abort(),this.keyLoader.abort(this.playlistType);const e=this.fragCurrent;e!=null&&e.loader&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=se.STOPPED}_streamEnded(e,t){if(t.live||e.nextStart||!e.end||!this.media)return!1;const n=t.partList;if(n!=null&&n.length){const s=n[n.length-1];return tt.isBuffered(this.media,s.start+s.duration/2)}const i=t.fragments[t.fragments.length-1].type;return this.fragmentTracker.isEndListAppended(i)}getLevelDetails(){if(this.levels&&this.levelLastLoaded!==null){var e;return(e=this.levels[this.levelLastLoaded])==null?void 0:e.details}}onMediaAttached(e,t){const n=this.media=this.mediaBuffer=t.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),n.addEventListener("seeking",this.onvseeking),n.addEventListener("ended",this.onvended);const i=this.config;this.levels&&i.autoStartLoad&&this.state===se.STOPPED&&this.startLoad(i.startPosition)}onMediaDetaching(){const e=this.media;e!=null&&e.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),e&&this.onvseeking&&this.onvended&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvended=null),this.keyLoader&&this.keyLoader.detach(),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()}onMediaSeeking(){const{config:e,fragCurrent:t,media:n,mediaBuffer:i,state:s}=this,a=n?n.currentTime:0,o=tt.bufferInfo(i||n,a,e.maxBufferHole);if(this.log(`media seeking to ${De(a)?a.toFixed(3):a}, state: ${s}`),this.state===se.ENDED)this.resetLoadingState();else if(t){const u=e.maxFragLookUpTolerance,l=t.start-u,c=t.start+t.duration+u;if(!o.len||c<o.start||l>o.end){const h=a>c;(a<l||h)&&(h&&t.loader&&(this.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),t.abortRequests(),this.resetLoadingState()),this.fragPrevious=null)}}n&&(this.fragmentTracker.removeFragmentsInRange(a,1/0,this.playlistType,!0),this.lastCurrentTime=a),!this.loadedmetadata&&!o.len&&(this.nextLoadPosition=this.startPosition=a),this.tickImmediate()}onMediaEnded(){this.startPosition=this.lastCurrentTime=0}onManifestLoaded(e,t){this.startTimeOffset=t.startTimeOffset,this.initPTS=[]}onHandlerDestroying(){this.stopLoad(),super.onHandlerDestroying()}onHandlerDestroyed(){this.state=se.STOPPED,this.fragmentLoader&&this.fragmentLoader.destroy(),this.keyLoader&&this.keyLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.keyLoader=this.fragmentLoader=this.fragmentTracker=null,super.onHandlerDestroyed()}loadFragment(e,t,n){this._loadFragForPlayback(e,t,n)}_loadFragForPlayback(e,t,n){const i=s=>{if(this.fragContextChanged(e)){this.warn(`Fragment ${e.sn}${s.part?" p: "+s.part.index:""} of level ${e.level} was dropped during download.`),this.fragmentTracker.removeFragment(e);return}e.stats.chunkCount++,this._handleFragmentLoadProgress(s)};this._doFragLoad(e,t,n,i).then(s=>{if(!s)return;const a=this.state;if(this.fragContextChanged(e)){(a===se.FRAG_LOADING||!this.fragCurrent&&a===se.PARSING)&&(this.fragmentTracker.removeFragment(e),this.state=se.IDLE);return}"payload"in s&&(this.log(`Loaded fragment ${e.sn} of level ${e.level}`),this.hls.trigger(D.FRAG_LOADED,s)),this._handleFragmentLoadComplete(s)}).catch(s=>{this.state===se.STOPPED||this.state===se.ERROR||(this.warn(s),this.resetFragmentLoading(e))})}clearTrackerIfNeeded(e){var t;const{fragmentTracker:n}=this;if(n.getState(e)===$t.APPENDING){const s=e.type,a=this.getFwdBufferInfo(this.mediaBuffer,s),o=Math.max(e.duration,a?a.len:this.config.maxBufferLength);this.reduceMaxBufferLength(o)&&n.removeFragment(e)}else((t=this.mediaBuffer)==null?void 0:t.buffered.length)===0?n.removeAllFragments():n.hasParts(e.type)&&(n.detectPartialFragments({frag:e,part:null,stats:e.stats,id:e.type}),n.getState(e)===$t.PARTIAL&&n.removeFragment(e))}flushMainBuffer(e,t,n=null){if(!(e-t))return;const i={startOffset:e,endOffset:t,type:n};this.hls.trigger(D.BUFFER_FLUSHING,i)}_loadInitSegment(e,t){this._doFragLoad(e,t).then(n=>{if(!n||this.fragContextChanged(e)||!this.levels)throw new Error("init load aborted");return n}).then(n=>{const{hls:i}=this,{payload:s}=n,a=e.decryptdata;if(s&&s.byteLength>0&&a&&a.key&&a.iv&&a.method==="AES-128"){const o=self.performance.now();return this.decrypter.decrypt(new Uint8Array(s),a.key.buffer,a.iv.buffer).catch(u=>{throw i.trigger(D.ERROR,{type:_e.MEDIA_ERROR,details:J.FRAG_DECRYPT_ERROR,fatal:!1,error:u,reason:u.message,frag:e}),u}).then(u=>{const l=self.performance.now();return i.trigger(D.FRAG_DECRYPTED,{frag:e,payload:u,stats:{tstart:o,tdecrypt:l}}),n.payload=u,n})}return n}).then(n=>{const{fragCurrent:i,hls:s,levels:a}=this;if(!a)throw new Error("init load aborted, missing levels");const o=e.stats;this.state=se.IDLE,t.fragmentError=0,e.data=new Uint8Array(n.payload),o.parsing.start=o.buffering.start=self.performance.now(),o.parsing.end=o.buffering.end=self.performance.now(),n.frag===i&&s.trigger(D.FRAG_BUFFERED,{stats:o,frag:i,part:null,id:e.type}),this.tick()}).catch(n=>{this.state===se.STOPPED||this.state===se.ERROR||(this.warn(n),this.resetFragmentLoading(e))})}fragContextChanged(e){const{fragCurrent:t}=this;return!e||!t||e.level!==t.level||e.sn!==t.sn||e.urlId!==t.urlId}fragBufferedComplete(e,t){var n,i,s,a;const o=this.mediaBuffer?this.mediaBuffer:this.media;this.log(`Buffered ${e.type} sn: ${e.sn}${t?" part: "+t.index:""} of ${this.playlistType===Fe.MAIN?"level":"track"} ${e.level} (frag:[${((n=e.startPTS)!=null?n:NaN).toFixed(3)}-${((i=e.endPTS)!=null?i:NaN).toFixed(3)}] > buffer:${o?sD.toString(tt.getBuffered(o)):"(detached)"})`),this.state=se.IDLE,o&&(!this.loadedmetadata&&e.type==Fe.MAIN&&o.buffered.length&&((s=this.fragCurrent)==null?void 0:s.sn)===((a=this.fragPrevious)==null?void 0:a.sn)&&(this.loadedmetadata=!0,this.seekToStartPos()),this.tick())}seekToStartPos(){}_handleFragmentLoadComplete(e){const{transmuxer:t}=this;if(!t)return;const{frag:n,part:i,partsLoaded:s}=e,a=!s||s.length===0||s.some(u=>!u),o=new s0(n.level,n.sn,n.stats.chunkCount+1,0,i?i.index:-1,!a);t.flush(o)}_handleFragmentLoadProgress(e){}_doFragLoad(e,t,n=null,i){var s;const a=t==null?void 0:t.details;if(!this.levels||!a)throw new Error(`frag load aborted, missing level${a?"":" detail"}s`);let o=null;if(e.encrypted&&!((s=e.decryptdata)!=null&&s.key)?(this.log(`Loading key for ${e.sn} of [${a.startSN}-${a.endSN}], ${this.logPrefix==="[stream-controller]"?"level":"track"} ${e.level}`),this.state=se.KEY_LOADING,this.fragCurrent=e,o=this.keyLoader.load(e).then(c=>{if(!this.fragContextChanged(c.frag))return this.hls.trigger(D.KEY_LOADED,c),this.state===se.KEY_LOADING&&(this.state=se.IDLE),c}),this.hls.trigger(D.KEY_LOADING,{frag:e}),this.fragCurrent===null&&(o=Promise.reject(new Error("frag load aborted, context changed in KEY_LOADING")))):!e.encrypted&&a.encryptedFragments.length&&this.keyLoader.loadClear(e,a.encryptedFragments),n=Math.max(e.start,n||0),this.config.lowLatencyMode&&e.sn!=="initSegment"){const c=a.partList;if(c&&i){n>e.end&&a.fragmentHint&&(e=a.fragmentHint);const h=this.getNextPart(c,e,n);if(h>-1){const f=c[h];this.log(`Loading part sn: ${e.sn} p: ${f.index} cc: ${e.cc} of playlist [${a.startSN}-${a.endSN}] parts [0-${h}-${c.length-1}] ${this.logPrefix==="[stream-controller]"?"level":"track"}: ${e.level}, target: ${parseFloat(n.toFixed(3))}`),this.nextLoadPosition=f.start+f.duration,this.state=se.FRAG_LOADING;let d;return o?d=o.then(m=>!m||this.fragContextChanged(m.frag)?null:this.doFragPartsLoad(e,f,t,i)).catch(m=>this.handleFragLoadError(m)):d=this.doFragPartsLoad(e,f,t,i).catch(m=>this.handleFragLoadError(m)),this.hls.trigger(D.FRAG_LOADING,{frag:e,part:f,targetBufferTime:n}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING parts")):d}else if(!e.url||this.loadedEndOfParts(c,n))return Promise.resolve(null)}}this.log(`Loading fragment ${e.sn} cc: ${e.cc} ${a?"of ["+a.startSN+"-"+a.endSN+"] ":""}${this.logPrefix==="[stream-controller]"?"level":"track"}: ${e.level}, target: ${parseFloat(n.toFixed(3))}`),De(e.sn)&&!this.bitrateTest&&(this.nextLoadPosition=e.start+e.duration),this.state=se.FRAG_LOADING;const u=this.config.progressive;let l;return u&&o?l=o.then(c=>!c||this.fragContextChanged(c==null?void 0:c.frag)?null:this.fragmentLoader.load(e,i)).catch(c=>this.handleFragLoadError(c)):l=Promise.all([this.fragmentLoader.load(e,u?i:void 0),o]).then(([c])=>(!u&&c&&i&&i(c),c)).catch(c=>this.handleFragLoadError(c)),this.hls.trigger(D.FRAG_LOADING,{frag:e,targetBufferTime:n}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING")):l}doFragPartsLoad(e,t,n,i){return new Promise((s,a)=>{var o;const u=[],l=(o=n.details)==null?void 0:o.partList,c=h=>{this.fragmentLoader.loadPart(e,h,i).then(f=>{u[h.index]=f;const d=f.part;this.hls.trigger(D.FRAG_LOADED,f);const m=Tg(n,e.sn,h.index+1)||Ky(l,e.sn,h.index+1);if(m)c(m);else return s({frag:e,part:d,partsLoaded:u})}).catch(a)};c(t)})}handleFragLoadError(e){if("data"in e){const t=e.data;e.data&&t.details===J.INTERNAL_ABORTED?this.handleFragLoadAborted(t.frag,t.part):this.hls.trigger(D.ERROR,t)}else this.hls.trigger(D.ERROR,{type:_e.OTHER_ERROR,details:J.INTERNAL_EXCEPTION,err:e,error:e,fatal:!0});return null}_handleTransmuxerFlush(e){const t=this.getCurrentContext(e);if(!t||this.state!==se.PARSING){!this.fragCurrent&&this.state!==se.STOPPED&&this.state!==se.ERROR&&(this.state=se.IDLE);return}const{frag:n,part:i,level:s}=t,a=self.performance.now();n.stats.parsing.end=a,i&&(i.stats.parsing.end=a),this.updateLevelTiming(n,i,s,e.partial)}getCurrentContext(e){const{levels:t,fragCurrent:n}=this,{level:i,sn:s,part:a}=e;if(!(t!=null&&t[i]))return this.warn(`Levels object was unset while buffering fragment ${s} of level ${i}. The current chunk will not be buffered.`),null;const o=t[i],u=a>-1?Tg(o,s,a):null,l=u?u.fragment:OS(o,s,n);return l?(n&&n!==l&&(l.stats=n.stats),{frag:l,part:u,level:o}):null}bufferFragmentData(e,t,n,i){var s;if(!e||this.state!==se.PARSING)return;const{data1:a,data2:o}=e;let u=a;if(a&&o&&(u=ts(a,o)),!((s=u)!=null&&s.length))return;const l={type:e.type,frag:t,part:n,chunkMeta:i,parent:t.type,data:u};this.hls.trigger(D.BUFFER_APPENDING,l),e.dropped&&e.independent&&!n&&this.flushBufferGap(t)}flushBufferGap(e){const t=this.media;if(!t)return;if(!tt.isBuffered(t,t.currentTime)){this.flushMainBuffer(0,e.start);return}const n=t.currentTime,i=tt.bufferInfo(t,n,0),s=e.duration,a=Math.min(this.config.maxFragLookUpTolerance*2,s*.25),o=Math.max(Math.min(e.start-a,i.end-a),n+a);e.start-o>a&&this.flushMainBuffer(o,e.start)}getFwdBufferInfo(e,t){const n=this.getLoadPosition();return De(n)?this.getFwdBufferInfoAtPos(e,n,t):null}getFwdBufferInfoAtPos(e,t,n){const{config:{maxBufferHole:i}}=this,s=tt.bufferInfo(e,t,i);if(s.len===0&&s.nextStart!==void 0){const a=this.fragmentTracker.getBufferedFrag(t,n);if(a&&s.nextStart<a.end)return tt.bufferInfo(e,t,Math.max(s.nextStart,i))}return s}getMaxBufferLength(e){const{config:t}=this;let n;return e?n=Math.max(8*t.maxBufferSize/e,t.maxBufferLength):n=t.maxBufferLength,Math.min(n,t.maxMaxBufferLength)}reduceMaxBufferLength(e){const t=this.config,n=e||t.maxBufferLength;return t.maxMaxBufferLength>=n?(t.maxMaxBufferLength/=2,this.warn(`Reduce max buffer length to ${t.maxMaxBufferLength}s`),!0):!1}getAppendedFrag(e,t=Fe.MAIN){const n=this.fragmentTracker.getAppendedFrag(e,Fe.MAIN);return n&&"fragment"in n?n.fragment:n}getNextFragment(e,t){const n=t.fragments,i=n.length;if(!i)return null;const{config:s}=this,a=n[0].start;let o;if(t.live){const u=s.initialLiveManifestSize;if(i<u)return this.warn(`Not enough fragments to start playback (have: ${i}, need: ${u})`),null;!t.PTSKnown&&!this.startFragRequested&&this.startPosition===-1&&(o=this.getInitialLiveFragment(t,n),this.startPosition=o?this.hls.liveSyncPosition||o.start:e)}else e<=a&&(o=n[0]);if(!o){const u=s.lowLatencyMode?t.partEnd:t.fragmentEnd;o=this.getFragmentAtPosition(e,u,t)}return this.mapToInitFragWhenRequired(o)}isLoopLoading(e,t){const n=this.fragmentTracker.getState(e);return(n===$t.OK||n===$t.PARTIAL&&!!e.gap)&&this.nextLoadPosition>t}getNextFragmentLoopLoading(e,t,n,i,s){const a=e.gap,o=this.getNextFragment(this.nextLoadPosition,t);if(o===null)return o;if(e=o,a&&e&&!e.gap&&n.nextStart){const u=this.getFwdBufferInfoAtPos(this.mediaBuffer?this.mediaBuffer:this.media,n.nextStart,i);if(u!==null&&n.len+u.len>=s)return this.log(`buffer full after gaps in "${i}" playlist starting at sn: ${e.sn}`),null}return e}mapToInitFragWhenRequired(e){return e!=null&&e.initSegment&&!(e!=null&&e.initSegment.data)&&!this.bitrateTest?e.initSegment:e}getNextPart(e,t,n){let i=-1,s=!1,a=!0;for(let o=0,u=e.length;o<u;o++){const l=e[o];if(a=a&&!l.independent,i>-1&&n<l.start)break;const c=l.loaded;c?i=-1:(s||l.independent||a)&&l.fragment===t&&(i=o),s=c}return i}loadedEndOfParts(e,t){const n=e[e.length-1];return n&&t>n.start&&n.loaded}getInitialLiveFragment(e,t){const n=this.fragPrevious;let i=null;if(n){if(e.hasProgramDateTime&&(this.log(`Live playlist, switching playlist, load frag with same PDT: ${n.programDateTime}`),i=PS(t,n.endProgramDateTime,this.config.maxFragLookUpTolerance)),!i){const s=n.sn+1;if(s>=e.startSN&&s<=e.endSN){const a=t[s-e.startSN];n.cc===a.cc&&(i=a,this.log(`Live playlist, switching playlist, load frag with next SN: ${i.sn}`))}i||(i=US(t,n.cc),i&&this.log(`Live playlist, switching playlist, load frag with same CC: ${i.sn}`))}}else{const s=this.hls.liveSyncPosition;s!==null&&(i=this.getFragmentAtPosition(s,this.bitrateTest?e.fragmentEnd:e.edge,e))}return i}getFragmentAtPosition(e,t,n){const{config:i}=this;let{fragPrevious:s}=this,{fragments:a,endSN:o}=n;const{fragmentHint:u}=n,l=i.maxFragLookUpTolerance,c=n.partList,h=!!(i.lowLatencyMode&&c!=null&&c.length&&u);h&&u&&!this.bitrateTest&&(a=a.concat(u),o=u.sn);let f;if(e<t){const d=e>t-l?0:l;f=xo(s,a,e,d)}else f=a[a.length-1];if(f){const d=f.sn-n.startSN,m=this.fragmentTracker.getState(f);if((m===$t.OK||m===$t.PARTIAL&&f.gap)&&(s=f),s&&f.sn===s.sn&&(!h||c[0].fragment.sn>f.sn)&&s&&f.level===s.level){const p=a[d+1];f.sn<o&&this.fragmentTracker.getState(p)!==$t.OK?f=p:f=null}}return f}synchronizeToLiveEdge(e){const{config:t,media:n}=this;if(!n)return;const i=this.hls.liveSyncPosition,s=n.currentTime,a=e.fragments[0].start,o=e.edge,u=s>=a-t.maxFragLookUpTolerance&&s<=o;if(i!==null&&n.duration>i&&(s<i||!u)){const l=t.liveMaxLatencyDuration!==void 0?t.liveMaxLatencyDuration:t.liveMaxLatencyDurationCount*e.targetduration;(!u&&n.readyState<4||s<o-l)&&(this.loadedmetadata||(this.nextLoadPosition=i),n.readyState&&(this.warn(`Playback: ${s.toFixed(3)} is located too far from the end of live sliding playlist: ${o}, reset currentTime to : ${i.toFixed(3)}`),n.currentTime=i))}}alignPlaylists(e,t){const{levels:n,levelLastLoaded:i,fragPrevious:s}=this,a=i!==null?n[i]:null,o=e.fragments.length;if(!o)return this.warn("No fragments in live playlist"),0;const u=e.fragments[0].start,l=!t,c=e.alignedSliding&&De(u);if(l||!c&&!u){ZS(s,a,e);const h=e.fragments[0].start;return this.log(`Live playlist sliding: ${h.toFixed(2)} start-sn: ${t?t.startSN:"na"}->${e.startSN} prev-sn: ${s?s.sn:"na"} fragments: ${o}`),h}return u}waitForCdnTuneIn(e){return e.live&&e.canBlockReload&&e.partTarget&&e.tuneInGoal>Math.max(e.partHoldBack,e.partTarget*3)}setStartPosition(e,t){let n=this.startPosition;if(n<t&&(n=-1),n===-1||this.lastCurrentTime===-1){const i=this.startTimeOffset!==null,s=i?this.startTimeOffset:e.startTimeOffset;s!==null&&De(s)?(n=t+s,s<0&&(n+=e.totalduration),n=Math.min(Math.max(t,n),t+e.totalduration),this.log(`Start time offset ${s} found in ${i?"multivariant":"media"} playlist, adjust startPosition to ${n}`),this.startPosition=n):e.live?n=this.hls.liveSyncPosition||t:this.startPosition=n=0,this.lastCurrentTime=n}this.nextLoadPosition=n}getLoadPosition(){const{media:e}=this;let t=0;return this.loadedmetadata&&e?t=e.currentTime:this.nextLoadPosition&&(t=this.nextLoadPosition),t}handleFragLoadAborted(e,t){this.transmuxer&&e.sn!=="initSegment"&&e.stats.aborted&&(this.warn(`Fragment ${e.sn}${t?" part "+t.index:""} of level ${e.level} was aborted`),this.resetFragmentLoading(e))}resetFragmentLoading(e){(!this.fragCurrent||!this.fragContextChanged(e)&&this.state!==se.FRAG_LOADING_WAITING_RETRY)&&(this.state=se.IDLE)}onFragmentOrKeyLoadError(e,t){if(t.chunkMeta&&!t.frag){const c=this.getCurrentContext(t.chunkMeta);c&&(t.frag=c.frag)}const n=t.frag;if(!n||n.type!==e||!this.levels)return;if(this.fragContextChanged(n)){var i;this.warn(`Frag load error must match current frag to retry ${n.url} > ${(i=this.fragCurrent)==null?void 0:i.url}`);return}const s=t.details===J.FRAG_GAP;s&&this.fragmentTracker.fragBuffered(n,!0);const a=t.errorAction,{action:o,retryCount:u=0,retryConfig:l}=a||{};if(a&&o===dr.RetryRequest&&l){this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition);const c=n0(l,u);this.warn(`Fragment ${n.sn} of ${e} ${n.level} errored with ${t.details}, retrying loading ${u+1}/${l.maxNumRetry} in ${c}ms`),a.resolved=!0,this.retryDate=self.performance.now()+c,this.state=se.FRAG_LOADING_WAITING_RETRY}else l&&a?(this.resetFragmentErrors(e),u<l.maxNumRetry?s||(a.resolved=!0):G.warn(`${t.details} reached or exceeded max retry (${u})`)):this.state=se.ERROR;this.tickImmediate()}reduceLengthAndFlushBuffer(e){if(this.state===se.PARSING||this.state===se.PARSED){const t=e.parent,n=this.getFwdBufferInfo(this.mediaBuffer,t),i=n&&n.len>.5;i&&this.reduceMaxBufferLength(n.len);const s=!i;return s&&this.warn(`Buffer full error while media.currentTime is not buffered, flush ${t} buffer`),e.frag&&(this.fragmentTracker.removeFragment(e.frag),this.nextLoadPosition=e.frag.start),this.resetLoadingState(),s}return!1}resetFragmentErrors(e){e===Fe.AUDIO&&(this.fragCurrent=null),this.loadedmetadata||(this.startFragRequested=!1),this.state!==se.STOPPED&&(this.state=se.IDLE)}afterBufferFlushed(e,t,n){if(!e)return;const i=tt.getBuffered(e);this.fragmentTracker.detectEvictedFragments(t,i,n),this.state===se.ENDED&&this.resetLoadingState()}resetLoadingState(){this.log("Reset loading state"),this.fragCurrent=null,this.fragPrevious=null,this.state=se.IDLE}resetStartWhenNotLoaded(e){if(!this.loadedmetadata){this.startFragRequested=!1;const t=this.levels?this.levels[e].details:null;t!=null&&t.live?(this.startPosition=-1,this.setStartPosition(t,0),this.resetLoadingState()):this.nextLoadPosition=this.startPosition}}resetWhenMissingContext(e){this.warn(`The loading context changed while buffering fragment ${e.sn} of level ${e.level}. This chunk will not be buffered.`),this.removeUnbufferedFrags(),this.resetStartWhenNotLoaded(e.level),this.resetLoadingState()}removeUnbufferedFrags(e=0){this.fragmentTracker.removeFragmentsInRange(e,1/0,this.playlistType,!1,!0)}updateLevelTiming(e,t,n,i){var s;const a=n.details;if(!a){this.warn("level.details undefined");return}if(Object.keys(e.elementaryStreams).reduce((u,l)=>{const c=e.elementaryStreams[l];if(c){const h=c.endPTS-c.startPTS;if(h<=0)return this.warn(`Could not parse fragment ${e.sn} ${l} duration reliably (${h})`),u||!1;const f=i?0:Hy(a,e,c.startPTS,c.endPTS,c.startDTS,c.endDTS);return this.hls.trigger(D.LEVEL_PTS_UPDATED,{details:a,level:n,drift:f,type:l,frag:e,start:c.startPTS,end:c.endPTS}),!0}return u},!1))n.fragmentError=0;else if(((s=this.transmuxer)==null?void 0:s.error)===null){const u=new Error(`Found no media in fragment ${e.sn} of level ${n.id} resetting transmuxer to fallback to playlist timing`);if(this.warn(u.message),this.hls.trigger(D.ERROR,{type:_e.MEDIA_ERROR,details:J.FRAG_PARSING_ERROR,fatal:!1,error:u,frag:e,reason:`Found no media in msn ${e.sn} of level "${n.url}"`}),!this.hls)return;this.resetTransmuxer()}this.state=se.PARSED,this.hls.trigger(D.FRAG_PARSED,{frag:e,part:t})}resetTransmuxer(){this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null)}recoverWorkerError(e){e.event==="demuxerWorker"&&(this.resetTransmuxer(),this.resetLoadingState())}set state(e){const t=this._state;t!==e&&(this._state=e,this.log(`${t}->${e}`))}get state(){return this._state}}function Zy(){return self.SourceBuffer||self.WebKitSourceBuffer}function aD(){const r=Xl();if(!r)return!1;const e=Zy(),t=r&&typeof r.isTypeSupported=="function"&&r.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),n=!e||e.prototype&&typeof e.prototype.appendBuffer=="function"&&typeof e.prototype.remove=="function";return!!t&&!!n}function oD(){var r;const e=Zy();return typeof(e==null||(r=e.prototype)==null?void 0:r.changeType)=="function"}function uD(){return typeof __HLS_WORKER_BUNDLE__=="function"}function lD(){const r=new self.Blob([`var exports={};var module={exports:exports};function define(f){f()};define.amd=true;(${__HLS_WORKER_BUNDLE__.toString()})(true);`],{type:"text/javascript"}),e=self.URL.createObjectURL(r);return{worker:new self.Worker(e),objectURL:e}}function cD(r){const e=new self.URL(r,self.location.href).href;return{worker:new self.Worker(e),scriptURL:e}}function Tn(r="",e=9e4){return{type:r,id:-1,pid:-1,inputTimeScale:e,sequenceNumber:-1,samples:[],dropped:0}}class Qy{constructor(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null,this.lastPTS=null}resetInitSegment(e,t,n,i){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}}resetTimeStamp(e){this.initPTS=e,this.resetContiguity()}resetContiguity(){this.basePTS=null,this.lastPTS=null,this.frameIndex=0}canParse(e,t){return!1}appendFrame(e,t,n){}demux(e,t){this.cachedData&&(e=ts(this.cachedData,e),this.cachedData=null);let n=ml(e,0),i=n?n.length:0,s;const a=this._audioTrack,o=this._id3Track,u=n?jT(n):void 0,l=e.length;for((this.basePTS===null||this.frameIndex===0&&De(u))&&(this.basePTS=hD(u,t,this.initPTS),this.lastPTS=this.basePTS),this.lastPTS===null&&(this.lastPTS=this.basePTS),n&&n.length>0&&o.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:n,type:fn.audioId3,duration:Number.POSITIVE_INFINITY});i<l;){if(this.canParse(e,i)){const c=this.appendFrame(a,e,i);c?(this.frameIndex++,this.lastPTS=c.sample.pts,i+=c.length,s=i):i=l}else HT(e,i)?(n=ml(e,i),o.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:n,type:fn.audioId3,duration:Number.POSITIVE_INFINITY}),i+=n.length,s=i):i++;if(i===l&&s!==l){const c=Yi(e,s);this.cachedData?this.cachedData=ts(this.cachedData,c):this.cachedData=c}}return{audioTrack:a,videoTrack:Tn(),id3Track:o,textTrack:Tn()}}demuxSampleAes(e,t,n){return Promise.reject(new Error(`[${this}] This demuxer does not support Sample-AES decryption`))}flush(e){const t=this.cachedData;return t&&(this.cachedData=null,this.demux(t,0)),{audioTrack:this._audioTrack,videoTrack:Tn(),id3Track:this._id3Track,textTrack:Tn()}}destroy(){}}const hD=(r,e,t)=>{if(De(r))return r*90;const n=t?t.baseTime*9e4/t.timescale:0;return e*9e4+n};function fD(r,e,t,n){let i,s,a,o;const u=navigator.userAgent.toLowerCase(),l=n,c=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];i=((e[t+2]&192)>>>6)+1;const h=(e[t+2]&60)>>>2;if(h>c.length-1){r.trigger(D.ERROR,{type:_e.MEDIA_ERROR,details:J.FRAG_PARSING_ERROR,fatal:!0,reason:`invalid ADTS sampling index:${h}`});return}return a=(e[t+2]&1)<<2,a|=(e[t+3]&192)>>>6,G.log(`manifest codec:${n}, ADTS type:${i}, samplingIndex:${h}`),/firefox/i.test(u)?h>=6?(i=5,o=new Array(4),s=h-3):(i=2,o=new Array(2),s=h):u.indexOf("android")!==-1?(i=2,o=new Array(2),s=h):(i=5,o=new Array(4),n&&(n.indexOf("mp4a.40.29")!==-1||n.indexOf("mp4a.40.5")!==-1)||!n&&h>=6?s=h-3:((n&&n.indexOf("mp4a.40.2")!==-1&&(h>=6&&a===1||/vivaldi/i.test(u))||!n&&a===1)&&(i=2,o=new Array(2)),s=h)),o[0]=i<<3,o[0]|=(h&14)>>1,o[1]|=(h&1)<<7,o[1]|=a<<3,i===5&&(o[1]|=(s&14)>>1,o[2]=(s&1)<<7,o[2]|=2<<2,o[3]=0),{config:o,samplerate:c[h],channelCount:a,codec:"mp4a.40."+i,manifestCodec:l}}function Jy(r,e){return r[e]===255&&(r[e+1]&246)===240}function e1(r,e){return r[e+1]&1?7:9}function l0(r,e){return(r[e+3]&3)<<11|r[e+4]<<3|(r[e+5]&224)>>>5}function dD(r,e){return e+5<r.length}function Al(r,e){return e+1<r.length&&Jy(r,e)}function pD(r,e){return dD(r,e)&&Jy(r,e)&&l0(r,e)<=r.length-e}function gD(r,e){if(Al(r,e)){const t=e1(r,e);if(e+t>=r.length)return!1;const n=l0(r,e);if(n<=t)return!1;const i=e+n;return i===r.length||Al(r,i)}return!1}function t1(r,e,t,n,i){if(!r.samplerate){const s=fD(e,t,n,i);if(!s)return;r.config=s.config,r.samplerate=s.samplerate,r.channelCount=s.channelCount,r.codec=s.codec,r.manifestCodec=s.manifestCodec,G.log(`parsed codec:${r.codec}, rate:${s.samplerate}, channels:${s.channelCount}`)}}function r1(r){return 1024*9e4/r}function mD(r,e){const t=e1(r,e);if(e+t<=r.length){const n=l0(r,e)-t;if(n>0)return{headerLength:t,frameLength:n}}}function n1(r,e,t,n,i){const s=r1(r.samplerate),a=n+i*s,o=mD(e,t);let u;if(o){const{frameLength:h,headerLength:f}=o,d=f+h,m=Math.max(0,t+d-e.length);m?(u=new Uint8Array(d-f),u.set(e.subarray(t+f,e.length),0)):u=e.subarray(t+f,t+d);const E={unit:u,pts:a};return m||r.samples.push(E),{sample:E,length:d,missing:m}}const l=e.length-t;return u=new Uint8Array(l),u.set(e.subarray(t,e.length),0),{sample:{unit:u,pts:a},length:l,missing:-1}}class vD extends Qy{constructor(e,t){super(),this.observer=void 0,this.config=void 0,this.observer=e,this.config=t}resetInitSegment(e,t,n,i){super.resetInitSegment(e,t,n,i),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:t,duration:i,inputTimeScale:9e4,dropped:0}}static probe(e){if(!e)return!1;let n=(ml(e,0)||[]).length;for(let i=e.length;n<i;n++)if(gD(e,n))return G.log("ADTS sync word found !"),!0;return!1}canParse(e,t){return pD(e,t)}appendFrame(e,t,n){t1(e,this.observer,t,n,e.manifestCodec);const i=n1(e,t,n,this.basePTS,this.frameIndex);if(i&&i.missing===0)return i}}const ED=/\/emsg[-/]ID3/i;class yD{constructor(e,t){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=t}resetTimeStamp(){}resetInitSegment(e,t,n,i){const s=this.videoTrack=Tn("video",1),a=this.audioTrack=Tn("audio",1),o=this.txtTrack=Tn("text",1);if(this.id3Track=Tn("id3",1),this.timeOffset=0,!(e!=null&&e.byteLength))return;const u=My(e);if(u.video){const{id:l,timescale:c,codec:h}=u.video;s.id=l,s.timescale=o.timescale=c,s.codec=h}if(u.audio){const{id:l,timescale:c,codec:h}=u.audio;a.id=l,a.timescale=c,a.codec=h}o.id=Oy.text,s.sampleDuration=0,s.duration=a.duration=i}resetContiguity(){this.remainderData=null}static probe(e){return e=e.length>16384?e.subarray(0,16384):e,$e(e,["moof"]).length>0}demux(e,t){this.timeOffset=t;let n=e;const i=this.videoTrack,s=this.txtTrack;if(this.config.progressive){this.remainderData&&(n=ts(this.remainderData,e));const o=oS(n);this.remainderData=o.remainder,i.samples=o.valid||new Uint8Array}else i.samples=n;const a=this.extractID3Track(i,t);return s.samples=ug(t,i),{videoTrack:i,audioTrack:this.audioTrack,id3Track:a,textTrack:this.txtTrack}}flush(){const e=this.timeOffset,t=this.videoTrack,n=this.txtTrack;t.samples=this.remainderData||new Uint8Array,this.remainderData=null;const i=this.extractID3Track(t,this.timeOffset);return n.samples=ug(e,t),{videoTrack:t,audioTrack:Tn(),id3Track:i,textTrack:Tn()}}extractID3Track(e,t){const n=this.id3Track;if(e.samples.length){const i=$e(e.samples,["emsg"]);i&&i.forEach(s=>{const a=cS(s);if(ED.test(a.schemeIdUri)){const o=De(a.presentationTime)?a.presentationTime/a.timeScale:t+a.presentationTimeDelta/a.timeScale;let u=a.eventDuration===4294967295?Number.POSITIVE_INFINITY:a.eventDuration/a.timeScale;u<=.001&&(u=Number.POSITIVE_INFINITY);const l=a.payload;n.samples.push({data:l,len:l.byteLength,dts:o,pts:o,type:fn.emsg,duration:u})}})}return n}demuxSampleAes(e,t,n){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))}destroy(){}}let vu=null;const xD=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],AD=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],CD=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],TD=[0,1,1,4];function i1(r,e,t,n,i){if(t+24>e.length)return;const s=s1(e,t);if(s&&t+s.frameLength<=e.length){const a=s.samplesPerFrame*9e4/s.sampleRate,o=n+i*a,u={unit:e.subarray(t,t+s.frameLength),pts:o,dts:o};return r.config=[],r.channelCount=s.channelCount,r.samplerate=s.sampleRate,r.samples.push(u),{sample:u,length:s.frameLength,missing:0}}}function s1(r,e){const t=r[e+1]>>3&3,n=r[e+1]>>1&3,i=r[e+2]>>4&15,s=r[e+2]>>2&3;if(t!==1&&i!==0&&i!==15&&s!==3){const a=r[e+2]>>1&1,o=r[e+3]>>6,u=t===3?3-n:n===3?3:4,l=xD[u*14+i-1]*1e3,h=AD[(t===3?0:t===2?1:2)*3+s],f=o===3?1:2,d=CD[t][n],m=TD[n],E=d*8*m,p=Math.floor(d*l/h+a)*m;if(vu===null){const y=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);vu=y?parseInt(y[1]):0}return!!vu&&vu<=87&&n===2&&l>=224e3&&o===0&&(r[e+3]=r[e+3]|128),{sampleRate:h,channelCount:f,frameLength:p,samplesPerFrame:E}}}function c0(r,e){return r[e]===255&&(r[e+1]&224)===224&&(r[e+1]&6)!==0}function a1(r,e){return e+1<r.length&&c0(r,e)}function SD(r,e){return c0(r,e)&&4<=r.length-e}function DD(r,e){if(e+1<r.length&&c0(r,e)){const n=s1(r,e);let i=4;n!=null&&n.frameLength&&(i=n.frameLength);const s=e+i;return s===r.length||a1(r,s)}return!1}class Lg{constructor(e){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}loadWord(){const e=this.data,t=this.bytesAvailable,n=e.byteLength-t,i=new Uint8Array(4),s=Math.min(4,t);if(s===0)throw new Error("no bytes available");i.set(e.subarray(n,n+s)),this.word=new DataView(i.buffer).getUint32(0),this.bitsAvailable=s*8,this.bytesAvailable-=s}skipBits(e){let t;e=Math.min(e,this.bytesAvailable*8+this.bitsAvailable),this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,t=e>>3,e-=t<<3,this.bytesAvailable-=t,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)}readBits(e){let t=Math.min(this.bitsAvailable,e);const n=this.word>>>32-t;if(e>32&&G.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,this.bitsAvailable>0)this.word<<=t;else if(this.bytesAvailable>0)this.loadWord();else throw new Error("no bits available");return t=e-t,t>0&&this.bitsAvailable?n<<t|this.readBits(t):n}skipLZ(){let e;for(e=0;e<this.bitsAvailable;++e)if((this.word&2147483648>>>e)!==0)return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()}skipUEG(){this.skipBits(1+this.skipLZ())}skipEG(){this.skipBits(1+this.skipLZ())}readUEG(){const e=this.skipLZ();return this.readBits(e+1)-1}readEG(){const e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)}readBoolean(){return this.readBits(1)===1}readUByte(){return this.readBits(8)}readUShort(){return this.readBits(16)}readUInt(){return this.readBits(32)}skipScalingList(e){let t=8,n=8,i;for(let s=0;s<e;s++)n!==0&&(i=this.readEG(),n=(t+i+256)%256),t=n===0?t:n}readSPS(){let e=0,t=0,n=0,i=0,s,a,o;const u=this.readUByte.bind(this),l=this.readBits.bind(this),c=this.readUEG.bind(this),h=this.readBoolean.bind(this),f=this.skipBits.bind(this),d=this.skipEG.bind(this),m=this.skipUEG.bind(this),E=this.skipScalingList.bind(this);u();const p=u();if(l(5),f(3),u(),m(),p===100||p===110||p===122||p===244||p===44||p===83||p===86||p===118||p===128){const T=c();if(T===3&&f(1),m(),m(),f(1),h())for(a=T!==3?8:12,o=0;o<a;o++)h()&&(o<6?E(16):E(64))}m();const g=c();if(g===0)c();else if(g===1)for(f(1),d(),d(),s=c(),o=0;o<s;o++)d();m(),f(1);const v=c(),y=c(),C=l(1);C===0&&f(1),f(1),h()&&(e=c(),t=c(),n=c(),i=c());let A=[1,1];if(h()&&h())switch(u()){case 1:A=[1,1];break;case 2:A=[12,11];break;case 3:A=[10,11];break;case 4:A=[16,11];break;case 5:A=[40,33];break;case 6:A=[24,11];break;case 7:A=[20,11];break;case 8:A=[32,11];break;case 9:A=[80,33];break;case 10:A=[18,11];break;case 11:A=[15,11];break;case 12:A=[64,33];break;case 13:A=[160,99];break;case 14:A=[4,3];break;case 15:A=[3,2];break;case 16:A=[2,1];break;case 255:{A=[u()<<8|u(),u()<<8|u()];break}}return{width:Math.ceil((v+1)*16-e*2-t*2),height:(2-C)*(y+1)*16-(C?2:4)*(n+i),pixelRatio:A}}readSliceType(){return this.readUByte(),this.readUEG(),this.readUEG()}}class wD{constructor(e,t,n){this.keyData=void 0,this.decrypter=void 0,this.keyData=n,this.decrypter=new o0(t,{removePKCS7Padding:!1})}decryptBuffer(e){return this.decrypter.decrypt(e,this.keyData.key.buffer,this.keyData.iv.buffer)}decryptAacSample(e,t,n){const i=e[t].unit;if(i.length<=16)return;const s=i.subarray(16,i.length-i.length%16),a=s.buffer.slice(s.byteOffset,s.byteOffset+s.length);this.decryptBuffer(a).then(o=>{const u=new Uint8Array(o);i.set(u,16),this.decrypter.isSync()||this.decryptAacSamples(e,t+1,n)})}decryptAacSamples(e,t,n){for(;;t++){if(t>=e.length){n();return}if(!(e[t].unit.length<32)&&(this.decryptAacSample(e,t,n),!this.decrypter.isSync()))return}}getAvcEncryptedData(e){const t=Math.floor((e.length-48)/160)*16+16,n=new Int8Array(t);let i=0;for(let s=32;s<e.length-16;s+=160,i+=16)n.set(e.subarray(s,s+16),i);return n}getAvcDecryptedUnit(e,t){const n=new Uint8Array(t);let i=0;for(let s=32;s<e.length-16;s+=160,i+=16)e.set(n.subarray(i,i+16),s);return e}decryptAvcSample(e,t,n,i,s){const a=zy(s.data),o=this.getAvcEncryptedData(a);this.decryptBuffer(o.buffer).then(u=>{s.data=this.getAvcDecryptedUnit(a,u),this.decrypter.isSync()||this.decryptAvcSamples(e,t,n+1,i)})}decryptAvcSamples(e,t,n,i){if(e instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;t++,n=0){if(t>=e.length){i();return}const s=e[t].units;for(;!(n>=s.length);n++){const a=s[n];if(!(a.data.length<=48||a.type!==1&&a.type!==5)&&(this.decryptAvcSample(e,t,n,i,a),!this.decrypter.isSync()))return}}}}const Kt=188;class hi{constructor(e,t,n){this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._duration=0,this._pmtId=-1,this._avcTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.avcSample=null,this.remainderData=null,this.observer=e,this.config=t,this.typeSupported=n}static probe(e){const t=hi.syncOffset(e);return t>0&&G.warn(`MPEG2-TS detected but first sync word found @ offset ${t}`),t!==-1}static syncOffset(e){const t=e.length;let n=Math.min(Kt*5,e.length-Kt)+1,i=0;for(;i<n;){let s=!1,a=-1,o=0;for(let u=i;u<t;u+=Kt)if(e[u]===71){if(o++,a===-1&&(a=u,a!==0&&(n=Math.min(a+Kt*99,e.length-Kt)+1)),s||(s=Hf(e,u)===0),s&&o>1&&(a===0&&o>2||u+Kt>n))return a}else{if(o)return-1;break}i++}return-1}static createTrack(e,t){return{container:e==="video"||e==="audio"?"video/mp2t":void 0,type:e,id:Oy[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:e==="audio"?t:void 0}}resetInitSegment(e,t,n,i){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack=hi.createTrack("video"),this._audioTrack=hi.createTrack("audio",i),this._id3Track=hi.createTrack("id3"),this._txtTrack=hi.createTrack("text"),this._audioTrack.segmentCodec="aac",this.aacOverFlow=null,this.avcSample=null,this.remainderData=null,this.audioCodec=t,this.videoCodec=n,this._duration=i}resetTimeStamp(){}resetContiguity(){const{_audioTrack:e,_avcTrack:t,_id3Track:n}=this;e&&(e.pesData=null),t&&(t.pesData=null),n&&(n.pesData=null),this.aacOverFlow=null,this.avcSample=null,this.remainderData=null}demux(e,t,n=!1,i=!1){n||(this.sampleAes=null);let s;const a=this._avcTrack,o=this._audioTrack,u=this._id3Track,l=this._txtTrack;let c=a.pid,h=a.pesData,f=o.pid,d=u.pid,m=o.pesData,E=u.pesData,p=null,g=this.pmtParsed,v=this._pmtId,y=e.length;if(this.remainderData&&(e=ts(this.remainderData,e),y=e.length,this.remainderData=null),y<Kt&&!i)return this.remainderData=e,{audioTrack:o,videoTrack:a,id3Track:u,textTrack:l};const C=Math.max(0,hi.syncOffset(e));y-=(y-C)%Kt,y<e.byteLength&&!i&&(this.remainderData=new Uint8Array(e.buffer,y,e.buffer.byteLength-y));let A=0;for(let S=C;S<y;S+=Kt)if(e[S]===71){const F=!!(e[S+1]&64),k=Hf(e,S),R=(e[S+3]&48)>>4;let V;if(R>1){if(V=S+5+e[S+4],V===S+Kt)continue}else V=S+4;switch(k){case c:F&&(h&&(s=Es(h))&&this.parseAVCPES(a,l,s,!1),h={data:[],size:0}),h&&(h.data.push(e.subarray(V,S+Kt)),h.size+=S+Kt-V);break;case f:if(F){if(m&&(s=Es(m)))switch(o.segmentCodec){case"aac":this.parseAACPES(o,s);break;case"mp3":this.parseMPEGPES(o,s);break}m={data:[],size:0}}m&&(m.data.push(e.subarray(V,S+Kt)),m.size+=S+Kt-V);break;case d:F&&(E&&(s=Es(E))&&this.parseID3PES(u,s),E={data:[],size:0}),E&&(E.data.push(e.subarray(V,S+Kt)),E.size+=S+Kt-V);break;case 0:F&&(V+=e[V]+1),v=this._pmtId=_D(e,V);break;case v:{F&&(V+=e[V]+1);const $=FD(e,V,this.typeSupported,n);c=$.avc,c>0&&(a.pid=c),f=$.audio,f>0&&(o.pid=f,o.segmentCodec=$.segmentCodec),d=$.id3,d>0&&(u.pid=d),p!==null&&!g&&(G.warn(`MPEG-TS PMT found at ${S} after unknown PID '${p}'. Backtracking to sync byte @${C} to parse all TS packets.`),p=null,S=C-188),g=this.pmtParsed=!0;break}case 17:case 8191:break;default:p=k;break}}else A++;if(A>0){const S=new Error(`Found ${A} TS packet/s that do not start with 0x47`);this.observer.emit(D.ERROR,D.ERROR,{type:_e.MEDIA_ERROR,details:J.FRAG_PARSING_ERROR,fatal:!1,error:S,reason:S.message})}a.pesData=h,o.pesData=m,u.pesData=E;const T={audioTrack:o,videoTrack:a,id3Track:u,textTrack:l};return i&&this.extractRemainingSamples(T),T}flush(){const{remainderData:e}=this;this.remainderData=null;let t;return e?t=this.demux(e,-1,!1,!0):t={videoTrack:this._avcTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(t),this.sampleAes?this.decrypt(t,this.sampleAes):t}extractRemainingSamples(e){const{audioTrack:t,videoTrack:n,id3Track:i,textTrack:s}=e,a=n.pesData,o=t.pesData,u=i.pesData;let l;if(a&&(l=Es(a))?(this.parseAVCPES(n,s,l,!0),n.pesData=null):n.pesData=a,o&&(l=Es(o))){switch(t.segmentCodec){case"aac":this.parseAACPES(t,l);break;case"mp3":this.parseMPEGPES(t,l);break}t.pesData=null}else o!=null&&o.size&&G.log("last AAC PES packet truncated,might overlap between fragments"),t.pesData=o;u&&(l=Es(u))?(this.parseID3PES(i,l),i.pesData=null):i.pesData=u}demuxSampleAes(e,t,n){const i=this.demux(e,n,!0,!this.config.progressive),s=this.sampleAes=new wD(this.observer,this.config,t);return this.decrypt(i,s)}decrypt(e,t){return new Promise(n=>{const{audioTrack:i,videoTrack:s}=e;i.samples&&i.segmentCodec==="aac"?t.decryptAacSamples(i.samples,0,()=>{s.samples?t.decryptAvcSamples(s.samples,0,0,()=>{n(e)}):n(e)}):s.samples&&t.decryptAvcSamples(s.samples,0,0,()=>{n(e)})})}destroy(){this._duration=0}parseAVCPES(e,t,n,i){const s=this.parseAVCNALu(e,n.data);let a=this.avcSample,o,u=!1;n.data=null,a&&s.length&&!e.audFound&&(ch(a,e),a=this.avcSample=Eu(!1,n.pts,n.dts,"")),s.forEach(l=>{switch(l.type){case 1:{o=!0,a||(a=this.avcSample=Eu(!0,n.pts,n.dts,"")),a.frame=!0;const c=l.data;if(u&&c.length>4){const h=new Lg(c).readSliceType();(h===2||h===4||h===7||h===9)&&(a.key=!0)}break}case 5:o=!0,a||(a=this.avcSample=Eu(!0,n.pts,n.dts,"")),a.key=!0,a.frame=!0;break;case 6:{o=!0,$y(l.data,1,n.pts,t.samples);break}case 7:if(o=!0,u=!0,!e.sps){const c=l.data,f=new Lg(c).readSPS();e.width=f.width,e.height=f.height,e.pixelRatio=f.pixelRatio,e.sps=[c],e.duration=this._duration;const d=c.subarray(1,4);let m="avc1.";for(let E=0;E<3;E++){let p=d[E].toString(16);p.length<2&&(p="0"+p),m+=p}e.codec=m}break;case 8:o=!0,e.pps||(e.pps=[l.data]);break;case 9:o=!1,e.audFound=!0,a&&ch(a,e),a=this.avcSample=Eu(!1,n.pts,n.dts,"");break;case 12:o=!0;break;default:o=!1,a&&(a.debug+="unknown NAL "+l.type+" ");break}a&&o&&a.units.push(l)}),i&&a&&(ch(a,e),this.avcSample=null)}getLastNalUnit(e){var t;let n=this.avcSample,i;if((!n||n.units.length===0)&&(n=e[e.length-1]),(t=n)!=null&&t.units){const s=n.units;i=s[s.length-1]}return i}parseAVCNALu(e,t){const n=t.byteLength;let i=e.naluState||0;const s=i,a=[];let o=0,u,l,c,h=-1,f=0;for(i===-1&&(h=0,f=t[0]&31,i=0,o=1);o<n;){if(u=t[o++],!i){i=u?0:1;continue}if(i===1){i=u?0:2;continue}if(!u)i=3;else if(u===1){if(h>=0){const d={data:t.subarray(h,o-i-1),type:f};a.push(d)}else{const d=this.getLastNalUnit(e.samples);if(d&&(s&&o<=4-s&&d.state&&(d.data=d.data.subarray(0,d.data.byteLength-s)),l=o-i-1,l>0)){const m=new Uint8Array(d.data.byteLength+l);m.set(d.data,0),m.set(t.subarray(0,l),d.data.byteLength),d.data=m,d.state=0}}o<n?(c=t[o]&31,h=o,f=c,i=0):i=-1}else i=0}if(h>=0&&i>=0){const d={data:t.subarray(h,n),type:f,state:i};a.push(d)}if(a.length===0){const d=this.getLastNalUnit(e.samples);if(d){const m=new Uint8Array(d.data.byteLength+t.byteLength);m.set(d.data,0),m.set(t,d.data.byteLength),d.data=m}}return e.naluState=i,a}parseAACPES(e,t){let n=0;const i=this.aacOverFlow;let s=t.data;if(i){this.aacOverFlow=null;const h=i.missing,f=i.sample.unit.byteLength;if(h===-1){const d=new Uint8Array(f+s.byteLength);d.set(i.sample.unit,0),d.set(s,f),s=d}else{const d=f-h;i.sample.unit.set(s.subarray(0,h),d),e.samples.push(i.sample),n=i.missing}}let a,o;for(a=n,o=s.length;a<o-1&&!Al(s,a);a++);if(a!==n){let h;const f=a<o-1;f?h=`AAC PES did not start with ADTS header,offset:${a}`:h="No ADTS header found in AAC PES";const d=new Error(h);if(G.warn(`parsing error: ${h}`),this.observer.emit(D.ERROR,D.ERROR,{type:_e.MEDIA_ERROR,details:J.FRAG_PARSING_ERROR,fatal:!1,levelRetry:f,error:d,reason:h}),!f)return}t1(e,this.observer,s,a,this.audioCodec);let u;if(t.pts!==void 0)u=t.pts;else if(i){const h=r1(e.samplerate);u=i.sample.pts+h}else{G.warn("[tsdemuxer]: AAC PES unknown PTS");return}let l=0,c;for(;a<o;)if(c=n1(e,s,a,u,l),a+=c.length,c.missing){this.aacOverFlow=c;break}else for(l++;a<o-1&&!Al(s,a);a++);}parseMPEGPES(e,t){const n=t.data,i=n.length;let s=0,a=0;const o=t.pts;if(o===void 0){G.warn("[tsdemuxer]: MPEG PES unknown PTS");return}for(;a<i;)if(a1(n,a)){const u=i1(e,n,a,o,s);if(u)a+=u.length,s++;else break}else a++}parseID3PES(e,t){if(t.pts===void 0){G.warn("[tsdemuxer]: ID3 PES unknown PTS");return}const n=Ft({},t,{type:this._avcTrack?fn.emsg:fn.audioId3,duration:Number.POSITIVE_INFINITY});e.samples.push(n)}}function Eu(r,e,t,n){return{key:r,frame:!1,pts:e,dts:t,units:[],debug:n,length:0}}function Hf(r,e){return((r[e+1]&31)<<8)+r[e+2]}function _D(r,e){return(r[e+10]&31)<<8|r[e+11]}function FD(r,e,t,n){const i={audio:-1,avc:-1,id3:-1,segmentCodec:"aac"},s=(r[e+1]&15)<<8|r[e+2],a=e+3+s-4,o=(r[e+10]&15)<<8|r[e+11];for(e+=12+o;e<a;){const u=Hf(r,e);switch(r[e]){case 207:if(!n){G.log("ADTS AAC with AES-128-CBC frame encryption found in unencrypted stream");break}case 15:i.audio===-1&&(i.audio=u);break;case 21:i.id3===-1&&(i.id3=u);break;case 219:if(!n){G.log("H.264 with AES-128-CBC slice encryption found in unencrypted stream");break}case 27:i.avc===-1&&(i.avc=u);break;case 3:case 4:t.mpeg!==!0&&t.mp3!==!0?G.log("MPEG audio found, not supported in this browser"):i.audio===-1&&(i.audio=u,i.segmentCodec="mp3");break;case 36:G.warn("Unsupported HEVC stream type found");break}e+=((r[e+3]&15)<<8|r[e+4])+5}return i}function Es(r){let e=0,t,n,i,s,a;const o=r.data;if(!r||r.size===0)return null;for(;o[0].length<19&&o.length>1;){const l=new Uint8Array(o[0].length+o[1].length);l.set(o[0]),l.set(o[1],o[0].length),o[0]=l,o.splice(1,1)}if(t=o[0],(t[0]<<16)+(t[1]<<8)+t[2]===1){if(n=(t[4]<<8)+t[5],n&&n>r.size-6)return null;const l=t[7];l&192&&(s=(t[9]&14)*536870912+(t[10]&255)*4194304+(t[11]&254)*16384+(t[12]&255)*128+(t[13]&254)/2,l&64?(a=(t[14]&14)*536870912+(t[15]&255)*4194304+(t[16]&254)*16384+(t[17]&255)*128+(t[18]&254)/2,s-a>60*9e4&&(G.warn(`${Math.round((s-a)/9e4)}s delta between PTS and DTS, align them`),s=a)):a=s),i=t[8];let c=i+9;if(r.size<=c)return null;r.size-=c;const h=new Uint8Array(r.size);for(let f=0,d=o.length;f<d;f++){t=o[f];let m=t.byteLength;if(c)if(c>m){c-=m;continue}else t=t.subarray(c),m-=c,c=0;h.set(t,e),e+=m}return n&&(n-=i+3),{data:h,pts:s,dts:a,len:n}}return null}function ch(r,e){if(r.units.length&&r.frame){if(r.pts===void 0){const t=e.samples,n=t.length;if(n){const i=t[n-1];r.pts=i.pts,r.dts=i.dts}else{e.dropped++;return}}e.samples.push(r)}r.debug.length&&G.log(r.pts+"/"+r.dts+":"+r.debug)}class bD extends Qy{resetInitSegment(e,t,n,i){super.resetInitSegment(e,t,n,i),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:t,duration:i,inputTimeScale:9e4,dropped:0}}static probe(e){if(!e)return!1;let n=(ml(e,0)||[]).length;for(let i=e.length;n<i;n++)if(DD(e,n))return G.log("MPEG Audio sync word found !"),!0;return!1}canParse(e,t){return SD(e,t)}appendFrame(e,t,n){if(this.basePTS!==null)return i1(e,t,n,this.basePTS,this.frameIndex)}}class Ig{static getSilentFrame(e,t){switch(e){case"mp4a.40.2":if(t===1)return new Uint8Array([0,200,0,128,35,128]);if(t===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(t===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(t===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(t===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(t===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(t===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(t===2)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(t===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);break}}}const ii=Math.pow(2,32)-1;class q{static init(){q.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};let e;for(e in q.types)q.types.hasOwnProperty(e)&&(q.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);const t=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),n=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);q.HDLR_TYPES={video:t,audio:n};const i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),s=new Uint8Array([0,0,0,0,0,0,0,0]);q.STTS=q.STSC=q.STCO=s,q.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),q.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),q.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),q.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);const a=new Uint8Array([105,115,111,109]),o=new Uint8Array([97,118,99,49]),u=new Uint8Array([0,0,0,1]);q.FTYP=q.box(q.types.ftyp,a,u,a,o),q.DINF=q.box(q.types.dinf,q.box(q.types.dref,i))}static box(e,...t){let n=8,i=t.length;const s=i;for(;i--;)n+=t[i].byteLength;const a=new Uint8Array(n);for(a[0]=n>>24&255,a[1]=n>>16&255,a[2]=n>>8&255,a[3]=n&255,a.set(e,4),i=0,n=8;i<s;i++)a.set(t[i],n),n+=t[i].byteLength;return a}static hdlr(e){return q.box(q.types.hdlr,q.HDLR_TYPES[e])}static mdat(e){return q.box(q.types.mdat,e)}static mdhd(e,t){t*=e;const n=Math.floor(t/(ii+1)),i=Math.floor(t%(ii+1));return q.box(q.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,e&255,n>>24,n>>16&255,n>>8&255,n&255,i>>24,i>>16&255,i>>8&255,i&255,85,196,0,0]))}static mdia(e){return q.box(q.types.mdia,q.mdhd(e.timescale,e.duration),q.hdlr(e.type),q.minf(e))}static mfhd(e){return q.box(q.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,e&255]))}static minf(e){return e.type==="audio"?q.box(q.types.minf,q.box(q.types.smhd,q.SMHD),q.DINF,q.stbl(e)):q.box(q.types.minf,q.box(q.types.vmhd,q.VMHD),q.DINF,q.stbl(e))}static moof(e,t,n){return q.box(q.types.moof,q.mfhd(e),q.traf(n,t))}static moov(e){let t=e.length;const n=[];for(;t--;)n[t]=q.trak(e[t]);return q.box.apply(null,[q.types.moov,q.mvhd(e[0].timescale,e[0].duration)].concat(n).concat(q.mvex(e)))}static mvex(e){let t=e.length;const n=[];for(;t--;)n[t]=q.trex(e[t]);return q.box.apply(null,[q.types.mvex,...n])}static mvhd(e,t){t*=e;const n=Math.floor(t/(ii+1)),i=Math.floor(t%(ii+1)),s=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,e&255,n>>24,n>>16&255,n>>8&255,n&255,i>>24,i>>16&255,i>>8&255,i&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return q.box(q.types.mvhd,s)}static sdtp(e){const t=e.samples||[],n=new Uint8Array(4+t.length);let i,s;for(i=0;i<t.length;i++)s=t[i].flags,n[i+4]=s.dependsOn<<4|s.isDependedOn<<2|s.hasRedundancy;return q.box(q.types.sdtp,n)}static stbl(e){return q.box(q.types.stbl,q.stsd(e),q.box(q.types.stts,q.STTS),q.box(q.types.stsc,q.STSC),q.box(q.types.stsz,q.STSZ),q.box(q.types.stco,q.STCO))}static avc1(e){let t=[],n=[],i,s,a;for(i=0;i<e.sps.length;i++)s=e.sps[i],a=s.byteLength,t.push(a>>>8&255),t.push(a&255),t=t.concat(Array.prototype.slice.call(s));for(i=0;i<e.pps.length;i++)s=e.pps[i],a=s.byteLength,n.push(a>>>8&255),n.push(a&255),n=n.concat(Array.prototype.slice.call(s));const o=q.box(q.types.avcC,new Uint8Array([1,t[3],t[4],t[5],255,224|e.sps.length].concat(t).concat([e.pps.length]).concat(n))),u=e.width,l=e.height,c=e.pixelRatio[0],h=e.pixelRatio[1];return q.box(q.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,u>>8&255,u&255,l>>8&255,l&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),o,q.box(q.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),q.box(q.types.pasp,new Uint8Array([c>>24,c>>16&255,c>>8&255,c&255,h>>24,h>>16&255,h>>8&255,h&255])))}static esds(e){const t=e.config.length;return new Uint8Array([0,0,0,0,3,23+t,0,1,0,4,15+t,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([t]).concat(e.config).concat([6,1,2]))}static mp4a(e){const t=e.samplerate;return q.box(q.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,t>>8&255,t&255,0,0]),q.box(q.types.esds,q.esds(e)))}static mp3(e){const t=e.samplerate;return q.box(q.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,t>>8&255,t&255,0,0]))}static stsd(e){return e.type==="audio"?e.segmentCodec==="mp3"&&e.codec==="mp3"?q.box(q.types.stsd,q.STSD,q.mp3(e)):q.box(q.types.stsd,q.STSD,q.mp4a(e)):q.box(q.types.stsd,q.STSD,q.avc1(e))}static tkhd(e){const t=e.id,n=e.duration*e.timescale,i=e.width,s=e.height,a=Math.floor(n/(ii+1)),o=Math.floor(n%(ii+1));return q.box(q.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,t&255,0,0,0,0,a>>24,a>>16&255,a>>8&255,a&255,o>>24,o>>16&255,o>>8&255,o&255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,i>>8&255,i&255,0,0,s>>8&255,s&255,0,0]))}static traf(e,t){const n=q.sdtp(e),i=e.id,s=Math.floor(t/(ii+1)),a=Math.floor(t%(ii+1));return q.box(q.types.traf,q.box(q.types.tfhd,new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,i&255])),q.box(q.types.tfdt,new Uint8Array([1,0,0,0,s>>24,s>>16&255,s>>8&255,s&255,a>>24,a>>16&255,a>>8&255,a&255])),q.trun(e,n.length+16+20+8+16+8+8),n)}static trak(e){return e.duration=e.duration||4294967295,q.box(q.types.trak,q.tkhd(e),q.mdia(e))}static trex(e){const t=e.id;return q.box(q.types.trex,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,t&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}static trun(e,t){const n=e.samples||[],i=n.length,s=12+16*i,a=new Uint8Array(s);let o,u,l,c,h,f;for(t+=8+s,a.set([e.type==="video"?1:0,0,15,1,i>>>24&255,i>>>16&255,i>>>8&255,i&255,t>>>24&255,t>>>16&255,t>>>8&255,t&255],0),o=0;o<i;o++)u=n[o],l=u.duration,c=u.size,h=u.flags,f=u.cts,a.set([l>>>24&255,l>>>16&255,l>>>8&255,l&255,c>>>24&255,c>>>16&255,c>>>8&255,c&255,h.isLeading<<2|h.dependsOn,h.isDependedOn<<6|h.hasRedundancy<<4|h.paddingValue<<1|h.isNonSync,h.degradPrio&240<<8,h.degradPrio&15,f>>>24&255,f>>>16&255,f>>>8&255,f&255],12+16*o);return q.box(q.types.trun,a)}static initSegment(e){q.types||q.init();const t=q.moov(e),n=new Uint8Array(q.FTYP.byteLength+t.byteLength);return n.set(q.FTYP),n.set(t,q.FTYP.byteLength),n}}q.types=void 0;q.HDLR_TYPES=void 0;q.STTS=void 0;q.STSC=void 0;q.STCO=void 0;q.STSZ=void 0;q.VMHD=void 0;q.SMHD=void 0;q.STSD=void 0;q.FTYP=void 0;q.DINF=void 0;const o1=9e4;function h0(r,e,t=1,n=!1){const i=r*e*t;return n?Math.round(i):i}function RD(r,e,t=1,n=!1){return h0(r,e,1/t,n)}function _a(r,e=!1){return h0(r,1e3,1/o1,e)}function LD(r,e=1){return h0(r,o1,1/e)}const ID=10*1e3,kg=1024,kD=1152;let yu=null,hh=null;class fh{constructor(e,t,n,i=""){if(this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=null,this._initDTS=null,this.nextAvcDts=null,this.nextAudioPts=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.observer=e,this.config=t,this.typeSupported=n,this.ISGenerated=!1,yu===null){const a=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);yu=a?parseInt(a[1]):0}if(hh===null){const s=navigator.userAgent.match(/Safari\/(\d+)/i);hh=s?parseInt(s[1]):0}}destroy(){}resetTimeStamp(e){G.log("[mp4-remuxer]: initPTS & initDTS reset"),this._initPTS=this._initDTS=e}resetNextTimestamp(){G.log("[mp4-remuxer]: reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1}resetInitSegment(){G.log("[mp4-remuxer]: ISGenerated flag reset"),this.ISGenerated=!1}getVideoStartPts(e){let t=!1;const n=e.reduce((i,s)=>{const a=s.pts-i;return a<-4294967296?(t=!0,Vr(i,s.pts)):a>0?i:s.pts},e[0].pts);return t&&G.debug("PTS rollover detected"),n}remux(e,t,n,i,s,a,o,u){let l,c,h,f,d,m,E=s,p=s;const g=e.pid>-1,v=t.pid>-1,y=t.samples.length,C=e.samples.length>0,A=o&&y>0||y>1;if((!g||C)&&(!v||A)||this.ISGenerated||o){this.ISGenerated||(h=this.generateIS(e,t,s,a));const S=this.isVideoContiguous;let F=-1,k;if(A&&(F=BD(t.samples),!S&&this.config.forceKeyFrameOnDiscontinuity))if(m=!0,F>0){G.warn(`[mp4-remuxer]: Dropped ${F} out of ${y} video samples due to a missing keyframe`);const R=this.getVideoStartPts(t.samples);t.samples=t.samples.slice(F),t.dropped+=F,p+=(t.samples[0].pts-R)/t.inputTimeScale,k=p}else F===-1&&(G.warn(`[mp4-remuxer]: No keyframe found out of ${y} video samples`),m=!1);if(this.ISGenerated){if(C&&A){const R=this.getVideoStartPts(t.samples),$=(Vr(e.samples[0].pts,R)-R)/t.inputTimeScale;E+=Math.max(0,$),p+=Math.max(0,-$)}if(C){if(e.samplerate||(G.warn("[mp4-remuxer]: regenerate InitSegment as audio detected"),h=this.generateIS(e,t,s,a)),c=this.remuxAudio(e,E,this.isAudioContiguous,a,v||A||u===Fe.AUDIO?p:void 0),A){const R=c?c.endPTS-c.startPTS:0;t.inputTimeScale||(G.warn("[mp4-remuxer]: regenerate InitSegment as video detected"),h=this.generateIS(e,t,s,a)),l=this.remuxVideo(t,p,S,R)}}else A&&(l=this.remuxVideo(t,p,S,0));l&&(l.firstKeyFrame=F,l.independent=F!==-1,l.firstKeyFramePTS=k)}}return this.ISGenerated&&this._initPTS&&this._initDTS&&(n.samples.length&&(d=u1(n,s,this._initPTS,this._initDTS)),i.samples.length&&(f=l1(i,s,this._initPTS))),{audio:c,video:l,initSegment:h,independent:m,text:f,id3:d}}generateIS(e,t,n,i){const s=e.samples,a=t.samples,o=this.typeSupported,u={},l=this._initPTS;let c=!l||i,h="audio/mp4",f,d,m;if(c&&(f=d=1/0),e.config&&s.length){switch(e.timescale=e.samplerate,e.segmentCodec){case"mp3":o.mpeg?(h="audio/mpeg",e.codec=""):o.mp3&&(e.codec="mp3");break}u.audio={id:"audio",container:h,codec:e.codec,initSegment:e.segmentCodec==="mp3"&&o.mpeg?new Uint8Array(0):q.initSegment([e]),metadata:{channelCount:e.channelCount}},c&&(m=e.inputTimeScale,!l||m!==l.timescale?f=d=s[0].pts-Math.round(m*n):c=!1)}if(t.sps&&t.pps&&a.length&&(t.timescale=t.inputTimeScale,u.video={id:"main",container:"video/mp4",codec:t.codec,initSegment:q.initSegment([t]),metadata:{width:t.width,height:t.height}},c))if(m=t.inputTimeScale,!l||m!==l.timescale){const E=this.getVideoStartPts(a),p=Math.round(m*n);d=Math.min(d,Vr(a[0].dts,E)-p),f=Math.min(f,E-p)}else c=!1;if(Object.keys(u).length)return this.ISGenerated=!0,c?(this._initPTS={baseTime:f,timescale:m},this._initDTS={baseTime:d,timescale:m}):f=m=void 0,{tracks:u,initPTS:f,timescale:m}}remuxVideo(e,t,n,i){const s=e.inputTimeScale,a=e.samples,o=[],u=a.length,l=this._initPTS;let c=this.nextAvcDts,h=8,f=this.videoSampleDuration,d,m,E=Number.POSITIVE_INFINITY,p=Number.NEGATIVE_INFINITY,g=!1;if(!n||c===null){const B=t*s,U=a[0].pts-Vr(a[0].dts,a[0].pts);c=B-U}const v=l.baseTime*s/l.timescale;for(let B=0;B<u;B++){const U=a[B];U.pts=Vr(U.pts-v,c),U.dts=Vr(U.dts-v,c),U.dts<a[B>0?B-1:B].dts&&(g=!0)}g&&a.sort(function(B,U){const Z=B.dts-U.dts,oe=B.pts-U.pts;return Z||oe}),d=a[0].dts,m=a[a.length-1].dts;const y=m-d,C=y?Math.round(y/(u-1)):f||e.inputTimeScale/30;if(n){const B=d-c,U=B>C,Z=B<-1;if((U||Z)&&(U?G.warn(`AVC: ${_a(B,!0)} ms (${B}dts) hole between fragments detected, filling it`):G.warn(`AVC: ${_a(-B,!0)} ms (${B}dts) overlapping between fragments detected`),!Z||c>=a[0].pts)){d=c;const oe=a[0].pts-B;a[0].dts=d,a[0].pts=oe,G.log(`Video: First PTS/DTS adjusted: ${_a(oe,!0)}/${_a(d,!0)}, delta: ${_a(B,!0)} ms`)}}d=Math.max(0,d);let A=0,T=0;for(let B=0;B<u;B++){const U=a[B],Z=U.units,oe=Z.length;let re=0;for(let ge=0;ge<oe;ge++)re+=Z[ge].data.length;T+=re,A+=oe,U.length=re,U.dts=Math.max(U.dts,d),E=Math.min(U.pts,E),p=Math.max(U.pts,p)}m=a[u-1].dts;const S=T+4*A+8;let F;try{F=new Uint8Array(S)}catch(B){this.observer.emit(D.ERROR,D.ERROR,{type:_e.MUX_ERROR,details:J.REMUX_ALLOC_ERROR,fatal:!1,error:B,bytes:S,reason:`fail allocating video mdat ${S}`});return}const k=new DataView(F.buffer);k.setUint32(0,S),F.set(q.types.mdat,4);let R=!1,V=Number.POSITIVE_INFINITY,$=Number.POSITIVE_INFINITY,ne=Number.NEGATIVE_INFINITY,ve=Number.NEGATIVE_INFINITY;for(let B=0;B<u;B++){const U=a[B],Z=U.units;let oe=0;for(let Ce=0,ke=Z.length;Ce<ke;Ce++){const Ie=Z[Ce],Oe=Ie.data,Le=Ie.data.byteLength;k.setUint32(h,Le),h+=4,F.set(Oe,h),h+=Le,oe+=4+Le}let re;if(B<u-1)f=a[B+1].dts-U.dts,re=a[B+1].pts-U.pts;else{const Ce=this.config,ke=B>0?U.dts-a[B-1].dts:C;if(re=B>0?U.pts-a[B-1].pts:C,Ce.stretchShortVideoTrack&&this.nextAudioPts!==null){const Ie=Math.floor(Ce.maxBufferHole*s),Oe=(i?E+i*s:this.nextAudioPts)-U.pts;Oe>Ie?(f=Oe-ke,f<0?f=ke:R=!0,G.log(`[mp4-remuxer]: It is approximately ${Oe/90} ms to the next segment; using duration ${f/90} ms for the last video frame.`)):f=ke}else f=ke}const ge=Math.round(U.pts-U.dts);V=Math.min(V,f),ne=Math.max(ne,f),$=Math.min($,re),ve=Math.max(ve,re),o.push(new Bg(U.key,f,oe,ge))}if(o.length){if(yu){if(yu<70){const B=o[0].flags;B.dependsOn=2,B.isNonSync=0}}else if(hh&&ve-$<ne-V&&C/ne<.025&&o[0].cts===0){G.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");let B=d;for(let U=0,Z=o.length;U<Z;U++){const oe=B+o[U].duration,re=B+o[U].cts;if(U<Z-1){const ge=oe+o[U+1].cts;o[U].duration=ge-re}else o[U].duration=U?o[U-1].duration:C;o[U].cts=0,B=oe}}}f=R||!f?C:f,this.nextAvcDts=c=m+f,this.videoSampleDuration=f,this.isVideoContiguous=!0;const H=q.moof(e.sequenceNumber++,d,Ft({},e,{samples:o})),j="video",X={data1:H,data2:F,startPTS:E/s,endPTS:(p+f)/s,startDTS:d/s,endDTS:c/s,type:j,hasAudio:!1,hasVideo:!0,nb:o.length,dropped:e.dropped};return e.samples=[],e.dropped=0,X}remuxAudio(e,t,n,i,s){const a=e.inputTimeScale,o=e.samplerate?e.samplerate:a,u=a/o,l=e.segmentCodec==="aac"?kg:kD,c=l*u,h=this._initPTS,f=e.segmentCodec==="mp3"&&this.typeSupported.mpeg,d=[],m=s!==void 0;let E=e.samples,p=f?0:8,g=this.nextAudioPts||-1;const v=t*a,y=h.baseTime*a/h.timescale;if(this.isAudioContiguous=n=n||E.length&&g>0&&(i&&Math.abs(v-g)<9e3||Math.abs(Vr(E[0].pts-y,v)-g)<20*c),E.forEach(function(j){j.pts=Vr(j.pts-y,v)}),!n||g<0){if(E=E.filter(j=>j.pts>=0),!E.length)return;s===0?g=0:i&&!m?g=Math.max(0,v):g=E[0].pts}if(e.segmentCodec==="aac"){const j=this.config.maxAudioFramesDrift;for(let X=0,B=g;X<E.length;X++){const U=E[X],Z=U.pts,oe=Z-B,re=Math.abs(1e3*oe/a);if(oe<=-j*c&&m)X===0&&(G.warn(`Audio frame @ ${(Z/a).toFixed(3)}s overlaps nextAudioPts by ${Math.round(1e3*oe/a)} ms.`),this.nextAudioPts=g=B=Z);else if(oe>=j*c&&re<ID&&m){let ge=Math.round(oe/c);B=Z-ge*c,B<0&&(ge--,B+=c),X===0&&(this.nextAudioPts=g=B),G.warn(`[mp4-remuxer]: Injecting ${ge} audio frame @ ${(B/a).toFixed(3)}s due to ${Math.round(1e3*oe/a)} ms gap.`);for(let Ce=0;Ce<ge;Ce++){const ke=Math.max(B,0);let Ie=Ig.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);Ie||(G.log("[mp4-remuxer]: Unable to get silent frame for given audio codec; duplicating last frame instead."),Ie=U.unit.subarray()),E.splice(X,0,{unit:Ie,pts:ke}),B+=c,X++}}U.pts=B,B+=c}}let C=null,A=null,T,S=0,F=E.length;for(;F--;)S+=E[F].unit.byteLength;for(let j=0,X=E.length;j<X;j++){const B=E[j],U=B.unit;let Z=B.pts;if(A!==null){const re=d[j-1];re.duration=Math.round((Z-A)/u)}else if(n&&e.segmentCodec==="aac"&&(Z=g),C=Z,S>0){S+=p;try{T=new Uint8Array(S)}catch(re){this.observer.emit(D.ERROR,D.ERROR,{type:_e.MUX_ERROR,details:J.REMUX_ALLOC_ERROR,fatal:!1,error:re,bytes:S,reason:`fail allocating audio mdat ${S}`});return}f||(new DataView(T.buffer).setUint32(0,S),T.set(q.types.mdat,4))}else return;T.set(U,p);const oe=U.byteLength;p+=oe,d.push(new Bg(!0,l,oe,0)),A=Z}const k=d.length;if(!k)return;const R=d[d.length-1];this.nextAudioPts=g=A+u*R.duration;const V=f?new Uint8Array(0):q.moof(e.sequenceNumber++,C/u,Ft({},e,{samples:d}));e.samples=[];const $=C/a,ne=g/a,H={data1:V,data2:T,startPTS:$,endPTS:ne,startDTS:$,endDTS:ne,type:"audio",hasAudio:!0,hasVideo:!1,nb:k};return this.isAudioContiguous=!0,H}remuxEmptyAudio(e,t,n,i){const s=e.inputTimeScale,a=e.samplerate?e.samplerate:s,o=s/a,u=this.nextAudioPts,l=this._initDTS,c=l.baseTime*9e4/l.timescale,h=(u!==null?u:i.startDTS*s)+c,f=i.endDTS*s+c,d=o*kg,m=Math.ceil((f-h)/d),E=Ig.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);if(G.warn("[mp4-remuxer]: remux empty Audio"),!E){G.trace("[mp4-remuxer]: Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec");return}const p=[];for(let g=0;g<m;g++){const v=h+g*d;p.push({unit:E,pts:v,dts:v})}return e.samples=p,this.remuxAudio(e,t,n,!1)}}function Vr(r,e){let t;if(e===null)return r;for(e<r?t=-8589934592:t=8589934592;Math.abs(r-e)>4294967296;)r+=t;return r}function BD(r){for(let e=0;e<r.length;e++)if(r[e].key)return e;return-1}function u1(r,e,t,n){const i=r.samples.length;if(!i)return;const s=r.inputTimeScale;for(let o=0;o<i;o++){const u=r.samples[o];u.pts=Vr(u.pts-t.baseTime*s/t.timescale,e*s)/s,u.dts=Vr(u.dts-n.baseTime*s/n.timescale,e*s)/s}const a=r.samples;return r.samples=[],{samples:a}}function l1(r,e,t){const n=r.samples.length;if(!n)return;const i=r.inputTimeScale;for(let a=0;a<n;a++){const o=r.samples[a];o.pts=Vr(o.pts-t.baseTime*9e4/t.timescale,e*i)/i}r.samples.sort((a,o)=>a.pts-o.pts);const s=r.samples;return r.samples=[],{samples:s}}class Bg{constructor(e,t,n,i){this.size=void 0,this.duration=void 0,this.cts=void 0,this.flags=void 0,this.duration=t,this.size=n,this.cts=i,this.flags=new OD(e)}}class OD{constructor(e){this.isLeading=0,this.isDependedOn=0,this.hasRedundancy=0,this.degradPrio=0,this.dependsOn=1,this.isNonSync=1,this.dependsOn=e?2:1,this.isNonSync=e?0:1}}class ND{constructor(){this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=null,this.initTracks=void 0,this.lastEndTime=null}destroy(){}resetTimeStamp(e){this.initPTS=e,this.lastEndTime=null}resetNextTimestamp(){this.lastEndTime=null}resetInitSegment(e,t,n,i){this.audioCodec=t,this.videoCodec=n,this.generateInitSegment(rS(e,i)),this.emitInitSegment=!0}generateInitSegment(e){let{audioCodec:t,videoCodec:n}=this;if(!(e!=null&&e.byteLength)){this.initTracks=void 0,this.initData=void 0;return}const i=this.initData=My(e);t||(t=Og(i.audio,Xe.AUDIO)),n||(n=Og(i.video,Xe.VIDEO));const s={};i.audio&&i.video?s.audiovideo={container:"video/mp4",codec:t+","+n,initSegment:e,id:"main"}:i.audio?s.audio={container:"audio/mp4",codec:t,initSegment:e,id:"audio"}:i.video?s.video={container:"video/mp4",codec:n,initSegment:e,id:"main"}:G.warn("[passthrough-remuxer.ts]: initSegment does not contain moov or trak boxes."),this.initTracks=s}remux(e,t,n,i,s,a){var o,u;let{initPTS:l,lastEndTime:c}=this;const h={audio:void 0,video:void 0,text:i,id3:n,initSegment:void 0};De(c)||(c=this.lastEndTime=s||0);const f=t.samples;if(!(f!=null&&f.length))return h;const d={initPTS:void 0,timescale:1};let m=this.initData;if((o=m)!=null&&o.length||(this.generateInitSegment(f),m=this.initData),!((u=m)!=null&&u.length))return G.warn("[passthrough-remuxer.ts]: Failed to generate initSegment."),h;this.emitInitSegment&&(d.tracks=this.initTracks,this.emitInitSegment=!1);const E=iS(f,m),p=nS(m,f),g=p===null?s:p;(PD(l,g,s,E)||d.timescale!==l.timescale&&a)&&(d.initPTS=g-s,l&&l.timescale===1&&G.warn(`Adjusting initPTS by ${d.initPTS-l.baseTime}`),this.initPTS=l={baseTime:d.initPTS,timescale:1});const v=e?g-l.baseTime/l.timescale:c,y=v+E;aS(m,f,l.baseTime/l.timescale),E>0?this.lastEndTime=y:(G.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());const C=!!m.audio,A=!!m.video;let T="";C&&(T+="audio"),A&&(T+="video");const S={data1:f,startPTS:v,startDTS:v,endPTS:y,endDTS:y,type:T,hasAudio:C,hasVideo:A,nb:1,dropped:0};return h.audio=S.type==="audio"?S:void 0,h.video=S.type!=="audio"?S:void 0,h.initSegment=d,h.id3=u1(n,s,l,l),i.samples.length&&(h.text=l1(i,s,l)),h}}function PD(r,e,t,n){if(r===null)return!0;const i=Math.max(n,1),s=e-r.baseTime/r.timescale;return Math.abs(s-t)>i}function Og(r,e){const t=r==null?void 0:r.codec;return t&&t.length>4?t:t==="hvc1"||t==="hev1"?"hvc1.1.6.L120.90":t==="av01"?"av01.0.04M.08":t==="avc1"||e===Xe.VIDEO?"avc1.42e01e":"mp4a.40.5"}let zn;try{zn=self.performance.now.bind(self.performance)}catch{G.debug("Unable to use Performance API on this environment"),zn=typeof self<"u"&&self.Date.now}const dh=[{demux:yD,remux:ND},{demux:hi,remux:fh},{demux:vD,remux:fh},{demux:bD,remux:fh}];class Ng{constructor(e,t,n,i,s){this.async=!1,this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.vendor=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=e,this.typeSupported=t,this.config=n,this.vendor=i,this.id=s}configure(e){this.transmuxConfig=e,this.decrypter&&this.decrypter.reset()}push(e,t,n,i){const s=n.transmuxing;s.executeStart=zn();let a=new Uint8Array(e);const{currentTransmuxState:o,transmuxConfig:u}=this;i&&(this.currentTransmuxState=i);const{contiguous:l,discontinuity:c,trackSwitch:h,accurateTimeOffset:f,timeOffset:d,initSegmentChange:m}=i||o,{audioCodec:E,videoCodec:p,defaultInitPts:g,duration:v,initSegmentData:y}=u,C=MD(a,t);if(C&&C.method==="AES-128"){const F=this.getDecrypter();if(F.isSync()){let k=F.softwareDecrypt(a,C.key.buffer,C.iv.buffer);if(n.part>-1&&(k=F.flush()),!k)return s.executeEnd=zn(),ph(n);a=new Uint8Array(k)}else return this.decryptionPromise=F.webCryptoDecrypt(a,C.key.buffer,C.iv.buffer).then(k=>{const R=this.push(k,null,n);return this.decryptionPromise=null,R}),this.decryptionPromise}const A=this.needsProbing(c,h);if(A){const F=this.configureTransmuxer(a);if(F)return G.warn(`[transmuxer] ${F.message}`),this.observer.emit(D.ERROR,D.ERROR,{type:_e.MEDIA_ERROR,details:J.FRAG_PARSING_ERROR,fatal:!1,error:F,reason:F.message}),s.executeEnd=zn(),ph(n)}(c||h||m||A)&&this.resetInitSegment(y,E,p,v,t),(c||m||A)&&this.resetInitialTimestamp(g),l||this.resetContiguity();const T=this.transmux(a,C,d,f,n),S=this.currentTransmuxState;return S.contiguous=!0,S.discontinuity=!1,S.trackSwitch=!1,s.executeEnd=zn(),T}flush(e){const t=e.transmuxing;t.executeStart=zn();const{decrypter:n,currentTransmuxState:i,decryptionPromise:s}=this;if(s)return s.then(()=>this.flush(e));const a=[],{timeOffset:o}=i;if(n){const h=n.flush();h&&a.push(this.push(h,null,e))}const{demuxer:u,remuxer:l}=this;if(!u||!l)return t.executeEnd=zn(),[ph(e)];const c=u.flush(o);return Vu(c)?c.then(h=>(this.flushRemux(a,h,e),a)):(this.flushRemux(a,c,e),a)}flushRemux(e,t,n){const{audioTrack:i,videoTrack:s,id3Track:a,textTrack:o}=t,{accurateTimeOffset:u,timeOffset:l}=this.currentTransmuxState;G.log(`[transmuxer.ts]: Flushed fragment ${n.sn}${n.part>-1?" p: "+n.part:""} of level ${n.level}`);const c=this.remuxer.remux(i,s,a,o,l,u,!0,this.id);e.push({remuxResult:c,chunkMeta:n}),n.transmuxing.executeEnd=zn()}resetInitialTimestamp(e){const{demuxer:t,remuxer:n}=this;!t||!n||(t.resetTimeStamp(e),n.resetTimeStamp(e))}resetContiguity(){const{demuxer:e,remuxer:t}=this;!e||!t||(e.resetContiguity(),t.resetNextTimestamp())}resetInitSegment(e,t,n,i,s){const{demuxer:a,remuxer:o}=this;!a||!o||(a.resetInitSegment(e,t,n,i),o.resetInitSegment(e,t,n,s))}destroy(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)}transmux(e,t,n,i,s){let a;return t&&t.method==="SAMPLE-AES"?a=this.transmuxSampleAes(e,t,n,i,s):a=this.transmuxUnencrypted(e,n,i,s),a}transmuxUnencrypted(e,t,n,i){const{audioTrack:s,videoTrack:a,id3Track:o,textTrack:u}=this.demuxer.demux(e,t,!1,!this.config.progressive);return{remuxResult:this.remuxer.remux(s,a,o,u,t,n,!1,this.id),chunkMeta:i}}transmuxSampleAes(e,t,n,i,s){return this.demuxer.demuxSampleAes(e,t,n).then(a=>({remuxResult:this.remuxer.remux(a.audioTrack,a.videoTrack,a.id3Track,a.textTrack,n,i,!1,this.id),chunkMeta:s}))}configureTransmuxer(e){const{config:t,observer:n,typeSupported:i,vendor:s}=this;let a;for(let h=0,f=dh.length;h<f;h++)if(dh[h].demux.probe(e)){a=dh[h];break}if(!a)return new Error("Failed to find demuxer by probing fragment data");const o=this.demuxer,u=this.remuxer,l=a.remux,c=a.demux;(!u||!(u instanceof l))&&(this.remuxer=new l(n,t,i,s)),(!o||!(o instanceof c))&&(this.demuxer=new c(n,t,i),this.probe=c.probe)}needsProbing(e,t){return!this.demuxer||!this.remuxer||e||t}getDecrypter(){let e=this.decrypter;return e||(e=this.decrypter=new o0(this.config)),e}}function MD(r,e){let t=null;return r.byteLength>0&&e!=null&&e.key!=null&&e.iv!==null&&e.method!=null&&(t=e),t}const ph=r=>({remuxResult:{},chunkMeta:r});function Vu(r){return"then"in r&&r.then instanceof Function}class UD{constructor(e,t,n,i,s){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=e,this.videoCodec=t,this.initSegmentData=n,this.duration=i,this.defaultInitPts=s||null}}class $D{constructor(e,t,n,i,s,a){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=e,this.contiguous=t,this.accurateTimeOffset=n,this.trackSwitch=i,this.timeOffset=s,this.initSegmentChange=a}}var c1={exports:{}};(function(r){var e=Object.prototype.hasOwnProperty,t="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(t=!1));function i(u,l,c){this.fn=u,this.context=l,this.once=c||!1}function s(u,l,c,h,f){if(typeof c!="function")throw new TypeError("The listener must be a function");var d=new i(c,h||u,f),m=t?t+l:l;return u._events[m]?u._events[m].fn?u._events[m]=[u._events[m],d]:u._events[m].push(d):(u._events[m]=d,u._eventsCount++),u}function a(u,l){--u._eventsCount===0?u._events=new n:delete u._events[l]}function o(){this._events=new n,this._eventsCount=0}o.prototype.eventNames=function(){var l=[],c,h;if(this._eventsCount===0)return l;for(h in c=this._events)e.call(c,h)&&l.push(t?h.slice(1):h);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(c)):l},o.prototype.listeners=function(l){var c=t?t+l:l,h=this._events[c];if(!h)return[];if(h.fn)return[h.fn];for(var f=0,d=h.length,m=new Array(d);f<d;f++)m[f]=h[f].fn;return m},o.prototype.listenerCount=function(l){var c=t?t+l:l,h=this._events[c];return h?h.fn?1:h.length:0},o.prototype.emit=function(l,c,h,f,d,m){var E=t?t+l:l;if(!this._events[E])return!1;var p=this._events[E],g=arguments.length,v,y;if(p.fn){switch(p.once&&this.removeListener(l,p.fn,void 0,!0),g){case 1:return p.fn.call(p.context),!0;case 2:return p.fn.call(p.context,c),!0;case 3:return p.fn.call(p.context,c,h),!0;case 4:return p.fn.call(p.context,c,h,f),!0;case 5:return p.fn.call(p.context,c,h,f,d),!0;case 6:return p.fn.call(p.context,c,h,f,d,m),!0}for(y=1,v=new Array(g-1);y<g;y++)v[y-1]=arguments[y];p.fn.apply(p.context,v)}else{var C=p.length,A;for(y=0;y<C;y++)switch(p[y].once&&this.removeListener(l,p[y].fn,void 0,!0),g){case 1:p[y].fn.call(p[y].context);break;case 2:p[y].fn.call(p[y].context,c);break;case 3:p[y].fn.call(p[y].context,c,h);break;case 4:p[y].fn.call(p[y].context,c,h,f);break;default:if(!v)for(A=1,v=new Array(g-1);A<g;A++)v[A-1]=arguments[A];p[y].fn.apply(p[y].context,v)}}return!0},o.prototype.on=function(l,c,h){return s(this,l,c,h,!1)},o.prototype.once=function(l,c,h){return s(this,l,c,h,!0)},o.prototype.removeListener=function(l,c,h,f){var d=t?t+l:l;if(!this._events[d])return this;if(!c)return a(this,d),this;var m=this._events[d];if(m.fn)m.fn===c&&(!f||m.once)&&(!h||m.context===h)&&a(this,d);else{for(var E=0,p=[],g=m.length;E<g;E++)(m[E].fn!==c||f&&!m[E].once||h&&m[E].context!==h)&&p.push(m[E]);p.length?this._events[d]=p.length===1?p[0]:p:a(this,d)}return this},o.prototype.removeAllListeners=function(l){var c;return l?(c=t?t+l:l,this._events[c]&&a(this,c)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=t,o.EventEmitter=o,r.exports=o})(c1);var zD=c1.exports,f0=wT(zD);const gh=Xl()||{isTypeSupported:()=>!1};class h1{constructor(e,t,n,i){this.error=null,this.hls=void 0,this.id=void 0,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.workerContext=null,this.onwmsg=void 0,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0;const s=e.config;this.hls=e,this.id=t,this.useWorker=!!s.enableWorker,this.onTransmuxComplete=n,this.onFlush=i;const a=(l,c)=>{c=c||{},c.frag=this.frag,c.id=this.id,l===D.ERROR&&(this.error=c.error),this.hls.trigger(l,c)};this.observer=new f0,this.observer.on(D.FRAG_DECRYPTED,a),this.observer.on(D.ERROR,a);const o={mp4:gh.isTypeSupported("video/mp4"),mpeg:gh.isTypeSupported("audio/mpeg"),mp3:gh.isTypeSupported('audio/mp4; codecs="mp3"')},u=navigator.vendor;if(this.useWorker&&typeof Worker<"u"&&(s.workerPath||uD())){try{s.workerPath?(G.log(`loading Web Worker ${s.workerPath} for "${t}"`),this.workerContext=cD(s.workerPath)):(G.log(`injecting Web Worker for "${t}"`),this.workerContext=lD()),this.onwmsg=h=>this.onWorkerMessage(h);const{worker:c}=this.workerContext;c.addEventListener("message",this.onwmsg),c.onerror=h=>{const f=new Error(`${h.message}  (${h.filename}:${h.lineno})`);s.enableWorker=!1,G.warn(`Error in "${t}" Web Worker, fallback to inline`),this.hls.trigger(D.ERROR,{type:_e.OTHER_ERROR,details:J.INTERNAL_EXCEPTION,fatal:!1,event:"demuxerWorker",error:f})},c.postMessage({cmd:"init",typeSupported:o,vendor:u,id:t,config:JSON.stringify(s)})}catch(c){G.warn(`Error setting up "${t}" Web Worker, fallback to inline`,c),this.resetWorker(),this.error=null,this.transmuxer=new Ng(this.observer,o,s,u,t)}return}this.transmuxer=new Ng(this.observer,o,s,u,t)}resetWorker(){if(this.workerContext){const{worker:e,objectURL:t}=this.workerContext;t&&self.URL.revokeObjectURL(t),e.removeEventListener("message",this.onwmsg),e.onerror=null,e.terminate(),this.workerContext=null}}destroy(){if(this.workerContext)this.resetWorker(),this.onwmsg=void 0;else{const t=this.transmuxer;t&&(t.destroy(),this.transmuxer=null)}const e=this.observer;e&&e.removeAllListeners(),this.frag=null,this.observer=null,this.hls=null}push(e,t,n,i,s,a,o,u,l,c){var h,f;l.transmuxing.start=self.performance.now();const{transmuxer:d}=this,m=a?a.start:s.start,E=s.decryptdata,p=this.frag,g=!(p&&s.cc===p.cc),v=!(p&&l.level===p.level),y=p?l.sn-p.sn:-1,C=this.part?l.part-this.part.index:-1,A=y===0&&l.id>1&&l.id===(p==null?void 0:p.stats.chunkCount),T=!v&&(y===1||y===0&&(C===1||A&&C<=0)),S=self.performance.now();(v||y||s.stats.parsing.start===0)&&(s.stats.parsing.start=S),a&&(C||!T)&&(a.stats.parsing.start=S);const F=!(p&&((h=s.initSegment)==null?void 0:h.url)===((f=p.initSegment)==null?void 0:f.url)),k=new $D(g,T,u,v,m,F);if(!T||g||F){G.log(`[transmuxer-interface, ${s.type}]: Starting new transmux session for sn: ${l.sn} p: ${l.part} level: ${l.level} id: ${l.id}
        discontinuity: ${g}
        trackSwitch: ${v}
        contiguous: ${T}
        accurateTimeOffset: ${u}
        timeOffset: ${m}
        initSegmentChange: ${F}`);const R=new UD(n,i,t,o,c);this.configureTransmuxer(R)}if(this.frag=s,this.part=a,this.workerContext)this.workerContext.worker.postMessage({cmd:"demux",data:e,decryptdata:E,chunkMeta:l,state:k},e instanceof ArrayBuffer?[e]:[]);else if(d){const R=d.push(e,E,l,k);Vu(R)?(d.async=!0,R.then(V=>{this.handleTransmuxComplete(V)}).catch(V=>{this.transmuxerError(V,l,"transmuxer-interface push error")})):(d.async=!1,this.handleTransmuxComplete(R))}}flush(e){e.transmuxing.start=self.performance.now();const{transmuxer:t}=this;if(this.workerContext)this.workerContext.worker.postMessage({cmd:"flush",chunkMeta:e});else if(t){let n=t.flush(e);Vu(n)||t.async?(Vu(n)||(n=Promise.resolve(n)),n.then(s=>{this.handleFlushResult(s,e)}).catch(s=>{this.transmuxerError(s,e,"transmuxer-interface flush error")})):this.handleFlushResult(n,e)}}transmuxerError(e,t,n){!this.hls||(this.error=e,this.hls.trigger(D.ERROR,{type:_e.MEDIA_ERROR,details:J.FRAG_PARSING_ERROR,chunkMeta:t,fatal:!1,error:e,err:e,reason:n}))}handleFlushResult(e,t){e.forEach(n=>{this.handleTransmuxComplete(n)}),this.onFlush(t)}onWorkerMessage(e){const t=e.data,n=this.hls;switch(t.event){case"init":{var i;const s=(i=this.workerContext)==null?void 0:i.objectURL;s&&self.URL.revokeObjectURL(s);break}case"transmuxComplete":{this.handleTransmuxComplete(t.data);break}case"flush":{this.onFlush(t.data);break}case"workerLog":G[t.data.logType]&&G[t.data.logType](t.data.message);break;default:{t.data=t.data||{},t.data.frag=this.frag,t.data.id=this.id,n.trigger(t.event,t.data);break}}}configureTransmuxer(e){const{transmuxer:t}=this;this.workerContext?this.workerContext.worker.postMessage({cmd:"configure",config:e}):t&&t.configure(e)}handleTransmuxComplete(e){e.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(e)}}const VD=250,mh=2,GD=.1,WD=.05;class HD{constructor(e,t,n,i){this.config=void 0,this.media=null,this.fragmentTracker=void 0,this.hls=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.config=e,this.media=t,this.fragmentTracker=n,this.hls=i}destroy(){this.media=null,this.hls=this.fragmentTracker=null}poll(e,t){const{config:n,media:i,stalled:s}=this;if(i===null)return;const{currentTime:a,seeking:o}=i,u=this.seeking&&!o,l=!this.seeking&&o;if(this.seeking=o,a!==e){if(this.moved=!0,s!==null){if(this.stallReported){const g=self.performance.now()-s;G.warn(`playback not stuck anymore @${a}, after ${Math.round(g)}ms`),this.stallReported=!1}this.stalled=null,this.nudgeRetry=0}return}if(l||u){this.stalled=null;return}if(i.paused&&!o||i.ended||i.playbackRate===0||!tt.getBuffered(i).length)return;const c=tt.bufferInfo(i,a,0),h=c.len>0,f=c.nextStart||0;if(!h&&!f)return;if(o){const g=c.len>mh,v=!f||t&&t.start<=a||f-a>mh&&!this.fragmentTracker.getPartialFragment(a);if(g||v)return;this.moved=!1}if(!this.moved&&this.stalled!==null){var d;const g=Math.max(f,c.start||0)-a,v=this.hls.levels?this.hls.levels[this.hls.currentLevel]:null,C=(v==null||(d=v.details)==null?void 0:d.live)?v.details.targetduration*2:mh,A=this.fragmentTracker.getPartialFragment(a);if(g>0&&(g<=C||A)){this._trySkipBufferHole(A);return}}const m=self.performance.now();if(s===null){this.stalled=m;return}const E=m-s;if(!o&&E>=VD&&(this._reportStall(c),!this.media))return;const p=tt.bufferInfo(i,a,n.maxBufferHole);this._tryFixBufferStall(p,E)}_tryFixBufferStall(e,t){const{config:n,fragmentTracker:i,media:s}=this;if(s===null)return;const a=s.currentTime,o=i.getPartialFragment(a);o&&(this._trySkipBufferHole(o)||!this.media)||(e.len>n.maxBufferHole||e.nextStart&&e.nextStart-a<n.maxBufferHole)&&t>n.highBufferWatchdogPeriod*1e3&&(G.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())}_reportStall(e){const{hls:t,media:n,stallReported:i}=this;if(!i&&n){this.stallReported=!0;const s=new Error(`Playback stalling at @${n.currentTime} due to low buffer (${JSON.stringify(e)})`);G.warn(s.message),t.trigger(D.ERROR,{type:_e.MEDIA_ERROR,details:J.BUFFER_STALLED_ERROR,fatal:!1,error:s,buffer:e.len})}}_trySkipBufferHole(e){const{config:t,hls:n,media:i}=this;if(i===null)return 0;const s=i.currentTime,a=tt.bufferInfo(i,s,0),o=s<a.start?a.start:a.nextStart;if(o){const u=a.len<=t.maxBufferHole,l=a.len>0&&a.len<1&&i.readyState<3,c=o-s;if(c>0&&(u||l)){if(c>t.maxBufferHole){const{fragmentTracker:f}=this;let d=!1;if(s===0){const m=f.getAppendedFrag(0,Fe.MAIN);m&&o<m.end&&(d=!0)}if(!d){const m=e||f.getAppendedFrag(s,Fe.MAIN);if(m){let E=!1,p=m.end;for(;p<o;){const g=f.getPartialFragment(p);if(g)p+=g.duration;else{E=!0;break}}if(E)return 0}}}const h=Math.max(o+WD,s+GD);if(G.warn(`skipping hole, adjusting currentTime from ${s} to ${h}`),this.moved=!0,this.stalled=null,i.currentTime=h,e&&!e.gap){const f=new Error(`fragment loaded with buffer holes, seeking from ${s} to ${h}`);n.trigger(D.ERROR,{type:_e.MEDIA_ERROR,details:J.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:f,reason:f.message,frag:e})}return h}}return 0}_tryNudgeBuffer(){const{config:e,hls:t,media:n,nudgeRetry:i}=this;if(n===null)return;const s=n.currentTime;if(this.nudgeRetry++,i<e.nudgeMaxRetry){const a=s+(i+1)*e.nudgeOffset,o=new Error(`Nudging 'currentTime' from ${s} to ${a}`);G.warn(o.message),n.currentTime=a,t.trigger(D.ERROR,{type:_e.MEDIA_ERROR,details:J.BUFFER_NUDGE_ON_STALL,error:o,fatal:!1})}else{const a=new Error(`Playhead still not moving while enough data buffered @${s} after ${e.nudgeMaxRetry} nudges`);G.error(a.message),t.trigger(D.ERROR,{type:_e.MEDIA_ERROR,details:J.BUFFER_STALLED_ERROR,error:a,fatal:!0})}}}const jD=100;class KD extends u0{constructor(e,t,n){super(e,t,n,"[stream-controller]",Fe.MAIN),this.audioCodecSwap=!1,this.gapController=null,this.level=-1,this._forceStartLoad=!1,this.altAudio=!1,this.audioOnly=!1,this.fragPlaying=null,this.onvplaying=null,this.onvseeked=null,this.fragLastKbps=0,this.couldBacktrack=!1,this.backtrackFragment=null,this.audioCodecSwitch=!1,this.videoBuffer=null,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(D.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(D.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(D.MANIFEST_LOADING,this.onManifestLoading,this),e.on(D.MANIFEST_PARSED,this.onManifestParsed,this),e.on(D.LEVEL_LOADING,this.onLevelLoading,this),e.on(D.LEVEL_LOADED,this.onLevelLoaded,this),e.on(D.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.on(D.ERROR,this.onError,this),e.on(D.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(D.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.on(D.BUFFER_CREATED,this.onBufferCreated,this),e.on(D.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(D.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(D.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){const{hls:e}=this;e.off(D.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(D.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(D.MANIFEST_LOADING,this.onManifestLoading,this),e.off(D.MANIFEST_PARSED,this.onManifestParsed,this),e.off(D.LEVEL_LOADED,this.onLevelLoaded,this),e.off(D.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.off(D.ERROR,this.onError,this),e.off(D.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(D.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.off(D.BUFFER_CREATED,this.onBufferCreated,this),e.off(D.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(D.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(D.FRAG_BUFFERED,this.onFragBuffered,this)}onHandlerDestroying(){this._unregisterListeners(),this.onMediaDetaching()}startLoad(e){if(this.levels){const{lastCurrentTime:t,hls:n}=this;if(this.stopLoad(),this.setInterval(jD),this.level=-1,!this.startFragRequested){let i=n.startLevel;i===-1&&(n.config.testBandwidth&&this.levels.length>1?(i=0,this.bitrateTest=!0):i=n.nextAutoLevel),this.level=n.nextLoadLevel=i,this.loadedmetadata=!1}t>0&&e===-1&&(this.log(`Override startPosition with lastCurrentTime @${t.toFixed(3)}`),e=t),this.state=se.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}else this._forceStartLoad=!0,this.state=se.STOPPED}stopLoad(){this._forceStartLoad=!1,super.stopLoad()}doTick(){switch(this.state){case se.WAITING_LEVEL:{var e;const{levels:n,level:i}=this,s=n==null||(e=n[i])==null?void 0:e.details;if(s&&(!s.live||this.levelLastLoaded===this.level)){if(this.waitForCdnTuneIn(s))break;this.state=se.IDLE;break}break}case se.FRAG_LOADING_WAITING_RETRY:{var t;const n=self.performance.now(),i=this.retryDate;(!i||n>=i||(t=this.media)!=null&&t.seeking)&&(this.resetStartWhenNotLoaded(this.level),this.state=se.IDLE)}break}this.state===se.IDLE&&this.doTickIdle(),this.onTickEnd()}onTickEnd(){super.onTickEnd(),this.checkBuffer(),this.checkFragmentChanged()}doTickIdle(){const{hls:e,levelLastLoaded:t,levels:n,media:i}=this,{config:s,nextLoadLevel:a}=e;if(t===null||!i&&(this.startFragRequested||!s.startFragPrefetch)||this.altAudio&&this.audioOnly||!(n!=null&&n[a]))return;const o=n[a],u=this.getMainFwdBufferInfo();if(u===null)return;const l=this.getLevelDetails();if(l&&this._streamEnded(u,l)){const p={};this.altAudio&&(p.type="video"),this.hls.trigger(D.BUFFER_EOS,p),this.state=se.ENDED;return}e.loadLevel!==a&&e.manualLevel===-1&&this.log(`Adapting to level ${a} from level ${this.level}`),this.level=e.nextLoadLevel=a;const c=o.details;if(!c||this.state===se.WAITING_LEVEL||c.live&&this.levelLastLoaded!==a){this.level=a,this.state=se.WAITING_LEVEL;return}const h=u.len,f=this.getMaxBufferLength(o.maxBitrate);if(h>=f)return;this.backtrackFragment&&this.backtrackFragment.start>u.end&&(this.backtrackFragment=null);const d=this.backtrackFragment?this.backtrackFragment.start:u.end;let m=this.getNextFragment(d,c);if(this.couldBacktrack&&!this.fragPrevious&&m&&m.sn!=="initSegment"&&this.fragmentTracker.getState(m)!==$t.OK){var E;const g=((E=this.backtrackFragment)!=null?E:m).sn-c.startSN,v=c.fragments[g-1];v&&m.cc===v.cc&&(m=v,this.fragmentTracker.removeFragment(v))}else this.backtrackFragment&&u.len&&(this.backtrackFragment=null);if(m&&this.isLoopLoading(m,d)){if(!m.gap){const g=this.audioOnly&&!this.altAudio?Xe.AUDIO:Xe.VIDEO,v=(g===Xe.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;v&&this.afterBufferFlushed(v,g,Fe.MAIN)}m=this.getNextFragmentLoopLoading(m,c,u,Fe.MAIN,f)}!m||(m.initSegment&&!m.initSegment.data&&!this.bitrateTest&&(m=m.initSegment),this.loadFragment(m,o,d))}loadFragment(e,t,n){const i=this.fragmentTracker.getState(e);this.fragCurrent=e,i===$t.NOT_LOADED||i===$t.PARTIAL?e.sn==="initSegment"?this._loadInitSegment(e,t):this.bitrateTest?(this.log(`Fragment ${e.sn} of level ${e.level} is being downloaded to test bitrate and will not be buffered`),this._loadBitrateTestFrag(e,t)):(this.startFragRequested=!0,super.loadFragment(e,t,n)):this.clearTrackerIfNeeded(e)}getBufferedFrag(e){return this.fragmentTracker.getBufferedFrag(e,Fe.MAIN)}followingBufferedFrag(e){return e?this.getBufferedFrag(e.end+.5):null}immediateLevelSwitch(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)}nextLevelSwitch(){const{levels:e,media:t}=this;if(t!=null&&t.readyState){let n;const i=this.getAppendedFrag(t.currentTime);i&&i.start>1&&this.flushMainBuffer(0,i.start-1);const s=this.getLevelDetails();if(s!=null&&s.live){const o=this.getMainFwdBufferInfo();if(!o||o.len<s.targetduration*2)return}if(!t.paused&&e){const o=this.hls.nextLoadLevel,u=e[o],l=this.fragLastKbps;l&&this.fragCurrent?n=this.fragCurrent.duration*u.maxBitrate/(1e3*l)+1:n=0}else n=0;const a=this.getBufferedFrag(t.currentTime+n);if(a){const o=this.followingBufferedFrag(a);if(o){this.abortCurrentFrag();const u=o.maxStartPTS?o.maxStartPTS:o.start,l=o.duration,c=Math.max(a.end,u+Math.min(Math.max(l-this.config.maxFragLookUpTolerance,l*.5),l*.75));this.flushMainBuffer(c,Number.POSITIVE_INFINITY)}}}}abortCurrentFrag(){const e=this.fragCurrent;switch(this.fragCurrent=null,this.backtrackFragment=null,e&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.state){case se.KEY_LOADING:case se.FRAG_LOADING:case se.FRAG_LOADING_WAITING_RETRY:case se.PARSING:case se.PARSED:this.state=se.IDLE;break}this.nextLoadPosition=this.getLoadPosition()}flushMainBuffer(e,t){super.flushMainBuffer(e,t,this.altAudio?"video":null)}onMediaAttached(e,t){super.onMediaAttached(e,t);const n=t.media;this.onvplaying=this.onMediaPlaying.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),n.addEventListener("playing",this.onvplaying),n.addEventListener("seeked",this.onvseeked),this.gapController=new HD(this.config,n,this.fragmentTracker,this.hls)}onMediaDetaching(){const{media:e}=this;e&&this.onvplaying&&this.onvseeked&&(e.removeEventListener("playing",this.onvplaying),e.removeEventListener("seeked",this.onvseeked),this.onvplaying=this.onvseeked=null,this.videoBuffer=null),this.fragPlaying=null,this.gapController&&(this.gapController.destroy(),this.gapController=null),super.onMediaDetaching()}onMediaPlaying(){this.tick()}onMediaSeeked(){const e=this.media,t=e?e.currentTime:null;De(t)&&this.log(`Media seeked to ${t.toFixed(3)}`);const n=this.getMainFwdBufferInfo();if(n===null||n.len===0){this.warn(`Main forward buffer length on "seeked" event ${n?n.len:"empty"})`);return}this.tick()}onManifestLoading(){this.log("Trigger BUFFER_RESET"),this.hls.trigger(D.BUFFER_RESET,void 0),this.fragmentTracker.removeAllFragments(),this.couldBacktrack=!1,this.startPosition=this.lastCurrentTime=0,this.levels=this.fragPlaying=this.backtrackFragment=null,this.altAudio=this.audioOnly=!1}onManifestParsed(e,t){let n=!1,i=!1,s;t.levels.forEach(a=>{s=a.audioCodec,s&&(s.indexOf("mp4a.40.2")!==-1&&(n=!0),s.indexOf("mp4a.40.5")!==-1&&(i=!0))}),this.audioCodecSwitch=n&&i&&!oD(),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=t.levels,this.startFragRequested=!1}onLevelLoading(e,t){const{levels:n}=this;if(!n||this.state!==se.IDLE)return;const i=n[t.level];(!i.details||i.details.live&&this.levelLastLoaded!==t.level||this.waitForCdnTuneIn(i.details))&&(this.state=se.WAITING_LEVEL)}onLevelLoaded(e,t){var n;const{levels:i}=this,s=t.level,a=t.details,o=a.totalduration;if(!i){this.warn(`Levels were reset while loading level ${s}`);return}this.log(`Level ${s} loaded [${a.startSN},${a.endSN}]${a.lastPartSn?`[part-${a.lastPartSn}-${a.lastPartIndex}]`:""}, cc [${a.startCC}, ${a.endCC}] duration:${o}`);const u=i[s],l=this.fragCurrent;l&&(this.state===se.FRAG_LOADING||this.state===se.FRAG_LOADING_WAITING_RETRY)&&(l.level!==t.level||l.urlId!==u.urlId)&&l.loader&&this.abortCurrentFrag();let c=0;if(a.live||(n=u.details)!=null&&n.live){if(a.fragments[0]||(a.deltaUpdateFailed=!0),a.deltaUpdateFailed)return;c=this.alignPlaylists(a,u.details)}if(u.details=a,this.levelLastLoaded=s,this.hls.trigger(D.LEVEL_UPDATED,{details:a,level:s}),this.state===se.WAITING_LEVEL){if(this.waitForCdnTuneIn(a))return;this.state=se.IDLE}this.startFragRequested?a.live&&this.synchronizeToLiveEdge(a):this.setStartPosition(a,c),this.tick()}_handleFragmentLoadProgress(e){var t;const{frag:n,part:i,payload:s}=e,{levels:a}=this;if(!a){this.warn(`Levels were reset while fragment load was in progress. Fragment ${n.sn} of level ${n.level} will not be buffered`);return}const o=a[n.level],u=o.details;if(!u){this.warn(`Dropping fragment ${n.sn} of level ${n.level} after level details were reset`),this.fragmentTracker.removeFragment(n);return}const l=o.videoCodec,c=u.PTSKnown||!u.live,h=(t=n.initSegment)==null?void 0:t.data,f=this._getAudioCodec(o),d=this.transmuxer=this.transmuxer||new h1(this.hls,Fe.MAIN,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),m=i?i.index:-1,E=m!==-1,p=new s0(n.level,n.sn,n.stats.chunkCount,s.byteLength,m,E),g=this.initPTS[n.cc];d.push(s,h,f,l,n,i,u.totalduration,c,p,g)}onAudioTrackSwitching(e,t){const n=this.altAudio;if(!!!t.url){if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;const a=this.fragCurrent;a&&(this.log("Switching to main audio track, cancel main fragment load"),a.abortRequests(),this.fragmentTracker.removeFragment(a)),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();const s=this.hls;n&&(s.trigger(D.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:null}),this.fragmentTracker.removeAllFragments()),s.trigger(D.AUDIO_TRACK_SWITCHED,t)}}onAudioTrackSwitched(e,t){const n=t.id,i=!!this.hls.audioTracks[n].url;if(i){const s=this.videoBuffer;s&&this.mediaBuffer!==s&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=s)}this.altAudio=i,this.tick()}onBufferCreated(e,t){const n=t.tracks;let i,s,a=!1;for(const o in n){const u=n[o];if(u.id==="main"){if(s=o,i=u,o==="video"){const l=n[o];l&&(this.videoBuffer=l.buffer)}}else a=!0}a&&i?(this.log(`Alternate track found, use ${s}.buffered to schedule main fragment loading`),this.mediaBuffer=i.buffer):this.mediaBuffer=this.media}onFragBuffered(e,t){const{frag:n,part:i}=t;if(n&&n.type!==Fe.MAIN)return;if(this.fragContextChanged(n)){this.warn(`Fragment ${n.sn}${i?" p: "+i.index:""} of level ${n.level} finished buffering, but was aborted. state: ${this.state}`),this.state===se.PARSED&&(this.state=se.IDLE);return}const s=i?i.stats:n.stats;this.fragLastKbps=Math.round(8*s.total/(s.buffering.end-s.loading.first)),n.sn!=="initSegment"&&(this.fragPrevious=n),this.fragBufferedComplete(n,i)}onError(e,t){var n;if(t.fatal){this.state=se.ERROR;return}switch(t.details){case J.FRAG_GAP:case J.FRAG_PARSING_ERROR:case J.FRAG_DECRYPT_ERROR:case J.FRAG_LOAD_ERROR:case J.FRAG_LOAD_TIMEOUT:case J.KEY_LOAD_ERROR:case J.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(Fe.MAIN,t);break;case J.LEVEL_LOAD_ERROR:case J.LEVEL_LOAD_TIMEOUT:case J.LEVEL_PARSING_ERROR:!t.levelRetry&&this.state===se.WAITING_LEVEL&&((n=t.context)==null?void 0:n.type)===Ge.LEVEL&&(this.state=se.IDLE);break;case J.BUFFER_FULL_ERROR:if(!t.parent||t.parent!=="main")return;this.reduceLengthAndFlushBuffer(t)&&this.flushMainBuffer(0,Number.POSITIVE_INFINITY);break;case J.INTERNAL_EXCEPTION:this.recoverWorkerError(t);break}}checkBuffer(){const{media:e,gapController:t}=this;if(!(!e||!t||!e.readyState)){if(this.loadedmetadata||!tt.getBuffered(e).length){const n=this.state!==se.IDLE?this.fragCurrent:null;t.poll(this.lastCurrentTime,n)}this.lastCurrentTime=e.currentTime}}onFragLoadEmergencyAborted(){this.state=se.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tickImmediate()}onBufferFlushed(e,{type:t}){if(t!==Xe.AUDIO||this.audioOnly&&!this.altAudio){const n=(t===Xe.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;this.afterBufferFlushed(n,t,Fe.MAIN)}}onLevelsUpdated(e,t){this.levels=t.levels}swapAudioCodec(){this.audioCodecSwap=!this.audioCodecSwap}seekToStartPos(){const{media:e}=this;if(!e)return;const t=e.currentTime;let n=this.startPosition;if(n>=0&&t<n){if(e.seeking){this.log(`could not seek to ${n}, already seeking at ${t}`);return}const i=tt.getBuffered(e),a=(i.length?i.start(0):0)-n;a>0&&(a<this.config.maxBufferHole||a<this.config.maxFragLookUpTolerance)&&(this.log(`adjusting start position by ${a} to match buffer start`),n+=a,this.startPosition=n),this.log(`seek to target start position ${n} from current time ${t}`),e.currentTime=n}}_getAudioCodec(e){let t=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&t&&(this.log("Swapping audio codec"),t.indexOf("mp4a.40.5")!==-1?t="mp4a.40.2":t="mp4a.40.5"),t}_loadBitrateTestFrag(e,t){e.bitrateTest=!0,this._doFragLoad(e,t).then(n=>{const{hls:i}=this;if(!n||this.fragContextChanged(e))return;t.fragmentError=0,this.state=se.IDLE,this.startFragRequested=!1,this.bitrateTest=!1;const s=e.stats;s.parsing.start=s.parsing.end=s.buffering.start=s.buffering.end=self.performance.now(),i.trigger(D.FRAG_LOADED,n),e.bitrateTest=!1})}_handleTransmuxComplete(e){var t;const n="main",{hls:i}=this,{remuxResult:s,chunkMeta:a}=e,o=this.getCurrentContext(a);if(!o){this.resetWhenMissingContext(a);return}const{frag:u,part:l,level:c}=o,{video:h,text:f,id3:d,initSegment:m}=s,{details:E}=c,p=this.altAudio?void 0:s.audio;if(this.fragContextChanged(u)){this.fragmentTracker.removeFragment(u);return}if(this.state=se.PARSING,m){if(m!=null&&m.tracks){const y=u.initSegment||u;this._bufferInitSegment(c,m.tracks,y,a),i.trigger(D.FRAG_PARSING_INIT_SEGMENT,{frag:y,id:n,tracks:m.tracks})}const g=m.initPTS,v=m.timescale;De(g)&&(this.initPTS[u.cc]={baseTime:g,timescale:v},i.trigger(D.INIT_PTS_FOUND,{frag:u,id:n,initPTS:g,timescale:v}))}if(h&&s.independent!==!1){if(E){const{startPTS:g,endPTS:v,startDTS:y,endDTS:C}=h;if(l)l.elementaryStreams[h.type]={startPTS:g,endPTS:v,startDTS:y,endDTS:C};else if(h.firstKeyFrame&&h.independent&&a.id===1&&(this.couldBacktrack=!0),h.dropped&&h.independent){const A=this.getMainFwdBufferInfo(),T=(A?A.end:this.getLoadPosition())+this.config.maxBufferHole,S=h.firstKeyFramePTS?h.firstKeyFramePTS:g;if(T<S-this.config.maxBufferHole){this.backtrack(u);return}u.setElementaryStreamInfo(h.type,u.start,v,u.start,C,!0)}u.setElementaryStreamInfo(h.type,g,v,y,C),this.backtrackFragment&&(this.backtrackFragment=u),this.bufferFragmentData(h,u,l,a)}}else if(s.independent===!1){this.backtrack(u);return}if(p){const{startPTS:g,endPTS:v,startDTS:y,endDTS:C}=p;l&&(l.elementaryStreams[Xe.AUDIO]={startPTS:g,endPTS:v,startDTS:y,endDTS:C}),u.setElementaryStreamInfo(Xe.AUDIO,g,v,y,C),this.bufferFragmentData(p,u,l,a)}if(E&&d!=null&&(t=d.samples)!=null&&t.length){const g={id:n,frag:u,details:E,samples:d.samples};i.trigger(D.FRAG_PARSING_METADATA,g)}if(E&&f){const g={id:n,frag:u,details:E,samples:f.samples};i.trigger(D.FRAG_PARSING_USERDATA,g)}}_bufferInitSegment(e,t,n,i){if(this.state!==se.PARSING)return;this.audioOnly=!!t.audio&&!t.video,this.altAudio&&!this.audioOnly&&delete t.audio;const{audio:s,video:a,audiovideo:o}=t;if(s){let u=e.audioCodec;const l=navigator.userAgent.toLowerCase();this.audioCodecSwitch&&(u&&(u.indexOf("mp4a.40.5")!==-1?u="mp4a.40.2":u="mp4a.40.5"),s.metadata.channelCount!==1&&l.indexOf("firefox")===-1&&(u="mp4a.40.5")),l.indexOf("android")!==-1&&s.container!=="audio/mpeg"&&(u="mp4a.40.2",this.log(`Android: force audio codec to ${u}`)),e.audioCodec&&e.audioCodec!==u&&this.log(`Swapping manifest audio codec "${e.audioCodec}" for "${u}"`),s.levelCodec=u,s.id="main",this.log(`Init audio buffer, container:${s.container}, codecs[selected/level/parsed]=[${u||""}/${e.audioCodec||""}/${s.codec}]`)}a&&(a.levelCodec=e.videoCodec,a.id="main",this.log(`Init video buffer, container:${a.container}, codecs[level/parsed]=[${e.videoCodec||""}/${a.codec}]`)),o&&this.log(`Init audiovideo buffer, container:${o.container}, codecs[level/parsed]=[${e.attrs.CODECS||""}/${o.codec}]`),this.hls.trigger(D.BUFFER_CODECS,t),Object.keys(t).forEach(u=>{const c=t[u].initSegment;c!=null&&c.byteLength&&this.hls.trigger(D.BUFFER_APPENDING,{type:u,data:c,frag:n,part:null,chunkMeta:i,parent:n.type})}),this.tick()}getMainFwdBufferInfo(){return this.getFwdBufferInfo(this.mediaBuffer?this.mediaBuffer:this.media,Fe.MAIN)}backtrack(e){this.couldBacktrack=!0,this.backtrackFragment=e,this.resetTransmuxer(),this.flushBufferGap(e),this.fragmentTracker.removeFragment(e),this.fragPrevious=null,this.nextLoadPosition=e.start,this.state=se.IDLE}checkFragmentChanged(){const e=this.media;let t=null;if(e&&e.readyState>1&&e.seeking===!1){const n=e.currentTime;if(tt.isBuffered(e,n)?t=this.getAppendedFrag(n):tt.isBuffered(e,n+.1)&&(t=this.getAppendedFrag(n+.1)),t){this.backtrackFragment=null;const i=this.fragPlaying,s=t.level;(!i||t.sn!==i.sn||i.level!==s||t.urlId!==i.urlId)&&(this.fragPlaying=t,this.hls.trigger(D.FRAG_CHANGED,{frag:t}),(!i||i.level!==s)&&this.hls.trigger(D.LEVEL_SWITCHED,{level:s}))}}}get nextLevel(){const e=this.nextBufferedFrag;return e?e.level:-1}get currentFrag(){const e=this.media;return e?this.fragPlaying||this.getAppendedFrag(e.currentTime):null}get currentProgramDateTime(){const e=this.media;if(e){const t=e.currentTime,n=this.currentFrag;if(n&&De(t)&&De(n.programDateTime)){const i=n.programDateTime+(t-n.start)*1e3;return new Date(i)}}return null}get currentLevel(){const e=this.currentFrag;return e?e.level:-1}get nextBufferedFrag(){const e=this.currentFrag;return e?this.followingBufferedFrag(e):null}get forceStartLoad(){return this._forceStartLoad}}class ys{constructor(e,t=0,n=0){this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=e,this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=t,this.totalWeight_=n}sample(e,t){const n=Math.pow(this.alpha_,e);this.estimate_=t*(1-n)+n*this.estimate_,this.totalWeight_+=e}getTotalWeight(){return this.totalWeight_}getEstimate(){if(this.alpha_){const e=1-Math.pow(this.alpha_,this.totalWeight_);if(e)return this.estimate_/e}return this.estimate_}}class qD{constructor(e,t,n,i=100){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultTTFB_=void 0,this.ttfb_=void 0,this.defaultEstimate_=n,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new ys(e),this.fast_=new ys(t),this.defaultTTFB_=i,this.ttfb_=new ys(e)}update(e,t){const{slow_:n,fast_:i,ttfb_:s}=this;n.halfLife!==e&&(this.slow_=new ys(e,n.getEstimate(),n.getTotalWeight())),i.halfLife!==t&&(this.fast_=new ys(t,i.getEstimate(),i.getTotalWeight())),s.halfLife!==e&&(this.ttfb_=new ys(e,s.getEstimate(),s.getTotalWeight()))}sample(e,t){e=Math.max(e,this.minDelayMs_);const n=8*t,i=e/1e3,s=n/i;this.fast_.sample(i,s),this.slow_.sample(i,s)}sampleTTFB(e){const t=e/1e3,n=Math.sqrt(2)*Math.exp(-Math.pow(t,2)/2);this.ttfb_.sample(n,Math.max(e,5))}canEstimate(){return this.fast_.getTotalWeight()>=this.minWeight_}getEstimate(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_}getEstimateTTFB(){return this.ttfb_.getTotalWeight()>=this.minWeight_?this.ttfb_.getEstimate():this.defaultTTFB_}destroy(){}}class YD{constructor(e){this.hls=void 0,this.lastLevelLoadSec=0,this.lastLoadedFragLevel=0,this._nextAutoLevel=-1,this.timer=-1,this.onCheck=this._abandonRulesCheck.bind(this),this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.bwEstimator=void 0,this.hls=e;const t=e.config;this.bwEstimator=new qD(t.abrEwmaSlowVoD,t.abrEwmaFastVoD,t.abrEwmaDefaultEstimate),this.registerListeners()}registerListeners(){const{hls:e}=this;e.on(D.FRAG_LOADING,this.onFragLoading,this),e.on(D.FRAG_LOADED,this.onFragLoaded,this),e.on(D.FRAG_BUFFERED,this.onFragBuffered,this),e.on(D.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(D.LEVEL_LOADED,this.onLevelLoaded,this)}unregisterListeners(){const{hls:e}=this;e.off(D.FRAG_LOADING,this.onFragLoading,this),e.off(D.FRAG_LOADED,this.onFragLoaded,this),e.off(D.FRAG_BUFFERED,this.onFragBuffered,this),e.off(D.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(D.LEVEL_LOADED,this.onLevelLoaded,this)}destroy(){this.unregisterListeners(),this.clearTimer(),this.hls=this.onCheck=null,this.fragCurrent=this.partCurrent=null}onFragLoading(e,t){var n;const i=t.frag;this.ignoreFragment(i)||(this.fragCurrent=i,this.partCurrent=(n=t.part)!=null?n:null,this.clearTimer(),this.timer=self.setInterval(this.onCheck,100))}onLevelSwitching(e,t){this.clearTimer()}getTimeToLoadFrag(e,t,n,i){const s=e+n/t,a=i?this.lastLevelLoadSec:0;return s+a}onLevelLoaded(e,t){const n=this.hls.config,{total:i,bwEstimate:s}=t.stats;De(i)&&De(s)&&(this.lastLevelLoadSec=8*i/s),t.details.live?this.bwEstimator.update(n.abrEwmaSlowLive,n.abrEwmaFastLive):this.bwEstimator.update(n.abrEwmaSlowVoD,n.abrEwmaFastVoD)}_abandonRulesCheck(){const{fragCurrent:e,partCurrent:t,hls:n}=this,{autoLevelEnabled:i,media:s}=n;if(!e||!s)return;const a=performance.now(),o=t?t.stats:e.stats,u=t?t.duration:e.duration,l=a-o.loading.start;if(o.aborted||o.loaded&&o.loaded===o.total||e.level===0){this.clearTimer(),this._nextAutoLevel=-1;return}if(!i||s.paused||!s.playbackRate||!s.readyState)return;const c=n.mainForwardBufferInfo;if(c===null)return;const h=this.bwEstimator.getEstimateTTFB(),f=Math.abs(s.playbackRate);if(l<=Math.max(h,1e3*(u/(f*2))))return;const d=c.len/f;if(d>=2*u/f)return;const m=o.loading.first?o.loading.first-o.loading.start:-1,E=o.loaded&&m>-1,p=this.bwEstimator.getEstimate(),{levels:g,minAutoLevel:v}=n,y=g[e.level],C=o.total||Math.max(o.loaded,Math.round(u*y.maxBitrate/8));let A=l-m;A<1&&E&&(A=Math.min(l,o.loaded*8/p));const T=E?o.loaded*1e3/A:0,S=T?(C-o.loaded)/T:C*8/p+h/1e3;if(S<=d)return;const F=T?T*8:p;let k=Number.POSITIVE_INFINITY,R;for(R=e.level-1;R>v;R--){const V=g[R].maxBitrate;if(k=this.getTimeToLoadFrag(h/1e3,F,u*V,!g[R].details),k<d)break}k>=S||k>u*10||(n.nextLoadLevel=R,E?this.bwEstimator.sample(l-Math.min(h,m),o.loaded):this.bwEstimator.sampleTTFB(l),this.clearTimer(),G.warn(`[abr] Fragment ${e.sn}${t?" part "+t.index:""} of level ${e.level} is loading too slowly;
      Time to underbuffer: ${d.toFixed(3)} s
      Estimated load time for current fragment: ${S.toFixed(3)} s
      Estimated load time for down switch fragment: ${k.toFixed(3)} s
      TTFB estimate: ${m}
      Current BW estimate: ${De(p)?(p/1024).toFixed(3):"Unknown"} Kb/s
      New BW estimate: ${(this.bwEstimator.getEstimate()/1024).toFixed(3)} Kb/s
      Aborting and switching to level ${R}`),e.loader&&(this.fragCurrent=this.partCurrent=null,e.abortRequests()),n.trigger(D.FRAG_LOAD_EMERGENCY_ABORTED,{frag:e,part:t,stats:o}))}onFragLoaded(e,{frag:t,part:n}){const i=n?n.stats:t.stats;if(t.type===Fe.MAIN&&this.bwEstimator.sampleTTFB(i.loading.first-i.loading.start),!this.ignoreFragment(t)){if(this.clearTimer(),this.lastLoadedFragLevel=t.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){const s=n?n.duration:t.duration,a=this.hls.levels[t.level],o=(a.loaded?a.loaded.bytes:0)+i.loaded,u=(a.loaded?a.loaded.duration:0)+s;a.loaded={bytes:o,duration:u},a.realBitrate=Math.round(8*o/u)}if(t.bitrateTest){const s={stats:i,frag:t,part:n,id:t.type};this.onFragBuffered(D.FRAG_BUFFERED,s),t.bitrateTest=!1}}}onFragBuffered(e,t){const{frag:n,part:i}=t,s=i!=null&&i.stats.loaded?i.stats:n.stats;if(s.aborted||this.ignoreFragment(n))return;const a=s.parsing.end-s.loading.start-Math.min(s.loading.first-s.loading.start,this.bwEstimator.getEstimateTTFB());this.bwEstimator.sample(a,s.loaded),s.bwEstimate=this.bwEstimator.getEstimate(),n.bitrateTest?this.bitrateTestDelay=a/1e3:this.bitrateTestDelay=0}ignoreFragment(e){return e.type!==Fe.MAIN||e.sn==="initSegment"}clearTimer(){self.clearInterval(this.timer)}get nextAutoLevel(){const e=this._nextAutoLevel,t=this.bwEstimator;if(e!==-1&&!t.canEstimate())return e;let n=this.getNextABRAutoLevel();if(e!==-1){const i=this.hls.levels;if(i.length>Math.max(e,n)&&i[e].loadError<=i[n].loadError)return e}return e!==-1&&(n=Math.min(e,n)),n}getNextABRAutoLevel(){const{fragCurrent:e,partCurrent:t,hls:n}=this,{maxAutoLevel:i,config:s,minAutoLevel:a,media:o}=n,u=t?t.duration:e?e.duration:0,l=o&&o.playbackRate!==0?Math.abs(o.playbackRate):1,c=this.bwEstimator?this.bwEstimator.getEstimate():s.abrEwmaDefaultEstimate,h=n.mainForwardBufferInfo,f=(h?h.len:0)/l;let d=this.findBestLevel(c,a,i,f,s.abrBandWidthFactor,s.abrBandWidthUpFactor);if(d>=0)return d;G.trace(`[abr] ${f?"rebuffering expected":"buffer is empty"}, finding optimal quality level`);let m=u?Math.min(u,s.maxStarvationDelay):s.maxStarvationDelay,E=s.abrBandWidthFactor,p=s.abrBandWidthUpFactor;if(!f){const g=this.bitrateTestDelay;g&&(m=(u?Math.min(u,s.maxLoadingDelay):s.maxLoadingDelay)-g,G.trace(`[abr] bitrate test took ${Math.round(1e3*g)}ms, set first fragment max fetchDuration to ${Math.round(1e3*m)} ms`),E=p=1)}return d=this.findBestLevel(c,a,i,f+m,E,p),Math.max(d,0)}findBestLevel(e,t,n,i,s,a){var o;const{fragCurrent:u,partCurrent:l,lastLoadedFragLevel:c}=this,{levels:h}=this.hls,f=h[c],d=!!(f!=null&&(o=f.details)!=null&&o.live),m=f==null?void 0:f.codecSet,E=l?l.duration:u?u.duration:0,p=this.bwEstimator.getEstimateTTFB()/1e3;let g=t,v=-1;for(let y=n;y>=t;y--){const C=h[y];if(!C||m&&C.codecSet!==m){C&&(g=Math.min(y,g),v=Math.max(y,v));continue}v!==-1&&G.trace(`[abr] Skipped level(s) ${g}-${v} with CODECS:"${h[v].attrs.CODECS}"; not compatible with "${f.attrs.CODECS}"`);const A=C.details,T=(l?A==null?void 0:A.partTarget:A==null?void 0:A.averagetargetduration)||E;let S;y<=c?S=s*e:S=a*e;const F=h[y].maxBitrate,k=this.getTimeToLoadFrag(p,S,F*T,A===void 0);if(G.trace(`[abr] level:${y} adjustedbw-bitrate:${Math.round(S-F)} avgDuration:${T.toFixed(1)} maxFetchDuration:${i.toFixed(1)} fetchDuration:${k.toFixed(1)}`),S>F&&(k===0||!De(k)||d&&!this.bitrateTestDelay||k<i))return y}return-1}set nextAutoLevel(e){this._nextAutoLevel=e}}class f1{constructor(){this.chunks=[],this.dataLength=0}push(e){this.chunks.push(e),this.dataLength+=e.length}flush(){const{chunks:e,dataLength:t}=this;let n;if(e.length)e.length===1?n=e[0]:n=XD(e,t);else return new Uint8Array(0);return this.reset(),n}reset(){this.chunks.length=0,this.dataLength=0}}function XD(r,e){const t=new Uint8Array(e);let n=0;for(let i=0;i<r.length;i++){const s=r[i];t.set(s,n),n+=s.length}return t}const Pg=100;class ZD extends u0{constructor(e,t,n){super(e,t,n,"[audio-stream-controller]",Fe.AUDIO),this.videoBuffer=null,this.videoTrackCC=-1,this.waitingVideoCC=-1,this.bufferedTrack=null,this.switchingTrack=null,this.trackId=-1,this.waitingData=null,this.mainDetails=null,this.bufferFlushed=!1,this.cachedTrackLoadedData=null,this._registerListeners()}onHandlerDestroying(){this._unregisterListeners(),this.mainDetails=null,this.bufferedTrack=null,this.switchingTrack=null}_registerListeners(){const{hls:e}=this;e.on(D.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(D.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(D.MANIFEST_LOADING,this.onManifestLoading,this),e.on(D.LEVEL_LOADED,this.onLevelLoaded,this),e.on(D.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.on(D.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(D.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(D.ERROR,this.onError,this),e.on(D.BUFFER_RESET,this.onBufferReset,this),e.on(D.BUFFER_CREATED,this.onBufferCreated,this),e.on(D.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(D.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(D.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){const{hls:e}=this;e.off(D.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(D.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(D.MANIFEST_LOADING,this.onManifestLoading,this),e.off(D.LEVEL_LOADED,this.onLevelLoaded,this),e.off(D.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.off(D.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(D.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(D.ERROR,this.onError,this),e.off(D.BUFFER_RESET,this.onBufferReset,this),e.off(D.BUFFER_CREATED,this.onBufferCreated,this),e.off(D.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(D.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(D.FRAG_BUFFERED,this.onFragBuffered,this)}onInitPtsFound(e,{frag:t,id:n,initPTS:i,timescale:s}){if(n==="main"){const a=t.cc;this.initPTS[t.cc]={baseTime:i,timescale:s},this.log(`InitPTS for cc: ${a} found from main: ${i}`),this.videoTrackCC=a,this.state===se.WAITING_INIT_PTS&&this.tick()}}startLoad(e){if(!this.levels){this.startPosition=e,this.state=se.STOPPED;return}const t=this.lastCurrentTime;this.stopLoad(),this.setInterval(Pg),t>0&&e===-1?(this.log(`Override startPosition with lastCurrentTime @${t.toFixed(3)}`),e=t,this.state=se.IDLE):(this.loadedmetadata=!1,this.state=se.WAITING_TRACK),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}doTick(){switch(this.state){case se.IDLE:this.doTickIdle();break;case se.WAITING_TRACK:{var e;const{levels:n,trackId:i}=this,s=n==null||(e=n[i])==null?void 0:e.details;if(s){if(this.waitForCdnTuneIn(s))break;this.state=se.WAITING_INIT_PTS}break}case se.FRAG_LOADING_WAITING_RETRY:{var t;const n=performance.now(),i=this.retryDate;(!i||n>=i||(t=this.media)!=null&&t.seeking)&&(this.log("RetryDate reached, switch back to IDLE state"),this.resetStartWhenNotLoaded(this.trackId),this.state=se.IDLE);break}case se.WAITING_INIT_PTS:{const n=this.waitingData;if(n){const{frag:i,part:s,cache:a,complete:o}=n;if(this.initPTS[i.cc]!==void 0){this.waitingData=null,this.waitingVideoCC=-1,this.state=se.FRAG_LOADING;const u=a.flush(),l={frag:i,part:s,payload:u,networkDetails:null};this._handleFragmentLoadProgress(l),o&&super._handleFragmentLoadComplete(l)}else if(this.videoTrackCC!==this.waitingVideoCC)this.log(`Waiting fragment cc (${i.cc}) cancelled because video is at cc ${this.videoTrackCC}`),this.clearWaitingFragment();else{const u=this.getLoadPosition(),l=tt.bufferInfo(this.mediaBuffer,u,this.config.maxBufferHole);Wf(l.end,this.config.maxFragLookUpTolerance,i)<0&&(this.log(`Waiting fragment cc (${i.cc}) @ ${i.start} cancelled because another fragment at ${l.end} is needed`),this.clearWaitingFragment())}}else this.state=se.IDLE}}this.onTickEnd()}clearWaitingFragment(){const e=this.waitingData;e&&(this.fragmentTracker.removeFragment(e.frag),this.waitingData=null,this.waitingVideoCC=-1,this.state=se.IDLE)}resetLoadingState(){this.clearWaitingFragment(),super.resetLoadingState()}onTickEnd(){const{media:e}=this;!(e!=null&&e.readyState)||(this.lastCurrentTime=e.currentTime)}doTickIdle(){const{hls:e,levels:t,media:n,trackId:i}=this,s=e.config;if(!(t!=null&&t[i])||!n&&(this.startFragRequested||!s.startFragPrefetch))return;const a=t[i],o=a.details;if(!o||o.live&&this.levelLastLoaded!==i||this.waitForCdnTuneIn(o)){this.state=se.WAITING_TRACK;return}const u=this.mediaBuffer?this.mediaBuffer:this.media;this.bufferFlushed&&u&&(this.bufferFlushed=!1,this.afterBufferFlushed(u,Xe.AUDIO,Fe.AUDIO));const l=this.getFwdBufferInfo(u,Fe.AUDIO);if(l===null)return;const{bufferedTrack:c,switchingTrack:h}=this;if(!h&&this._streamEnded(l,o)){e.trigger(D.BUFFER_EOS,{type:"audio"}),this.state=se.ENDED;return}const f=this.getFwdBufferInfo(this.videoBuffer?this.videoBuffer:this.media,Fe.MAIN),d=l.len,m=this.getMaxBufferLength(f==null?void 0:f.len);if(d>=m&&!h)return;const p=o.fragments[0].start;let g=l.end;if(h&&n){const A=this.getLoadPosition();c&&h.attrs!==c.attrs&&(g=A),o.PTSKnown&&A<p&&(l.end>p||l.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),n.currentTime=p+.05)}let v=this.getNextFragment(g,o),y=!1;if(v&&this.isLoopLoading(v,g)&&(y=!!v.gap,v=this.getNextFragmentLoopLoading(v,o,l,Fe.MAIN,m)),!v){this.bufferFlushed=!0;return}const C=f&&v.start>f.end+o.targetduration;if(C||!(f!=null&&f.len)&&l.len){const A=this.getAppendedFrag(v.start,Fe.MAIN);if(A===null||(y||(y=!!A.gap||!!C&&f.len===0),C&&!y||y&&l.nextStart&&l.nextStart<A.end))return}this.loadFragment(v,a,g)}getMaxBufferLength(e){const t=super.getMaxBufferLength();return e?Math.min(Math.max(t,e),this.config.maxMaxBufferLength):t}onMediaDetaching(){this.videoBuffer=null,super.onMediaDetaching()}onAudioTracksUpdated(e,{audioTracks:t}){this.resetTransmuxer(),this.levels=t.map(n=>new yo(n))}onAudioTrackSwitching(e,t){const n=!!t.url;this.trackId=t.id;const{fragCurrent:i}=this;i&&(i.abortRequests(),this.removeUnbufferedFrags(i.start)),this.resetLoadingState(),n?this.setInterval(Pg):this.resetTransmuxer(),n?(this.switchingTrack=t,this.state=se.IDLE):(this.switchingTrack=null,this.bufferedTrack=t,this.state=se.STOPPED),this.tick()}onManifestLoading(){this.fragmentTracker.removeAllFragments(),this.startPosition=this.lastCurrentTime=0,this.bufferFlushed=!1,this.levels=this.mainDetails=this.waitingData=this.bufferedTrack=this.cachedTrackLoadedData=this.switchingTrack=null,this.startFragRequested=!1,this.trackId=this.videoTrackCC=this.waitingVideoCC=-1}onLevelLoaded(e,t){this.mainDetails=t.details,this.cachedTrackLoadedData!==null&&(this.hls.trigger(D.AUDIO_TRACK_LOADED,this.cachedTrackLoadedData),this.cachedTrackLoadedData=null)}onAudioTrackLoaded(e,t){var n;if(this.mainDetails==null){this.cachedTrackLoadedData=t;return}const{levels:i}=this,{details:s,id:a}=t;if(!i){this.warn(`Audio tracks were reset while loading level ${a}`);return}this.log(`Track ${a} loaded [${s.startSN},${s.endSN}]${s.lastPartSn?`[part-${s.lastPartSn}-${s.lastPartIndex}]`:""},duration:${s.totalduration}`);const o=i[a];let u=0;if(s.live||(n=o.details)!=null&&n.live){const l=this.mainDetails;if(s.fragments[0]||(s.deltaUpdateFailed=!0),s.deltaUpdateFailed||!l)return;!o.details&&s.hasProgramDateTime&&l.hasProgramDateTime?(Xy(s,l),u=s.fragments[0].start):u=this.alignPlaylists(s,o.details)}o.details=s,this.levelLastLoaded=a,!this.startFragRequested&&(this.mainDetails||!s.live)&&this.setStartPosition(o.details,u),this.state===se.WAITING_TRACK&&!this.waitForCdnTuneIn(s)&&(this.state=se.IDLE),this.tick()}_handleFragmentLoadProgress(e){var t;const{frag:n,part:i,payload:s}=e,{config:a,trackId:o,levels:u}=this;if(!u){this.warn(`Audio tracks were reset while fragment load was in progress. Fragment ${n.sn} of level ${n.level} will not be buffered`);return}const l=u[o];if(!l){this.warn("Audio track is undefined on fragment load progress");return}const c=l.details;if(!c){this.warn("Audio track details undefined on fragment load progress"),this.removeUnbufferedFrags(n.start);return}const h=a.defaultAudioCodec||l.audioCodec||"mp4a.40.2";let f=this.transmuxer;f||(f=this.transmuxer=new h1(this.hls,Fe.AUDIO,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));const d=this.initPTS[n.cc],m=(t=n.initSegment)==null?void 0:t.data;if(d!==void 0){const p=i?i.index:-1,g=p!==-1,v=new s0(n.level,n.sn,n.stats.chunkCount,s.byteLength,p,g);f.push(s,m,h,"",n,i,c.totalduration,!1,v,d)}else{this.log(`Unknown video PTS for cc ${n.cc}, waiting for video PTS before demuxing audio frag ${n.sn} of [${c.startSN} ,${c.endSN}],track ${o}`);const{cache:E}=this.waitingData=this.waitingData||{frag:n,part:i,cache:new f1,complete:!1};E.push(new Uint8Array(s)),this.waitingVideoCC=this.videoTrackCC,this.state=se.WAITING_INIT_PTS}}_handleFragmentLoadComplete(e){if(this.waitingData){this.waitingData.complete=!0;return}super._handleFragmentLoadComplete(e)}onBufferReset(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1}onBufferCreated(e,t){const n=t.tracks.audio;n&&(this.mediaBuffer=n.buffer||null),t.tracks.video&&(this.videoBuffer=t.tracks.video.buffer||null)}onFragBuffered(e,t){const{frag:n,part:i}=t;if(n.type!==Fe.AUDIO){if(!this.loadedmetadata&&n.type===Fe.MAIN){const s=this.videoBuffer||this.media;s&&tt.getBuffered(s).length&&(this.loadedmetadata=!0)}return}if(this.fragContextChanged(n)){this.warn(`Fragment ${n.sn}${i?" p: "+i.index:""} of level ${n.level} finished buffering, but was aborted. state: ${this.state}, audioSwitch: ${this.switchingTrack?this.switchingTrack.name:"false"}`);return}if(n.sn!=="initSegment"){this.fragPrevious=n;const s=this.switchingTrack;s&&(this.bufferedTrack=s,this.switchingTrack=null,this.hls.trigger(D.AUDIO_TRACK_SWITCHED,Cr({},s)))}this.fragBufferedComplete(n,i)}onError(e,t){var n;if(t.fatal){this.state=se.ERROR;return}switch(t.details){case J.FRAG_GAP:case J.FRAG_PARSING_ERROR:case J.FRAG_DECRYPT_ERROR:case J.FRAG_LOAD_ERROR:case J.FRAG_LOAD_TIMEOUT:case J.KEY_LOAD_ERROR:case J.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(Fe.AUDIO,t);break;case J.AUDIO_TRACK_LOAD_ERROR:case J.AUDIO_TRACK_LOAD_TIMEOUT:case J.LEVEL_PARSING_ERROR:!t.levelRetry&&this.state===se.WAITING_TRACK&&((n=t.context)==null?void 0:n.type)===Ge.AUDIO_TRACK&&(this.state=se.IDLE);break;case J.BUFFER_FULL_ERROR:if(!t.parent||t.parent!=="audio")return;this.reduceLengthAndFlushBuffer(t)&&(this.bufferedTrack=null,super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"));break;case J.INTERNAL_EXCEPTION:this.recoverWorkerError(t);break}}onBufferFlushed(e,{type:t}){t===Xe.AUDIO&&(this.bufferFlushed=!0,this.state===se.ENDED&&(this.state=se.IDLE))}_handleTransmuxComplete(e){var t;const n="audio",{hls:i}=this,{remuxResult:s,chunkMeta:a}=e,o=this.getCurrentContext(a);if(!o){this.resetWhenMissingContext(a);return}const{frag:u,part:l,level:c}=o,{details:h}=c,{audio:f,text:d,id3:m,initSegment:E}=s;if(this.fragContextChanged(u)||!h){this.fragmentTracker.removeFragment(u);return}if(this.state=se.PARSING,this.switchingTrack&&f&&this.completeAudioSwitch(this.switchingTrack),E!=null&&E.tracks){const p=u.initSegment||u;this._bufferInitSegment(E.tracks,p,a),i.trigger(D.FRAG_PARSING_INIT_SEGMENT,{frag:p,id:n,tracks:E.tracks})}if(f){const{startPTS:p,endPTS:g,startDTS:v,endDTS:y}=f;l&&(l.elementaryStreams[Xe.AUDIO]={startPTS:p,endPTS:g,startDTS:v,endDTS:y}),u.setElementaryStreamInfo(Xe.AUDIO,p,g,v,y),this.bufferFragmentData(f,u,l,a)}if(m!=null&&(t=m.samples)!=null&&t.length){const p=Ft({id:n,frag:u,details:h},m);i.trigger(D.FRAG_PARSING_METADATA,p)}if(d){const p=Ft({id:n,frag:u,details:h},d);i.trigger(D.FRAG_PARSING_USERDATA,p)}}_bufferInitSegment(e,t,n){if(this.state!==se.PARSING)return;e.video&&delete e.video;const i=e.audio;if(!i)return;i.levelCodec=i.codec,i.id="audio",this.log(`Init audio buffer, container:${i.container}, codecs[parsed]=[${i.codec}]`),this.hls.trigger(D.BUFFER_CODECS,e);const s=i.initSegment;if(s!=null&&s.byteLength){const a={type:"audio",frag:t,part:null,chunkMeta:n,parent:t.type,data:s};this.hls.trigger(D.BUFFER_APPENDING,a)}this.tick()}loadFragment(e,t,n){const i=this.fragmentTracker.getState(e);if(this.fragCurrent=e,this.switchingTrack||i===$t.NOT_LOADED||i===$t.PARTIAL){var s;e.sn==="initSegment"?this._loadInitSegment(e,t):(s=t.details)!=null&&s.live&&!this.initPTS[e.cc]?(this.log(`Waiting for video PTS in continuity counter ${e.cc} of live stream before loading audio fragment ${e.sn} of level ${this.trackId}`),this.state=se.WAITING_INIT_PTS):(this.startFragRequested=!0,super.loadFragment(e,t,n))}else this.clearTrackerIfNeeded(e)}completeAudioSwitch(e){const{hls:t,media:n,bufferedTrack:i}=this,s=i==null?void 0:i.attrs,a=e.attrs;n&&s&&(s.CHANNELS!==a.CHANNELS||s.NAME!==a.NAME||s.LANGUAGE!==a.LANGUAGE)&&(this.log("Switching audio track : flushing all audio"),super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio")),this.bufferedTrack=e,this.switchingTrack=null,t.trigger(D.AUDIO_TRACK_SWITCHED,Cr({},e))}}class QD extends i0{constructor(e){super(e,"[audio-track-controller]"),this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.registerListeners()}registerListeners(){const{hls:e}=this;e.on(D.MANIFEST_LOADING,this.onManifestLoading,this),e.on(D.MANIFEST_PARSED,this.onManifestParsed,this),e.on(D.LEVEL_LOADING,this.onLevelLoading,this),e.on(D.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(D.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(D.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(D.MANIFEST_LOADING,this.onManifestLoading,this),e.off(D.MANIFEST_PARSED,this.onManifestParsed,this),e.off(D.LEVEL_LOADING,this.onLevelLoading,this),e.off(D.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(D.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(D.ERROR,this.onError,this)}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,super.destroy()}onManifestLoading(){this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0}onManifestParsed(e,t){this.tracks=t.audioTracks||[]}onAudioTrackLoaded(e,t){const{id:n,groupId:i,details:s}=t,a=this.tracksInGroup[n];if(!a||a.groupId!==i){this.warn(`Track with id:${n} and group:${i} not found in active group ${a.groupId}`);return}const o=a.details;a.details=t.details,this.log(`audio-track ${n} "${a.name}" lang:${a.lang} group:${i} loaded [${s.startSN}-${s.endSN}]`),n===this.trackId&&this.playlistLoaded(n,t,o)}onLevelLoading(e,t){this.switchLevel(t.level)}onLevelSwitching(e,t){this.switchLevel(t.level)}switchLevel(e){const t=this.hls.levels[e];if(!(t!=null&&t.audioGroupIds))return;const n=t.audioGroupIds[t.urlId];if(this.groupId!==n){this.groupId=n||null;const i=this.tracks.filter(a=>!n||a.groupId===n);this.selectDefaultTrack&&!i.some(a=>a.default)&&(this.selectDefaultTrack=!1),this.tracksInGroup=i;const s={audioTracks:i};this.log(`Updating audio tracks, ${i.length} track(s) found in group:${n}`),this.hls.trigger(D.AUDIO_TRACKS_UPDATED,s),this.selectInitialTrack()}else this.shouldReloadPlaylist(this.currentTrack)&&this.setAudioTrack(this.trackId)}onError(e,t){t.fatal||!t.context||t.context.type===Ge.AUDIO_TRACK&&t.context.id===this.trackId&&t.context.groupId===this.groupId&&(this.requestScheduled=-1,this.checkRetry(t))}get audioTracks(){return this.tracksInGroup}get audioTrack(){return this.trackId}set audioTrack(e){this.selectDefaultTrack=!1,this.setAudioTrack(e)}setAudioTrack(e){const t=this.tracksInGroup;if(e<0||e>=t.length){this.warn("Invalid id passed to audio-track controller");return}this.clearTimer();const n=this.currentTrack;t[this.trackId];const i=t[e],{groupId:s,name:a}=i;if(this.log(`Switching to audio-track ${e} "${a}" lang:${i.lang} group:${s}`),this.trackId=e,this.currentTrack=i,this.selectDefaultTrack=!1,this.hls.trigger(D.AUDIO_TRACK_SWITCHING,Cr({},i)),i.details&&!i.details.live)return;const o=this.switchParams(i.url,n==null?void 0:n.details);this.loadPlaylist(o)}selectInitialTrack(){const e=this.tracksInGroup,t=this.findTrackId(this.currentTrack)|this.findTrackId(null);if(t!==-1)this.setAudioTrack(t);else{const n=new Error(`No track found for running audio group-ID: ${this.groupId} track count: ${e.length}`);this.warn(n.message),this.hls.trigger(D.ERROR,{type:_e.MEDIA_ERROR,details:J.AUDIO_TRACK_LOAD_ERROR,fatal:!0,error:n})}}findTrackId(e){const t=this.tracksInGroup;for(let n=0;n<t.length;n++){const i=t[n];if((!this.selectDefaultTrack||i.default)&&(!e||e.attrs["STABLE-RENDITION-ID"]!==void 0&&e.attrs["STABLE-RENDITION-ID"]===i.attrs["STABLE-RENDITION-ID"]||e.name===i.name&&e.lang===i.lang))return i.id}return-1}loadPlaylist(e){super.loadPlaylist();const t=this.tracksInGroup[this.trackId];if(this.shouldLoadPlaylist(t)){const n=t.id,i=t.groupId;let s=t.url;if(e)try{s=e.addDirectives(s)}catch(a){this.warn(`Could not construct new URL with HLS Delivery Directives: ${a}`)}this.log(`loading audio-track playlist ${n} "${t.name}" lang:${t.lang} group:${i}`),this.clearTimer(),this.hls.trigger(D.AUDIO_TRACK_LOADING,{url:s,id:n,groupId:i,deliveryDirectives:e||null})}}}function d1(r,e){if(r.length!==e.length)return!1;for(let t=0;t<r.length;t++)if(!JD(r[t].attrs,e[t].attrs))return!1;return!0}function JD(r,e){const t=r["STABLE-RENDITION-ID"];return t?t===e["STABLE-RENDITION-ID"]:!["LANGUAGE","NAME","CHARACTERISTICS","AUTOSELECT","DEFAULT","FORCED"].some(n=>r[n]!==e[n])}const Mg=500;class ew extends u0{constructor(e,t,n){super(e,t,n,"[subtitle-stream-controller]",Fe.SUBTITLE),this.levels=[],this.currentTrackId=-1,this.tracksBuffered=[],this.mainDetails=null,this._registerListeners()}onHandlerDestroying(){this._unregisterListeners(),this.mainDetails=null}_registerListeners(){const{hls:e}=this;e.on(D.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(D.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(D.MANIFEST_LOADING,this.onManifestLoading,this),e.on(D.LEVEL_LOADED,this.onLevelLoaded,this),e.on(D.ERROR,this.onError,this),e.on(D.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(D.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(D.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(D.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.on(D.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(D.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){const{hls:e}=this;e.off(D.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(D.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(D.MANIFEST_LOADING,this.onManifestLoading,this),e.off(D.LEVEL_LOADED,this.onLevelLoaded,this),e.off(D.ERROR,this.onError,this),e.off(D.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(D.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(D.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(D.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.off(D.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(D.FRAG_BUFFERED,this.onFragBuffered,this)}startLoad(e){this.stopLoad(),this.state=se.IDLE,this.setInterval(Mg),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}onManifestLoading(){this.mainDetails=null,this.fragmentTracker.removeAllFragments()}onMediaDetaching(){this.tracksBuffered=[],super.onMediaDetaching()}onLevelLoaded(e,t){this.mainDetails=t.details}onSubtitleFragProcessed(e,t){const{frag:n,success:i}=t;if(this.fragPrevious=n,this.state=se.IDLE,!i)return;const s=this.tracksBuffered[this.currentTrackId];if(!s)return;let a;const o=n.start;for(let l=0;l<s.length;l++)if(o>=s[l].start&&o<=s[l].end){a=s[l];break}const u=n.start+n.duration;a?a.end=u:(a={start:o,end:u},s.push(a)),this.fragmentTracker.fragBuffered(n)}onBufferFlushing(e,t){const{startOffset:n,endOffset:i}=t;if(n===0&&i!==Number.POSITIVE_INFINITY){const{currentTrackId:s,levels:a}=this;if(!a.length||!a[s]||!a[s].details)return;const u=a[s].details.targetduration,l=i-u;if(l<=0)return;t.endOffsetSubtitles=Math.max(0,l),this.tracksBuffered.forEach(c=>{for(let h=0;h<c.length;){if(c[h].end<=l){c.shift();continue}else if(c[h].start<l)c[h].start=l;else break;h++}}),this.fragmentTracker.removeFragmentsInRange(n,l,Fe.SUBTITLE)}}onFragBuffered(e,t){if(!this.loadedmetadata&&t.frag.type===Fe.MAIN){var n;(n=this.media)!=null&&n.buffered.length&&(this.loadedmetadata=!0)}}onError(e,t){const n=t.frag;(n==null?void 0:n.type)===Fe.SUBTITLE&&(this.fragCurrent&&this.fragCurrent.abortRequests(),this.state!==se.STOPPED&&(this.state=se.IDLE))}onSubtitleTracksUpdated(e,{subtitleTracks:t}){if(d1(this.levels,t)){this.levels=t.map(n=>new yo(n));return}this.tracksBuffered=[],this.levels=t.map(n=>{const i=new yo(n);return this.tracksBuffered[i.id]=[],i}),this.fragmentTracker.removeFragmentsInRange(0,Number.POSITIVE_INFINITY,Fe.SUBTITLE),this.fragPrevious=null,this.mediaBuffer=null}onSubtitleTrackSwitch(e,t){if(this.currentTrackId=t.id,!this.levels.length||this.currentTrackId===-1){this.clearInterval();return}const n=this.levels[this.currentTrackId];n!=null&&n.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,n&&this.setInterval(Mg)}onSubtitleTrackLoaded(e,t){var n;const{details:i,id:s}=t,{currentTrackId:a,levels:o}=this;if(!o.length)return;const u=o[a];if(s>=o.length||s!==a||!u)return;this.mediaBuffer=this.mediaBufferTimeRanges;let l=0;if(i.live||(n=u.details)!=null&&n.live){const c=this.mainDetails;if(i.deltaUpdateFailed||!c)return;const h=c.fragments[0];u.details?(l=this.alignPlaylists(i,u.details),l===0&&h&&(l=h.start,Gf(i,l))):i.hasProgramDateTime&&c.hasProgramDateTime?(Xy(i,c),l=i.fragments[0].start):h&&(l=h.start,Gf(i,l))}u.details=i,this.levelLastLoaded=s,!this.startFragRequested&&(this.mainDetails||!i.live)&&this.setStartPosition(u.details,l),this.tick(),i.live&&!this.fragCurrent&&this.media&&this.state===se.IDLE&&(xo(null,i.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),u.details=void 0))}_handleFragmentLoadComplete(e){const{frag:t,payload:n}=e,i=t.decryptdata,s=this.hls;if(!this.fragContextChanged(t)&&n&&n.byteLength>0&&i&&i.key&&i.iv&&i.method==="AES-128"){const a=performance.now();this.decrypter.decrypt(new Uint8Array(n),i.key.buffer,i.iv.buffer).catch(o=>{throw s.trigger(D.ERROR,{type:_e.MEDIA_ERROR,details:J.FRAG_DECRYPT_ERROR,fatal:!1,error:o,reason:o.message,frag:t}),o}).then(o=>{const u=performance.now();s.trigger(D.FRAG_DECRYPTED,{frag:t,payload:o,stats:{tstart:a,tdecrypt:u}})}).catch(o=>{this.warn(`${o.name}: ${o.message}`),this.state=se.IDLE})}}doTick(){if(!this.media){this.state=se.IDLE;return}if(this.state===se.IDLE){const{currentTrackId:e,levels:t}=this,n=t[e];if(!t.length||!n||!n.details)return;const i=n.details,s=i.targetduration,{config:a}=this,o=this.getLoadPosition(),u=tt.bufferedInfo(this.tracksBuffered[this.currentTrackId]||[],o-s,a.maxBufferHole),{end:l,len:c}=u,h=this.getFwdBufferInfo(this.media,Fe.MAIN),f=this.getMaxBufferLength(h==null?void 0:h.len)+s;if(c>f)return;const d=i.fragments,m=d.length,E=i.edge;let p=null;const g=this.fragPrevious;if(l<E){const{maxFragLookUpTolerance:v}=a;p=xo(g,d,Math.max(d[0].start,l),v),!p&&g&&g.start<d[0].start&&(p=d[0])}else p=d[m-1];if(!p)return;p=this.mapToInitFragWhenRequired(p),this.fragmentTracker.getState(p)===$t.NOT_LOADED&&this.loadFragment(p,n,l)}}getMaxBufferLength(e){const t=super.getMaxBufferLength();return e?Math.max(t,e):t}loadFragment(e,t,n){this.fragCurrent=e,e.sn==="initSegment"?this._loadInitSegment(e,t):(this.startFragRequested=!0,super.loadFragment(e,t,n))}get mediaBufferTimeRanges(){return new tw(this.tracksBuffered[this.currentTrackId]||[])}}class tw{constructor(e){this.buffered=void 0;const t=(n,i,s)=>{if(i=i>>>0,i>s-1)throw new DOMException(`Failed to execute '${n}' on 'TimeRanges': The index provided (${i}) is greater than the maximum bound (${s})`);return e[i][n]};this.buffered={get length(){return e.length},end(n){return t("end",n,e.length)},start(n){return t("start",n,e.length)}}}}class rw extends i0{constructor(e){super(e,"[subtitle-track-controller]"),this.media=null,this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.selectDefaultTrack=!0,this.queuedDefaultTrack=-1,this.trackChangeListener=()=>this.onTextTracksChanged(),this.asyncPollTrackChange=()=>this.pollTrackChange(0),this.useTextTrackPolling=!1,this.subtitlePollingInterval=-1,this._subtitleDisplay=!0,this.registerListeners()}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.trackChangeListener=this.asyncPollTrackChange=null,super.destroy()}get subtitleDisplay(){return this._subtitleDisplay}set subtitleDisplay(e){this._subtitleDisplay=e,this.trackId>-1&&this.toggleTrackModes(this.trackId)}registerListeners(){const{hls:e}=this;e.on(D.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(D.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(D.MANIFEST_LOADING,this.onManifestLoading,this),e.on(D.MANIFEST_PARSED,this.onManifestParsed,this),e.on(D.LEVEL_LOADING,this.onLevelLoading,this),e.on(D.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(D.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(D.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(D.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(D.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(D.MANIFEST_LOADING,this.onManifestLoading,this),e.off(D.MANIFEST_PARSED,this.onManifestParsed,this),e.off(D.LEVEL_LOADING,this.onLevelLoading,this),e.off(D.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(D.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(D.ERROR,this.onError,this)}onMediaAttached(e,t){this.media=t.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))}pollTrackChange(e){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.trackChangeListener,e)}onMediaDetaching(){if(!this.media)return;self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||this.media.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId),vh(this.media.textTracks).forEach(t=>{Vs(t)}),this.subtitleTrack=-1,this.media=null}onManifestLoading(){this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.selectDefaultTrack=!0}onManifestParsed(e,t){this.tracks=t.subtitleTracks}onSubtitleTrackLoaded(e,t){const{id:n,details:i}=t,{trackId:s}=this,a=this.tracksInGroup[s];if(!a){this.warn(`Invalid subtitle track id ${n}`);return}const o=a.details;a.details=t.details,this.log(`subtitle track ${n} loaded [${i.startSN}-${i.endSN}]`),n===this.trackId&&this.playlistLoaded(n,t,o)}onLevelLoading(e,t){this.switchLevel(t.level)}onLevelSwitching(e,t){this.switchLevel(t.level)}switchLevel(e){const t=this.hls.levels[e];if(!(t!=null&&t.textGroupIds))return;const n=t.textGroupIds[t.urlId],i=this.tracksInGroup?this.tracksInGroup[this.trackId]:void 0;if(this.groupId!==n){const s=this.tracks.filter(u=>!n||u.groupId===n);this.tracksInGroup=s;const a=this.findTrackId(i==null?void 0:i.name)||this.findTrackId();this.groupId=n||null;const o={subtitleTracks:s};this.log(`Updating subtitle tracks, ${s.length} track(s) found in "${n}" group-id`),this.hls.trigger(D.SUBTITLE_TRACKS_UPDATED,o),a!==-1&&this.setSubtitleTrack(a,i)}else this.shouldReloadPlaylist(i)&&this.setSubtitleTrack(this.trackId,i)}findTrackId(e){const t=this.tracksInGroup;for(let n=0;n<t.length;n++){const i=t[n];if((!this.selectDefaultTrack||i.default)&&(!e||e===i.name))return i.id}return-1}onError(e,t){t.fatal||!t.context||t.context.type===Ge.SUBTITLE_TRACK&&t.context.id===this.trackId&&t.context.groupId===this.groupId&&this.checkRetry(t)}get subtitleTracks(){return this.tracksInGroup}get subtitleTrack(){return this.trackId}set subtitleTrack(e){this.selectDefaultTrack=!1;const t=this.tracksInGroup?this.tracksInGroup[this.trackId]:void 0;this.setSubtitleTrack(e,t)}loadPlaylist(e){super.loadPlaylist();const t=this.tracksInGroup[this.trackId];if(this.shouldLoadPlaylist(t)){const n=t.id,i=t.groupId;let s=t.url;if(e)try{s=e.addDirectives(s)}catch(a){this.warn(`Could not construct new URL with HLS Delivery Directives: ${a}`)}this.log(`Loading subtitle playlist for id ${n}`),this.hls.trigger(D.SUBTITLE_TRACK_LOADING,{url:s,id:n,groupId:i,deliveryDirectives:e||null})}}toggleTrackModes(e){const{media:t,trackId:n}=this;if(!t)return;const i=vh(t.textTracks),s=i.filter(o=>o.groupId===this.groupId);if(e===-1)[].slice.call(i).forEach(o=>{o.mode="disabled"});else{const o=s[n];o&&(o.mode="disabled")}const a=s[e];a&&(a.mode=this.subtitleDisplay?"showing":"hidden")}setSubtitleTrack(e,t){var n;const i=this.tracksInGroup;if(!this.media){this.queuedDefaultTrack=e;return}if(this.trackId!==e&&this.toggleTrackModes(e),this.trackId===e&&(e===-1||(n=i[e])!=null&&n.details)||e<-1||e>=i.length)return;this.clearTimer();const s=i[e];if(this.log(`Switching to subtitle-track ${e}`+(s?` "${s.name}" lang:${s.lang} group:${s.groupId}`:"")),this.trackId=e,s){const{id:a,groupId:o="",name:u,type:l,url:c}=s;this.hls.trigger(D.SUBTITLE_TRACK_SWITCH,{id:a,groupId:o,name:u,type:l,url:c});const h=this.switchParams(s.url,t==null?void 0:t.details);this.loadPlaylist(h)}else this.hls.trigger(D.SUBTITLE_TRACK_SWITCH,{id:e})}onTextTracksChanged(){if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),!this.media||!this.hls.config.renderTextTracksNatively)return;let e=-1;const t=vh(this.media.textTracks);for(let n=0;n<t.length;n++)if(t[n].mode==="hidden")e=n;else if(t[n].mode==="showing"){e=n;break}this.subtitleTrack!==e&&(this.subtitleTrack=e)}}function vh(r){const e=[];for(let t=0;t<r.length;t++){const n=r[t];(n.kind==="subtitles"||n.kind==="captions")&&n.label&&e.push(r[t])}return e}class nw{constructor(e){this.buffers=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.buffers=e}append(e,t){const n=this.queues[t];n.push(e),n.length===1&&this.buffers[t]&&this.executeNext(t)}insertAbort(e,t){this.queues[t].unshift(e),this.executeNext(t)}appendBlocker(e){let t;const n=new Promise(s=>{t=s}),i={execute:t,onStart:()=>{},onComplete:()=>{},onError:()=>{}};return this.append(i,e),n}executeNext(e){const{buffers:t,queues:n}=this,i=t[e],s=n[e];if(s.length){const a=s[0];try{a.execute()}catch(o){G.warn("[buffer-operation-queue]: Unhandled exception executing the current operation"),a.onError(o),i!=null&&i.updating||(s.shift(),this.executeNext(e))}}}shiftAndExecuteNext(e){this.queues[e].shift(),this.executeNext(e)}current(e){return this.queues[e][0]}}const Ug=Xl(),$g=/([ha]vc.)(?:\.[^.,]+)+/;class iw{constructor(e){this.details=null,this._objectUrl=null,this.operationQueue=void 0,this.listeners=void 0,this.hls=void 0,this.bufferCodecEventsExpected=0,this._bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.lastMpegAudioChunk=null,this.appendError=0,this.tracks={},this.pendingTracks={},this.sourceBuffer=void 0,this._onMediaSourceOpen=()=>{const{media:t,mediaSource:n}=this;G.log("[buffer-controller]: Media source opened"),t&&(t.removeEventListener("emptied",this._onMediaEmptied),this.updateMediaElementDuration(),this.hls.trigger(D.MEDIA_ATTACHED,{media:t})),n&&n.removeEventListener("sourceopen",this._onMediaSourceOpen),this.checkPendingTracks()},this._onMediaSourceClose=()=>{G.log("[buffer-controller]: Media source closed")},this._onMediaSourceEnded=()=>{G.log("[buffer-controller]: Media source ended")},this._onMediaEmptied=()=>{const{media:t,_objectUrl:n}=this;t&&t.src!==n&&G.error(`Media element src was set while attaching MediaSource (${n} > ${t.src})`)},this.hls=e,this._initSourceBuffer(),this.registerListeners()}hasSourceTypes(){return this.getSourceBufferTypes().length>0||Object.keys(this.pendingTracks).length>0}destroy(){this.unregisterListeners(),this.details=null,this.lastMpegAudioChunk=null}registerListeners(){const{hls:e}=this;e.on(D.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(D.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(D.MANIFEST_LOADING,this.onManifestLoading,this),e.on(D.MANIFEST_PARSED,this.onManifestParsed,this),e.on(D.BUFFER_RESET,this.onBufferReset,this),e.on(D.BUFFER_APPENDING,this.onBufferAppending,this),e.on(D.BUFFER_CODECS,this.onBufferCodecs,this),e.on(D.BUFFER_EOS,this.onBufferEos,this),e.on(D.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(D.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(D.FRAG_PARSED,this.onFragParsed,this),e.on(D.FRAG_CHANGED,this.onFragChanged,this)}unregisterListeners(){const{hls:e}=this;e.off(D.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(D.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(D.MANIFEST_LOADING,this.onManifestLoading,this),e.off(D.MANIFEST_PARSED,this.onManifestParsed,this),e.off(D.BUFFER_RESET,this.onBufferReset,this),e.off(D.BUFFER_APPENDING,this.onBufferAppending,this),e.off(D.BUFFER_CODECS,this.onBufferCodecs,this),e.off(D.BUFFER_EOS,this.onBufferEos,this),e.off(D.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(D.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(D.FRAG_PARSED,this.onFragParsed,this),e.off(D.FRAG_CHANGED,this.onFragChanged,this)}_initSourceBuffer(){this.sourceBuffer={},this.operationQueue=new nw(this.sourceBuffer),this.listeners={audio:[],video:[],audiovideo:[]},this.lastMpegAudioChunk=null}onManifestLoading(){this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=0,this.details=null}onManifestParsed(e,t){let n=2;(t.audio&&!t.video||!t.altAudio)&&(n=1),this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=n,G.log(`${this.bufferCodecEventsExpected} bufferCodec event(s) expected`)}onMediaAttaching(e,t){const n=this.media=t.media;if(n&&Ug){const i=this.mediaSource=new Ug;i.addEventListener("sourceopen",this._onMediaSourceOpen),i.addEventListener("sourceended",this._onMediaSourceEnded),i.addEventListener("sourceclose",this._onMediaSourceClose),n.src=self.URL.createObjectURL(i),this._objectUrl=n.src,n.addEventListener("emptied",this._onMediaEmptied)}}onMediaDetaching(){const{media:e,mediaSource:t,_objectUrl:n}=this;if(t){if(G.log("[buffer-controller]: media source detaching"),t.readyState==="open")try{t.endOfStream()}catch(i){G.warn(`[buffer-controller]: onMediaDetaching: ${i.message} while calling endOfStream`)}this.onBufferReset(),t.removeEventListener("sourceopen",this._onMediaSourceOpen),t.removeEventListener("sourceended",this._onMediaSourceEnded),t.removeEventListener("sourceclose",this._onMediaSourceClose),e&&(e.removeEventListener("emptied",this._onMediaEmptied),n&&self.URL.revokeObjectURL(n),e.src===n?(e.removeAttribute("src"),e.load()):G.warn("[buffer-controller]: media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={}}this.hls.trigger(D.MEDIA_DETACHED,void 0)}onBufferReset(){this.getSourceBufferTypes().forEach(e=>{const t=this.sourceBuffer[e];try{t&&(this.removeBufferListeners(e),this.mediaSource&&this.mediaSource.removeSourceBuffer(t),this.sourceBuffer[e]=void 0)}catch(n){G.warn(`[buffer-controller]: Failed to reset the ${e} buffer`,n)}}),this._initSourceBuffer()}onBufferCodecs(e,t){const n=this.getSourceBufferTypes().length;Object.keys(t).forEach(i=>{if(n){const s=this.tracks[i];if(s&&typeof s.buffer.changeType=="function"){const{id:a,codec:o,levelCodec:u,container:l,metadata:c}=t[i],h=(s.levelCodec||s.codec).replace($g,"$1"),f=(u||o).replace($g,"$1");if(h!==f){const d=`${l};codecs=${u||o}`;this.appendChangeType(i,d),G.log(`[buffer-controller]: switching codec ${h} to ${f}`),this.tracks[i]={buffer:s.buffer,codec:o,container:l,levelCodec:u,metadata:c,id:a}}}}else this.pendingTracks[i]=t[i]}),!n&&(this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),this.mediaSource&&this.mediaSource.readyState==="open"&&this.checkPendingTracks())}appendChangeType(e,t){const{operationQueue:n}=this,i={execute:()=>{const s=this.sourceBuffer[e];s&&(G.log(`[buffer-controller]: changing ${e} sourceBuffer type to ${t}`),s.changeType(t)),n.shiftAndExecuteNext(e)},onStart:()=>{},onComplete:()=>{},onError:s=>{G.warn(`[buffer-controller]: Failed to change ${e} SourceBuffer type`,s)}};n.append(i,e)}onBufferAppending(e,t){const{hls:n,operationQueue:i,tracks:s}=this,{data:a,type:o,frag:u,part:l,chunkMeta:c}=t,h=c.buffering[o],f=self.performance.now();h.start=f;const d=u.stats.buffering,m=l?l.stats.buffering:null;d.start===0&&(d.start=f),m&&m.start===0&&(m.start=f);const E=s.audio;let p=!1;o==="audio"&&(E==null?void 0:E.container)==="audio/mpeg"&&(p=!this.lastMpegAudioChunk||c.id===1||this.lastMpegAudioChunk.sn!==c.sn,this.lastMpegAudioChunk=c);const g=u.start,v={execute:()=>{if(h.executeStart=self.performance.now(),p){const y=this.sourceBuffer[o];if(y){const C=g-y.timestampOffset;Math.abs(C)>=.1&&(G.log(`[buffer-controller]: Updating audio SourceBuffer timestampOffset to ${g} (delta: ${C}) sn: ${u.sn})`),y.timestampOffset=g)}}this.appendExecutor(a,o)},onStart:()=>{},onComplete:()=>{const y=self.performance.now();h.executeEnd=h.end=y,d.first===0&&(d.first=y),m&&m.first===0&&(m.first=y);const{sourceBuffer:C}=this,A={};for(const T in C)A[T]=tt.getBuffered(C[T]);this.appendError=0,this.hls.trigger(D.BUFFER_APPENDED,{type:o,frag:u,part:l,chunkMeta:c,parent:u.type,timeRanges:A})},onError:y=>{G.error(`[buffer-controller]: Error encountered while trying to append to the ${o} SourceBuffer`,y);const C={type:_e.MEDIA_ERROR,parent:u.type,details:J.BUFFER_APPEND_ERROR,frag:u,part:l,chunkMeta:c,error:y,err:y,fatal:!1};y.code===DOMException.QUOTA_EXCEEDED_ERR?C.details=J.BUFFER_FULL_ERROR:(this.appendError++,C.details=J.BUFFER_APPEND_ERROR,this.appendError>n.config.appendErrorMaxRetry&&(G.error(`[buffer-controller]: Failed ${n.config.appendErrorMaxRetry} times to append segment in sourceBuffer`),C.fatal=!0)),n.trigger(D.ERROR,C)}};i.append(v,o)}onBufferFlushing(e,t){const{operationQueue:n}=this,i=s=>({execute:this.removeExecutor.bind(this,s,t.startOffset,t.endOffset),onStart:()=>{},onComplete:()=>{this.hls.trigger(D.BUFFER_FLUSHED,{type:s})},onError:a=>{G.warn(`[buffer-controller]: Failed to remove from ${s} SourceBuffer`,a)}});t.type?n.append(i(t.type),t.type):this.getSourceBufferTypes().forEach(s=>{n.append(i(s),s)})}onFragParsed(e,t){const{frag:n,part:i}=t,s=[],a=i?i.elementaryStreams:n.elementaryStreams;a[Xe.AUDIOVIDEO]?s.push("audiovideo"):(a[Xe.AUDIO]&&s.push("audio"),a[Xe.VIDEO]&&s.push("video"));const o=()=>{const u=self.performance.now();n.stats.buffering.end=u,i&&(i.stats.buffering.end=u);const l=i?i.stats:n.stats;this.hls.trigger(D.FRAG_BUFFERED,{frag:n,part:i,stats:l,id:n.type})};s.length===0&&G.warn(`Fragments must have at least one ElementaryStreamType set. type: ${n.type} level: ${n.level} sn: ${n.sn}`),this.blockBuffers(o,s)}onFragChanged(e,t){this.flushBackBuffer()}onBufferEos(e,t){this.getSourceBufferTypes().reduce((i,s)=>{const a=this.sourceBuffer[s];return a&&(!t.type||t.type===s)&&(a.ending=!0,a.ended||(a.ended=!0,G.log(`[buffer-controller]: ${s} sourceBuffer now EOS`))),i&&!!(!a||a.ended)},!0)&&(G.log("[buffer-controller]: Queueing mediaSource.endOfStream()"),this.blockBuffers(()=>{this.getSourceBufferTypes().forEach(s=>{const a=this.sourceBuffer[s];a&&(a.ending=!1)});const{mediaSource:i}=this;if(!i||i.readyState!=="open"){i&&G.info(`[buffer-controller]: Could not call mediaSource.endOfStream(). mediaSource.readyState: ${i.readyState}`);return}G.log("[buffer-controller]: Calling mediaSource.endOfStream()"),i.endOfStream()}))}onLevelUpdated(e,{details:t}){!t.fragments.length||(this.details=t,this.getSourceBufferTypes().length?this.blockBuffers(this.updateMediaElementDuration.bind(this)):this.updateMediaElementDuration())}flushBackBuffer(){const{hls:e,details:t,media:n,sourceBuffer:i}=this;if(!n||t===null)return;const s=this.getSourceBufferTypes();if(!s.length)return;const a=t.live&&e.config.liveBackBufferLength!==null?e.config.liveBackBufferLength:e.config.backBufferLength;if(!De(a)||a<0)return;const o=n.currentTime,u=t.levelTargetDuration,l=Math.max(a,u),c=Math.floor(o/u)*u-l;s.forEach(h=>{const f=i[h];if(f){const d=tt.getBuffered(f);if(d.length>0&&c>d.start(0)){if(e.trigger(D.BACK_BUFFER_REACHED,{bufferEnd:c}),t.live)e.trigger(D.LIVE_BACK_BUFFER_REACHED,{bufferEnd:c});else if(f.ended&&d.end(d.length-1)-o<u*2){G.info(`[buffer-controller]: Cannot flush ${h} back buffer while SourceBuffer is in ended state`);return}e.trigger(D.BUFFER_FLUSHING,{startOffset:0,endOffset:c,type:h})}}})}updateMediaElementDuration(){if(!this.details||!this.media||!this.mediaSource||this.mediaSource.readyState!=="open")return;const{details:e,hls:t,media:n,mediaSource:i}=this,s=e.fragments[0].start+e.totalduration,a=n.duration,o=De(i.duration)?i.duration:0;e.live&&t.config.liveDurationInfinity?(G.log("[buffer-controller]: Media Source duration is set to Infinity"),i.duration=1/0,this.updateSeekableRange(e)):(s>o&&s>a||!De(a))&&(G.log(`[buffer-controller]: Updating Media Source duration to ${s.toFixed(3)}`),i.duration=s)}updateSeekableRange(e){const t=this.mediaSource,n=e.fragments;if(n.length&&e.live&&t!=null&&t.setLiveSeekableRange){const s=Math.max(0,n[0].start),a=Math.max(s,s+e.totalduration);t.setLiveSeekableRange(s,a)}}checkPendingTracks(){const{bufferCodecEventsExpected:e,operationQueue:t,pendingTracks:n}=this,i=Object.keys(n).length;if(i&&!e||i===2){this.createSourceBuffers(n),this.pendingTracks={};const s=this.getSourceBufferTypes();if(s.length)this.hls.trigger(D.BUFFER_CREATED,{tracks:this.tracks}),s.forEach(a=>{t.executeNext(a)});else{const a=new Error("could not create source buffer for media codec(s)");this.hls.trigger(D.ERROR,{type:_e.MEDIA_ERROR,details:J.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,error:a,reason:a.message})}}}createSourceBuffers(e){const{sourceBuffer:t,mediaSource:n}=this;if(!n)throw Error("createSourceBuffers called when mediaSource was null");for(const i in e)if(!t[i]){const s=e[i];if(!s)throw Error(`source buffer exists for track ${i}, however track does not`);const a=s.levelCodec||s.codec,o=`${s.container};codecs=${a}`;G.log(`[buffer-controller]: creating sourceBuffer(${o})`);try{const u=t[i]=n.addSourceBuffer(o),l=i;this.addBufferListener(l,"updatestart",this._onSBUpdateStart),this.addBufferListener(l,"updateend",this._onSBUpdateEnd),this.addBufferListener(l,"error",this._onSBUpdateError),this.tracks[i]={buffer:u,codec:a,container:s.container,levelCodec:s.levelCodec,metadata:s.metadata,id:s.id}}catch(u){G.error(`[buffer-controller]: error while trying to add sourceBuffer: ${u.message}`),this.hls.trigger(D.ERROR,{type:_e.MEDIA_ERROR,details:J.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:u,mimeType:o})}}}_onSBUpdateStart(e){const{operationQueue:t}=this;t.current(e).onStart()}_onSBUpdateEnd(e){const{operationQueue:t}=this;t.current(e).onComplete(),t.shiftAndExecuteNext(e)}_onSBUpdateError(e,t){const n=new Error(`${e} SourceBuffer error`);G.error(`[buffer-controller]: ${n}`,t),this.hls.trigger(D.ERROR,{type:_e.MEDIA_ERROR,details:J.BUFFER_APPENDING_ERROR,error:n,fatal:!1});const i=this.operationQueue.current(e);i&&i.onError(t)}removeExecutor(e,t,n){const{media:i,mediaSource:s,operationQueue:a,sourceBuffer:o}=this,u=o[e];if(!i||!s||!u){G.warn(`[buffer-controller]: Attempting to remove from the ${e} SourceBuffer, but it does not exist`),a.shiftAndExecuteNext(e);return}const l=De(i.duration)?i.duration:1/0,c=De(s.duration)?s.duration:1/0,h=Math.max(0,t),f=Math.min(n,l,c);f>h&&!u.ending?(u.ended=!1,G.log(`[buffer-controller]: Removing [${h},${f}] from the ${e} SourceBuffer`),u.remove(h,f)):a.shiftAndExecuteNext(e)}appendExecutor(e,t){const{operationQueue:n,sourceBuffer:i}=this,s=i[t];if(!s){G.warn(`[buffer-controller]: Attempting to append to the ${t} SourceBuffer, but it does not exist`),n.shiftAndExecuteNext(t);return}s.ended=!1,s.appendBuffer(e)}blockBuffers(e,t=this.getSourceBufferTypes()){if(!t.length){G.log("[buffer-controller]: Blocking operation requested, but no SourceBuffers exist"),Promise.resolve().then(e);return}const{operationQueue:n}=this,i=t.map(s=>n.appendBlocker(s));Promise.all(i).then(()=>{e(),t.forEach(s=>{const a=this.sourceBuffer[s];a!=null&&a.updating||n.shiftAndExecuteNext(s)})})}getSourceBufferTypes(){return Object.keys(this.sourceBuffer)}addBufferListener(e,t,n){const i=this.sourceBuffer[e];if(!i)return;const s=n.bind(this,e);this.listeners[e].push({event:t,listener:s}),i.addEventListener(t,s)}removeBufferListeners(e){const t=this.sourceBuffer[e];!t||this.listeners[e].forEach(n=>{t.removeEventListener(n.event,n.listener)})}}const zg={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},p1=function(e){let t=e;return zg.hasOwnProperty(e)&&(t=zg[e]),String.fromCharCode(t)},un=15,Nn=100,sw={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},aw={17:2,18:4,21:6,22:8,23:10,19:13,20:15},ow={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},uw={25:2,26:4,29:6,30:8,31:10,27:13,28:15},lw=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];class cw{constructor(){this.time=null,this.verboseLevel=0}log(e,t){if(this.verboseLevel>=e){const n=typeof t=="function"?t():t;G.log(`${this.time} [${e}] ${n}`)}}}const Bi=function(e){const t=[];for(let n=0;n<e.length;n++)t.push(e[n].toString(16));return t};class g1{constructor(e,t,n,i,s){this.foreground=void 0,this.underline=void 0,this.italics=void 0,this.background=void 0,this.flash=void 0,this.foreground=e||"white",this.underline=t||!1,this.italics=n||!1,this.background=i||"black",this.flash=s||!1}reset(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}setStyles(e){const t=["foreground","underline","italics","background","flash"];for(let n=0;n<t.length;n++){const i=t[n];e.hasOwnProperty(i)&&(this[i]=e[i])}}isDefault(){return this.foreground==="white"&&!this.underline&&!this.italics&&this.background==="black"&&!this.flash}equals(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash}copy(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash}toString(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}}class hw{constructor(e,t,n,i,s,a){this.uchar=void 0,this.penState=void 0,this.uchar=e||" ",this.penState=new g1(t,n,i,s,a)}reset(){this.uchar=" ",this.penState.reset()}setChar(e,t){this.uchar=e,this.penState.copy(t)}setPenState(e){this.penState.copy(e)}equals(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)}copy(e){this.uchar=e.uchar,this.penState.copy(e.penState)}isEmpty(){return this.uchar===" "&&this.penState.isDefault()}}class fw{constructor(e){this.chars=void 0,this.pos=void 0,this.currPenState=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chars=[];for(let t=0;t<Nn;t++)this.chars.push(new hw);this.logger=e,this.pos=0,this.currPenState=new g1}equals(e){let t=!0;for(let n=0;n<Nn;n++)if(!this.chars[n].equals(e.chars[n])){t=!1;break}return t}copy(e){for(let t=0;t<Nn;t++)this.chars[t].copy(e.chars[t])}isEmpty(){let e=!0;for(let t=0;t<Nn;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e}setCursor(e){this.pos!==e&&(this.pos=e),this.pos<0?(this.logger.log(3,"Negative cursor position "+this.pos),this.pos=0):this.pos>Nn&&(this.logger.log(3,"Too large cursor position "+this.pos),this.pos=Nn)}moveCursor(e){const t=this.pos+e;if(e>1)for(let n=this.pos+1;n<t+1;n++)this.chars[n].setPenState(this.currPenState);this.setCursor(t)}backSpace(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)}insertChar(e){e>=144&&this.backSpace();const t=p1(e);if(this.pos>=Nn){this.logger.log(0,()=>"Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!");return}this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1)}clearFromPos(e){let t;for(t=e;t<Nn;t++)this.chars[t].reset()}clear(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()}clearToEndOfRow(){this.clearFromPos(this.pos)}getTextString(){const e=[];let t=!0;for(let n=0;n<Nn;n++){const i=this.chars[n].uchar;i!==" "&&(t=!1),e.push(i)}return t?"":e.join("")}setPenStyles(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)}}class Eh{constructor(e){this.rows=void 0,this.currRow=void 0,this.nrRollUpRows=void 0,this.lastOutputScreen=void 0,this.logger=void 0,this.rows=[];for(let t=0;t<un;t++)this.rows.push(new fw(e));this.logger=e,this.currRow=un-1,this.nrRollUpRows=null,this.lastOutputScreen=null,this.reset()}reset(){for(let e=0;e<un;e++)this.rows[e].clear();this.currRow=un-1}equals(e){let t=!0;for(let n=0;n<un;n++)if(!this.rows[n].equals(e.rows[n])){t=!1;break}return t}copy(e){for(let t=0;t<un;t++)this.rows[t].copy(e.rows[t])}isEmpty(){let e=!0;for(let t=0;t<un;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e}backSpace(){this.rows[this.currRow].backSpace()}clearToEndOfRow(){this.rows[this.currRow].clearToEndOfRow()}insertChar(e){this.rows[this.currRow].insertChar(e)}setPen(e){this.rows[this.currRow].setPenStyles(e)}moveCursor(e){this.rows[this.currRow].moveCursor(e)}setCursor(e){this.logger.log(2,"setCursor: "+e),this.rows[this.currRow].setCursor(e)}setPAC(e){this.logger.log(2,()=>"pacData = "+JSON.stringify(e));let t=e.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(let o=0;o<un;o++)this.rows[o].clear();const s=this.currRow+1-this.nrRollUpRows,a=this.lastOutputScreen;if(a){const o=a.rows[s].cueStartTime,u=this.logger.time;if(o&&u!==null&&o<u)for(let l=0;l<this.nrRollUpRows;l++)this.rows[t-this.nrRollUpRows+l+1].copy(a.rows[s+l])}}this.currRow=t;const n=this.rows[this.currRow];if(e.indent!==null){const s=e.indent,a=Math.max(s-1,0);n.setCursor(e.indent),e.color=n.chars[a].penState.foreground}const i={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(i)}setBkgData(e){this.logger.log(2,()=>"bkgData = "+JSON.stringify(e)),this.backSpace(),this.setPen(e),this.insertChar(32)}setRollUpRows(e){this.nrRollUpRows=e}rollUp(){if(this.nrRollUpRows===null){this.logger.log(3,"roll_up but nrRollUpRows not set yet");return}this.logger.log(1,()=>this.getDisplayText());const e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),this.logger.log(2,"Rolling up")}getDisplayText(e){e=e||!1;const t=[];let n="",i=-1;for(let s=0;s<un;s++){const a=this.rows[s].getTextString();a&&(i=s+1,e?t.push("Row "+i+": '"+a+"'"):t.push(a.trim()))}return t.length>0&&(e?n="["+t.join(" | ")+"]":n=t.join(`
`)),n}getTextAndFormat(){return this.rows}}class Vg{constructor(e,t,n){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new Eh(n),this.nonDisplayedMemory=new Eh(n),this.lastOutputScreen=new Eh(n),this.currRollUpRow=this.displayedMemory.rows[un-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=n}reset(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[un-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}getHandler(){return this.outputFilter}setHandler(e){this.outputFilter=e}setPAC(e){this.writeScreen.setPAC(e)}setBkgData(e){this.writeScreen.setBkgData(e)}setMode(e){e!==this.mode&&(this.mode=e,this.logger.log(2,()=>"MODE="+e),this.mode==="MODE_POP-ON"?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),this.mode!=="MODE_ROLL-UP"&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)}insertChars(e){for(let n=0;n<e.length;n++)this.writeScreen.insertChar(e[n]);const t=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(2,()=>t+": "+this.writeScreen.getDisplayText(!0)),(this.mode==="MODE_PAINT-ON"||this.mode==="MODE_ROLL-UP")&&(this.logger.log(1,()=>"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())}ccRCL(){this.logger.log(2,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")}ccBS(){this.logger.log(2,"BS - BackSpace"),this.mode!=="MODE_TEXT"&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())}ccAOF(){}ccAON(){}ccDER(){this.logger.log(2,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()}ccRU(e){this.logger.log(2,"RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)}ccFON(){this.logger.log(2,"FON - Flash On"),this.writeScreen.setPen({flash:!0})}ccRDC(){this.logger.log(2,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")}ccTR(){this.logger.log(2,"TR"),this.setMode("MODE_TEXT")}ccRTD(){this.logger.log(2,"RTD"),this.setMode("MODE_TEXT")}ccEDM(){this.logger.log(2,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)}ccCR(){this.logger.log(2,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)}ccENM(){this.logger.log(2,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()}ccEOC(){if(this.logger.log(2,"EOC - End Of Caption"),this.mode==="MODE_POP-ON"){const e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,this.logger.log(1,()=>"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)}ccTO(e){this.logger.log(2,"TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)}ccMIDROW(e){const t={flash:!1};if(t.underline=e%2===1,t.italics=e>=46,t.italics)t.foreground="white";else{const n=Math.floor(e/2)-16,i=["white","green","blue","cyan","red","yellow","magenta"];t.foreground=i[n]}this.logger.log(2,"MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)}outputDataUpdate(e=!1){const t=this.logger.time;t!==null&&this.outputFilter&&(this.cueStartTime===null&&!this.displayedMemory.isEmpty()?this.cueStartTime=t:this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,t,this.lastOutputScreen),e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:t),this.lastOutputScreen.copy(this.displayedMemory))}cueSplitAtTime(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))}}class Gg{constructor(e,t,n){this.channels=void 0,this.currentChannel=0,this.cmdHistory=void 0,this.logger=void 0;const i=new cw;this.channels=[null,new Vg(e,t,i),new Vg(e+1,n,i)],this.cmdHistory=Hg(),this.logger=i}getHandler(e){return this.channels[e].getHandler()}setHandler(e,t){this.channels[e].setHandler(t)}addData(e,t){let n,i,s,a=!1;this.logger.time=e;for(let o=0;o<t.length;o+=2)if(i=t[o]&127,s=t[o+1]&127,!(i===0&&s===0)){if(this.logger.log(3,"["+Bi([t[o],t[o+1]])+"] -> ("+Bi([i,s])+")"),n=this.parseCmd(i,s),n||(n=this.parseMidrow(i,s)),n||(n=this.parsePAC(i,s)),n||(n=this.parseBackgroundAttributes(i,s)),!n&&(a=this.parseChars(i,s),a)){const u=this.currentChannel;u&&u>0?this.channels[u].insertChars(a):this.logger.log(2,"No channel found yet. TEXT-MODE?")}!n&&!a&&this.logger.log(2,"Couldn't parse cleaned data "+Bi([i,s])+" orig: "+Bi([t[o],t[o+1]]))}}parseCmd(e,t){const{cmdHistory:n}=this,i=(e===20||e===28||e===21||e===29)&&t>=32&&t<=47,s=(e===23||e===31)&&t>=33&&t<=35;if(!(i||s))return!1;if(Wg(e,t,n))return xs(null,null,n),this.logger.log(3,"Repeated command ("+Bi([e,t])+") is dropped"),!0;const a=e===20||e===21||e===23?1:2,o=this.channels[a];return e===20||e===21||e===28||e===29?t===32?o.ccRCL():t===33?o.ccBS():t===34?o.ccAOF():t===35?o.ccAON():t===36?o.ccDER():t===37?o.ccRU(2):t===38?o.ccRU(3):t===39?o.ccRU(4):t===40?o.ccFON():t===41?o.ccRDC():t===42?o.ccTR():t===43?o.ccRTD():t===44?o.ccEDM():t===45?o.ccCR():t===46?o.ccENM():t===47&&o.ccEOC():o.ccTO(t-32),xs(e,t,n),this.currentChannel=a,!0}parseMidrow(e,t){let n=0;if((e===17||e===25)&&t>=32&&t<=47){if(e===17?n=1:n=2,n!==this.currentChannel)return this.logger.log(0,"Mismatch channel in midrow parsing"),!1;const i=this.channels[n];return i?(i.ccMIDROW(t),this.logger.log(3,"MIDROW ("+Bi([e,t])+")"),!0):!1}return!1}parsePAC(e,t){let n;const i=this.cmdHistory,s=(e>=17&&e<=23||e>=25&&e<=31)&&t>=64&&t<=127,a=(e===16||e===24)&&t>=64&&t<=95;if(!(s||a))return!1;if(Wg(e,t,i))return xs(null,null,i),!0;const o=e<=23?1:2;t>=64&&t<=95?n=o===1?sw[e]:ow[e]:n=o===1?aw[e]:uw[e];const u=this.channels[o];return u?(u.setPAC(this.interpretPAC(n,t)),xs(e,t,i),this.currentChannel=o,!0):!1}interpretPAC(e,t){let n;const i={color:null,italics:!1,indent:null,underline:!1,row:e};return t>95?n=t-96:n=t-64,i.underline=(n&1)===1,n<=13?i.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(n/2)]:n<=15?(i.italics=!0,i.color="white"):i.indent=Math.floor((n-16)/2)*4,i}parseChars(e,t){let n,i=null,s=null;if(e>=25?(n=2,s=e-8):(n=1,s=e),s>=17&&s<=19){let a;s===17?a=t+80:s===18?a=t+112:a=t+144,this.logger.log(2,"Special char '"+p1(a)+"' in channel "+n),i=[a]}else e>=32&&e<=127&&(i=t===0?[e]:[e,t]);if(i){const a=Bi(i);this.logger.log(3,"Char codes =  "+a.join(",")),xs(e,t,this.cmdHistory)}return i}parseBackgroundAttributes(e,t){const n=(e===16||e===24)&&t>=32&&t<=47,i=(e===23||e===31)&&t>=45&&t<=47;if(!(n||i))return!1;let s;const a={};e===16||e===24?(s=Math.floor((t-32)/2),a.background=lw[s],t%2===1&&(a.background=a.background+"_semi")):t===45?a.background="transparent":(a.foreground="black",t===47&&(a.underline=!0));const o=e<=23?1:2;return this.channels[o].setBkgData(a),xs(e,t,this.cmdHistory),!0}reset(){for(let e=0;e<Object.keys(this.channels).length;e++){const t=this.channels[e];t&&t.reset()}this.cmdHistory=Hg()}cueSplitAtTime(e){for(let t=0;t<this.channels.length;t++){const n=this.channels[t];n&&n.cueSplitAtTime(e)}}}function xs(r,e,t){t.a=r,t.b=e}function Wg(r,e,t){return t.a===r&&t.b===e}function Hg(){return{a:null,b:null}}class xu{constructor(e,t){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=e,this.trackName=t}dispatchCue(){this.startTime!==null&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)}newCue(e,t,n){(this.startTime===null||this.startTime>e)&&(this.startTime=e),this.endTime=t,this.screen=n,this.timelineController.createCaptionsTrack(this.trackName)}reset(){this.cueRanges=[],this.startTime=null}}var d0=function(){if(typeof self<"u"&&self.VTTCue)return self.VTTCue;const r=["","lr","rl"],e=["start","middle","end","left","right"];function t(o,u){if(typeof u!="string"||!Array.isArray(o))return!1;const l=u.toLowerCase();return~o.indexOf(l)?l:!1}function n(o){return t(r,o)}function i(o){return t(e,o)}function s(o,...u){let l=1;for(;l<arguments.length;l++){const c=arguments[l];for(const h in c)o[h]=c[h]}return o}function a(o,u,l){const c=this,h={enumerable:!0};c.hasBeenReset=!1;let f="",d=!1,m=o,E=u,p=l,g=null,v="",y=!0,C="auto",A="start",T=50,S="middle",F=50,k="middle";Object.defineProperty(c,"id",s({},h,{get:function(){return f},set:function(R){f=""+R}})),Object.defineProperty(c,"pauseOnExit",s({},h,{get:function(){return d},set:function(R){d=!!R}})),Object.defineProperty(c,"startTime",s({},h,{get:function(){return m},set:function(R){if(typeof R!="number")throw new TypeError("Start time must be set to a number.");m=R,this.hasBeenReset=!0}})),Object.defineProperty(c,"endTime",s({},h,{get:function(){return E},set:function(R){if(typeof R!="number")throw new TypeError("End time must be set to a number.");E=R,this.hasBeenReset=!0}})),Object.defineProperty(c,"text",s({},h,{get:function(){return p},set:function(R){p=""+R,this.hasBeenReset=!0}})),Object.defineProperty(c,"region",s({},h,{get:function(){return g},set:function(R){g=R,this.hasBeenReset=!0}})),Object.defineProperty(c,"vertical",s({},h,{get:function(){return v},set:function(R){const V=n(R);if(V===!1)throw new SyntaxError("An invalid or illegal string was specified.");v=V,this.hasBeenReset=!0}})),Object.defineProperty(c,"snapToLines",s({},h,{get:function(){return y},set:function(R){y=!!R,this.hasBeenReset=!0}})),Object.defineProperty(c,"line",s({},h,{get:function(){return C},set:function(R){if(typeof R!="number"&&R!=="auto")throw new SyntaxError("An invalid number or illegal string was specified.");C=R,this.hasBeenReset=!0}})),Object.defineProperty(c,"lineAlign",s({},h,{get:function(){return A},set:function(R){const V=i(R);if(!V)throw new SyntaxError("An invalid or illegal string was specified.");A=V,this.hasBeenReset=!0}})),Object.defineProperty(c,"position",s({},h,{get:function(){return T},set:function(R){if(R<0||R>100)throw new Error("Position must be between 0 and 100.");T=R,this.hasBeenReset=!0}})),Object.defineProperty(c,"positionAlign",s({},h,{get:function(){return S},set:function(R){const V=i(R);if(!V)throw new SyntaxError("An invalid or illegal string was specified.");S=V,this.hasBeenReset=!0}})),Object.defineProperty(c,"size",s({},h,{get:function(){return F},set:function(R){if(R<0||R>100)throw new Error("Size must be between 0 and 100.");F=R,this.hasBeenReset=!0}})),Object.defineProperty(c,"align",s({},h,{get:function(){return k},set:function(R){const V=i(R);if(!V)throw new SyntaxError("An invalid or illegal string was specified.");k=V,this.hasBeenReset=!0}})),c.displayState=void 0}return a.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},a}();class dw{decode(e,t){if(!e)return"";if(typeof e!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}function m1(r){function e(n,i,s,a){return(n|0)*3600+(i|0)*60+(s|0)+parseFloat(a||0)}const t=r.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return t?parseFloat(t[2])>59?e(t[2],t[3],0,t[4]):e(t[1],t[2],t[3],t[4]):null}class pw{constructor(){this.values=Object.create(null)}set(e,t){!this.get(e)&&t!==""&&(this.values[e]=t)}get(e,t,n){return n?this.has(e)?this.values[e]:t[n]:this.has(e)?this.values[e]:t}has(e){return e in this.values}alt(e,t,n){for(let i=0;i<n.length;++i)if(t===n[i]){this.set(e,t);break}}integer(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))}percent(e,t){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(t)){const n=parseFloat(t);if(n>=0&&n<=100)return this.set(e,n),!0}return!1}}function v1(r,e,t,n){const i=n?r.split(n):[r];for(const s in i){if(typeof i[s]!="string")continue;const a=i[s].split(t);if(a.length!==2)continue;const o=a[0],u=a[1];e(o,u)}}const jf=new d0(0,0,""),Au=jf.align==="middle"?"middle":"center";function gw(r,e,t){const n=r;function i(){const o=m1(r);if(o===null)throw new Error("Malformed timestamp: "+n);return r=r.replace(/^[^\sa-zA-Z-]+/,""),o}function s(o,u){const l=new pw;v1(o,function(f,d){let m;switch(f){case"region":for(let E=t.length-1;E>=0;E--)if(t[E].id===d){l.set(f,t[E].region);break}break;case"vertical":l.alt(f,d,["rl","lr"]);break;case"line":m=d.split(","),l.integer(f,m[0]),l.percent(f,m[0])&&l.set("snapToLines",!1),l.alt(f,m[0],["auto"]),m.length===2&&l.alt("lineAlign",m[1],["start",Au,"end"]);break;case"position":m=d.split(","),l.percent(f,m[0]),m.length===2&&l.alt("positionAlign",m[1],["start",Au,"end","line-left","line-right","auto"]);break;case"size":l.percent(f,d);break;case"align":l.alt(f,d,["start",Au,"end","left","right"]);break}},/:/,/\s/),u.region=l.get("region",null),u.vertical=l.get("vertical","");let c=l.get("line","auto");c==="auto"&&jf.line===-1&&(c=-1),u.line=c,u.lineAlign=l.get("lineAlign","start"),u.snapToLines=l.get("snapToLines",!0),u.size=l.get("size",100),u.align=l.get("align",Au);let h=l.get("position","auto");h==="auto"&&jf.position===50&&(h=u.align==="start"||u.align==="left"?0:u.align==="end"||u.align==="right"?100:50),u.position=h}function a(){r=r.replace(/^\s+/,"")}if(a(),e.startTime=i(),a(),r.slice(0,3)!=="-->")throw new Error("Malformed time stamp (time stamps must be separated by '-->'): "+n);r=r.slice(3),a(),e.endTime=i(),a(),s(r,e)}function E1(r){return r.replace(/<br(?: \/)?>/gi,`
`)}class mw{constructor(){this.state="INITIAL",this.buffer="",this.decoder=new dw,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}parse(e){const t=this;e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));function n(){let s=t.buffer,a=0;for(s=E1(s);a<s.length&&s[a]!=="\r"&&s[a]!==`
`;)++a;const o=s.slice(0,a);return s[a]==="\r"&&++a,s[a]===`
`&&++a,t.buffer=s.slice(a),o}function i(s){v1(s,function(a,o){},/:/)}try{let s="";if(t.state==="INITIAL"){if(!/\r\n|\n/.test(t.buffer))return this;s=n();const o=s.match(/^(ï»¿)?WEBVTT([ \t].*)?$/);if(!(o!=null&&o[0]))throw new Error("Malformed WebVTT signature.");t.state="HEADER"}let a=!1;for(;t.buffer;){if(!/\r\n|\n/.test(t.buffer))return this;switch(a?a=!1:s=n(),t.state){case"HEADER":/:/.test(s)?i(s):s||(t.state="ID");continue;case"NOTE":s||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(s)){t.state="NOTE";break}if(!s)continue;if(t.cue=new d0(0,0,""),t.state="CUE",s.indexOf("-->")===-1){t.cue.id=s;continue}case"CUE":if(!t.cue){t.state="BADCUE";continue}try{gw(s,t.cue,t.regionList)}catch{t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":{const o=s.indexOf("-->")!==-1;if(!s||o&&(a=!0)){t.oncue&&t.cue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}if(t.cue===null)continue;t.cue.text&&(t.cue.text+=`
`),t.cue.text+=s}continue;case"BADCUE":s||(t.state="ID")}}}catch{t.state==="CUETEXT"&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state=t.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this}flush(){const e=this;try{if((e.cue||e.state==="HEADER")&&(e.buffer+=`

`,e.parse()),e.state==="INITIAL"||e.state==="BADWEBVTT")throw new Error("Malformed WebVTT signature.")}catch(t){e.onparsingerror&&e.onparsingerror(t)}return e.onflush&&e.onflush(),this}}const vw=/\r\n|\n\r|\n|\r/g,yh=function(e,t,n=0){return e.slice(n,n+t.length)===t},Ew=function(e){let t=parseInt(e.slice(-3));const n=parseInt(e.slice(-6,-4)),i=parseInt(e.slice(-9,-7)),s=e.length>9?parseInt(e.substring(0,e.indexOf(":"))):0;if(!De(t)||!De(n)||!De(i)||!De(s))throw Error(`Malformed X-TIMESTAMP-MAP: Local:${e}`);return t+=1e3*n,t+=60*1e3*i,t+=60*60*1e3*s,t},xh=function(e){let t=5381,n=e.length;for(;n;)t=t*33^e.charCodeAt(--n);return(t>>>0).toString()};function p0(r,e,t){return xh(r.toString())+xh(e.toString())+xh(t)}const yw=function(e,t,n){let i=e[t],s=e[i.prevCC];if(!s||!s.new&&i.new){e.ccOffset=e.presentationOffset=i.start,i.new=!1;return}for(;(a=s)!=null&&a.new;){var a;e.ccOffset+=i.start-s.start,i.new=!1,i=s,s=e[i.prevCC]}e.presentationOffset=n};function xw(r,e,t,n,i,s,a){const o=new mw,u=Fn(new Uint8Array(r)).trim().replace(vw,`
`).split(`
`),l=[],c=LD(e.baseTime,e.timescale);let h="00:00.000",f=0,d=0,m,E=!0;o.oncue=function(p){const g=t[n];let v=t.ccOffset;const y=(f-c)/9e4;g!=null&&g.new&&(d!==void 0?v=t.ccOffset=g.start:yw(t,n,y)),y&&(v=y-t.presentationOffset);const C=p.endTime-p.startTime,A=Vr((p.startTime+v-d)*9e4,i*9e4)/9e4;p.startTime=Math.max(A,0),p.endTime=Math.max(A+C,0);const T=p.text.trim();p.text=decodeURIComponent(encodeURIComponent(T)),p.id||(p.id=p0(p.startTime,p.endTime,T)),p.endTime>0&&l.push(p)},o.onparsingerror=function(p){m=p},o.onflush=function(){if(m){a(m);return}s(l)},u.forEach(p=>{if(E)if(yh(p,"X-TIMESTAMP-MAP=")){E=!1,p.slice(16).split(",").forEach(g=>{yh(g,"LOCAL:")?h=g.slice(6):yh(g,"MPEGTS:")&&(f=parseInt(g.slice(7)))});try{d=Ew(h)/1e3}catch(g){m=g}return}else p===""&&(E=!1);o.parse(p+`
`)}),o.flush()}const Ah="stpp.ttml.im1t",y1=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,x1=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,Aw={left:"start",center:"center",right:"end",start:"start",end:"end"};function jg(r,e,t,n){const i=$e(new Uint8Array(r),["mdat"]);if(i.length===0){n(new Error("Could not parse IMSC1 mdat"));return}const s=i.map(o=>Fn(o)),a=RD(e.baseTime,1,e.timescale);try{s.forEach(o=>t(Cw(o,a)))}catch(o){n(o)}}function Cw(r,e){const i=new DOMParser().parseFromString(r,"text/xml").getElementsByTagName("tt")[0];if(!i)throw new Error("Invalid ttml");const s={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},a=Object.keys(s).reduce((h,f)=>(h[f]=i.getAttribute(`ttp:${f}`)||s[f],h),{}),o=i.getAttribute("xml:space")!=="preserve",u=Kg(Ch(i,"styling","style")),l=Kg(Ch(i,"layout","region")),c=Ch(i,"body","[begin]");return[].map.call(c,h=>{const f=A1(h,o);if(!f||!h.hasAttribute("begin"))return null;const d=Sh(h.getAttribute("begin"),a),m=Sh(h.getAttribute("dur"),a);let E=Sh(h.getAttribute("end"),a);if(d===null)throw qg(h);if(E===null){if(m===null)throw qg(h);E=d+m}const p=new d0(d-e,E-e,f);p.id=p0(p.startTime,p.endTime,p.text);const g=l[h.getAttribute("region")],v=u[h.getAttribute("style")],y=Tw(g,v,u),{textAlign:C}=y;if(C){const A=Aw[C];A&&(p.lineAlign=A),p.align=C}return Ft(p,y),p}).filter(h=>h!==null)}function Ch(r,e,t){const n=r.getElementsByTagName(e)[0];return n?[].slice.call(n.querySelectorAll(t)):[]}function Kg(r){return r.reduce((e,t)=>{const n=t.getAttribute("xml:id");return n&&(e[n]=t),e},{})}function A1(r,e){return[].slice.call(r.childNodes).reduce((t,n,i)=>{var s;return n.nodeName==="br"&&i?t+`
`:(s=n.childNodes)!=null&&s.length?A1(n,e):e?t+n.textContent.trim().replace(/\s+/g," "):t+n.textContent},"")}function Tw(r,e,t){const n="http://www.w3.org/ns/ttml#styling";let i=null;const s=["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"],a=r!=null&&r.hasAttribute("style")?r.getAttribute("style"):null;return a&&t.hasOwnProperty(a)&&(i=t[a]),s.reduce((o,u)=>{const l=Th(e,n,u)||Th(r,n,u)||Th(i,n,u);return l&&(o[u]=l),o},{})}function Th(r,e,t){return r&&r.hasAttributeNS(e,t)?r.getAttributeNS(e,t):null}function qg(r){return new Error(`Could not parse ttml timestamp ${r}`)}function Sh(r,e){if(!r)return null;let t=m1(r);return t===null&&(y1.test(r)?t=Sw(r,e):x1.test(r)&&(t=Dw(r,e))),t}function Sw(r,e){const t=y1.exec(r),n=(t[4]|0)+(t[5]|0)/e.subFrameRate;return(t[1]|0)*3600+(t[2]|0)*60+(t[3]|0)+n/e.frameRate}function Dw(r,e){const t=x1.exec(r),n=Number(t[1]);switch(t[2]){case"h":return n*3600;case"m":return n*60;case"ms":return n*1e3;case"f":return n/e.frameRate;case"t":return n/e.tickRate}return n}class ww{constructor(e){if(this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=Yg(),this.captionsProperties=void 0,this.hls=e,this.config=e.config,this.Cues=e.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},this.config.enableCEA708Captions){const t=new xu(this,"textTrack1"),n=new xu(this,"textTrack2"),i=new xu(this,"textTrack3"),s=new xu(this,"textTrack4");this.cea608Parser1=new Gg(1,t,n),this.cea608Parser2=new Gg(3,i,s)}e.on(D.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(D.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(D.MANIFEST_LOADING,this.onManifestLoading,this),e.on(D.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(D.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(D.FRAG_LOADING,this.onFragLoading,this),e.on(D.FRAG_LOADED,this.onFragLoaded,this),e.on(D.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.on(D.FRAG_DECRYPTED,this.onFragDecrypted,this),e.on(D.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(D.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.on(D.BUFFER_FLUSHING,this.onBufferFlushing,this)}destroy(){const{hls:e}=this;e.off(D.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(D.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(D.MANIFEST_LOADING,this.onManifestLoading,this),e.off(D.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(D.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(D.FRAG_LOADING,this.onFragLoading,this),e.off(D.FRAG_LOADED,this.onFragLoaded,this),e.off(D.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.off(D.FRAG_DECRYPTED,this.onFragDecrypted,this),e.off(D.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(D.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.off(D.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=this.cea608Parser1=this.cea608Parser2=null}addCues(e,t,n,i,s){let a=!1;for(let o=s.length;o--;){const u=s[o],l=Fw(u[0],u[1],t,n);if(l>=0&&(u[0]=Math.min(u[0],t),u[1]=Math.max(u[1],n),a=!0,l/(n-t)>.5))return}if(a||s.push([t,n]),this.config.renderTextTracksNatively){const o=this.captionsTracks[e];this.Cues.newCue(o,t,n,i)}else{const o=this.Cues.newCue(null,t,n,i);this.hls.trigger(D.CUES_PARSED,{type:"captions",cues:o,track:e})}}onInitPtsFound(e,{frag:t,id:n,initPTS:i,timescale:s}){const{unparsedVttFrags:a}=this;n==="main"&&(this.initPTS[t.cc]={baseTime:i,timescale:s}),a.length&&(this.unparsedVttFrags=[],a.forEach(o=>{this.onFragLoaded(D.FRAG_LOADED,o)}))}getExistingTrack(e){const{media:t}=this;if(t)for(let n=0;n<t.textTracks.length;n++){const i=t.textTracks[n];if(i[e])return i}return null}createCaptionsTrack(e){this.config.renderTextTracksNatively?this.createNativeTrack(e):this.createNonNativeTrack(e)}createNativeTrack(e){if(this.captionsTracks[e])return;const{captionsProperties:t,captionsTracks:n,media:i}=this,{label:s,languageCode:a}=t[e],o=this.getExistingTrack(e);if(o)n[e]=o,Vs(n[e]),Gy(n[e],i);else{const u=this.createTextTrack("captions",s,a);u&&(u[e]=!0,n[e]=u)}}createNonNativeTrack(e){if(this.nonNativeCaptionsTracks[e])return;const t=this.captionsProperties[e];if(!t)return;const n=t.label,i={_id:e,label:n,kind:"captions",default:t.media?!!t.media.default:!1,closedCaptions:t.media};this.nonNativeCaptionsTracks[e]=i,this.hls.trigger(D.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[i]})}createTextTrack(e,t,n){const i=this.media;if(!!i)return i.addTextTrack(e,t,n)}onMediaAttaching(e,t){this.media=t.media,this._cleanTracks()}onMediaDetaching(){const{captionsTracks:e}=this;Object.keys(e).forEach(t=>{Vs(e[t]),delete e[t]}),this.nonNativeCaptionsTracks={}}onManifestLoading(){this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=Yg(),this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())}_cleanTracks(){const{media:e}=this;if(!e)return;const t=e.textTracks;if(t)for(let n=0;n<t.length;n++)Vs(t[n])}onSubtitleTracksUpdated(e,t){const n=t.subtitleTracks||[],i=n.some(s=>s.textCodec===Ah);if(this.config.enableWebVTT||i&&this.config.enableIMSC1){if(d1(this.tracks,n)){this.tracks=n;return}if(this.textTracks=[],this.tracks=n,this.config.renderTextTracksNatively){const a=this.media?this.media.textTracks:null;this.tracks.forEach((o,u)=>{let l;if(a&&u<a.length){let c=null;for(let h=0;h<a.length;h++)if(_w(a[h],o)){c=a[h];break}c&&(l=c)}if(l)Vs(l);else{const c=this._captionsOrSubtitlesFromCharacteristics(o);l=this.createTextTrack(c,o.name,o.lang),l&&(l.mode="disabled")}l&&(l.groupId=o.groupId,this.textTracks.push(l))})}else if(this.tracks.length){const a=this.tracks.map(o=>({label:o.name,kind:o.type.toLowerCase(),default:o.default,subtitleTrack:o}));this.hls.trigger(D.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:a})}}}_captionsOrSubtitlesFromCharacteristics(e){if(e.attrs.CHARACTERISTICS){const t=/transcribes-spoken-dialog/gi.test(e.attrs.CHARACTERISTICS),n=/describes-music-and-sound/gi.test(e.attrs.CHARACTERISTICS);if(t&&n)return"captions"}return"subtitles"}onManifestLoaded(e,t){this.config.enableCEA708Captions&&t.captions&&t.captions.forEach(n=>{const i=/(?:CC|SERVICE)([1-4])/.exec(n.instreamId);if(!i)return;const s=`textTrack${i[1]}`,a=this.captionsProperties[s];!a||(a.label=n.name,n.lang&&(a.languageCode=n.lang),a.media=n)})}closedCaptionsForLevel(e){const t=this.hls.levels[e.level];return t==null?void 0:t.attrs["CLOSED-CAPTIONS"]}onFragLoading(e,t){const{cea608Parser1:n,cea608Parser2:i,lastSn:s,lastPartIndex:a}=this;if(!(!this.enabled||!(n&&i))&&t.frag.type===Fe.MAIN){var o,u;const l=t.frag.sn,c=(o=t==null||(u=t.part)==null?void 0:u.index)!=null?o:-1;l===s+1||l===s&&c===a+1||(n.reset(),i.reset()),this.lastSn=l,this.lastPartIndex=c}}onFragLoaded(e,t){const{frag:n,payload:i}=t,{initPTS:s,unparsedVttFrags:a}=this;if(n.type===Fe.SUBTITLE)if(i.byteLength){if(!s[n.cc]){a.push(t),s.length&&this.hls.trigger(D.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:n,error:new Error("Missing initial subtitle PTS")});return}const o=n.decryptdata,u="stats"in t;if(o==null||!o.encrypted||u){const l=this.tracks[n.level],c=this.vttCCs;c[n.cc]||(c[n.cc]={start:n.start,prevCC:this.prevCC,new:!0},this.prevCC=n.cc),l&&l.textCodec===Ah?this._parseIMSC1(n,i):this._parseVTTs(n,i,c)}}else this.hls.trigger(D.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:n,error:new Error("Empty subtitle payload")})}_parseIMSC1(e,t){const n=this.hls;jg(t,this.initPTS[e.cc],i=>{this._appendCues(i,e.level),n.trigger(D.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})},i=>{G.log(`Failed to parse IMSC1: ${i}`),n.trigger(D.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e,error:i})})}_parseVTTs(e,t,n){var i;const s=this.hls,a=(i=e.initSegment)!=null&&i.data?ts(e.initSegment.data,new Uint8Array(t)):t;xw(a,this.initPTS[e.cc],n,e.cc,e.start,o=>{this._appendCues(o,e.level),s.trigger(D.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})},o=>{this._fallbackToIMSC1(e,t),G.log(`Failed to parse VTT cue: ${o}`),s.trigger(D.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e,error:o})})}_fallbackToIMSC1(e,t){const n=this.tracks[e.level];n.textCodec||jg(t,this.initPTS[e.cc],()=>{n.textCodec=Ah,this._parseIMSC1(e,t)},()=>{n.textCodec="wvtt"})}_appendCues(e,t){const n=this.hls;if(this.config.renderTextTracksNatively){const i=this.textTracks[t];if(!i||i.mode==="disabled")return;e.forEach(s=>Wy(i,s))}else{const i=this.tracks[t];if(!i)return;const s=i.default?"default":"subtitles"+t;n.trigger(D.CUES_PARSED,{type:"subtitles",cues:e,track:s})}}onFragDecrypted(e,t){const{frag:n}=t;if(n.type===Fe.SUBTITLE){if(!this.initPTS[n.cc]){this.unparsedVttFrags.push(t);return}this.onFragLoaded(D.FRAG_LOADED,t)}}onSubtitleTracksCleared(){this.tracks=[],this.captionsTracks={}}onFragParsingUserdata(e,t){const{cea608Parser1:n,cea608Parser2:i}=this;if(!this.enabled||!(n&&i))return;const{frag:s,samples:a}=t;if(!(s.type===Fe.MAIN&&this.closedCaptionsForLevel(s)==="NONE"))for(let o=0;o<a.length;o++){const u=a[o].bytes;if(u){const l=this.extractCea608Data(u);n.addData(a[o].pts,l[0]),i.addData(a[o].pts,l[1])}}}onBufferFlushing(e,{startOffset:t,endOffset:n,endOffsetSubtitles:i,type:s}){const{media:a}=this;if(!(!a||a.currentTime<n)){if(!s||s==="video"){const{captionsTracks:o}=this;Object.keys(o).forEach(u=>$f(o[u],t,n))}if(this.config.renderTextTracksNatively&&t===0&&i!==void 0){const{textTracks:o}=this;Object.keys(o).forEach(u=>$f(o[u],t,i))}}}extractCea608Data(e){const t=[[],[]],n=e[0]&31;let i=2;for(let s=0;s<n;s++){const a=e[i++],o=127&e[i++],u=127&e[i++];if(o===0&&u===0)continue;if((4&a)!==0){const c=3&a;(c===0||c===1)&&(t[c].push(o),t[c].push(u))}}return t}}function _w(r,e){return!!r&&r.label===e.name&&!(r.textTrack1||r.textTrack2)}function Fw(r,e,t,n){return Math.min(e,n)-Math.max(r,t)}function Yg(){return{ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}}}class g0{constructor(e){this.hls=void 0,this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.clientRect=void 0,this.streamController=void 0,this.hls=e,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}setStreamController(e){this.streamController=e}destroy(){this.unregisterListener(),this.hls.config.capLevelToPlayerSize&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null}registerListeners(){const{hls:e}=this;e.on(D.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.on(D.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(D.MANIFEST_PARSED,this.onManifestParsed,this),e.on(D.BUFFER_CODECS,this.onBufferCodecs,this),e.on(D.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListener(){const{hls:e}=this;e.off(D.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.off(D.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(D.MANIFEST_PARSED,this.onManifestParsed,this),e.off(D.BUFFER_CODECS,this.onBufferCodecs,this),e.off(D.MEDIA_DETACHING,this.onMediaDetaching,this)}onFpsDropLevelCapping(e,t){const n=this.hls.levels[t.droppedLevel];this.isLevelAllowed(n)&&this.restrictedLevels.push({bitrate:n.bitrate,height:n.height,width:n.width})}onMediaAttaching(e,t){this.media=t.media instanceof HTMLVideoElement?t.media:null,this.clientRect=null}onManifestParsed(e,t){const n=this.hls;this.restrictedLevels=[],this.firstLevel=t.firstLevel,n.config.capLevelToPlayerSize&&t.video&&this.startCapping()}onBufferCodecs(e,t){this.hls.config.capLevelToPlayerSize&&t.video&&this.startCapping()}onMediaDetaching(){this.stopCapping()}detectPlayerSize(){if(this.media&&this.mediaHeight>0&&this.mediaWidth>0){const e=this.hls.levels;if(e.length){const t=this.hls;t.autoLevelCapping=this.getMaxLevel(e.length-1),t.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}}getMaxLevel(e){const t=this.hls.levels;if(!t.length)return-1;const n=t.filter((i,s)=>this.isLevelAllowed(i)&&s<=e);return this.clientRect=null,g0.getMaxLevelByMediaSize(n,this.mediaWidth,this.mediaHeight)}startCapping(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())}stopCapping(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)}getDimensions(){if(this.clientRect)return this.clientRect;const e=this.media,t={width:0,height:0};if(e){const n=e.getBoundingClientRect();t.width=n.width,t.height=n.height,!t.width&&!t.height&&(t.width=n.right-n.left||e.width||0,t.height=n.bottom-n.top||e.height||0)}return this.clientRect=t,t}get mediaWidth(){return this.getDimensions().width*this.contentScaleFactor}get mediaHeight(){return this.getDimensions().height*this.contentScaleFactor}get contentScaleFactor(){let e=1;if(!this.hls.config.ignoreDevicePixelRatio)try{e=self.devicePixelRatio}catch{}return e}isLevelAllowed(e){return!this.restrictedLevels.some(n=>e.bitrate===n.bitrate&&e.width===n.width&&e.height===n.height)}static getMaxLevelByMediaSize(e,t,n){if(!(e!=null&&e.length))return-1;const i=(a,o)=>o?a.width!==o.width||a.height!==o.height:!0;let s=e.length-1;for(let a=0;a<e.length;a+=1){const o=e[a];if((o.width>=t||o.height>=n)&&i(o,e[a+1])){s=a;break}}return s}}class bw{constructor(e){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=e,this.registerListeners()}setStreamController(e){this.streamController=e}registerListeners(){this.hls.on(D.MEDIA_ATTACHING,this.onMediaAttaching,this)}unregisterListeners(){this.hls.off(D.MEDIA_ATTACHING,this.onMediaAttaching,this)}destroy(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null}onMediaAttaching(e,t){const n=this.hls.config;if(n.capLevelOnFPSDrop){const i=t.media instanceof self.HTMLVideoElement?t.media:null;this.media=i,i&&typeof i.getVideoPlaybackQuality=="function"&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),n.fpsDroppedMonitoringPeriod)}}checkFPS(e,t,n){const i=performance.now();if(t){if(this.lastTime){const s=i-this.lastTime,a=n-this.lastDroppedFrames,o=t-this.lastDecodedFrames,u=1e3*a/s,l=this.hls;if(l.trigger(D.FPS_DROP,{currentDropped:a,currentDecoded:o,totalDroppedFrames:n}),u>0&&a>l.config.fpsDroppedMonitoringThreshold*o){let c=l.currentLevel;G.warn("drop FPS ratio greater than max allowed value for currentLevel: "+c),c>0&&(l.autoLevelCapping===-1||l.autoLevelCapping>=c)&&(c=c-1,l.trigger(D.FPS_DROP_LEVEL_CAPPING,{level:c,droppedLevel:l.currentLevel}),l.autoLevelCapping=c,this.streamController.nextLevelSwitch())}}this.lastTime=i,this.lastDroppedFrames=n,this.lastDecodedFrames=t}}checkFPSInterval(){const e=this.media;if(e)if(this.isVideoPlaybackQualityAvailable){const t=e.getVideoPlaybackQuality();this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)}}const Cu="[eme]";class Zs{constructor(e){this.hls=void 0,this.config=void 0,this.media=null,this.keyFormatPromise=null,this.keySystemAccessPromises={},this._requestLicenseFailureCount=0,this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},this.setMediaKeysQueue=Zs.CDMCleanupPromise?[Zs.CDMCleanupPromise]:[],this.onMediaEncrypted=this._onMediaEncrypted.bind(this),this.onWaitingForKey=this._onWaitingForKey.bind(this),this.debug=G.debug.bind(G,Cu),this.log=G.log.bind(G,Cu),this.warn=G.warn.bind(G,Cu),this.error=G.error.bind(G,Cu),this.hls=e,this.config=e.config,this.registerListeners()}destroy(){this.unregisterListeners(),this.onMediaDetached();const e=this.config;e.requestMediaKeySystemAccessFunc=null,e.licenseXhrSetup=e.licenseResponseCallback=void 0,e.drmSystems=e.drmSystemOptions={},this.hls=this.onMediaEncrypted=this.onWaitingForKey=this.keyIdToKeySessionPromise=null,this.config=null}registerListeners(){this.hls.on(D.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(D.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(D.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(D.MANIFEST_LOADED,this.onManifestLoaded,this)}unregisterListeners(){this.hls.off(D.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(D.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(D.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(D.MANIFEST_LOADED,this.onManifestLoaded,this)}getLicenseServerUrl(e){const{drmSystems:t,widevineLicenseUrl:n}=this.config,i=t[e];if(i)return i.licenseUrl;if(e===lt.WIDEVINE&&n)return n;throw new Error(`no license server URL configured for key-system "${e}"`)}getServerCertificateUrl(e){const{drmSystems:t}=this.config,n=t[e];if(n)return n.serverCertificateUrl;this.log(`No Server Certificate in config.drmSystems["${e}"]`)}attemptKeySystemAccess(e){const t=this.hls.levels,n=(a,o,u)=>!!a&&u.indexOf(a)===o,i=t.map(a=>a.audioCodec).filter(n),s=t.map(a=>a.videoCodec).filter(n);return i.length+s.length===0&&s.push("avc1.42e01e"),new Promise((a,o)=>{const u=l=>{const c=l.shift();this.getMediaKeysPromise(c,i,s).then(h=>a({keySystem:c,mediaKeys:h})).catch(h=>{l.length?u(l):h instanceof Pr?o(h):o(new Pr({type:_e.KEY_SYSTEM_ERROR,details:J.KEY_SYSTEM_NO_ACCESS,error:h,fatal:!0},h.message))})};u(e)})}requestMediaKeySystemAccess(e,t){const{requestMediaKeySystemAccessFunc:n}=this.config;if(typeof n!="function"){let i=`Configured requestMediaKeySystemAccess is not a function ${n}`;return Ly===null&&self.location.protocol==="http:"&&(i=`navigator.requestMediaKeySystemAccess is not available over insecure protocol ${location.protocol}`),Promise.reject(new Error(i))}return n(e,t)}getMediaKeysPromise(e,t,n){const i=GT(e,t,n,this.config.drmSystemOptions),s=this.keySystemAccessPromises[e];let a=s==null?void 0:s.keySystemAccess;if(!a){this.log(`Requesting encrypted media "${e}" key-system access with config: ${JSON.stringify(i)}`),a=this.requestMediaKeySystemAccess(e,i);const o=this.keySystemAccessPromises[e]={keySystemAccess:a};return a.catch(u=>{this.log(`Failed to obtain access to key-system "${e}": ${u}`)}),a.then(u=>{this.log(`Access for key-system "${u.keySystem}" obtained`);const l=this.fetchServerCertificate(e);return this.log(`Create media-keys for "${e}"`),o.mediaKeys=u.createMediaKeys().then(c=>(this.log(`Media-keys created for "${e}"`),l.then(h=>h?this.setMediaKeysServerCertificate(c,e,h):c))),o.mediaKeys.catch(c=>{this.error(`Failed to create media-keys for "${e}"}: ${c}`)}),o.mediaKeys})}return a.then(()=>s.mediaKeys)}createMediaKeySessionContext({decryptdata:e,keySystem:t,mediaKeys:n}){this.log(`Creating key-system session "${t}" keyId: ${Cn.hexDump(e.keyId||[])}`);const i=n.createSession(),s={decryptdata:e,keySystem:t,mediaKeys:n,mediaKeysSession:i,keyStatus:"status-pending"};return this.mediaKeySessions.push(s),s}renewKeySession(e){const t=e.decryptdata;if(t.pssh){const n=this.createMediaKeySessionContext(e),i=this.getKeyIdString(t),s="cenc";this.keyIdToKeySessionPromise[i]=this.generateRequestWithPreferredKeySession(n,s,t.pssh,"expired")}else this.warn("Could not renew expired session. Missing pssh initData.");this.removeSession(e)}getKeyIdString(e){if(!e)throw new Error("Could not read keyId of undefined decryptdata");if(e.keyId===null)throw new Error("keyId is null");return Cn.hexDump(e.keyId)}updateKeySession(e,t){var n;const i=e.mediaKeysSession;return this.log(`Updating key-session "${i.sessionId}" for keyID ${Cn.hexDump(((n=e.decryptdata)==null?void 0:n.keyId)||[])}
      } (data length: ${t&&t.byteLength})`),i.update(t)}selectKeySystemFormat(e){const t=Object.keys(e.levelkeys||{});return this.keyFormatPromise||(this.log(`Selecting key-system from fragment (sn: ${e.sn} ${e.type}: ${e.level}) key formats ${t.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(t)),this.keyFormatPromise}getKeyFormatPromise(e){return new Promise((t,n)=>{const i=rh(this.config),s=e.map(ag).filter(a=>!!a&&i.indexOf(a)!==-1);return this.getKeySystemSelectionPromise(s).then(({keySystem:a})=>{const o=og(a);o?t(o):n(new Error(`Unable to find format for key-system "${a}"`))}).catch(n)})}loadKey(e){const t=e.keyInfo.decryptdata,n=this.getKeyIdString(t),i=`(keyId: ${n} format: "${t.keyFormat}" method: ${t.method} uri: ${t.uri})`;this.log(`Starting session for key ${i}`);let s=this.keyIdToKeySessionPromise[n];return s||(s=this.keyIdToKeySessionPromise[n]=this.getKeySystemForKeyPromise(t).then(({keySystem:a,mediaKeys:o})=>(this.throwIfDestroyed(),this.log(`Handle encrypted media sn: ${e.frag.sn} ${e.frag.type}: ${e.frag.level} using key ${i}`),this.attemptSetMediaKeys(a,o).then(()=>{this.throwIfDestroyed();const u=this.createMediaKeySessionContext({keySystem:a,mediaKeys:o,decryptdata:t}),l="cenc";return this.generateRequestWithPreferredKeySession(u,l,t.pssh,"playlist-key")}))),s.catch(a=>this.handleError(a))),s}throwIfDestroyed(e="Invalid state"){if(!this.hls)throw new Error("invalid state")}handleError(e){!this.hls||(this.error(e.message),e instanceof Pr?this.hls.trigger(D.ERROR,e.data):this.hls.trigger(D.ERROR,{type:_e.KEY_SYSTEM_ERROR,details:J.KEY_SYSTEM_NO_KEYS,error:e,fatal:!0}))}getKeySystemForKeyPromise(e){const t=this.getKeyIdString(e),n=this.keyIdToKeySessionPromise[t];if(!n){const i=ag(e.keyFormat),s=i?[i]:rh(this.config);return this.attemptKeySystemAccess(s)}return n}getKeySystemSelectionPromise(e){if(e.length||(e=rh(this.config)),e.length===0)throw new Pr({type:_e.KEY_SYSTEM_ERROR,details:J.KEY_SYSTEM_NO_CONFIGURED_LICENSE,fatal:!0},`Missing key-system license configuration options ${JSON.stringify({drmSystems:this.config.drmSystems})}`);return this.attemptKeySystemAccess(e)}_onMediaEncrypted(e){const{initDataType:t,initData:n}=e;if(this.debug(`"${e.type}" event: init data type: "${t}"`),n===null)return;let i,s;if(t==="sinf"&&this.config.drmSystems[lt.FAIRPLAY]){const c=Mt(new Uint8Array(n));try{const h=t0(JSON.parse(c).sinf),f=Uy(new Uint8Array(h));if(!f)return;i=f.subarray(8,24),s=lt.FAIRPLAY}catch{this.warn('Failed to parse sinf "encrypted" event message initData');return}}else{const c=dS(n);if(c===null)return;c.version===0&&c.systemId===Ry.WIDEVINE&&c.data&&(i=c.data.subarray(8,24)),s=VT(c.systemId)}if(!s||!i)return;const a=Cn.hexDump(i),{keyIdToKeySessionPromise:o,mediaKeySessions:u}=this;let l=o[a];for(let c=0;c<u.length;c++){const h=u[c],f=h.decryptdata;if(f.pssh||!f.keyId)continue;const d=Cn.hexDump(f.keyId);if(a===d||f.uri.replace(/-/g,"").indexOf(a)!==-1){l=o[d],delete o[d],f.pssh=new Uint8Array(n),f.keyId=i,l=o[a]=l.then(()=>this.generateRequestWithPreferredKeySession(h,t,n,"encrypted-event-key-match"));break}}l||(l=o[a]=this.getKeySystemSelectionPromise([s]).then(({keySystem:c,mediaKeys:h})=>{var f;this.throwIfDestroyed();const d=new Eo("ISO-23001-7",a,(f=og(c))!=null?f:"");return d.pssh=new Uint8Array(n),d.keyId=i,this.attemptSetMediaKeys(c,h).then(()=>{this.throwIfDestroyed();const m=this.createMediaKeySessionContext({decryptdata:d,keySystem:c,mediaKeys:h});return this.generateRequestWithPreferredKeySession(m,t,n,"encrypted-event-no-match")})})),l.catch(c=>this.handleError(c))}_onWaitingForKey(e){this.log(`"${e.type}" event`)}attemptSetMediaKeys(e,t){const n=this.setMediaKeysQueue.slice();this.log(`Setting media-keys for "${e}"`);const i=Promise.all(n).then(()=>{if(!this.media)throw new Error("Attempted to set mediaKeys without media element attached");return this.media.setMediaKeys(t)});return this.setMediaKeysQueue.push(i),i.then(()=>{this.log(`Media-keys set for "${e}"`),n.push(i),this.setMediaKeysQueue=this.setMediaKeysQueue.filter(s=>n.indexOf(s)===-1)})}generateRequestWithPreferredKeySession(e,t,n,i){var s,a;const o=(s=this.config.drmSystems)==null||(a=s[e.keySystem])==null?void 0:a.generateRequest;if(o)try{const f=o.call(this.hls,t,n,e);if(!f)throw new Error("Invalid response from configured generateRequest filter");t=f.initDataType,n=e.decryptdata.pssh=f.initData?new Uint8Array(f.initData):null}catch(f){var u;if(this.warn(f.message),(u=this.hls)!=null&&u.config.debug)throw f}if(n===null)return this.log(`Skipping key-session request for "${i}" (no initData)`),Promise.resolve(e);const l=this.getKeyIdString(e.decryptdata);this.log(`Generating key-session request for "${i}": ${l} (init data type: ${t} length: ${n?n.byteLength:null})`);const c=new f0;e.mediaKeysSession.onmessage=f=>{const d=e.mediaKeysSession;if(!d){c.emit("error",new Error("invalid state"));return}const{messageType:m,message:E}=f;this.log(`"${m}" message event for session "${d.sessionId}" message size: ${E.byteLength}`),m==="license-request"||m==="license-renewal"?this.renewLicense(e,E).catch(p=>{this.handleError(p),c.emit("error",p)}):m==="license-release"?e.keySystem===lt.FAIRPLAY&&(this.updateKeySession(e,by("acknowledged")),this.removeSession(e)):this.warn(`unhandled media key message type "${m}"`)},e.mediaKeysSession.onkeystatuseschange=f=>{if(!e.mediaKeysSession){c.emit("error",new Error("invalid state"));return}this.onKeyStatusChange(e);const m=e.keyStatus;c.emit("keyStatus",m),m==="expired"&&(this.warn(`${e.keySystem} expired for key ${l}`),this.renewKeySession(e))};const h=new Promise((f,d)=>{c.on("error",d),c.on("keyStatus",m=>{m.startsWith("usable")?f():m==="output-restricted"?d(new Pr({type:_e.KEY_SYSTEM_ERROR,details:J.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED,fatal:!1},"HDCP level output restricted")):m==="internal-error"?d(new Pr({type:_e.KEY_SYSTEM_ERROR,details:J.KEY_SYSTEM_STATUS_INTERNAL_ERROR,fatal:!0},`key status changed to "${m}"`)):m==="expired"?d(new Error("key expired while generating request")):this.warn(`unhandled key status change "${m}"`)})});return e.mediaKeysSession.generateRequest(t,n).then(()=>{var f;this.log(`Request generated for key-session "${(f=e.mediaKeysSession)==null?void 0:f.sessionId}" keyId: ${l}`)}).catch(f=>{throw new Pr({type:_e.KEY_SYSTEM_ERROR,details:J.KEY_SYSTEM_NO_SESSION,error:f,fatal:!1},`Error generating key-session request: ${f}`)}).then(()=>h).catch(f=>{throw c.removeAllListeners(),this.removeSession(e),f}).then(()=>(c.removeAllListeners(),e))}onKeyStatusChange(e){e.mediaKeysSession.keyStatuses.forEach((t,n)=>{this.log(`key status change "${t}" for keyStatuses keyId: ${Cn.hexDump("buffer"in n?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):new Uint8Array(n))} session keyId: ${Cn.hexDump(new Uint8Array(e.decryptdata.keyId||[]))} uri: ${e.decryptdata.uri}`),e.keyStatus=t})}fetchServerCertificate(e){const t=this.config,n=t.loader,i=new n(t),s=this.getServerCertificateUrl(e);return s?(this.log(`Fetching serverCertificate for "${e}"`),new Promise((a,o)=>{const u={responseType:"arraybuffer",url:s},l=t.certLoadPolicy.default,c={loadPolicy:l,timeout:l.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},h={onSuccess:(f,d,m,E)=>{a(f.data)},onError:(f,d,m,E)=>{o(new Pr({type:_e.KEY_SYSTEM_ERROR,details:J.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:m,response:Cr({url:u.url,data:void 0},f)},`"${e}" certificate request failed (${s}). Status: ${f.code} (${f.text})`))},onTimeout:(f,d,m)=>{o(new Pr({type:_e.KEY_SYSTEM_ERROR,details:J.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:m,response:{url:u.url,data:void 0}},`"${e}" certificate request timed out (${s})`))},onAbort:(f,d,m)=>{o(new Error("aborted"))}};i.load(u,c,h)})):Promise.resolve()}setMediaKeysServerCertificate(e,t,n){return new Promise((i,s)=>{e.setServerCertificate(n).then(a=>{this.log(`setServerCertificate ${a?"success":"not supported by CDM"} (${n==null?void 0:n.byteLength}) on "${t}"`),i(e)}).catch(a=>{s(new Pr({type:_e.KEY_SYSTEM_ERROR,details:J.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED,error:a,fatal:!0},a.message))})})}renewLicense(e,t){return this.requestLicense(e,new Uint8Array(t)).then(n=>this.updateKeySession(e,new Uint8Array(n)).catch(i=>{throw new Pr({type:_e.KEY_SYSTEM_ERROR,details:J.KEY_SYSTEM_SESSION_UPDATE_FAILED,error:i,fatal:!0},i.message)}))}setupLicenseXHR(e,t,n,i){const s=this.config.licenseXhrSetup;return s?Promise.resolve().then(()=>{if(!n.decryptdata)throw new Error("Key removed");return s.call(this.hls,e,t,n,i)}).catch(a=>{if(!n.decryptdata)throw a;return e.open("POST",t,!0),s.call(this.hls,e,t,n,i)}).then(a=>(e.readyState||e.open("POST",t,!0),{xhr:e,licenseChallenge:a||i})):(e.open("POST",t,!0),Promise.resolve({xhr:e,licenseChallenge:i}))}requestLicense(e,t){const n=this.config.keyLoadPolicy.default;return new Promise((i,s)=>{const a=this.getLicenseServerUrl(e.keySystem);this.log(`Sending license request to URL: ${a}`);const o=new XMLHttpRequest;o.responseType="arraybuffer",o.onreadystatechange=()=>{if(!this.hls||!e.mediaKeysSession)return s(new Error("invalid state"));if(o.readyState===4)if(o.status===200){this._requestLicenseFailureCount=0;let u=o.response;this.log(`License received ${u instanceof ArrayBuffer?u.byteLength:u}`);const l=this.config.licenseResponseCallback;if(l)try{u=l.call(this.hls,o,a,e)}catch(c){this.error(c)}i(u)}else{const u=n.errorRetry,l=u?u.maxNumRetry:0;if(this._requestLicenseFailureCount++,this._requestLicenseFailureCount>l||o.status>=400&&o.status<500)s(new Pr({type:_e.KEY_SYSTEM_ERROR,details:J.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0,networkDetails:o,response:{url:a,data:void 0,code:o.status,text:o.statusText}},`License Request XHR failed (${a}). Status: ${o.status} (${o.statusText})`));else{const c=l-this._requestLicenseFailureCount+1;this.warn(`Retrying license request, ${c} attempts left`),this.requestLicense(e,t).then(i,s)}}},e.licenseXhr&&e.licenseXhr.readyState!==XMLHttpRequest.DONE&&e.licenseXhr.abort(),e.licenseXhr=o,this.setupLicenseXHR(o,a,e,t).then(({xhr:u,licenseChallenge:l})=>{u.send(l)})})}onMediaAttached(e,t){if(!this.config.emeEnabled)return;const n=t.media;this.media=n,n.addEventListener("encrypted",this.onMediaEncrypted),n.addEventListener("waitingforkey",this.onWaitingForKey)}onMediaDetached(){const e=this.media,t=this.mediaKeySessions;e&&(e.removeEventListener("encrypted",this.onMediaEncrypted),e.removeEventListener("waitingforkey",this.onWaitingForKey),this.media=null),this._requestLicenseFailureCount=0,this.setMediaKeysQueue=[],this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},Eo.clearKeyUriToKeyIdMap();const n=t.length;Zs.CDMCleanupPromise=Promise.all(t.map(i=>this.removeSession(i)).concat(e==null?void 0:e.setMediaKeys(null).catch(i=>{this.log(`Could not clear media keys: ${i}. media.src: ${e==null?void 0:e.src}`)}))).then(()=>{n&&(this.log("finished closing key sessions and clearing media keys"),t.length=0)}).catch(i=>{this.log(`Could not close sessions and clear media keys: ${i}. media.src: ${e==null?void 0:e.src}`)})}onManifestLoading(){this.keyFormatPromise=null}onManifestLoaded(e,{sessionKeys:t}){if(!(!t||!this.config.emeEnabled)&&!this.keyFormatPromise){const n=t.reduce((i,s)=>(i.indexOf(s.keyFormat)===-1&&i.push(s.keyFormat),i),[]);this.log(`Selecting key-system from session-keys ${n.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(n)}}removeSession(e){const{mediaKeysSession:t,licenseXhr:n}=e;if(t){this.log(`Remove licenses and keys and close session ${t.sessionId}`),t.onmessage=null,t.onkeystatuseschange=null,n&&n.readyState!==XMLHttpRequest.DONE&&n.abort(),e.mediaKeysSession=e.decryptdata=e.licenseXhr=void 0;const i=this.mediaKeySessions.indexOf(e);return i>-1&&this.mediaKeySessions.splice(i,1),t.remove().catch(s=>{this.log(`Could not remove session: ${s}`)}).then(()=>t.close()).catch(s=>{this.log(`Could not close session: ${s}`)})}}}Zs.CDMCleanupPromise=void 0;class Pr extends Error{constructor(e,t){super(t),this.data=void 0,e.error||(e.error=new Error(t)),this.data=e,e.err=e.error}}const Rw=1;var hr={MANIFEST:"m",AUDIO:"a",VIDEO:"v",MUXED:"av",INIT:"i",CAPTION:"c",TIMED_TEXT:"tt",KEY:"k",OTHER:"o"};const Lw="h";class fi{constructor(e){this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=()=>{this.initialized&&(this.starved=!0),this.buffering=!0},this.onPlaying=()=>{this.initialized||(this.initialized=!0),this.buffering=!1},this.applyPlaylistData=i=>{try{this.apply(i,{ot:hr.MANIFEST,su:!this.initialized})}catch(s){G.warn("Could not generate manifest CMCD data.",s)}},this.applyFragmentData=i=>{try{const s=i.frag,a=this.hls.levels[s.level],o=this.getObjectType(s),u={d:s.duration*1e3,ot:o};(o===hr.VIDEO||o===hr.AUDIO||o==hr.MUXED)&&(u.br=a.bitrate/1e3,u.tb=this.getTopBandwidth(o)/1e3,u.bl=this.getBufferLength(o)),this.apply(i,u)}catch(s){G.warn("Could not generate segment CMCD data.",s)}},this.hls=e;const t=this.config=e.config,{cmcd:n}=t;n!=null&&(t.pLoader=this.createPlaylistLoader(),t.fLoader=this.createFragmentLoader(),this.sid=n.sessionId||fi.uuid(),this.cid=n.contentId,this.useHeaders=n.useHeaders===!0,this.registerListeners())}registerListeners(){const e=this.hls;e.on(D.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(D.MEDIA_DETACHED,this.onMediaDetached,this),e.on(D.BUFFER_CREATED,this.onBufferCreated,this)}unregisterListeners(){const e=this.hls;e.off(D.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(D.MEDIA_DETACHED,this.onMediaDetached,this),e.off(D.BUFFER_CREATED,this.onBufferCreated,this)}destroy(){this.unregisterListeners(),this.onMediaDetached(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null}onMediaAttached(e,t){this.media=t.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)}onMediaDetached(){!this.media||(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)}onBufferCreated(e,t){var n,i;this.audioBuffer=(n=t.tracks.audio)==null?void 0:n.buffer,this.videoBuffer=(i=t.tracks.video)==null?void 0:i.buffer}createData(){var e;return{v:Rw,sf:Lw,sid:this.sid,cid:this.cid,pr:(e=this.media)==null?void 0:e.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}}apply(e,t={}){Ft(t,this.createData());const n=t.ot===hr.INIT||t.ot===hr.VIDEO||t.ot===hr.MUXED;if(this.starved&&n&&(t.bs=!0,t.su=!0,this.starved=!1),t.su==null&&(t.su=this.buffering),this.useHeaders){const i=fi.toHeaders(t);if(!Object.keys(i).length)return;e.headers||(e.headers={}),Ft(e.headers,i)}else{const i=fi.toQuery(t);if(!i)return;e.url=fi.appendQueryToUri(e.url,i)}}getObjectType(e){const{type:t}=e;if(t==="subtitle")return hr.TIMED_TEXT;if(e.sn==="initSegment")return hr.INIT;if(t==="audio")return hr.AUDIO;if(t==="main")return this.hls.audioTracks.length?hr.VIDEO:hr.MUXED}getTopBandwidth(e){let t=0,n;const i=this.hls;if(e===hr.AUDIO)n=i.audioTracks;else{const s=i.maxAutoLevel,a=s>-1?s+1:i.levels.length;n=i.levels.slice(0,a)}for(const s of n)s.bitrate>t&&(t=s.bitrate);return t>0?t:NaN}getBufferLength(e){const t=this.hls.media,n=e===hr.AUDIO?this.audioBuffer:this.videoBuffer;return!n||!t?NaN:tt.bufferInfo(n,t.currentTime,this.config.maxBufferHole).len*1e3}createPlaylistLoader(){const{pLoader:e}=this.config,t=this.applyPlaylistData,n=e||this.config.loader;return class{constructor(s){this.loader=void 0,this.loader=new n(s)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(s,a,o){t(s),this.loader.load(s,a,o)}}}createFragmentLoader(){const{fLoader:e}=this.config,t=this.applyFragmentData,n=e||this.config.loader;return class{constructor(s){this.loader=void 0,this.loader=new n(s)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(s,a,o){t(s),this.loader.load(s,a,o)}}}static uuid(){const e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.slice(t.lastIndexOf("/")+1)}static serialize(e){const t=[],n=l=>!Number.isNaN(l)&&l!=null&&l!==""&&l!==!1,i=l=>Math.round(l),s=l=>i(l/100)*100,o={br:i,d:i,bl:s,dl:s,mtp:s,nor:l=>encodeURIComponent(l),rtp:s,tb:i},u=Object.keys(e||{}).sort();for(const l of u){let c=e[l];if(!n(c)||l==="v"&&c===1||l=="pr"&&c===1)continue;const h=o[l];h&&(c=h(c));const f=typeof c;let d;l==="ot"||l==="sf"||l==="st"?d=`${l}=${c}`:f==="boolean"?d=l:f==="number"?d=`${l}=${c}`:d=`${l}=${JSON.stringify(c)}`,t.push(d)}return t.join(",")}static toHeaders(e){const t=Object.keys(e),n={},i=["Object","Request","Session","Status"],s=[{},{},{},{}],a={br:0,d:0,ot:0,tb:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,bs:3,rtp:3};for(const o of t){const u=a[o]!=null?a[o]:1;s[u][o]=e[o]}for(let o=0;o<s.length;o++){const u=fi.serialize(s[o]);u&&(n[`CMCD-${i[o]}`]=u)}return n}static toQuery(e){return`CMCD=${encodeURIComponent(fi.serialize(e))}`}static appendQueryToUri(e,t){if(!t)return e;const n=e.includes("?")?"&":"?";return`${e}${n}${t}`}}const Iw=3e5;class kw{constructor(e){this.hls=void 0,this.log=void 0,this.loader=null,this.uri=null,this.pathwayId=".",this.pathwayPriority=null,this.timeToLoad=300,this.reloadTimer=-1,this.updated=0,this.started=!1,this.enabled=!0,this.levels=null,this.audioTracks=null,this.subtitleTracks=null,this.penalizedPathways={},this.hls=e,this.log=G.log.bind(G,"[content-steering]:"),this.registerListeners()}registerListeners(){const e=this.hls;e.on(D.MANIFEST_LOADING,this.onManifestLoading,this),e.on(D.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(D.MANIFEST_PARSED,this.onManifestParsed,this),e.on(D.ERROR,this.onError,this)}unregisterListeners(){const e=this.hls;!e||(e.off(D.MANIFEST_LOADING,this.onManifestLoading,this),e.off(D.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(D.MANIFEST_PARSED,this.onManifestParsed,this),e.off(D.ERROR,this.onError,this))}startLoad(){if(this.started=!0,self.clearTimeout(this.reloadTimer),this.enabled&&this.uri)if(this.updated){const e=Math.max(this.timeToLoad*1e3-(performance.now()-this.updated),0);this.scheduleRefresh(this.uri,e)}else this.loadSteeringManifest(this.uri)}stopLoad(){this.started=!1,this.loader&&(this.loader.destroy(),this.loader=null),self.clearTimeout(this.reloadTimer)}destroy(){this.unregisterListeners(),this.stopLoad(),this.hls=null,this.levels=this.audioTracks=this.subtitleTracks=null}removeLevel(e){const t=this.levels;t&&(this.levels=t.filter(n=>n!==e))}onManifestLoading(){this.stopLoad(),this.enabled=!0,this.timeToLoad=300,this.updated=0,this.uri=null,this.pathwayId=".",this.levels=this.audioTracks=this.subtitleTracks=null}onManifestLoaded(e,t){const{contentSteering:n}=t;n!==null&&(this.pathwayId=n.pathwayId,this.uri=n.uri,this.started&&this.startLoad())}onManifestParsed(e,t){this.audioTracks=t.audioTracks,this.subtitleTracks=t.subtitleTracks}onError(e,t){const{errorAction:n}=t;if((n==null?void 0:n.action)===dr.SendAlternateToPenaltyBox&&n.flags===on.MoveAllAlternatesMatchingHost){let i=this.pathwayPriority;const s=this.pathwayId;this.penalizedPathways[s]||(this.penalizedPathways[s]=performance.now()),!i&&this.levels&&(i=this.levels.reduce((a,o)=>(a.indexOf(o.pathwayId)===-1&&a.push(o.pathwayId),a),[])),i&&i.length>1&&(this.updatePathwayPriority(i),n.resolved=this.pathwayId!==s)}}filterParsedLevels(e){this.levels=e;let t=this.getLevelsForPathway(this.pathwayId);if(t.length===0){const n=e[0].pathwayId;this.log(`No levels found in Pathway ${this.pathwayId}. Setting initial Pathway to "${n}"`),t=this.getLevelsForPathway(n),this.pathwayId=n}return t.length!==e.length?(this.log(`Found ${t.length}/${e.length} levels in Pathway "${this.pathwayId}"`),t):e}getLevelsForPathway(e){return this.levels===null?[]:this.levels.filter(t=>e===t.pathwayId)}updatePathwayPriority(e){this.pathwayPriority=e;let t;const n=this.penalizedPathways,i=performance.now();Object.keys(n).forEach(s=>{i-n[s]>Iw&&delete n[s]});for(let s=0;s<e.length;s++){const a=e[s];if(n[a])continue;if(a===this.pathwayId)return;const o=this.hls.nextLoadLevel,u=this.hls.levels[o];if(t=this.getLevelsForPathway(a),t.length>0){this.log(`Setting Pathway to "${a}"`),this.pathwayId=a,this.hls.trigger(D.LEVELS_UPDATED,{levels:t});const l=this.hls.levels[o];u&&l&&this.levels&&(l.attrs["STABLE-VARIANT-ID"]!==u.attrs["STABLE-VARIANT-ID"]&&l.bitrate!==u.bitrate&&this.log(`Unstable Pathways change from bitrate ${u.bitrate} to ${l.bitrate}`),this.hls.nextLoadLevel=o);break}}}clonePathways(e){const t=this.levels;if(!t)return;const n={},i={};e.forEach(s=>{const{ID:a,"BASE-ID":o,"URI-REPLACEMENT":u}=s;if(t.some(c=>c.pathwayId===a))return;const l=this.getLevelsForPathway(o).map(c=>{const h=Ft({},c);h.details=void 0,h.url=C1(c.uri,c.attrs["STABLE-VARIANT-ID"],"PER-VARIANT-URIS",u);const f=new ot(c.attrs);f["PATHWAY-ID"]=a;const d=f.AUDIO&&`${f.AUDIO}_clone_${a}`,m=f.SUBTITLES&&`${f.SUBTITLES}_clone_${a}`;d&&(n[f.AUDIO]=d,f.AUDIO=d),m&&(i[f.SUBTITLES]=m,f.SUBTITLES=m),h.attrs=f;const E=new yo(h);return xl(E,"audio",d),xl(E,"text",m),E});t.push(...l),Xg(this.audioTracks,n,u,a),Xg(this.subtitleTracks,i,u,a)})}loadSteeringManifest(e){const t=this.hls.config,n=t.loader;this.loader&&this.loader.destroy(),this.loader=new n(t);let i;try{i=new self.URL(e)}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest URI: ${e}`);return}if(i.protocol!=="data:"){const c=(this.hls.bandwidthEstimate||t.abrEwmaDefaultEstimate)|0;i.searchParams.set("_HLS_pathway",this.pathwayId),i.searchParams.set("_HLS_throughput",""+c)}const s={responseType:"json",url:i.href},a=t.steeringManifestLoadPolicy.default,o=a.errorRetry||a.timeoutRetry||{},u={loadPolicy:a,timeout:a.maxLoadTimeMs,maxRetry:o.maxNumRetry||0,retryDelay:o.retryDelayMs||0,maxRetryDelay:o.maxRetryDelayMs||0},l={onSuccess:(c,h,f,d)=>{this.log(`Loaded steering manifest: "${i}"`);const m=c.data;if(m.VERSION!==1){this.log(`Steering VERSION ${m.VERSION} not supported!`);return}this.updated=performance.now(),this.timeToLoad=m.TTL;const{"RELOAD-URI":E,"PATHWAY-CLONES":p,"PATHWAY-PRIORITY":g}=m;if(E)try{this.uri=new self.URL(E,i).href}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest RELOAD-URI: ${E}`);return}this.scheduleRefresh(this.uri||f.url),p&&this.clonePathways(p),g&&this.updatePathwayPriority(g)},onError:(c,h,f,d)=>{if(this.log(`Error loading steering manifest: ${c.code} ${c.text} (${h.url})`),this.stopLoad(),c.code===410){this.enabled=!1,this.log(`Steering manifest ${h.url} no longer available`);return}let m=this.timeToLoad*1e3;if(c.code===429){const E=this.loader;if(typeof(E==null?void 0:E.getResponseHeader)=="function"){const p=E.getResponseHeader("Retry-After");p&&(m=parseFloat(p)*1e3)}this.log(`Steering manifest ${h.url} rate limited`);return}this.scheduleRefresh(this.uri||h.url,m)},onTimeout:(c,h,f)=>{this.log(`Timeout loading steering manifest (${h.url})`),this.scheduleRefresh(this.uri||h.url)}};this.log(`Requesting steering manifest: ${i}`),this.loader.load(s,u,l)}scheduleRefresh(e,t=this.timeToLoad*1e3){self.clearTimeout(this.reloadTimer),this.reloadTimer=self.setTimeout(()=>{this.loadSteeringManifest(e)},t)}}function Xg(r,e,t,n){!r||Object.keys(e).forEach(i=>{const s=r.filter(a=>a.groupId===i).map(a=>{const o=Ft({},a);return o.details=void 0,o.attrs=new ot(o.attrs),o.url=o.attrs.URI=C1(a.url,a.attrs["STABLE-RENDITION-ID"],"PER-RENDITION-URIS",t),o.groupId=o.attrs["GROUP-ID"]=e[i],o.attrs["PATHWAY-ID"]=n,o});r.push(...s)})}function C1(r,e,t,n){const{HOST:i,PARAMS:s,[t]:a}=n;let o;e&&(o=a==null?void 0:a[e],o&&(r=o));const u=new self.URL(r);return i&&!o&&(u.host=i),s&&Object.keys(s).sort().forEach(l=>{l&&u.searchParams.set(l,s[l])}),u.href}const Bw=/^age:\s*[\d.]+\s*$/im;class T1{constructor(e){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=void 0,this.loader=null,this.stats=void 0,this.xhrSetup=e&&e.xhrSetup||null,this.stats=new ql,this.retryDelay=0}destroy(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null}abortInternal(){const e=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),e&&(e.onreadystatechange=null,e.onprogress=null,e.readyState!==4&&(this.stats.aborted=!0,e.abort()))}abort(){var e;this.abortInternal(),(e=this.callbacks)!=null&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)}load(e,t,n){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=e,this.config=t,this.callbacks=n,this.loadInternal()}loadInternal(){const{config:e,context:t}=this;if(!e)return;const n=this.loader=new self.XMLHttpRequest,i=this.stats;i.loading.first=0,i.loaded=0;const s=this.xhrSetup;s?Promise.resolve().then(()=>{if(!this.stats.aborted)return s(n,t.url)}).catch(a=>(n.open("GET",t.url,!0),s(n,t.url))).then(()=>{this.stats.aborted||this.openAndSendXhr(n,t,e)}).catch(a=>{this.callbacks.onError({code:n.status,text:a.message},t,n,i)}):this.openAndSendXhr(n,t,e)}openAndSendXhr(e,t,n){e.readyState||e.open("GET",t.url,!0);const i=this.context.headers,{maxTimeToFirstByteMs:s,maxLoadTimeMs:a}=n.loadPolicy;if(i)for(const o in i)e.setRequestHeader(o,i[o]);t.rangeEnd&&e.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=t.responseType,self.clearTimeout(this.requestTimeout),n.timeout=s&&De(s)?s:a,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),n.timeout),e.send()}readystatechange(){const{context:e,loader:t,stats:n}=this;if(!e||!t)return;const i=t.readyState,s=this.config;if(!n.aborted&&i>=2&&(n.loading.first===0&&(n.loading.first=Math.max(self.performance.now(),n.loading.start),s.timeout!==s.loadPolicy.maxLoadTimeMs&&(self.clearTimeout(this.requestTimeout),s.timeout=s.loadPolicy.maxLoadTimeMs,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),s.loadPolicy.maxLoadTimeMs-(n.loading.first-n.loading.start)))),i===4)){self.clearTimeout(this.requestTimeout),t.onreadystatechange=null,t.onprogress=null;const a=t.status,o=t.responseType!=="text";if(a>=200&&a<300&&(o&&t.response||t.responseText!==null)){n.loading.end=Math.max(self.performance.now(),n.loading.first);const u=o?t.response:t.responseText,l=t.responseType==="arraybuffer"?u.byteLength:u.length;if(n.loaded=n.total=l,n.bwEstimate=n.total*8e3/(n.loading.end-n.loading.first),!this.callbacks)return;const c=this.callbacks.onProgress;if(c&&c(n,e,u,t),!this.callbacks)return;const h={url:t.responseURL,data:u,code:a};this.callbacks.onSuccess(h,n,e,t)}else{const u=s.loadPolicy.errorRetry,l=n.retry;yl(u,l,!1,a)?this.retry(u):(G.error(`${a} while loading ${e.url}`),this.callbacks.onError({code:a,text:t.statusText},e,t,n))}}}loadtimeout(){var e;const t=(e=this.config)==null?void 0:e.loadPolicy.timeoutRetry,n=this.stats.retry;if(yl(t,n,!0))this.retry(t);else{G.warn(`timeout while loading ${this.context.url}`);const i=this.callbacks;i&&(this.abortInternal(),i.onTimeout(this.stats,this.context,this.loader))}}retry(e){const{context:t,stats:n}=this;this.retryDelay=n0(e,n.retry),n.retry++,G.warn(`${status?"HTTP Status "+status:"Timeout"} while loading ${t.url}, retrying ${n.retry}/${e.maxNumRetry} in ${this.retryDelay}ms`),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay)}loadprogress(e){const t=this.stats;t.loaded=e.loaded,e.lengthComputable&&(t.total=e.total)}getCacheAge(){let e=null;if(this.loader&&Bw.test(this.loader.getAllResponseHeaders())){const t=this.loader.getResponseHeader("age");e=t?parseFloat(t):null}return e}getResponseHeader(e){return this.loader&&new RegExp(`^${e}:\\s*[\\d.]+\\s*$`,"im").test(this.loader.getAllResponseHeaders())?this.loader.getResponseHeader(e):null}}function Ow(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch{}return!1}const Nw=/(\d+)-(\d+)\/(\d+)/;class Zg{constructor(e){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=void 0,this.response=void 0,this.controller=void 0,this.context=void 0,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=e.fetchSetup||$w,this.controller=new self.AbortController,this.stats=new ql}destroy(){this.loader=this.callbacks=null,this.abortInternal()}abortInternal(){const e=this.response;e!=null&&e.ok||(this.stats.aborted=!0,this.controller.abort())}abort(){var e;this.abortInternal(),(e=this.callbacks)!=null&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)}load(e,t,n){const i=this.stats;if(i.loading.start)throw new Error("Loader can only be used once.");i.loading.start=self.performance.now();const s=Pw(e,this.controller.signal),a=n.onProgress,o=e.responseType==="arraybuffer",u=o?"byteLength":"length",{maxTimeToFirstByteMs:l,maxLoadTimeMs:c}=t.loadPolicy;this.context=e,this.config=t,this.callbacks=n,this.request=this.fetchSetup(e,s),self.clearTimeout(this.requestTimeout),t.timeout=l&&De(l)?l:c,this.requestTimeout=self.setTimeout(()=>{this.abortInternal(),n.onTimeout(i,e,this.response)},t.timeout),self.fetch(this.request).then(h=>{this.response=this.loader=h;const f=Math.max(self.performance.now(),i.loading.start);if(self.clearTimeout(this.requestTimeout),t.timeout=c,this.requestTimeout=self.setTimeout(()=>{this.abortInternal(),n.onTimeout(i,e,this.response)},c-(f-i.loading.start)),!h.ok){const{status:d,statusText:m}=h;throw new zw(m||"fetch, bad network response",d,h)}return i.loading.first=f,i.total=Uw(h.headers)||i.total,a&&De(t.highWaterMark)?this.loadProgressively(h,i,e,t.highWaterMark,a):o?h.arrayBuffer():e.responseType==="json"?h.json():h.text()}).then(h=>{const{response:f}=this;self.clearTimeout(this.requestTimeout),i.loading.end=Math.max(self.performance.now(),i.loading.first);const d=h[u];d&&(i.loaded=i.total=d);const m={url:f.url,data:h,code:f.status};a&&!De(t.highWaterMark)&&a(i,e,h,f),n.onSuccess(m,i,e,f)}).catch(h=>{if(self.clearTimeout(this.requestTimeout),i.aborted)return;const f=h&&h.code||0,d=h?h.message:null;n.onError({code:f,text:d},e,h?h.details:null,i)})}getCacheAge(){let e=null;if(this.response){const t=this.response.headers.get("age");e=t?parseFloat(t):null}return e}getResponseHeader(e){return this.response?this.response.headers.get(e):null}loadProgressively(e,t,n,i=0,s){const a=new f1,o=e.body.getReader(),u=()=>o.read().then(l=>{if(l.done)return a.dataLength&&s(t,n,a.flush(),e),Promise.resolve(new ArrayBuffer(0));const c=l.value,h=c.length;return t.loaded+=h,h<i||a.dataLength?(a.push(c),a.dataLength>=i&&s(t,n,a.flush(),e)):s(t,n,c,e),u()}).catch(()=>Promise.reject());return u()}}function Pw(r,e){const t={method:"GET",mode:"cors",credentials:"same-origin",signal:e,headers:new self.Headers(Ft({},r.headers))};return r.rangeEnd&&t.headers.set("Range","bytes="+r.rangeStart+"-"+String(r.rangeEnd-1)),t}function Mw(r){const e=Nw.exec(r);if(e)return parseInt(e[2])-parseInt(e[1])+1}function Uw(r){const e=r.get("Content-Range");if(e){const n=Mw(e);if(De(n))return n}const t=r.get("Content-Length");if(t)return parseInt(t)}function $w(r,e){return new self.Request(r.url,e)}class zw extends Error{constructor(e,t,n){super(e),this.code=void 0,this.details=void 0,this.code=t,this.details=n}}const Vw=/\s/,Gw={newCue(r,e,t,n){const i=[];let s,a,o,u,l;const c=self.VTTCue||self.TextTrackCue;for(let f=0;f<n.rows.length;f++)if(s=n.rows[f],o=!0,u=0,l="",!s.isEmpty()){var h;for(let E=0;E<s.chars.length;E++)Vw.test(s.chars[E].uchar)&&o?u++:(l+=s.chars[E].uchar,o=!1);s.cueStartTime=e,e===t&&(t+=1e-4),u>=16?u--:u++;const d=E1(l.trim()),m=p0(e,t,d);r!=null&&(h=r.cues)!=null&&h.getCueById(m)||(a=new c(e,t,d),a.id=m,a.line=f+1,a.align="left",a.position=10+Math.min(80,Math.floor(u*8/32)*10),i.push(a))}return r&&i.length&&(i.sort((f,d)=>f.line==="auto"||d.line==="auto"?0:f.line>8&&d.line>8?d.line-f.line:f.line-d.line),i.forEach(f=>Wy(r,f))),i}},Ww={maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:null,errorRetry:null},Hw=Cr(Cr({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,maxBufferSize:60*1e3*1e3,maxBufferHole:.1,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,workerPath:null,enableSoftwareAES:!0,startLevel:void 0,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:T1,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:YD,bufferController:iw,capLevelController:g0,errorController:zS,fpsController:bw,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystems:{},drmSystemOptions:{},requestMediaKeySystemAccessFunc:Ly,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableID3MetadataCues:!0,certLoadPolicy:{default:Ww},keyLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"},errorRetry:{maxNumRetry:8,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"}}},manifestLoadPolicy:{default:{maxTimeToFirstByteMs:1/0,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},playlistLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:2,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},fragLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:12e4,timeoutRetry:{maxNumRetry:4,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:6,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},steeringManifestLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3},jw()),{},{subtitleStreamController:ew,subtitleTrackController:rw,timelineController:ww,audioStreamController:ZD,audioTrackController:QD,emeController:Zs,cmcdController:fi,contentSteeringController:kw});function jw(){return{cueHandler:Gw,enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}}function Kw(r,e){if((e.liveSyncDurationCount||e.liveMaxLatencyDurationCount)&&(e.liveSyncDuration||e.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(e.liveMaxLatencyDurationCount!==void 0&&(e.liveSyncDurationCount===void 0||e.liveMaxLatencyDurationCount<=e.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(e.liveMaxLatencyDuration!==void 0&&(e.liveSyncDuration===void 0||e.liveMaxLatencyDuration<=e.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');const t=Kf(r),n=["manifest","level","frag"],i=["TimeOut","MaxRetry","RetryDelay","MaxRetryTimeout"];return n.forEach(s=>{const a=`${s==="level"?"playlist":s}LoadPolicy`,o=e[a]===void 0,u=[];i.forEach(l=>{const c=`${s}Loading${l}`,h=e[c];if(h!==void 0&&o){u.push(c);const f=t[a].default;switch(e[a]={default:f},l){case"TimeOut":f.maxLoadTimeMs=h,f.maxTimeToFirstByteMs=h;break;case"MaxRetry":f.errorRetry.maxNumRetry=h,f.timeoutRetry.maxNumRetry=h;break;case"RetryDelay":f.errorRetry.retryDelayMs=h,f.timeoutRetry.retryDelayMs=h;break;case"MaxRetryTimeout":f.errorRetry.maxRetryDelayMs=h,f.timeoutRetry.maxRetryDelayMs=h;break}}}),u.length&&G.warn(`hls.js config: "${u.join('", "')}" setting(s) are deprecated, use "${a}": ${JSON.stringify(e[a])}`)}),Cr(Cr({},t),e)}function Kf(r){return r&&typeof r=="object"?Array.isArray(r)?r.map(Kf):Object.keys(r).reduce((e,t)=>(e[t]=Kf(r[t]),e),{}):r}function qw(r){const e=r.loader;e!==Zg&&e!==T1?(G.log("[config]: Custom loader detected, cannot enable progressive streaming"),r.progressive=!1):Ow()&&(r.loader=Zg,r.progressive=!0,r.enableSoftwareAES=!0,G.log("[config]: Progressive streaming enabled, using FetchLoader"))}class Hn{static get version(){return"1.4.4"}static isSupported(){return aD()}static get Events(){return D}static get ErrorTypes(){return _e}static get ErrorDetails(){return J}static get DefaultConfig(){return Hn.defaultConfig?Hn.defaultConfig:Hw}static set DefaultConfig(e){Hn.defaultConfig=e}constructor(e={}){this.config=void 0,this.userConfig=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this._emitter=new f0,this._autoLevelCapping=void 0,this._maxHdcpLevel=null,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this.url=null,IT(e.debug||!1,"Hls instance");const t=this.config=Kw(Hn.DefaultConfig,e);this.userConfig=e,this._autoLevelCapping=-1,t.progressive&&qw(t);const{abrController:n,bufferController:i,capLevelController:s,errorController:a,fpsController:o}=t,u=new a(this),l=this.abrController=new n(this),c=this.bufferController=new i(this),h=this.capLevelController=new s(this),f=new o(this),d=new CS(this),m=new _S(this),E=t.contentSteeringController,p=E?new E(this):null,g=this.levelController=new GS(this,p),v=new WS(this),y=new jS(this.config),C=this.streamController=new KD(this,v,y);h.setStreamController(C),f.setStreamController(C);const A=[d,g,C];p&&A.splice(1,0,p),this.networkControllers=A;const T=[l,c,h,f,m,v];this.audioTrackController=this.createController(t.audioTrackController,A);const S=t.audioStreamController;S&&A.push(new S(this,v,y)),this.subtitleTrackController=this.createController(t.subtitleTrackController,A);const F=t.subtitleStreamController;F&&A.push(new F(this,v,y)),this.createController(t.timelineController,T),y.emeController=this.emeController=this.createController(t.emeController,T),this.cmcdController=this.createController(t.cmcdController,T),this.latencyController=this.createController(FS,T),this.coreComponents=T,A.push(u);const k=u.onErrorOut;typeof k=="function"&&this.on(D.ERROR,k,u)}createController(e,t){if(e){const n=new e(this);return t&&t.push(n),n}return null}on(e,t,n=this){this._emitter.on(e,t,n)}once(e,t,n=this){this._emitter.once(e,t,n)}removeAllListeners(e){this._emitter.removeAllListeners(e)}off(e,t,n=this,i){this._emitter.off(e,t,n,i)}listeners(e){return this._emitter.listeners(e)}emit(e,t,n){return this._emitter.emit(e,t,n)}trigger(e,t){if(this.config.debug)return this.emit(e,e,t);try{return this.emit(e,e,t)}catch(n){G.error("An internal error happened while handling event "+e+'. Error message: "'+n.message+'". Here is a stacktrace:',n),this.trigger(D.ERROR,{type:_e.OTHER_ERROR,details:J.INTERNAL_EXCEPTION,fatal:!1,event:e,error:n})}return!1}listenerCount(e){return this._emitter.listenerCount(e)}destroy(){G.log("destroy"),this.trigger(D.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this.url=null,this.networkControllers.forEach(t=>t.destroy()),this.networkControllers.length=0,this.coreComponents.forEach(t=>t.destroy()),this.coreComponents.length=0;const e=this.config;e.xhrSetup=e.fetchSetup=void 0,this.userConfig=null}attachMedia(e){G.log("attachMedia"),this._media=e,this.trigger(D.MEDIA_ATTACHING,{media:e})}detachMedia(){G.log("detachMedia"),this.trigger(D.MEDIA_DETACHING,void 0),this._media=null}loadSource(e){this.stopLoad();const t=this.media,n=this.url,i=this.url=e0.buildAbsoluteURL(self.location.href,e,{alwaysNormalize:!0});G.log(`loadSource:${i}`),t&&n&&(n!==i||this.bufferController.hasSourceTypes())&&(this.detachMedia(),this.attachMedia(t)),this.trigger(D.MANIFEST_LOADING,{url:e})}startLoad(e=-1){G.log(`startLoad(${e})`),this.networkControllers.forEach(t=>{t.startLoad(e)})}stopLoad(){G.log("stopLoad"),this.networkControllers.forEach(e=>{e.stopLoad()})}swapAudioCodec(){G.log("swapAudioCodec"),this.streamController.swapAudioCodec()}recoverMediaError(){G.log("recoverMediaError");const e=this._media;this.detachMedia(),e&&this.attachMedia(e)}removeLevel(e,t=0){this.levelController.removeLevel(e,t)}get levels(){const e=this.levelController.levels;return e||[]}get currentLevel(){return this.streamController.currentLevel}set currentLevel(e){G.log(`set currentLevel:${e}`),this.loadLevel=e,this.abrController.clearTimer(),this.streamController.immediateLevelSwitch()}get nextLevel(){return this.streamController.nextLevel}set nextLevel(e){G.log(`set nextLevel:${e}`),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}get loadLevel(){return this.levelController.level}set loadLevel(e){G.log(`set loadLevel:${e}`),this.levelController.manualLevel=e}get nextLoadLevel(){return this.levelController.nextLoadLevel}set nextLoadLevel(e){this.levelController.nextLoadLevel=e}get firstLevel(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)}set firstLevel(e){G.log(`set firstLevel:${e}`),this.levelController.firstLevel=e}get startLevel(){return this.levelController.startLevel}set startLevel(e){G.log(`set startLevel:${e}`),e!==-1&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}get capLevelToPlayerSize(){return this.config.capLevelToPlayerSize}set capLevelToPlayerSize(e){const t=!!e;t!==this.config.capLevelToPlayerSize&&(t?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=t)}get autoLevelCapping(){return this._autoLevelCapping}get bandwidthEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimate():NaN}get ttfbEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimateTTFB():NaN}set autoLevelCapping(e){this._autoLevelCapping!==e&&(G.log(`set autoLevelCapping:${e}`),this._autoLevelCapping=e)}get maxHdcpLevel(){return this._maxHdcpLevel}set maxHdcpLevel(e){Vf.indexOf(e)>-1&&(this._maxHdcpLevel=e)}get autoLevelEnabled(){return this.levelController.manualLevel===-1}get manualLevel(){return this.levelController.manualLevel}get minAutoLevel(){const{levels:e,config:{minAutoBitrate:t}}=this;if(!e)return 0;const n=e.length;for(let i=0;i<n;i++)if(e[i].maxBitrate>=t)return i;return 0}get maxAutoLevel(){const{levels:e,autoLevelCapping:t,maxHdcpLevel:n}=this;let i;if(t===-1&&e&&e.length?i=e.length-1:i=t,n)for(let s=i;s--;){const a=e[s].attrs["HDCP-LEVEL"];if(a&&a<=n)return s}return i}get nextAutoLevel(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)}set nextAutoLevel(e){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,e)}get playingDate(){return this.streamController.currentProgramDateTime}get mainForwardBufferInfo(){return this.streamController.getMainFwdBufferInfo()}get audioTracks(){const e=this.audioTrackController;return e?e.audioTracks:[]}get audioTrack(){const e=this.audioTrackController;return e?e.audioTrack:-1}set audioTrack(e){const t=this.audioTrackController;t&&(t.audioTrack=e)}get subtitleTracks(){const e=this.subtitleTrackController;return e?e.subtitleTracks:[]}get subtitleTrack(){const e=this.subtitleTrackController;return e?e.subtitleTrack:-1}get media(){return this._media}set subtitleTrack(e){const t=this.subtitleTrackController;t&&(t.subtitleTrack=e)}get subtitleDisplay(){const e=this.subtitleTrackController;return e?e.subtitleDisplay:!1}set subtitleDisplay(e){const t=this.subtitleTrackController;t&&(t.subtitleDisplay=e)}get lowLatencyMode(){return this.config.lowLatencyMode}set lowLatencyMode(e){this.config.lowLatencyMode=e}get liveSyncPosition(){return this.latencyController.liveSyncPosition}get latency(){return this.latencyController.latency}get maxLatency(){return this.latencyController.maxLatency}get targetLatency(){return this.latencyController.targetLatency}get drift(){return this.latencyController.drift}get forceStartLoad(){return this.streamController.forceStartLoad}}Hn.defaultConfig=void 0;const Yw=r=>{const{source:e}=r;return be.exports.useEffect(()=>{const t=document.getElementById("video"),n=e;if(Hn.isSupported()){const i=new Hn;i.loadSource(n),i.attachMedia(t),i.on(Hn.Events.MANIFEST_PARSED,function(){})}else t.canPlayType("application/vnd.apple.mpegurl")&&(t.src=n,t.addEventListener("loadedmetadata",function(){}))}),pe(Xt,{children:pe("video",{controls:!0,autoPlay:!1,style:{width:"100%"},id:"video"})})},Lo=[{title:"\u89C6\u9891",path:"video"},{title:"\u7535\u5B50\u4E66",path:"ebook"},{title:"\u97F3\u4E50",path:"music"},{title:"\u56FE\u7247",path:"picture"},{title:"\u6587\u7AE0",path:"article"},{title:"RSS",path:"rss"},{title:"\u6E38\u620F",path:"game"}],qf=[{name:"\u60C5\u4E66 Love Letter",source:"https://s1.zoubuting.com/20220622/Xl2b7haF/hls/index.m3u8",cover:"/covers/\u60C5\u4E66.webp",score:"89",details:{alias:"When I Close My Eyes / Letters of Love",directors:["\u5CA9\u4E95\u4FCA\u4E8C"],scriptwriter:"\u5CA9\u4E95\u4FCA\u4E8C",actors:"\u4E2D\u5C71\u7F8E\u7A57 / \u4E30\u5DDD\u60A6\u53F8 / \u9152\u4E95\u7F8E\u7EAA / \u67CF\u539F\u5D07 / \u8303\u6587\u96C0 / \u7BE0\u539F\u80DC\u4E4B / \u94C3\u6728\u5E86\u4E00 / \u7530\u53E3\u667A\u6717 / \u52A0\u8D3A\u9EBB\u7406\u5B50 / \u5149\u77F3\u7814 / \u94C3\u6728\u5170\u5170 / \u76D0\u89C1\u4E09\u7701 / \u4E2D\u6751\u4E45\u7F8E / \u6885\u7530\u51E1\u4E43 / \u957F\u7530\u6C5F\u8EAB\u5B50 / \u5C0F\u6817\u9999\u7EC7 / \u795E\u6237\u6D69 / \u9152\u4E95\u654F\u4E5F / \u5C71\u53E3\u8BD7\u53F2 / \u5C71\u5D0E\u4E00 / \u5FB7\u4E95\u4F18 / \u6B66\u85E4\u5BFF\u7F8E",types:"\u5267\u60C5 / \u7231\u60C5",region:"\u65E5\u672C",language:"\u65E5\u8BED",date:"1999-03(\u4E2D\u56FD\u5927\u9646) / 2021-05-20(\u4E2D\u56FD\u5927\u9646\u91CD\u6620) / 1995-03-25(\u65E5\u672C)",duration:"117\u5206\u949F",IMDB:"tt0113703",intro:"\u65E5\u672C\u795E\u6237\u67D0\u4E2A\u98D8\u96EA\u7684\u51AC\u65E5\uFF0C\u6E21\u8FB9\u535A\u5B50\uFF08\u4E2D\u5C71\u7F8E\u7A57\uFF09\u5728\u524D\u672A\u5A5A\u592B\u85E4\u4E95\u6811\u7684\u4E24\u5468\u5E74\u796D\u65E5\u4E0A\u53C8\u4E00\u6B21\u60B2\u75DB\u5230\u4E0D\u80FD\u81EA\u5DF2\u3002\u6B63\u56E0\u4E3A\u65E0\u6CD5\u6291\u5236\u4F4F\u5BF9\u5DF2\u901D\u604B\u4EBA\u7684\u601D\u5FF5\uFF0C\u6E21\u8FB9\u535A\u5B50\u5728\u5176\u4E2D\u5B66\u540C\u5B66\u5F55\u91CC\u53D1\u73B0\u201C\u85E4\u4E95\u6811\u201D \u5728\u5C0F\u6A3D\u5E02\u8BFB\u4E66\u65F6\u7684\u5730\u5740\u65F6\uFF0C\u4F9D\u5FAA\u7740\u5BC4\u53D1\u4E86\u4E00\u5C01\u672C\u4EE5\u4E3A\u662F\u53D1\u5F80\u5929\u56FD\u7684\u60C5\u4E66\u3002\u4E0D\u60F3\u4E0D\u4E45\u6E21\u8FB9\u535A\u5B50\u7ADF\u7136\u6536\u5230\u7F72\u540D\u4E3A\u201C\u85E4\u4E95\u6811\uFF08\u9152\u4E95\u7F8E\u7EAA\uFF09\u201D\u7684\u56DE\u4FE1\uFF0C\u7ECF\u8FC7\u8FDB\u4E00\u6B65\u4E86\u89E3\uFF0C\u5979\u77E5\u6653\u6B64\u85E4\u4E95\u6811\u662F\u4E00\u4E2A\u540C\u5979\u5E74\u7EAA\u76F8\u4EFF\u7684\u5973\u5B69\uFF0C\u4E14\u8FD8\u662F\u7537\u53CB\u85E4\u4E95\u6811\uFF08\u67CF\u539F\u5D07\uFF09\u5C11\u5E74\u65F6\u4EE3\u7684\u540C\u73ED\u540C\u5B66\u3002\u4E3A\u4E86\u591A\u4E86\u89E3\u4E00\u4E9B\u6614\u65E5\u604B\u4EBA\u5728\u4E2D\u5B66\u65F6\u4EE3\u7684\u60C5\u51B5\uFF0C\u6E21\u8FB9\u535A\u5B50\u5F00\u59CB\u4E0E\u5973\u6027\u85E4\u4E95\u6811\u4E66\u4FE1\u5F80\u6765\u3002\u800C\u85E4\u4E95\u6811\u5728\u4E0D\u65AD\u7684\u56DE\u5FC6\u4E2D\uFF0C\u6E10\u6E10\u53D1\u73B0\u5C11\u5E74\u65F6\u4EE3\u4E0E\u5979\u540C\u540D\u540C\u59D3\u7684\u90A3\u4E2A\u85E4\u4E95\u6811\u66FE\u5BF9\u81EA\u5DF1\u85CF\u4E86\u4E00\u8154\u67D4\u60C5\u3002"}},{name:"\u767D\u65E5\u68A6\u60F3\u5BB6",source:"https://v4.cdtlas.com/20220531/pm3QPmvK/1000kb/hls/index.m3u8",cover:"/covers/\u767D\u65E5\u68A6\u60F3\u5BB6.jpeg",score:"86",details:{alias:"\u53D1\u68A6\u738B\u5927\u5386\u9669(\u6E2F) / \u767D\u65E5\u68A6\u5192\u9669\u738B(\u53F0) / \u5947\u5E7B\u5192\u9669\u5BB6 / \u68A6\u91CC\u4E7E\u5764 / \u6C83\u5C14\u7279\xB7\u7C73\u8482\u7684\u79D8\u5BC6\u751F\u6D3B / \u767D\u65E5\u5BC6\u8BED",directors:["\u672C\xB7\u65AF\u8482\u52D2"],scriptwriter:"\u65AF\u8482\u592B\xB7\u5EB7\u62C9\u5FB7 / \u8A79\u59C6\u65AF\xB7\u745F\u4F2F",actors:"\u672C\xB7\u65AF\u8482\u52D2 / \u514B\u91CC\u65AF\u6C40\xB7\u97E6\u683C / \u4E9A\u5F53\xB7\u65AF\u79D1\u7279 / \u897F\u6069\xB7\u6F58 / \u51EF\u745F\u7433\xB7\u54C8\u6069 / \u6CF0\u4F26\u65AF\xB7\u4F2F\u5C3C\xB7\u6D77\u6069\u65AF / \u4FDD\u7F57\xB7\u83F2\u5179\u6770\u62C9\u5FB7 / \u4E54\u6069\xB7\u6234\u5229 / \u4E54\u4F0A\xB7\u65AF\u6D1B\u7279\u5C3C\u514B / \u683C\u857E\u4E1D\xB7\u96F7\u514B\u65AF / \u963F\u83B1\u514B\u65AF\xB7\u963F\u65B9\u683C / \u963F\u66FC\u8FBE\xB7\u8BFA\u987F / \u963F\u5FB7\u91CC\u5B89\xB7\u9A6C\u4E01\u65AF / \u96EA\u8389\xB7\u9EA6\u514B\u96F7\u6069 / \u827E\u7C73\xB7\u65AF\u8482\u52D2 / \u65AF\u56FE\u5C14\u7279\xB7\u5EB7\u83F2\u5C14\u5FB7 / \u5965\u62C9\u7EF4\u5C14\xB7\u8FBE\u91CC\xB7\u5965\u62C9\u592B\u677E / \u7D22\u54C8\u5FB7\u5415\u5C14\xB7\u897F\u683C\u7F57\u68EE / \u8D21\u7EB3\xB7\u9ED1\u5C14\u52A0\u677E / \u5361\u4F0A\xB7\u4F26\u8BFA\u514B\u65AF / \u67EF\u5357\xB7\u5965\u5E03\u83B1\u6069 / \u5B89\u8FEA\xB7\u91CC\u514B\u7279 / \u5B89\u4E1C\u5C3C\xB7\u5FB7\u897F\u5965 / \u5E15\u987F\xB7\u5965\u65AF\u74E6\u5C14\u7279 / \u7406\u67E5\u5FB7\xB7\u5FB7\u591A\u6885\u5C3C\u79D1 / \u9A6C\u7279\xB7\u83B1\u6587 / \u683C\u96F7\u683C\xB7\u897F\u4F69\u65AF / \u9A6C\u7C73\xB7\u79D1\u897F\u79D1 / \u9A6C\u4FEE\xB7\u53E4\u5229 / \u7F57\u4E1D\u739B\u4E3D\xB7\u970D\u534E\u5FB7 / \u4F0A\u5170\xB7\u514B\u91CC\u65AF\u8D39\u5C14\u5FB7 / \u5B89\u5A1C\xB7\u5E93\u5947\u9A6C",types:"\u5267\u60C5 / \u559C\u5267 / \u5192\u9669",region:"\u7F8E\u56FD / \u82F1\u56FD",language:"\u82F1\u8BED / \u897F\u73ED\u7259\u8BED / \u51B0\u5C9B\u8BED",date:"2013-12-25(\u7F8E\u56FD)",duration:"114\u5206\u949F",IMDB:"tt0359950",intro:"\u6C83\u7279.\u5BC6\u63D0\uFF08\u672C\xB7\u65AF\u8482\u52D2 Ben Stiller \u9970\uFF09\u662F\u4E00\u540D\u5728\u300A\u751F\u6D3B\u300B\u6742\u5FD7\u5DE5\u4F5C\u4E8616\u5E74\u7684\u80F6\u7247\u6D17\u5370\u7ECF\u7406\uFF0C\u4ED6\u6027\u683C\u5185\u5411\uFF0C\u751A\u81F3\u65E0\u6CD5\u8DDF\u5FC3\u4EEA\u7684\u540C\u4E8B\u8C22\u8389\u5C14\uFF08\u514B\u91CC\u65AF\u6C40\xB7\u97E6\u683C Kristen Wiig \u9970\uFF09\u5F00\u53E3\u642D\u8BAA\uFF0C\u9762\u5BF9\u751F\u6D3B\u4ED6\u50CF\u4E2A\u65C1\u89C2\u8005\uFF0C\u65F6\u5E38\u201C\u653E\u7A7A\u201D\u505A\u767D\u65E5\u82F1\u96C4\u68A6\u3002\u76F4\u5230\u6709\u4E00\u5929\u516C\u53F8\u88AB\u5E76\u8D2D\uFF0C\u6742\u5FD7\u9700\u8981\u505A\u6700\u540E\u4E00\u671F\u7684\u5C01\u9762\uFF0C\u800C\u5C01\u9762\u6210\u529F\u4E0E\u5426\u7684\u5173\u952E\u662F\u627E\u5230\u72C2\u91CE\u6444\u5F71\u5E08\u5C1A\u6069\uFF08\u897F\u6069\xB7\u6F58 Sean Penn\uFF09\u7684\u4E00\u5377\u80F6\u7247\uFF0C\u6C83\u7279\u7EC8\u4E8E\u5F00\u53E3\u642D\u8BAA\u8C22\u8389\u5C14\uFF0C\u5E76\u5728\u5979\u548C\u6BCD\u4EB2\uFF08\u96EA\u8389\xB7\u9EA6\u514B\u96F7\u6069 Shirley MacLaine \u9970\uFF09\u7684\u9F13\u52B1\u4E0B\u8E0F\u4E0A\u771F\u6B63\u7684\u5192\u9669\u4E4B\u65C5\uFF0C\u51B0\u539F\u3001\u5927\u6D77\u3001\u559C\u9A6C\u62C9\u96C5\u5C71\u2026\u2026\u6C83\u7279\u7684\u767D\u65E5\u68A6\u8FDC\u4E0D\u53CA\u73B0\u5B9E\u58EE\u4E3D\u3002"}},{name:"\u8BA9\u5B50\u5F39\u98DE",source:"https://vip.lzcdn2.com/20220318/12_2644b2e0/index.m3u8",cover:"/covers/\u8BA9\u5B50\u5F39\u98DE.jpeg",score:"90",details:{alias:"\u8BA9\u5B50\u5F39\u98DE\u4E00\u4F1A\u513F / \u706B\u70E7\u4E91 / Let The Bullets Fly",directors:["\u59DC\u6587"],scriptwriter:"\u6731\u82CF\u8FDB / \u8FF0\u5E73 / \u59DC\u6587 / \u90ED\u4FCA\u7ACB / \u5371\u7B11 / \u674E\u4E0D\u7A7A / \u9A6C\u8BC6\u9014",actors:"\u59DC\u6587 / \u845B\u4F18 / \u5468\u6DA6\u53D1 / \u5218\u5609\u73B2 / \u9648\u5764 / \u5F20\u9ED8 / \u59DC\u6B66 / \u5468\u97F5 / \u5ED6\u51E1 / \u59DA\u6A79 / \u90B5\u5175 / \u82D7\u5703 / \u51AF\u5C0F\u521A / \u80E1\u519B / \u9A6C\u73C2 / \u767D\u51B0 / \u675C\u5955\u8861 / \u674E\u9759 / \u80E1\u660E / \u5371\u7B11 / \u6768\u5947\u96E8 / \u8D75\u94ED",types:"\u5267\u60C5 / \u559C\u5267 / \u52A8\u4F5C / \u897F\u90E8",region:"\u4E2D\u56FD\u5927\u9646 / \u4E2D\u56FD\u9999\u6E2F",language:"\u6C49\u8BED\u666E\u901A\u8BDD / \u56DB\u5DDD\u8BDD / \u5C71\u897F\u8BDD",date:"2010-12-16(\u4E2D\u56FD\u5927\u9646)",duration:"132\u5206\u949F",IMDB:"tt1533117",intro:"\u6C11\u56FD\u5E74\u95F4\uFF0C\u82B1\u94B1\u6350\u5F97\u53BF\u957F\u7684\u9A6C\u90A6\u5FB7\uFF08\u845B\u4F18 \u9970\uFF09\u643A\u59BB\uFF08\u5218\u5609\u73B2 \u9970\uFF09\u53CA\u968F\u4ECE\u8D70\u9A6C\u4E0A\u4EFB\u3002\u9014\u7ECF\u5357\u56FD\u67D0\u5730\uFF0C\u906D\u52AB\u532A\u5F20\u9EBB\u5B50\uFF08\u59DC\u6587 \u9970\uFF09\u4E00\u4F19\u4F0F\u51FB\uFF0C\u968F\u4ECE\u5C3D\u6B7B\uFF0C\u53EA\u592B\u59BB\u4E8C\u4EBA\u4FA5\u5E78\u6D3B\u547D\u3002\u9A6C\u4E3A\u4FDD\u547D\uFF0C\u8C0E\u79F0\u81EA\u5DF1\u662F\u53BF\u957F\u7684\u6C64 \u5E08\u7237\u3002\u4E3A\u6C64\u5E08\u7237\u8BB8\u4E0B\u7684\u8D22\u5BCC\u6240\u52A8\uFF0C\u5F20\u9EBB\u5B50\u6447\u8EAB\u4E00\u53D8\u5316\u8EAB\u53BF\u957F\uFF0C\u5E26\u7740\u624B\u4E0B\u8D76\u8D74\u9E45\u57CE\u4E0A\u4EFB\u3002\u6709\u9053\u662F\u5929\u9AD8\u7687\u5E1D\u8FDC\uFF0C\u9E45\u57CE\u5730\u5904\u504F\u50FB\uFF0C\u4E00\u65B9\u9738\u4E3B\u9EC4\u56DB\u90CE\uFF08\u5468\u6DA6\u53D1 \u9970\uFF09\u53EA\u624B\u906E\u5929\uFF0C\u5168\u7136\u4E0D\u5C06\u8FD9\u4E2A\u65B0\u6765\u7684\u53BF\u957F\u653E\u5728\u773C\u91CC\u3002\u5F20\u9EBB\u5B50\u75DB\u6253\u4E86\u9EC4\u7684\u6B66\u6559\u5934\uFF08\u59DC\u6B66 \u9970\uFF09\uFF0C\u9EC4\u5219\u8BBE\u8BA1\u5BB3\u6B7B\u5F20\u7684\u4E49\u5B50\u5C0F\u516D\uFF08\u5F20\u9ED8 \u9970\uFF09\u3002\u539F\u672C\u53EA\u60F3\u8D5A\u94B1\u7684\u9A6C\u90A6\u5FB7\uFF0C\u600E\u4E48\u4E5F\u60F3\u4E0D\u5230\u7ADF\u4F1A\u88AB\u5377\u5165\u8FD9\u573A\u571F\u532A\u548C\u6076\u9738\u7684\u89D2\u529B\u4E4B\u4E2D\u3002\u9E45\u57CE\u4E0A\u7A7A\u6101\u4E91\u5BC6\u5E03\uFF0C\u8840\u96E8\u8165\u98CE\u5728\u6240\u96BE\u514D\u2026\u2026\u672C\u7247\u6839\u636E\u9A6C\u8BC6\u9014\u7684\u5C0F\u8BF4\u300A\u591C\u8C2D\u5341\u8BB0\u300B\u4E2D\u7684\u300A\u76D7\u5B98\u8BB0\u300B\u4E00\u7AE0\u6539\u7F16\u3002"}},{name:"\u4E00\u4E5D\u56DB\u4E8C",source:"https://cdn.zoubuting.com/20221130/3IIvCUnL/1000kb/hls/index.m3u8",cover:"/covers/1942.jpeg",score:"81",details:{alias:["\u6E29\u65451942","1942","\u6E29\u6545\u4E00\u4E5D\u56DB\u4E8C","Back to 1942"],directors:["\u51AF\u5C0F\u521A"],scriptwriter:["\u5218\u9707\u4E91"],actors:["\u5F20\u56FD\u7ACB","\u5F20\u9ED8","\u5F90\u5E06","\u674E\u96EA\u5065","\u9648\u9053\u660E","\u827E\u5FB7\u91CC\u5B89\xB7\u5E03\u6D1B\u8FEA","\u8482\u59C6\xB7\u7F57\u5BBE\u65AF","\u51AF\u8FDC\u5F81","\u5F20\u6DB5\u4E88","\u738B\u5B50\u6587","\u6BB5\u5955\u5B8F","\u8303\u4F1F","\u67EF\u84DD","\u5F20\u56FD\u5F3A","\u6797\u6C38\u5065","\u4E54\u632F\u5B87","\u674E\u5029","\u8D75\u6BC5"],types:["\u5267\u60C5","\u5386\u53F2","\u6218\u4E89","\u707E\u96BE"],region:"\u4E2D\u56FD\u5927\u9646",language:["\u6CB3\u5357\u65B9\u8A00","\u82F1\u8BED","\u65E5\u8BED","\u6C49\u8BED\u666E\u901A\u8BDD"],date:"2012-11-29",duration:"146\u5206\u949F",IMDB:"tt2113822",intro:"1942\u5E74\uFF0C\u6297\u65E5\u6218\u4E89\u4E0E\u7B2C\u4E8C\u6B21\u4E16\u754C\u5927\u6218\u6B63\u5904\u4E8E\u767D\u70ED\u5316\u9636\u6BB5\u3002\u71CE\u539F\u4E4B\u706B\uFF0C\u751F\u7075\u6D82\u70AD\uFF0C\u5929\u707E\u4EBA\u7978\uFF0C\u54C0\u9E3F\u904D\u91CE\u3002\u5F53\u519B\u4E8B\u5BB6\u548C\u653F\u6CBB\u5BB6\u7684\u76EE\u5149\u805A\u7126\u5728\u4E00\u57CE\u4E00\u90ED\u7684\u5F81\u4F10\u52AB\u63A0\u4E4B\u65F6\uFF0C\u51E0\u4E4E\u9C9C\u5C11\u6709\u4EBA\u6CE8\u610F\u5230\u53E4\u8001\u7684\u4E2D\u539F\u6CB3\u5357\u6B63\u7206\u53D1\u4E00\u573A\u60E8\u7EDD\u4EBA\u5BF0\u7684\u5927\u65F1\u707E\u3002\u5F71\u7247\u7684\u4E3B\u89D2\u8001\u4E1C\u5BB6\uFF08\u5F20\u56FD\u7ACB \u9970\uFF09\uFF0C\u72E1\u733E\u3001\u5E02\u4FA9\uFF0C\u5178\u578B\u7684\u5C01\u5EFA\u5730\u4E3B\uFF0C\u53EF\u5373\u4FBF\u5982\u6B64\u4E5F\u65E0\u6CD5\u5BF9\u6297\u8FD9\u53F2\u65E0\u524D\u4F8B\u7684\u707E\u96BE\uFF0C\u4ED6\u88AB\u8FEB\u9003\u8352\uFF0C\u4EB2\u773C\u89C1\u8BC1\u7740\u513F\u5B50\u3001\u513F\u5AB3\u3001\u8001\u4F34\u7B49\u4EB2\u4EBA\u7684\u79CD\u79CD\u6B7B\u72B6\u3002\u4ED6\u7684\u906D\u9047\u662F\u4E09\u767E\u4E07\u707E\u6C11\u7684\u7F29\u5F71\uFF0C\u9762\u5BF9\u8FD9\u7FA4\u4EBA\u7684\u82E6\u96BE\uFF0C\u65E0\u8BBA\u662F\u9AD8\u9AD8\u5728\u4E0A\u7684\u848B\u59D4\u5458\u957F\uFF08\u9648\u9053\u660E \u9970\uFF09\uFF0C\u8FD8\u662F\u6DF1\u5165\u6C11\u95F4\u62A5\u9053\u707E\u96BE\u771F\u76F8\u7684\u7F8E\u56FD\u8BB0\u8005\u767D\u4FEE\u5FB7\uFF08\u963F\u5FB7\u91CC\u5B89\u2022\u5E03\u52B3\u8FEA Adrien Brody \u9970\uFF09\uFF0C\u4EE5\u53CA\u6D77\u5185\u5916\u7684\u6BCF\u4E00\u4E2A\u4EBA\uFF0C\u5982\u4F55\u80FD\u4ECE\u8FD9\u773C\u524D\u7684\u4EBA\u95F4\u70BC\u72F1\u4E4B\u666F\u4FA7\u76EE\u3002\u7EDD\u671B\u65E0\u6B62\u7684\u9003\u751F\u574E\u9014\uFF0C\u4E2D\u534E\u6C11\u65CF\u591A\u821B\u547D\u8FD0\u7684\u82E6\u96BE\u4E00\u6591\u2026\u2026\u672C\u7247\u6839\u636E\u5218\u9707\u4E91\u7684\u5C0F\u8BF4\u300A\u6E29\u6545\u4E00\u4E5D\u56DB\u4E8C\u300B\u6539\u7F16\u3002"}},{name:"\u6D3B\u7740",source:"https://vip.lzcdn2.com/20220407/2614_9730c040/1200k/hls/mixed.m3u8",cover:"/covers/\u6D3B\u7740.jpeg",score:"93",details:{alias:["\u4EBA\u751F","Lifetimes","To Live"],directors:["\u5F20\u827A\u8C0B"],scriptwriter:["\u82A6\u82C7","\u4F59\u534E"],actors:["\u845B\u4F18","\u5DE9\u4FD0","\u59DC\u6B66","\u725B\u7287","\u90ED\u6D9B","\u5F20\u7490","\u502A\u5927\u7EA2","\u8096\u806A","\u8463\u98DE","\u5218\u5929\u6C60","\u8463\u7ACB\u8303","\u9EC4\u5B97\u6D1B","\u5218\u71D5\u747E","\u674E\u8FDE\u4E49","\u6768\u540C\u987A"],types:["\u5267\u60C5","\u5BB6\u5EAD","\u5386\u53F2"],region:"\u4E2D\u56FD\u5927\u9646 / \u4E2D\u56FD\u9999\u6E2F",language:["\u6C49\u8BED\u666E\u901A\u8BDD"],date:"1994-06-30",duration:"132\u5206\u949F",IMDB:"tt0110081",intro:"\u6839\u636E\u4F59\u534E\u540C\u540D\u5C0F\u8BF4\u6539\u7F16\u3002\u5BCC\u5C11\u798F\u8D35\uFF08\u845B\u4F18\uFF09\u55DC\u8D4C\u6210\u6027\uFF0C\u59BB\u5B50\u5BB6\u73CD\uFF08\u5DE9\u4FD0\uFF09\u5C61\u529D\u65E0\u679C\u540E\u5E26\u7740\u5973\u513F\u51E4\u971E\u79BB\u5F00\u4E86\u4ED6\uFF0C\u5F53\u591C\uFF0C\u798F\u8D35\u8F93\u5149\u6240\u6709\u5BB6\u4EA7\u6C14\u6B7B\u7236\u4EB2\uFF0C\u88AB\u8FEB\u9760\u53D8\u5356\u6BCD\u4EB2\u9996\u9970\u79DF\u95F4\u7834\u5C4B\u8FC7\u6D3B\u3002\u4E00\u5E74\u540E\uFF0C\u5BB6\u73CD\u624B\u62C9\u51E4\u971E\u6000\u62B1\u521A\u51FA\u4E16\u7684\u513F\u5B50\u6709\u5E86\u56DE\u5230\u5BB6\u4E2D\uFF0C\u798F\u8D35\u75DB\u6539\u524D\u975E\uFF0C\u5F00\u59CB\u9760\u6F14\u76AE\u5F71\u620F\u8FC7\u8D77\u5B89\u4EFD\u5B88\u5DF1\u7684\u65E5\u5B50\u3002\u4F46\u597D\u666F\u4E0D\u5E38\uFF0C\u5185\u6218\u65F6\u671F\uFF0C\u798F\u8D35\u88AB\u56FD\u6C11\u515A\u6293\u53BB\u5F53\u52B3\u5DE5\uFF0C\u4E00\u756A\u8F97\u8F6C\u7EC8\u56DE\u5230\u5BB6\u4E61\u4E0E\u4E00\u5BB6\u4EBA\u56E2\u5706\u540E\uFF0C\u51E4\u971E\u56E0\u75C5\u53D8\u6210\u54D1\u5DF4\uFF0C\u800C\u5728\u540E\u6765\u7684\u5927\u8DC3\u8FDB\u8FD0\u52A8\u548C\u6587\u5316\u5927\u9769\u547D\u4E2D\uFF0C\u4ED6\u867D\u83B7\u67D0\u4E9B\u5C0F\u798F\uFF0C\u9006\u5883\u5374\u4E5F\u4E00\u76F4\u4E0E\u4ED6\u5982\u5F71\u76F8\u968F\u3002"}},{name:"\u76D7\u68A6\u7A7A\u95F4",source:"https://vip.lzcdn2.com/20220318/5_1dddc8ed/1200k/hls/mixed.m3u8",cover:"/covers/\u76D7\u68A6\u7A7A\u95F4.jpeg",score:"94",details:{alias:["\u6F5C\u884C\u51F6\u95F4(\u6E2F)","\u5168\u9762\u542F\u52A8(\u53F0)","\u5960\u57FA","\u5FC3\u7075\u72AF\u6848","\u8BB0\u5FC6\u8FF7\u9635","\u8BB0\u5FC6\u9B54\u65B9"],directors:["\u514B\u91CC\u65AF\u6258\u5F17\xB7\u8BFA\u5170"],scriptwriter:["\u514B\u91CC\u65AF\u6258\u5F17\xB7\u8BFA\u5170"],actors:["\u83B1\u6602\u7EB3\u591A\xB7\u8FEA\u5361\u666E\u91CC\u5965","\u7EA6\u745F\u592B\xB7\u9AD8\u767B-\u83B1\u7EF4\u7279","\u827E\u5229\u5965\u7279\xB7\u4F69\u5409","\u6C64\u59C6\xB7\u54C8\u8FEA","\u6E21\u8FB9\u8C26","\u8FEA\u5229\u666E\xB7\u52B3","\u57FA\u91CC\u5B89\xB7\u58A8\u83F2","\u6C64\u59C6\xB7\u8D1D\u4F26\u6770","\u739B\u4E3D\u6602\xB7\u6B4C\u8FEA\u4E9A","\u76AE\u7279\xB7\u6CE2\u65AF\u5C14\u601D\u97E6\u7279","\u8FC8\u514B\u5C14\xB7\u51EF\u6069","\u5362\u5361\u65AF\xB7\u54C8\u65AF","\u674E\u592A\u529B","\u514B\u83B1\u5C14\xB7\u5409\u5C14\u857E","\u9A6C\u683C\u52AA\u65AF\xB7\u8BFA\u5170","\u6CF0\u52D2\xB7\u5409\u857E","\u4E54\u7EB3\u68EE\xB7\u5409\u5C14","\u6C34\u6E90\u58EB\u90CE","\u5188\u672C\u7389\u4E8C","\u5384\u5C14\xB7\u5361\u6885\u4F26","\u745E\u6069\xB7\u6D77\u6C83\u5FB7","\u7C73\u5170\u8FBE\xB7\u8BFA\u5170","\u62C9\u4EC0\xB7\u8D39\u52A0","\u8482\u59C6\xB7\u79D1\u52D2\u8D6B","\u59B2\u9732\u62C9\xB7\u83B1\u8389"],types:["\u5267\u60C5","\u79D1\u5E7B","\u60AC\u7591","\u5192\u9669"],region:"\u7F8E\u56FD / \u82F1\u56FD",language:["\u82F1\u8BED","\u65E5\u8BED","\u6CD5\u8BED"],date:"2010-09-01",duration:"148\u5206\u949F",IMDB:"tt1375666",intro:"\u9053\u59C6\xB7\u67EF\u5E03\uFF08\u83B1\u6602\u7EB3\u591A\xB7\u8FEA\u5361\u666E\u91CC\u5965 Leonardo DiCaprio \u9970\uFF09\u4E0E\u540C\u4E8B\u963F\u745F\uFF08\u7EA6\u745F\u592B\xB7\u6208\u767B-\u83B1\u7EF4\u7279 Joseph Gordon-Levitt \u9970\uFF09\u548C\u7EB3\u4EC0\uFF08\u5362\u5361\u65AF\xB7\u54C8\u65AF Lukas Haas \u9970\uFF09\u5728\u4E00\u6B21\u9488\u5BF9\u65E5\u672C\u80FD\u6E90\u5927\u4EA8\u9F50\u85E4\uFF08\u6E21\u8FB9\u8C26 \u9970\uFF09\u7684\u76D7\u68A6\u884C\u52A8\u4E2D\u5931\u8D25\uFF0C\u53CD\u88AB\u9F50\u85E4\u5229\u7528\u3002\u9F50\u85E4\u5A01\u903C\u5229\u8BF1\u56E0\u906D\u901A\u7F09\u800C\u6D41\u4EA1\u6D77\u5916\u7684\u67EF\u5E03\u5E2E\u4ED6\u62C6\u5206\u4ED6\u7ADE\u4E89\u5BF9\u624B\u7684\u516C\u53F8\uFF0C\u91C7\u53D6\u6781\u7AEF\u63AA\u65BD\u5728\u5176\u552F\u4E00\u7EE7\u627F\u4EBA\u7F57\u4F2F\u7279\xB7\u8D39\u5E0C\u5C14\uFF08\u5E0C\u91CC\u5B89\xB7\u58A8\u83F2 Cillian Murphy \u9970\uFF09\u7684\u6DF1\u5C42\u6F5C\u610F\u8BC6\u4E2D\u79CD\u4E0B\u653E\u5F03\u5BB6\u65CF\u516C\u53F8\u3001\u81EA\u7ACB\u95E8\u6237\u7684\u60F3\u6CD5\u3002\u4E3A\u4E86\u91CD\u8FD4\u7F8E\u56FD\uFF0C\u67EF\u5E03\u5077\u5077\u6C42\u52A9\u4E8E\u5CB3\u7236\u8FC8\u5C14\u65AF\uFF08\u8FC8\u514B\u5C14\xB7\u51EF\u6069 Michael Caine \u9970\uFF09\uFF0C\u5438\u6536\u4E86\u5E74\u8F7B\u7684\u68A6\u5883\u8BBE\u8BA1\u5E08\u827E\u91CC\u963F\u5FB7\u59AE\uFF08\u827E\u4F26\xB7\u4F69\u5409 Ellen Page \u9970\uFF09\u3001\u68A6\u5883\u6F14\u5458\u827E\u59C6\u65AF\uFF08\u6C64\u59C6\xB7\u54C8\u8FEA Tom Hardy \u9970\uFF09\u548C\u836F\u5242\u5E08\u7EA6\u745F\u592B\uFF08\u8FEA\u5229\u666E\xB7\u52B3 Dileep Rao \u9970\uFF09\u52A0\u5165\u884C\u52A8\u3002\u5728\u4E00\u5C42\u5C42\u9012\u8FDB\u7684\u68A6\u5883\u4E2D\uFF0C\u67EF\u5E03\u4E0D\u4EC5\u8981\u5BF9\u4ED8\u8D39\u5E0C\u5C14\u6F5C\u610F\u8BC6\u7684\u672C\u80FD\u53CD\u6297\uFF0C\u8FD8\u5FC5\u987B\u76F4\u9762\u5DF2\u901D\u59BB\u5B50\u6885\u5C14\uFF08\u739B\u4E3D\u6602\xB7\u6B4C\u8FEA\u4E9A Marion Cotillard \u9970\uFF09\u7684\u5904\u5904\u7834\u574F\uFF0C\u5B9E\u9645\u60C5\u51B5\u8FDC\u6BD4\u9884\u60F3\u5371\u9669\u5F97\u591A\u2026\u2026"}},{name:"\u57CE\u5357\u65E7\u4E8B",source:"https://vip.lz-cdn10.com/20220902/2376_c532cfb6/1200k/hls/mixed.m3u8",cover:"/covers/\u57CE\u5357\u65E7\u4E8B.jpeg",score:"91",details:{alias:["My Memories of Old Beijing","South of the old"],directors:["\u5434\u8D3B\u5F13"],scriptwriter:["\u4F0A\u660E","\u6797\u6D77\u97F3"],actors:["\u6C88\u6D01","\u5F20\u4E30\u6BC5","\u5F20\u95FD","\u90D1\u632F\u7476","\u4E25\u7FD4"],types:["\u5267\u60C5"],region:"\u4E2D\u56FD\u5927\u9646",language:["\u6C49\u8BED\u666E\u901A\u8BDD"],date:"1983",duration:"88\u5206\u949F",IMDB:"tt0085326",intro:"\u672C\u7247\u6839\u636E\u6797\u6D77\u97F3\u7684\u540C\u540D\u77ED\u7BC7\u5C0F\u8BF4\u6539\u7F16\u3002\u5C0F\u5973\u5B69\u6797\u82F1\u5B50\uFF08\u6C88\u6D01 \u9970\uFF09\u4F4F\u5728\u4E94\u5341\u5E74\u524D\u7684\u5317\u4EAC\u5357\u57CE\uFF0C\u5728\u4ED6\u4EEC\u5BB6\u9662\u5B50\u9644\u8FD1\u4F4F\u7740\u4E00\u4E2A\u75AF\u5973\u4EBA\u79C0\u73CD\uFF08\u5F20\u95FD \u9970\uFF09\uFF0C\u79C0\u73CD\u7684\u4E08\u592B\u56E0\u53C2\u4E0E\u5B66\u751F\u8FD0\u52A8\u88AB\u6740\uFF0C\u5B69\u5B50\u4E5F\u4E0D\u77E5\u6240\u8E2A\uFF0C\u56E0\u6B64\u843D\u4E0B\u4E86\u75AF\u75C5\uFF0C\u65F6\u5E38\u628A\u82F1\u5B50\u5F53\u505A\u81EA\u5DF1\u7684\u5B69\u5B50\u201C\u5C0F\u6842\u5B50\u201D\u770B\u5F85\uFF0C\u82F1\u5B50\u4E5F\u559C\u6B22\u79C0\u73CD\uFF0C\u7B54\u5E94\u5E2E\u5979\u627E\u56DE\u5C0F\u6842\u5B50\u3002\u82F1\u5B50\u6709\u4E2A\u82E6\u547D\u7684\u5C0F\u4F19\u4F34\u599E\u513F\uFF0C\u5B66\u620F\u65F6\u5E38\u906D\u5E72\u7239\u6253\u9A82\uFF0C\u82F1\u5B50\u5076\u7136\u53D1\u73B0\u599E\u513F\u6709\u5C0F\u6842\u5B50\u7684\u80CE\u8BB0\uFF0C\u5E2E\u52A9\u5979\u4EEC\u6BCD\u5973\u76F8\u8BA4\u3002\u82F1\u5B50\u4E0A\u5C0F\u5B66\u540E\uFF0C\u4E00\u5BB6\u4EBA\u642C\u5230\u4E86\u5382\u7538\u3002\u5728\u5BB6\u95E8\u53E3\u8352\u5E9F\u7684\u9662\u843D\u91CC\uFF0C\u82F1\u5B50\u53D1\u73B0\u4E86\u4E00\u4E2A\u5C0F\u5077\uFF08\u5F20\u4E30\u6BC5 \u9970\uFF09\u85CF\u8D43\u7684\u8349\u5806\uFF0C\u5C0F\u5077\u4E3A\u4E86\u4F9B\u5F1F\u5F1F\u8BFB\u4E66\u53EA\u5F97\u5E72\u4E0D\u5149\u5F69\u7684\u52FE\u5F53\uFF0C\u82F1\u5B50\u5374\u4E0D\u628A\u4ED6\u770B\u4F5C\u662F\u574F\u4EBA\u3002\u4E0D\u4E45\uFF0C\u5973\u4F63\u82CF\u5988\u8FD4\u4E61\uFF0C\u7236\u4EB2\u53BB\u4E16\uFF0C\u82F1\u5B50\u7684\u7AE5\u5E74\uFF0C\u5F77\u4F5B\u4E00\u4E0B\u7ED3\u675F\u4E86\u2026\u2026"}},{name:"\u5929\u7A7A\u4E4B\u57CE",source:"https://vip.lzcdn2.com/20220323/322_d924eacf/1200k/hls/mixed.m3u8",cover:"/covers/\u5929\u7A7A\u4E4B\u57CE.jpeg",score:"92",details:{alias:["\u5929\u7A7A\u4E4B\u57CE\u62C9\u666E\u4ED6","\u7A7A\u4E2D\u57CE\u5821\u62C9\u666E\u4ED6","Tenk\xFB no shiro Rapyuta","Laputa: Castle in the Sky"],directors:["\u5BAB\u5D0E\u9A8F"],scriptwriter:["\u5BAB\u5D0E\u9A8F"],actors:["\u7530\u4E2D\u771F\u5F13","\u6A2A\u6CFD\u542F\u5B50","\u521D\u4E95\u8A00\u8363","\u5BFA\u7530\u519C","\u5E38\u7530\u5BCC\u58EB\u7537","\u6C38\u4E95\u4E00\u90CE","\u7CF8\u535A","\u9E6B\u5C3E\u771F\u77E5\u5B50","\u795E\u5C71\u5353\u4E09","\u5B89\u539F\u4E49\u4EBA","\u69D0\u67F3\u4E8C","\u9CD5\u5B50"],types:["\u52A8\u753B","\u5947\u5E7B","\u5192\u9669"],region:"\u65E5\u672C",language:["\u65E5\u8BED"],date:"1992-05-01",duration:"125\u5206\u949F",IMDB:"tt0092067",intro:"\u53E4\u8001\u5E1D\u56FD\u62C9\u6BD4\u8FBE\u662F\u4E00\u5EA7\u6F02\u6D6E\u5728\u7A7A\u4E2D\u7684\u5DE8\u5927\u7684\u673A\u5668\u5C9B\uFF0C\u4F20\u8BF4\u90A3\u91CC\u5DF2\u7ECF\u65E0\u4EBA\u5C45\u4F4F\uFF0C\u8574\u85CF\u7740\u5DE8\u5927\u7684\u8D22\u5BCC\u3002\u56E0\u6B64\uFF0C\u65E0\u8BBA\u519B\u65B9\u8FD8\u662F\u6D77\u76D7\uFF0C\u90FD\u5728\u627E\u5BFB\u7740\u8FD9\u5EA7\u4F20\u8BF4\u4E2D\u7684\u98DE\u884C\u5C9B\u3002\u77FF\u5DE5\u5E15\u514B\u8FD9\u5929\u5076\u9047\u62C9\u6BD4\u8FBE\u7EE7\u627F\u4EBA\u5E0C\u8FBE\uFF0C\u4E24\u4EBA\u4E00\u89C1\u5982\u6545\u3002\u56E0\u4E3A\u5E0C\u8FBE\u8EAB\u4E0A\u6709\u627E\u5BFB\u62C9\u6BD4\u8FBE\u5E1D\u56FD\u7684\u91CD\u8981\u7269\u4EF6\u98DE\u884C\u77F3\uFF0C\u519B\u65B9\u548C\u6D77\u76D7\u4E24\u5E2E\u4EBA\u9A6C\u90FD\u5728\u8FFD\u6740\u5E0C\u8FBE\u3002\u5E15\u514B\u5E26\u7740\u5E0C\u8FBE\u4E00\u8D77\u9003\u4EA1\uFF0C\u6700\u7EC8\u90FD\u6CA1\u6709\u9003\u51FA\u519B\u65B9\u7684\u624B\u4E2D\uFF0C\u5E0C\u8FBE\u88AB\u519B\u961F\u63B3\u8D70\u4E86\u3002\u4E3A\u6551\u670B\u53CB\uFF0C\u5E15\u514B\u53EA\u80FD\u9009\u62E9\u4E0E\u6D77\u76D7\u5408\u4F5C\u3002\u5E15\u514B\u4E0E\u6D77\u76D7\u6210\u529F\u6551\u51FA\u4E86\u5E0C\u8FBE\uFF0C\u540C\u65F6\uFF0C\u4ED6\u4EEC\u4E5F\u53D1\u73B0\u4E86\u519B\u65B9\u7684\u90AA\u6076\u8BA1\u5212\u3002\u4E3A\u4E86\u963B\u6B62\u519B\u65B9\u90AA\u6076\u8BA1\u5212\u7684\u5B9E\u65BD\uFF0C\u4ED6\u4EEC\u548C\u6D77\u76D7\u4E00\u8D77\u8E0F\u4E0A\u4E86\u5BFB\u627E\u62C9\u6BD4\u8FBE\u4E4B\u65C5\u3002"}},{name:"\u695A\u95E8\u7684\u4E16\u754C",source:"https://cdn.zoubuting.com/20220524/7eG65lXt/1000kb/hls/index.m3u8",cover:"/covers/\u695A\u95E8\u7684\u4E16\u754C.jpeg",score:"94",details:{alias:["\u771F\u4EBAShow(\u6E2F)","\u771F\u4EBA\u620F","\u771F\u4EBA\u4E16\u754C","\u695A\u95E8\u79C0","\u771F\u4EBA\u79C0"],directors:["\u5F7C\u5F97\xB7\u5A01\u5C14"],scriptwriter:["\u5B89\u5FB7\u9C81\xB7\u5C3C\u79D1\u5C14"],actors:["\u91D1\xB7\u51EF\u745E","\u52B3\u62C9\xB7\u7433\u59AE","\u827E\u5FB7\xB7\u54C8\u91CC\u65AF","\u8BFA\u4E9A\xB7\u827E\u9ED8\u91CC\u5947","\u5A1C\u5854\u838E\xB7\u9EA6\u514B\u827E\u970D\u6069"],types:["\u5267\u60C5","\u79D1\u5E7B"],region:"\u7F8E\u56FD",language:["\u82F1\u8BED"],date:"1998-06-05",duration:"103\u5206\u949F",IMDB:"tt0120382",intro:"\u695A\u95E8\uFF08\u91D1\u2022\u51EF\u745E Jim Carrey \u9970\uFF09\u662F\u4E00\u4E2A\u5E73\u51E1\u5F97\u4E0D\u80FD\u518D\u5E73\u51E1\u7684\u4EBA\uFF0C\u9664\u4E86\u4E00\u4E9B\u6709\u4E9B\u7A00\u5947\u7684\u7ECF\u5386\u4E4B\u5916\u2014\u2014\u521D\u604B\u5973\u53CB\u7A81\u7136\u5931\u8E2A\u3001\u6EBA\u6C34\u8EAB\u4EA1\u7684\u7236\u4EB2\u5FFD\u7136\u4F3C\u4E4E\u53C8\u51FA\u73B0\u5728\u773C\u524D\uFF0C\u4ED6\u548C\u7EDD\u5927\u591A\u657030\u591A\u5C81\u7684\u7F8E\u56FD\u7537\u4EBA\u7EDD\u65E0\u5F02\u6837\u3002\u8FD9\u4EE4\u4ED6\u500D\u611F\u5931\u843D\u3002\u4ED6\u4E5F\u66FE\u8BD5\u8FC7\u79BB\u5F00\u81EA\u5DF1\u751F\u6D3B\u4E86\u591A\u5E74\u7684\u5730\u65B9\uFF0C\u4F46\u603B\u56E0\u79CD\u79CD\u7406\u7531\u800C\u4E0D\u80FD\u6210\u884C\u3002\u76F4\u5230\u6709\u4E00\u5929\uFF0C\u4ED6\u5FFD\u7136\u53D1\u89C9\u81EA\u5DF1\u4F3C\u4E4E\u4E00\u76F4\u5728\u88AB\u4EBA\u8DDF\u8E2A\uFF0C\u65E0\u8BBA\u4ED6\u8D70\u5230\u54EA\u91CC\uFF0C\u5E72\u4EC0\u4E48\u4E8B\u60C5\u3002\u8FD9\u79CD\u611F\u89C9\u6108\u6765\u6108\u5F3A\u70C8\u3002\u695A\u95E8\u51B3\u5B9A\u4E0D\u60DC\u4E00\u5207\u4EE3\u4EF7\u9003\u79BB\u8FD9\u4E2A\u4ED6\u751F\u6D3B\u4E8630\u591A\u5E74\u7684\u5730\u65B9\uFF0C\u53BB\u5BFB\u627E\u4ED6\u7684\u521D\u604B\u5973\u53CB\u3002\u4F46\u4ED6\u5374\u53D1\u73B0\u81EA\u5DF1\u600E\u6837\u4E5F\u9003\u4E0D\u51FA\u53BB\u3002\u771F\u76F8\u5176\u5B9E\u5F88\u6B8B\u5FCD\u3002"}},{name:"\u8096\u7533\u514B\u7684\u6551\u8D4E",source:"https://vip.lzcdn2.com/20220318/7_a4fcd924/1200k/hls/mixed.m3u8",cover:"/covers/\u8096\u7533\u514B\u7684\u6551\u8D4E.jpeg",score:"97",details:{alias:"\u6708\u9ED1\u9AD8\u98DE(\u6E2F) / \u523A\u6FC01995(\u53F0) / \u5730\u72F1\u8BFA\u8A00 / \u94C1\u7A97\u5C81\u6708 / \u6D88\u9999\u514B\u7684\u6551\u8D4E",directors:["\u5F17\u5170\u514B\xB7\u5FB7\u62C9\u90A6\u7279"],scriptwriter:"\u5F17\u5170\u514B\xB7\u5FB7\u62C9\u90A6\u7279 / \u65AF\u8482\u82AC\xB7\u91D1",actors:"\u8482\u59C6\xB7\u7F57\u5BBE\u65AF / \u6469\u6839\xB7\u5F17\u91CC\u66FC / \u9C8D\u52C3\xB7\u5188\u987F / \u5A01\u5EC9\u59C6\xB7\u8D5B\u5FB7\u52D2 / \u514B\u5170\u897F\xB7\u5E03\u6717 / \u5409\u5C14\xB7\u8D1D\u7F57\u65AF / \u9A6C\u514B\xB7\u7F57\u65AF\u987F / \u8A79\u59C6\u65AF\xB7\u60E0\u7279\u6469 / \u6770\u5F17\u91CC\xB7\u5FB7\u66FC / \u62C9\u91CC\xB7\u5E03\u5170\u767B\u4F2F\u683C / \u5C3C\u5C14\xB7\u5409\u6069\u6258\u5229 / \u5E03\u8D56\u6069\xB7\u5229\u6BD4 / \u5927\u536B\xB7\u666E\u7F57\u74E6\u5C14 / \u7EA6\u745F\u592B\xB7\u52B3\u683C\u8BFA / \u7956\u5FB7\xB7\u585E\u514B\u5229\u62C9 / \u4FDD\u7F57\xB7\u9EA6\u514B\u5170\u5C3C / \u82AE\u59AE\xB7\u5E03\u83B1\u6069 / \u963F\u65B9\u7D22\xB7\u5F17\u91CC\u66FC / V\xB7J\xB7\u798F\u65AF\u7279 / \u5F17\u5170\u514B\xB7\u6885\u5FB7\u62C9\u8BFA / \u9A6C\u514B\xB7\u8FC8\u5C14\u65AF / \u5C3C\u5C14\xB7\u8428\u9ED8\u65AF / \u8010\u5FB7\xB7\u5DF4\u62C9\u7C73 / \u5E03\u8D56\u6069\xB7\u6234\u62C9\u7279 / \u5510\xB7\u9EA6\u514B\u9A6C\u7EB3\u65AF",types:"\u5267\u60C5 / \u72AF\u7F6A",region:"\u7F8E\u56FD",language:["\u82F1\u8BED"],date:"1994-09-10(\u591A\u4F26\u591A\u7535\u5F71\u8282) / 1994-10-14(\u7F8E\u56FD)",duration:"142\u5206\u949F",IMDB:"tt0120382",intro:"\u4E00\u573A\u8C0B\u6740\u6848\u4F7F\u94F6\u884C\u5BB6\u5B89\u8FEA\uFF08\u8482\u59C6\u2022\u7F57\u5BBE\u65AF Tim Robbins \u9970\uFF09\u8499\u51A4\u5165\u72F1\uFF0C\u8C0B\u6740\u59BB\u5B50\u53CA\u5176\u60C5\u4EBA\u7684\u6307\u63A7\u5C06\u56DA\u7981\u4ED6\u7EC8\u751F\u3002\u5728\u8096\u7533\u514B\u76D1\u72F1\u7684\u9996\u6B21\u73B0\u8EAB\u5C31\u8BA9\u76D1\u72F1\u201C\u5927\u54E5\u201D\u745E\u5FB7\uFF08\u6469\u6839\u2022\u5F17\u91CC\u66FC Morgan Freeman \u9970\uFF09\u5BF9\u4ED6\u53E6\u773C\u76F8\u770B\u3002\u745E\u5FB7\u5E2E\u52A9\u4ED6\u641E\u5230\u4E00\u628A\u77F3\u9524\u548C\u4E00\u5E45\u5973\u660E\u661F\u6D77\u62A5\uFF0C\u4E24\u4EBA\u6E10\u6210\u60A3\u96BE \u4E4B\u4EA4\u3002\u5F88\u5FEB\uFF0C\u5B89\u8FEA\u5728\u76D1\u72F1\u91CC\u5927\u663E\u5176\u624D\uFF0C\u62C5\u5F53\u76D1\u72F1\u56FE\u4E66\u7BA1\u7406\u5458\uFF0C\u5E76\u5229\u7528\u81EA\u5DF1\u7684\u91D1\u878D\u77E5\u8BC6\u5E2E\u52A9\u76D1\u72F1\u5B98\u907F\u7A0E\uFF0C\u5F15\u8D77\u4E86\u5178\u72F1\u957F\u7684\u6CE8\u610F\uFF0C\u88AB\u62DB\u81F4\u9EBE\u4E0B\u5E2E\u52A9\u5178\u72F1\u957F\u6D17\u9ED1\u94B1\u3002\u5076\u7136\u4E00\u6B21\uFF0C\u4ED6\u5F97\u77E5\u4E00\u540D\u65B0\u5165\u72F1\u7684\u5C0F\u5077\u80FD\u591F\u4F5C\u8BC1\u5E2E\u4ED6\u6D17\u8131\u8C0B\u6740\u7F6A\u3002\u71C3\u8D77\u4E00\u4E1D\u5E0C\u671B\u7684\u5B89\u8FEA\u627E\u5230\u4E86\u5178\u72F1\u957F\uFF0C\u5E0C\u671B\u4ED6\u80FD\u5E2E\u81EA\u5DF1\u7FFB\u6848\u3002\u9634\u9669\u4F2A\u5584\u7684\u72F1\u957F\u5047\u88C5\u7B54\u5E94\u5B89\u8FEA\uFF0C\u80CC\u540E\u5374\u6D3E\u4EBA\u6740\u6B7B\u5C0F\u5077\uFF0C\u8BA9\u4ED6\u552F\u4E00\u80FD\u5408\u6CD5\u51FA\u72F1\u7684\u5E0C\u671B\u6CEF\u706D\u3002\u6CAE\u4E27\u7684\u5B89\u8FEA\u5E76\u6CA1\u6709\u7EDD\u671B\uFF0C\u5728\u4E00\u4E2A\u7535\u95EA\u96F7\u9E23\u7684\u98CE\u96E8\u591C\uFF0C\u4E00\u573A\u6697\u85CF\u51E0\u5341\u5E74\u7684\u8D8A\u72F1\u8BA1\u5212\u8BA9\u4ED6\u81EA\u6211\u6551\u8D4E\uFF0C\u91CD\u83B7\u81EA\u7531\uFF01\u8001\u670B\u53CB\u745E\u5FB7\u5728\u4ED6\u7684\u9F13\u821E\u548C\u5E2E\u52A9\u4E0B\uFF0C\u4E5F\u52C7\u6562\u5730\u5954\u5411\u81EA\u7531\u3002\u672C\u7247\u83B7\u5F971995\u5E74\u5965\u65AF\u536110\u9879\u63D0\u540D\uFF0C\u4EE5\u53CA\u91D1\u7403\u5956\u3001\u571F\u661F\u5956\u7B49\u591A\u9879\u63D0\u540D\u3002"}},{name:"\u9ED1\u5BA2\u5E1D\u56FD1",source:"https://vip.lzcdn2.com/20220321/184_c1e1ee38/1200k/hls/mixed.m3u8",cover:"/covers/\u9ED1\u5BA2\u5E1D\u56FD.jpeg",score:"91",details:{alias:"22\u4E16\u7EAA\u6740\u4EBA\u7F51\u7EDC(\u6E2F) / \u5EFF\u4E8C\u4E16\u7EAA\u6740\u4EBA\u7F51\u7EDC(\u6E2F) / \u9A87\u5BA2\u4EFB\u52A1(\u53F0) / \u9A87\u5BA2\u5E1D\u56FD",directors:"\u8389\u8389\xB7\u6C83\u5353\u65AF\u57FA / \u62C9\u5A1C\xB7\u6C83\u5353\u65AF\u57FA",scriptwriter:"\u8389\u8389\xB7\u6C83\u5353\u65AF\u57FA / \u62C9\u5A1C\xB7\u6C83\u5353\u65AF\u57FA",actors:"\u57FA\u52AA\xB7\u91CC\u7EF4\u65AF / \u52B3\u4F26\u65AF\xB7\u83F2\u4EC0\u4F2F\u6069 / \u51EF\u745E-\u5B89\xB7\u83AB\u65AF / \u96E8\u679C\xB7\u7EF4\u6587 / \u683C\u6D1B\u4E3D\u4E9A\xB7\u798F\u65AF\u7279 / \u4E54\xB7\u6F58\u6258\u91CC\u4E9A\u8BFA / \u9A6C\u5E93\u65AF\xB7\u949F / \u6731\u5229\u5B89\xB7\u963F\u62C9\u6C57\u52A0 / \u9A6C\u7279\xB7\u591A\u5170 / \u8D1D\u7433\u8FBE\xB7\u9EA6\u514B\u6D1B\u91CC / \u5B89\u4E1C\u5C3C\u96F7\u6D3E\u514B / \u7F57\u4F2F\u7279\xB7\u6CF0\u52D2 / \u963F\u8FBE\xB7\u5C3C\u79D1\u5FB7\u83AB / \u7F57\u6E29\xB7\u7EF4\u7279 / \u5854\u739B\u62C9\xB7\u5E03\u6717 / \u7EB3\u5854\u8389\xB7\u7279\u73CD / \u6BD4\u5C14\xB7\u626C / \u514B\u91CC\u65AF\xB7\u65AF\u79D1\u7279 / \u7EB3\u8BB8\xB7\u57C3\u54F2\u987F",types:"\u52A8\u4F5C / \u79D1\u5E7B",region:"\u7F8E\u56FD",language:["\u82F1\u8BED"],date:"2000-01-14(\u4E2D\u56FD\u5927\u9646) / 1999-03-31(\u7F8E\u56FD)",duration:"136\u5206\u949F",IMDB:"tt0133093",intro:"\u4E00\u573A\u8C0B\u6740\u6848\u4F7F\u94F6\u884C\u5BB6\u5B89\u8FEA\uFF08\u8482\u59C6\u2022\u7F57\u5BBE\u65AF Tim Robbins \u9970\uFF09\u8499\u51A4\u5165\u72F1\uFF0C\u8C0B\u6740\u59BB\u5B50\u53CA\u5176\u60C5\u4EBA\u7684\u6307\u63A7\u5C06\u56DA\u7981\u4ED6\u7EC8\u751F\u3002\u5728\u8096\u7533\u514B\u76D1\u72F1\u7684\u9996\u6B21\u73B0\u8EAB\u5C31\u8BA9\u76D1\u72F1\u201C\u5927\u54E5\u201D\u745E\u5FB7\uFF08\u6469\u6839\u2022\u5F17\u91CC\u66FC Morgan Freeman \u9970\uFF09\u5BF9\u4ED6\u53E6\u773C\u76F8\u770B\u3002\u745E\u5FB7\u5E2E\u52A9\u4ED6\u641E\u5230\u4E00\u628A\u77F3\u9524\u548C\u4E00\u5E45\u5973\u660E\u661F\u6D77\u62A5\uFF0C\u4E24\u4EBA\u6E10\u6210\u60A3\u96BE \u4E4B\u4EA4\u3002\u5F88\u5FEB\uFF0C\u5B89\u8FEA\u5728\u76D1\u72F1\u91CC\u5927\u663E\u5176\u624D\uFF0C\u62C5\u5F53\u76D1\u72F1\u56FE\u4E66\u7BA1\u7406\u5458\uFF0C\u5E76\u5229\u7528\u81EA\u5DF1\u7684\u91D1\u878D\u77E5\u8BC6\u5E2E\u52A9\u76D1\u72F1\u5B98\u907F\u7A0E\uFF0C\u5F15\u8D77\u4E86\u5178\u72F1\u957F\u7684\u6CE8\u610F\uFF0C\u88AB\u62DB\u81F4\u9EBE\u4E0B\u5E2E\u52A9\u5178\u72F1\u957F\u6D17\u9ED1\u94B1\u3002\u5076\u7136\u4E00\u6B21\uFF0C\u4ED6\u5F97\u77E5\u4E00\u540D\u65B0\u5165\u72F1\u7684\u5C0F\u5077\u80FD\u591F\u4F5C\u8BC1\u5E2E\u4ED6\u6D17\u8131\u8C0B\u6740\u7F6A\u3002\u71C3\u8D77\u4E00\u4E1D\u5E0C\u671B\u7684\u5B89\u8FEA\u627E\u5230\u4E86\u5178\u72F1\u957F\uFF0C\u5E0C\u671B\u4ED6\u80FD\u5E2E\u81EA\u5DF1\u7FFB\u6848\u3002\u9634\u9669\u4F2A\u5584\u7684\u72F1\u957F\u5047\u88C5\u7B54\u5E94\u5B89\u8FEA\uFF0C\u80CC\u540E\u5374\u6D3E\u4EBA\u6740\u6B7B\u5C0F\u5077\uFF0C\u8BA9\u4ED6\u552F\u4E00\u80FD\u5408\u6CD5\u51FA\u72F1\u7684\u5E0C\u671B\u6CEF\u706D\u3002\u6CAE\u4E27\u7684\u5B89\u8FEA\u5E76\u6CA1\u6709\u7EDD\u671B\uFF0C\u5728\u4E00\u4E2A\u7535\u95EA\u96F7\u9E23\u7684\u98CE\u96E8\u591C\uFF0C\u4E00\u573A\u6697\u85CF\u51E0\u5341\u5E74\u7684\u8D8A\u72F1\u8BA1\u5212\u8BA9\u4ED6\u81EA\u6211\u6551\u8D4E\uFF0C\u91CD\u83B7\u81EA\u7531\uFF01\u8001\u670B\u53CB\u745E\u5FB7\u5728\u4ED6\u7684\u9F13\u821E\u548C\u5E2E\u52A9\u4E0B\uFF0C\u4E5F\u52C7\u6562\u5730\u5954\u5411\u81EA\u7531\u3002\u672C\u7247\u83B7\u5F971995\u5E74\u5965\u65AF\u536110\u9879\u63D0\u540D\uFF0C\u4EE5\u53CA\u91D1\u7403\u5956\u3001\u571F\u661F\u5956\u7B49\u591A\u9879\u63D0\u540D\u3002"}},{name:"\u8336\u9986",source:"https://vip.lzcdn2.com/20220321/165_6eb8a25a/1200k/hls/mixed.m3u8",cover:"/covers/\u8336\u9986.jpeg",score:"91",details:{alias:"The Teahouse",directors:"\u8C22\u6DFB",scriptwriter:"\u8001\u820D",actors:"\u4E8E\u662F\u4E4B / \u90D1\u6995 / \u84DD\u5929\u91CE / \u82F1\u82E5\u8BDA / \u9EC4\u5B97\u6D1B / \u7AE5\u8D85 / \u91D1\u662D / \u6797\u8FDE\u6606 / \u725B\u661F\u4E3D / \u8C2D\u5B97\u5C27 / \u7AE5\u5F1F / \u5434\u6DD1\u6606 / \u80E1\u5B97\u6E29 / \u7A0B\u4E2D / \u674E\u5927\u5343 / \u674E\u6E90 / \u674E\u7FD4 / \u5F20\u77B3 / \u4EFB\u5B9D\u8D24 / \u5C1A\u4E3D\u5A1F / \u7C73\u94C1\u589E / \u7530\u6625\u594E / \u51AF\u589E\u7965 / \u96F7\u98DE / \u6797\u4E1C\u5347 / \u5B5F\u747E / \u5B59\u5CFB\u5CF0 / \u5E73\u539F / \u66F9\u4E16\u9AA7 / \u738B\u5927\u5E74 / \u738B\u6DD1\u534E / \u5F20\u534E / \u4E01\u6D77\u6D9B / \u6731\u65ED / \u5B59\u656C\u4FEE / \u66F9\u5B5F\u6D6A / \u4F55\u5EB7\u7406",types:"\u5267\u60C5 / \u5386\u53F2",region:"\u4E2D\u56FD\u5927\u9646",language:["\u6C49\u8BED\u666E\u901A\u8BDD"],date:"1982(\u4E2D\u56FD\u5927\u9646)",duration:"118\u5206\u949F",IMDB:"tt1395030",intro:"\u4E16\u7EAA\u4E4B\u4EA4\uFF0C\u53E4\u8001\u7684\u4E2D\u56FD\u6B63\u8FCE\u6765\u524D\u6240\u672A\u6709\u7684\u5DE8\u5927\u53D8\u9769\u3002\u8001\u6001\u9F99\u949F\u7684\u5927\u6E05\u738B\u671D\u6447\u6447\u6B32\u5760\uFF0C\u516D\u541B\u5B50\u7684\u9C9C\u8840\u65E0\u6CD5\u963B\u6B62\u5386\u53F2\u8F66\u8F6E\u7684\u6EDA\u52A8\uFF0C\u8001\u5317\u4EAC\u57CE\u7684\u4E0A\u7A7A\u98CE\u4E91\u53D8\u5E7B\uFF0C\u6CE2\u8C32\u4E91\u8BE1\u3002\u738B\u5229\u53D1\uFF08\u4E8E\u662F\u4E4B \u9970\uFF09\uFF0C\u5317\u4EAC\u57CE\u5185\u88D5\u6CF0\u8336\u9986\u7684\u5E74\u8F7B\u638C\u67DC\u3002\u4ED6\u8C28\u8BB0\u7236\u4EB2\u7684\u6559\u8BF2\uFF0C\u4F53\u9762\u5468\u5168\u5730\u8FCE\u9001\u56DB\u65B9\u5BBE\u5BA2\u3002\u5C0F\u5C0F\u7684\u8336\u9986\u5185\uFF0C\u4E09\u6559\u4E5D\u6D41\u5404\u8272\u4EBA\u7B49\u7A7F\u68AD\u4E8E\u6B64\uFF1A\u63D0\u7B3C\u67B6\u9E1F\u54C0\u53F9\u65F6\u8FD0\u7684\u677E\u4E8C\u7237\uFF08\u9EC4\u5B97\u6D1B \u9970\uFF09\uFF1B\u6168\u53F9\u56FD\u4E4B\u5C06\u4EA1\u7684\u521A\u6BC5\u6EE1\u4EBA\u5E38\u56DB\u7237\uFF08\u90D1\u6995 \u9970\uFF09\uFF1B\u4E00\u5FC3\u8C0B\u6C42\u5B9E\u4E1A\u6551\u56FD\u7684\u79E6\u4EF2\u4E49\uFF08\u84DD\u5929\u91CE \u9970\uFF09\uFF1B\u4E27\u5C3D\u5929\u826F\u4E70\u5356\u4EBA\u53E3\u7684\u5218\u9EBB\u5B50\uFF08\u82F1\u82E5\u8BDA \u9970\uFF09\uFF1B\u6253\u7B97\u5A36\u8001\u5A46\u7684\u5E9E\u592A\u76D1\uFF08\u7AE5\u8D85 \u9970\uFF09\u2026\u2026\u4F60\u65B9\u5531\u7F62\u6211\u767B\u573A\uFF0C\u5C0F\u5C0F\u8336\u9986\u4E4B\u5185\u6F14\u5C3D\u4E16\u95F4\u7684\u6CA7\u6851\u4E0E\u51C4\u51C9\u2026\u2026\u672C\u7247\u6839\u636E\u8001\u820D\u540C\u540D\u539F\u7740\u6539\u7F16\uFF0C\u5E761983\u5E74\u7B2C3\u5C4A\u4E2D\u56FD\u7535\u5F71\u91D1\u9E21\u5956\u7279\u522B\u5956\u3001\u6587\u5316\u90E81982\u5E74\u4F18\u79C0\u5F71\u7247\u5956\u7279\u522B\u5956\u3002"}},{name:"\u5343\u4E0E\u5343\u5BFB",source:"https://sd3.taopianplay1.com:43333/c56b1bc09da3/HD/2023-01-07/1/bd867764cf92/b7f72ceefe5e/playlist.m3u8",cover:"/covers/\u5343\u4E0E\u5343\u5BFB.webp",score:"94",details:{alias:"\u795E\u9690\u5C11\u5973(\u53F0) / \u5343\u4E0E\u5343\u5BFB\u7684\u795E\u9690 / Spirited Away / A Voyage of Chihiro / Sen to Chihiro no kamikakushi",directors:"\u5BAB\u5D0E\u9A8F",scriptwriter:"\u5BAB\u5D0E\u9A8F",actors:"\u67CA\u7460\u7F8E / \u5165\u91CE\u81EA\u7531 / \u590F\u6728\u771F\u7406 / \u83C5\u539F\u6587\u592A / \u4E2D\u6751\u5F70\u7537 / \u7389\u4E95\u5915\u6D77 / \u795E\u6728\u9686\u4E4B\u4ECB / \u5185\u85E4\u521A\u5FD7 / \u6CFD\u53E3\u9756\u5B50 / \u6211\u4FEE\u9662\u8FBE\u4E5F / \u5927\u6CC9\u6D0B / \u5C0F\u6797\u90C1\u592B / \u4E0A\u6761\u6052\u5F66 / \u5C0F\u91CE\u6B66\u5F66",types:"\u5267\u60C5 / \u52A8\u753B / \u5947\u5E7B",region:"\u65E5\u672C",language:["\u65E5\u8BED"],date:"2019-06-21(\u4E2D\u56FD\u5927\u9646) / 2001-07-20(\u65E5\u672C)",duration:"125\u5206\u949F",IMDB:"tt0245429",intro:"\u5343\u5BFB\u548C\u7238\u7238\u5988\u5988\u4E00\u540C\u9A71\u8F66\u524D\u5F80\u65B0\u5BB6\uFF0C\u5728\u90CA\u5916\u7684\u5C0F\u8DEF\u4E0A\u4E0D\u614E\u8FDB\u5165\u4E86\u795E\u79D8\u7684\u96A7\u9053\u2014\u2014\u4ED6\u4EEC\u53BB\u5230\u4E86\u53E6\u5916\u4E00\u4E2A\u8BE1\u5F02\u4E16\u754C\u2014\u4E00\u4E2A\u4E2D\u4E16\u7EAA\u7684\u5C0F\u9547\u3002\u8FDC\u5904\u98D8\u6765\u98DF\u7269\u7684\u9999\u5473\uFF0C\u7238\u7238\u5988\u5988\u5927\u5FEB\u6735\u9890\uFF0C\u5B70\u6599\u4E4B\u540E\u53D8\u6210\u4E86\u732A\uFF01\u8FD9\u65F6\u5C0F\u9547\u4E0A\u6E10\u6E10\u6765\u4E86\u8BB8\u591A\u6837\u5B50\u53E4\u602A\u3001\u534A\u900F\u660E\u7684\u4EBA\u3002\u5343\u5BFB\u4ED3\u7687\u9003\u51FA\uFF0C\u4E00\u4E2A\u53EB\u5C0F\u767D\u7684\u4EBA\u6551\u4E86\u4ED6\uFF0C\u5582\u4E86\u5979\u963B\u6B62\u8EAB\u4F53\u6D88 \u5931\u7684\u836F\uFF0C\u5E76\u4E14\u544A\u8BC9\u5979\u600E\u6837\u53BB\u627E\u9505\u7089\u7237\u7237\u4EE5\u53CA\u6C64\u5A46\u5A46\uFF0C\u800C\u4E14\u5FC5\u987B\u83B7\u5F97\u4E00\u4EFD\u5DE5\u4F5C\u624D\u80FD\u4E0D\u88AB\u9B54\u6CD5\u53D8\u6210\u522B\u7684\u4E1C\u897F\u3002\u5343\u5BFB\u5728\u5C0F\u767D\u7684\u5E2E\u52A9\u4E0B\u5E78\u8FD0\u5730\u83B7\u5F97\u4E86\u4E00\u4EFD\u5728\u6D74\u6C60\u6253\u6742\u7684\u5DE5\u4F5C\u3002\u6E10\u6E10\u5979\u4E0D\u518D\u88AB\u90A3\u4E9B\u602A\u6A21\u602A\u6837\u7684\u4EBA\u5413\u5012\uFF0C\u5E76\u4ECE\u5C0F\u73B2\u90A3\u513F\u77E5\u9053\u4E86\u5C0F\u767D\u662F\u51F6\u6076\u7684\u6C64\u5A46\u5A46\u7684\u5F1F\u5B50\u3002\u4E00\u6B21\uFF0C\u5343\u5BFB\u53D1\u73B0\u5C0F\u767D\u88AB\u4E00\u7FA4\u767D\u8272\u98DE\u821E\u7684\u7EB8\u4EBA\u6253\u4F24\uFF0C\u4E3A\u4E86\u6551\u53D7\u4F24\u7684\u5C0F\u767D\uFF0C\u5979\u7528\u6CB3\u795E\u9001\u7ED9\u5979\u7684\u836F\u4E38\u9A71\u51FA\u4E86\u5C0F\u767D\u8EAB\u4F53\u5185\u7684\u5C01\u5370\u4EE5\u53CA\u5B88\u5C01\u5370\u7684\u5C0F\u5996\u7CBE\uFF0C\u4F46\u5C0F\u767D\u8FD8\u662F\u6CA1\u6709\u9192\u8FC7\u6765\u3002\u4E3A\u4E86\u6551\u5C0F\u767D\uFF0C\u5343\u5BFB\u53C8\u8E0F\u4E0A\u4E86\u5979\u7684\u5192\u9669\u4E4B\u65C5\u3002"}},{name:"\u9B54\u5973\u5B85\u6025\u4FBF",source:"https://vip.lzcdn2.com/20220323/314_0f4d8df9/1200k/hls/mixed.m3u8",cover:"/covers/\u9B54\u5973\u5B85\u6025\u4FBF.jpeg",score:"87",details:{alias:"\u9B54\u5973\u742A\u742A(\u53F0) / \u5C0F\u9B54\u5973\u9650\u65F6\u4E13\u9001 / Kiki's Delivery Service",directors:"\u5BAB\u5D0E\u9A8F",scriptwriter:"\u5BAB\u5D0E\u9A8F",actors:"\u9AD8\u5C71\u5357 / \u4F50\u4E45\u95F4\u73B2 / \u6237\u7530\u60E0\u5B50 / \u5C71\u53E3\u80DC\u5E73 / \u4FE1\u6CFD\u4E09\u60E0\u5B50 / \u52A0\u85E4\u6CBB\u5B50 / \u5173\u5F18\u5B50 / \u4E09\u6D66\u6D69\u4E00 / \u5C71\u5BFA\u5B8F\u4E00 / \u4E95\u4E0A\u559C\u4E45\u5B50 / \u6E0A\u5D0E\u7531\u91CC\u5B50 / \u571F\u4E95\u7F8E\u52A0 / \u571F\u5E08\u5B5D\u4E5F / \u6D45\u4E95\u6DD1\u5B50 / \u9F50\u85E4\u660C / \u897F\u6751\u77E5\u9053 / \u5C0F\u6797\u4F18\u5B50 / \u6C60\u6C34\u901A\u6D0B / \u8FBB\u4EB2\u516B / \u5927\u585A\u660E\u592B / \u5742\u672C\u5343\u590F / \u7530\u53E3\u6602 / \u952E\u672C\u666F\u5B50 / \u6D25\u8D3A\u6709\u5B50 / \u9F9F\u4E95\u82B3\u5B50 / \u4E38\u5C71\u88D5\u5B50",types:"\u52A8\u753B / \u5947\u5E7B / \u5192\u9669",region:"\u65E5\u672C",language:["\u65E5\u8BED"],date:"1989-07-29(\u65E5\u672C)",duration:"103\u5206\u949F",IMDB:"tt0097814",intro:"\u742A\u742A\u4ECA\u5E7413\u5C81\u4E86\uFF0C\u6309\u7167\u9B54\u6CD5\u754C\u7684\u89C4\u77E9\uFF0C\u9B54\u6CD5\u5C11\u5973\u5E74\u6EE113\u5C81\u5C31\u8981\u51FA\u5916\u8FDB\u884C\u4E3A\u671F\u4E00\u5E74\u7684\u4FEE\u884C\u3002\u6240\u4EE5\u742A\u742A\u5E26\u7740\u5BA0\u7269\u9ED1\u732B\u5409\u5409\u8E0F\u4E0A\u4E86\u4FEE\u884C\u4E4B\u65C5\u3002\u7136\u800C\uFF0C\u4FEE\u884C\u4E4B\u65C5\u5F00\u59CB\u5F97\u5E76\u4E0D\u987A\u5229\uFF0C\u5F53\u742A\u742A\u6765\u5230\u6D77\u8FB9\u4E00\u5EA7\u5927\u57CE\u5E02\u65F6\uFF0C\u4EBA\u4EEC\u5E76\u6CA1\u6709\u6B22\u8FCE\u5979\u7684\u5230\u6765\uFF0C\u4EBA\u4EBA\u90FD\u4E0D\u642D\u7406\u5979\u3002\u5E78\u4E8F\u742A\u742A\u6709\u4E00\u9897\u5584\u826F\u7684\u5FC3\uFF0C\u5F53\u5979\u62FE\u5230\u4E86\u4E00\u4EF6\u522B\u4EBA\u7684\u5931\u7269\u65F6\uFF0C\u70ED\u5FC3\u7684\u742A\u742A\u627E\u5230\u4E86\u5931\u4E3B\u3002\u5979\u7684\u5584\u826F\u8D62\u5F97\u4E86\u9762\u5305\u5E97\u8001\u677F\u5A18\u7684\u597D\u611F\uFF0C\u742A\u742A\u5C31\u5728\u9762\u5305\u5E97\u5F00\u59CB\u4E86\u5979\u7528\u98DE\u884C\u9B54\u6CD5\u4E3A\u5BA2\u4EBA\u670D\u52A1\u7684\u5FEB\u9012\u4E1A\u52A1\u3002\u742A\u742A\u5F88\u5FEB\u9002\u5E94\u4E86\u65B0\u73AF\u5883\uFF0C\u4E00\u6B21\uFF0C\u4E00\u4E2A\u70ED\u8877\u4E8E\u98DE\u673A\u5236\u9020\u7684\u7537\u5B69\u9080\u8BF7\u742A\u742A\u53BB\u53C2\u52A0\u98DE\u884C\u4FF1\u4E50\u90E8\u7684\u805A\u4F1A\uFF0C\u9014\u4E2D\u742A\u742A\u56E0\u4E3A\u5E2E\u4E00\u4F4D\u8001\u5927\u5A18\u9001\u4E1C\u897F\u800C\u88AB\u96E8\u6DCB\u4E86\u3002\u4ECE\u6B64\uFF0C\u742A\u742A\u7A81\u7136\u53D1\u73B0\u81EA\u5DF1\u7684\u9B54\u6CD5\u6B63\u5728\u4E00\u5929\u5929\u53D8\u5F31\u3002"}}],S1=[{name:"UNIX\u73AF\u5883\u9AD8\u7EA7\u7F16\u7A0B\uFF08\u7B2C3\u7248 \u82F1\u6587pdf\uFF09",source:"/books/Advanced Programming in the UNIX\xAE Environment (W. Richard Stevens  Stephen A. Rago [Stevens etc.) (Z-Library).pdf",cover:"/covers/APUE-en.jpg",score:"97",details:{author:["\u53F2\u8482\u6587\u65AF (W.Richard Stevens) / \u62C9\u6208 (Stephen A.Rago)"],producer:["\u5F02\u6B65\u56FE\u4E66"],publisher:"\u4EBA\u6C11\u90AE\u7535\u51FA\u7248\u793E",translator:"",subTitle:"",date:"2014-6-1",pageNumber:812,price:"128.00\u5143",binding:"\u5E73\u88C5",series:"",ISBN:"9787115352118"}},{name:"UNIX\u73AF\u5883\u9AD8\u7EA7\u7F16\u7A0B\uFF08\u7B2C3\u7248\uFF09",source:"/books/UNIX\u73AF\u5883\u9AD8\u7EA7\u7F16\u7A0B (W. Richard Stevens, Stephen A. Rago) (Z-Library).epub",cover:"/covers/APUE.jpg",score:"97",details:{author:["\u53F2\u8482\u6587\u65AF (W.Richard Stevens) / \u62C9\u6208 (Stephen A.Rago)"],producer:["\u5F02\u6B65\u56FE\u4E66"],publisher:"\u4EBA\u6C11\u90AE\u7535\u51FA\u7248\u793E",translator:"\u621A\u6B63\u4F1F / \u5F20\u4E9A\u82F1 / \u5C24\u664B\u5143",subTitle:"",date:"2014-6-1",pageNumber:812,price:"128.00\u5143",binding:"\u5E73\u88C5",series:"",ISBN:"9787115352118"}},{name:"\u7A0B\u5E8F\u5458\u4FEE\u70BC\u4E4B\u9053\uFF08\u7B2C2\u7248\uFF09",source:"/books/\u7A0B\u5E8F\u5458\u4FEE\u70BC\u4E4B\u9053\uFF1A\u901A\u5411\u52A1\u5B9E\u7684\u6700\u9AD8\u5883\u754C\uFF08\u7B2C2\u7248\uFF09 ((\u7F8E\uFF09David Thomas\uFF08\u5927\u536B\xB7\u6258\u9A6C\u65AF\uFF09\uFF0CAndrew Hunt\uFF08\u5B89\u5FB7\u9C81\xB7\u4EA8\u7279\uFF09) (Z-Library).epub",cover:"/covers/\u7A0B\u5E8F\u5458\u4FEE\u70BC\u4E4B\u9053.jpg",score:"92",details:{author:["[\u7F8E] David Thomas / [\u7F8E] Andrew Hunt"],producer:["\u535A\u6587\u89C6\u70B9"],publisher:"\u7535\u5B50\u5DE5\u4E1A\u51FA\u7248\u793E",translator:"\u4E91\u98CE",subTitle:"\u901A\u5411\u52A1\u5B9E\u7684\u6700\u9AD8\u5883\u754C",date:"2020-4-1",pageNumber:344,price:"89.00\u5143",binding:"\u5E73\u88C5",series:"",ISBN:"9787121384356"}},{name:"\u53EF\u80FD\u6027\u7684\u827A\u672F",source:"/books/\u53EF\u80FD\u6027\u7684\u827A\u672F\uFF1A\u6BD4\u8F83\u653F\u6CBB\u5B6630\u8BB2\uFF08\u5B66\u8005\u5218\u745C\u6BD4\u8F83\u653F\u6CBB\u5B66\u65B0\u8457\uFF0C\u8DF3\u51FA\u73B0\u8C61\uFF0C\u901A\u8FC7\u6BD4\u8F83\u6D1E\u5BDF\u653F\u6CBB\uFF0C\u7A81\u7834\u8BA4\u77E5\u504F\u89C1\uFF0C\u5728\u6D69\u701A\u7684\u53EF\u80FD\u6027\u4E2D\u7406\u89E3\u6211\u4EEC\u81EA\u8EAB \u7406\u60F3\u56FD... (Z-Library).epub",cover:"/covers/\u53EF\u80FD\u6027\u7684\u827A\u672F.jpg",score:"91",details:{author:["\u5218\u745C"],producer:["\u7406\u60F3\u56FD"],publisher:"\u5E7F\u897F\u5E08\u8303\u5927\u5B66\u51FA\u7248\u793E",translator:"",subTitle:"\u6BD4\u8F83\u653F\u6CBB\u5B6630\u8BB2",date:"2022-4",pageNumber:384,price:"82.00\u5143",binding:"\u7CBE\u88C5",series:"",ISBN:"9787559848048"}},{name:"UNIX\u7F16\u7A0B\u827A\u672F",source:"/books/UNIX\u7F16\u7A0B\u827A\u672F (\u3010\u7F8E\u3011\u7406\u66FC\u5FB7 (Raymond E.S.)) (Z-Library).epub",cover:"/covers/Unix\u7F16\u7A0B\u827A\u672F.jpg",score:"90",details:{author:["[\u7F8E\u56FD] Eric S\xB7Raymond"],producer:["\u535A\u6587\u89C6\u70B9"],publisher:"\u7535\u5B50\u5DE5\u4E1A\u51FA\u7248\u793E",translator:"\u59DC\u5B8F / \u4F55\u6E90 / \u8521\u6653\u4FCA",subTitle:"",date:"2006-2",pageNumber:525,price:"59.00\u5143",binding:"\u5E73\u88C5",series:"",ISBN:"9787121021169"}},{name:"\u5C3C\u5B89\u5FB7\u7279\u4EBA",source:"/books/\u5C3C\u5B89\u5FB7\u7279\u4EBA (\u65AF\u4E07\u7279\xB7\u5E15\u535A) (Z-Library).epub",cover:"/covers/\u5C3C\u5B89\u5FB7\u7279\u4EBA.jpg",score:"83",details:{author:["[\u745E\u5178] \u65AF\u4E07\u7279\xB7\u5E15\u535A\uFF08Svante P\xE4\xE4bo\uFF09"],producer:["\u540E\u6D6A"],publisher:"\u6D59\u6C5F\u6559\u80B2\u51FA\u7248\u793E",translator:"\u590F\u5FD7 / \u6768\u7115\u660E",subTitle:"",date:"2018-12",pageNumber:336,price:"68.00\u5143",binding:"\u7CBE\u88C5",series:"",ISBN:"9787553678351"}},{name:"\u54F2\u5B66\u7684\u6545\u4E8B",source:"/books/\u54F2\u5B66\u7684\u6545\u4E8B\u3010\u8BA9\u6DF1\u5965\u7684\u54F2\u5B66\u7ACB\u523B\u751F\u52A8\u8D77\u6765\u4E0A\u5E02\u9996\u5E74\u8FDE\u7EED\u518D\u724822\u6B21\uFF0C\u8FC5\u901F\u8BD1\u621018\u79CD\u8BED\u8A00\uFF0C\u6380\u8D77\u5168\u7403\u54F2\u5B66\u70ED\u6F6E\u3011 (\u5A01\u5C14\u2022\u675C\u5170\u7279 (Will Durant)) (Z-Library).epub",cover:"/covers/\u54F2\u5B66\u7684\u6545\u4E8B.jpg",score:"88",details:{author:["[\u7F8E] \u5A01\u5C14\xB7\u675C\u5170\u7279"],publisher:"\u65B0\u661F\u51FA\u7248\u793E",producer:["\u65B0\u7ECF\u5178\u6587\u5316"],translator:"\u848B\u5251\u5CF0 / \u5F20\u7A0B\u7A0B",subTitle:"",date:"2013-3",pageNumber:432,price:"49.00\u5143",binding:"\u5E73\u88C5",series:"",ISBN:"9787513306331",originalTitle:"The Story of Philosophy"}},{name:"\u5199\u4F5C\u662F\u95E8\u624B\u827A",source:"/books/The Craft of Writing \u5199\u4F5C\u662F\u95E8\u624B\u827A (\u5218\u519B\u5F3A) (Z-Library).epub",cover:"/covers/\u5199\u4F5C\u662F\u95E8\u624B\u827A.jpg",score:"91",details:{author:["\u5218\u519B\u5F3A"],publisher:"\u5E7F\u897F\u5E08\u8303\u5927\u5B66\u51FA\u7248\u793E",producer:[],translator:"",subTitle:"",date:"2020-7-30",pageNumber:316,price:"58.00\u5143",binding:"\u5E73\u88C5",series:"",ISBN:"9787559830043"}},{name:"And Then There Were None",source:"/books/And Then There Were None (Agatha Christie) (Z-Library).epub",cover:"/covers/\u65E0\u4EBA\u751F\u8FD8.jpg",score:"100",details:{author:["Agatha Christie"],publisher:"William Morrow Paperbacks",producer:[],translator:"",subTitle:"",date:"2011",pageNumber:272,price:"",binding:"",series:"",ISBN:"9780062073471"}},{name:"\u5C0F\u8BF4\u7684\u516B\u767E\u4E07\u79CD\u5199\u6CD5",source:"/books/\u5C0F\u8BF4\u7684\u516B\u767E\u4E07\u79CD\u5199\u6CD5 (\u52B3\u4F26\u65AF\xB7\u5E03\u6D1B\u514B) (Z-Library).epub",cover:"/covers/\u5C0F\u8BF4\u7684\u516B\u767E\u4E07\u79CD\u5199\u6CD5.jpg",score:"74",details:{author:["[\u7F8E] \u52B3\u4F26\u65AF\xB7\u5E03\u6D1B\u514B"],publisher:"\u4E2D\u56FD\u53CB\u8C0A\u51FA\u7248\u516C\u53F8",producer:["\u540E\u6D6A"],translator:"\u90B5\u9038",subTitle:"",date:"2019-7",pageNumber:368,price:"56.00\u5143",binding:"\u5E73\u88C5",series:"\u540E\u6D6A\u521B\u610F\u5199\u4F5C\u6559\u5BA4",ISBN:"9787505746367"}},{name:"Harry Potter and the Sorcerer's Stone",source:"/books/Harry Potter and the Sorcerers Stone (J.K. Rowling) (Z-Library).epub",cover:"/covers/\u54C8\u5229\u6CE2\u7279\u4E0E\u9B54\u6CD5\u77F3.jpg",score:"74",details:{author:["J\xB7K\xB7Rowling"],publisher:"Arthur A. Levine Books",producer:["Children's ed"],translator:"",subTitle:"",date:"1998",pageNumber:309,price:"56.00\u5143",binding:"\u5E73\u88C5",series:"Harry Potter #1",ISBN:"9780590353403"}}],Xw=[{name:"x",musicSrc:"http://other.player.rc01.sycdn.kuwo.cn/d84d12b10a48e1c9ac966315a66dd9a2/648546a7/resource/n1/12/69/1531173933.mp3",cover:"",lyric:"",duration:0,details:{singer:[],date:""}}],D1=[{name:"SudoKu",source:"https://jujuxi.xyz/sudoku",score:"100",cover:"/covers/SudoKu.jpg",details:{author:["liuqinh2s"],date:"2023-10-23"}}];const Io=r=>{const{list:e,index:t}=r,n=Ty(),[i,s]=be.exports.useState(t);return pe(Xt,{children:pe("ul",{className:"category",children:(()=>{let o=[];for(let u=0;u<e.length;u++){const{title:l,path:c}=e[u];o.push(pe("li",{className:u===i?"active":"",onClick:()=>{s(u),n("/"+c)},children:l},u))}return o})()})})},Zw=()=>{const r=Ro()||{};return Ut(Xt,{children:[pe(Io,{list:Lo,index:0}),pe(DT,{data:qf[r.id||0]}),pe(Yw,{source:qf[r.id||0].source})]})};var Dh={},Zl={},m0={exports:{}},Qw="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Jw=Qw,e5=Jw;function w1(){}function _1(){}_1.resetWarningCache=w1;var t5=function(){function r(n,i,s,a,o,u){if(u!==e5){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}r.isRequired=r;function e(){return r}var t={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:e,element:r,elementType:r,instanceOf:e,node:r,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:_1,resetWarningCache:w1};return t.PropTypes=t,t};m0.exports=t5();var F1={},ko={},Yr={exports:{}},b1={exports:{}},r5=void 0,R1=function(r){return r!==r5&&r!==null},n5=R1,i5={object:!0,function:!0,undefined:!0},s5=function(r){return n5(r)?hasOwnProperty.call(i5,typeof r):!1},a5=s5,o5=function(r){if(!a5(r))return!1;try{return r.constructor?r.constructor.prototype===r:!1}catch{return!1}},u5=o5,l5=function(r){if(typeof r!="function"||!hasOwnProperty.call(r,"length"))return!1;try{if(typeof r.length!="number"||typeof r.call!="function"||typeof r.apply!="function")return!1}catch{return!1}return!u5(r)},c5=l5,h5=/^\s*class[\s{/}]/,f5=Function.prototype.toString,d5=function(r){return!(!c5(r)||h5.test(f5.call(r)))},p5=function(){var r=Object.assign,e;return typeof r!="function"?!1:(e={foo:"raz"},r(e,{bar:"dwa"},{trzy:"trzy"}),e.foo+e.bar+e.trzy==="razdwatrzy")},wh,Qg;function g5(){return Qg||(Qg=1,wh=function(){try{return Object.keys("primitive"),!0}catch{return!1}}),wh}var m5=function(){},v5=m5(),v0=function(r){return r!==v5&&r!==null},_h,Jg;function E5(){if(Jg)return _h;Jg=1;var r=v0,e=Object.keys;return _h=function(t){return e(r(t)?Object(t):t)},_h}var Fh,em;function y5(){return em||(em=1,Fh=g5()()?Object.keys:E5()),Fh}var bh,tm;function x5(){if(tm)return bh;tm=1;var r=v0;return bh=function(e){if(!r(e))throw new TypeError("Cannot use null or undefined");return e},bh}var Rh,rm;function A5(){if(rm)return Rh;rm=1;var r=y5(),e=x5(),t=Math.max;return Rh=function(n,i){var s,a,o=t(arguments.length,2),u;for(n=Object(e(n)),u=function(l){try{n[l]=i[l]}catch(c){s||(s=c)}},a=1;a<o;++a)i=arguments[a],r(i).forEach(u);if(s!==void 0)throw s;return n},Rh}var C5=p5()?Object.assign:A5(),T5=v0,S5=Array.prototype.forEach,D5=Object.create,w5=function(r,e){var t;for(t in r)e[t]=r[t]},_5=function(r){var e=D5(null);return S5.call(arguments,function(t){!T5(t)||w5(Object(t),e)}),e},Lh="razdwatrzy",F5=function(){return typeof Lh.contains!="function"?!1:Lh.contains("dwa")===!0&&Lh.contains("foo")===!1},Ih,nm;function b5(){if(nm)return Ih;nm=1;var r=String.prototype.indexOf;return Ih=function(e){return r.call(this,e,arguments[1])>-1},Ih}var R5=F5()?String.prototype.contains:b5(),Gu=R1,im=d5,L1=C5,I1=_5,Za=R5,L5=b1.exports=function(r,e){var t,n,i,s,a;return arguments.length<2||typeof r!="string"?(s=e,e=r,r=null):s=arguments[2],Gu(r)?(t=Za.call(r,"c"),n=Za.call(r,"e"),i=Za.call(r,"w")):(t=i=!0,n=!1),a={value:e,configurable:t,enumerable:n,writable:i},s?L1(I1(s),a):a};L5.gs=function(r,e,t){var n,i,s,a;return typeof r!="string"?(s=t,t=e,e=r,r=null):s=arguments[3],Gu(e)?im(e)?Gu(t)?im(t)||(s=t,t=void 0):t=void 0:(s=e,e=t=void 0):e=void 0,Gu(r)?(n=Za.call(r,"c"),i=Za.call(r,"e")):(n=!0,i=!1),a={get:e,set:t,configurable:n,enumerable:i},s?L1(I1(s),a):a};var I5=function(r){if(typeof r!="function")throw new TypeError(r+" is not a function");return r};(function(r,e){var t=b1.exports,n=I5,i=Function.prototype.apply,s=Function.prototype.call,a=Object.create,o=Object.defineProperty,u=Object.defineProperties,l=Object.prototype.hasOwnProperty,c={configurable:!0,enumerable:!1,writable:!0},h,f,d,m,E,p,g;h=function(v,y){var C;return n(y),l.call(this,"__ee__")?C=this.__ee__:(C=c.value=a(null),o(this,"__ee__",c),c.value=null),C[v]?typeof C[v]=="object"?C[v].push(y):C[v]=[C[v],y]:C[v]=y,this},f=function(v,y){var C,A;return n(y),A=this,h.call(this,v,C=function(){d.call(A,v,C),i.call(y,this,arguments)}),C.__eeOnceListener__=y,this},d=function(v,y){var C,A,T,S;if(n(y),!l.call(this,"__ee__"))return this;if(C=this.__ee__,!C[v])return this;if(A=C[v],typeof A=="object")for(S=0;T=A[S];++S)(T===y||T.__eeOnceListener__===y)&&(A.length===2?C[v]=A[S?0:1]:A.splice(S,1));else(A===y||A.__eeOnceListener__===y)&&delete C[v];return this},m=function(v){var y,C,A,T,S;if(!!l.call(this,"__ee__")&&(T=this.__ee__[v],!!T))if(typeof T=="object"){for(C=arguments.length,S=new Array(C-1),y=1;y<C;++y)S[y-1]=arguments[y];for(T=T.slice(),y=0;A=T[y];++y)i.call(A,this,S)}else switch(arguments.length){case 1:s.call(T,this);break;case 2:s.call(T,this,arguments[1]);break;case 3:s.call(T,this,arguments[1],arguments[2]);break;default:for(C=arguments.length,S=new Array(C-1),y=1;y<C;++y)S[y-1]=arguments[y];i.call(T,this,S)}},E={on:h,once:f,off:d,emit:m},p={on:t(h),once:t(f),off:t(d),emit:t(m)},g=u({},p),r.exports=e=function(v){return v==null?a(g):u(Object(v),p)},e.methods=E})(Yr,Yr.exports);var xe={},Bo={},ti={},ki={};function k5(r,e,t){if(t===void 0&&(t=Array.prototype),r&&typeof t.find=="function")return t.find.call(r,e);for(var n=0;n<r.length;n++)if(Object.prototype.hasOwnProperty.call(r,n)){var i=r[n];if(e.call(void 0,i,n,r))return i}}function E0(r,e){return e===void 0&&(e=Object),e&&typeof e.freeze=="function"?e.freeze(r):r}var k1=E0({HTML:"text/html",isHTML:function(r){return r===k1.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),B1=E0({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(r){return r===B1.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});ki.find=k5;ki.freeze=E0;ki.MIME_TYPE=k1;ki.NAMESPACE=B1;var O1=ki,bn=O1.find,Ao=O1.NAMESPACE;function B5(r){return r!==""}function O5(r){return r?r.split(/[\t\n\f\r ]+/).filter(B5):[]}function N5(r,e){return r.hasOwnProperty(e)||(r[e]=!0),r}function sm(r){if(!r)return[];var e=O5(r);return Object.keys(e.reduce(N5,{}))}function P5(r){return function(e){return r&&r.indexOf(e)!==-1}}function Oo(r,e){for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}function Tr(r,e){var t=r.prototype;if(!(t instanceof e)){let i=function(){};var n=i;i.prototype=e.prototype,i=new i,Oo(t,i),r.prototype=t=i}t.constructor!=r&&(typeof r!="function"&&console.error("unknown Class:"+r),t.constructor=r)}var Sr={},mn=Sr.ELEMENT_NODE=1,sa=Sr.ATTRIBUTE_NODE=2,Cl=Sr.TEXT_NODE=3,N1=Sr.CDATA_SECTION_NODE=4,P1=Sr.ENTITY_REFERENCE_NODE=5,M5=Sr.ENTITY_NODE=6,M1=Sr.PROCESSING_INSTRUCTION_NODE=7,U1=Sr.COMMENT_NODE=8,$1=Sr.DOCUMENT_NODE=9,z1=Sr.DOCUMENT_TYPE_NODE=10,Qn=Sr.DOCUMENT_FRAGMENT_NODE=11,U5=Sr.NOTATION_NODE=12,Zt={},Bt={};Zt.INDEX_SIZE_ERR=(Bt[1]="Index size error",1);Zt.DOMSTRING_SIZE_ERR=(Bt[2]="DOMString size error",2);var mr=Zt.HIERARCHY_REQUEST_ERR=(Bt[3]="Hierarchy request error",3);Zt.WRONG_DOCUMENT_ERR=(Bt[4]="Wrong document",4);Zt.INVALID_CHARACTER_ERR=(Bt[5]="Invalid character",5);Zt.NO_DATA_ALLOWED_ERR=(Bt[6]="No data allowed",6);Zt.NO_MODIFICATION_ALLOWED_ERR=(Bt[7]="No modification allowed",7);var V1=Zt.NOT_FOUND_ERR=(Bt[8]="Not found",8);Zt.NOT_SUPPORTED_ERR=(Bt[9]="Not supported",9);var am=Zt.INUSE_ATTRIBUTE_ERR=(Bt[10]="Attribute in use",10);Zt.INVALID_STATE_ERR=(Bt[11]="Invalid state",11);Zt.SYNTAX_ERR=(Bt[12]="Syntax error",12);Zt.INVALID_MODIFICATION_ERR=(Bt[13]="Invalid modification",13);Zt.NAMESPACE_ERR=(Bt[14]="Invalid namespace",14);Zt.INVALID_ACCESS_ERR=(Bt[15]="Invalid access",15);function yt(r,e){if(e instanceof Error)var t=e;else t=this,Error.call(this,Bt[r]),this.message=Bt[r],Error.captureStackTrace&&Error.captureStackTrace(this,yt);return t.code=r,e&&(this.message=this.message+": "+e),t}yt.prototype=Error.prototype;Oo(Zt,yt);function Kn(){}Kn.prototype={length:0,item:function(r){return this[r]||null},toString:function(r,e){for(var t=[],n=0;n<this.length;n++)Gs(this[n],t,r,e);return t.join("")},filter:function(r){return Array.prototype.filter.call(this,r)},indexOf:function(r){return Array.prototype.indexOf.call(this,r)}};function aa(r,e){this._node=r,this._refresh=e,y0(this)}function y0(r){var e=r._node._inc||r._node.ownerDocument._inc;if(r._inc!=e){var t=r._refresh(r._node);e2(r,"length",t.length),Oo(t,r),r._inc=e}}aa.prototype.item=function(r){return y0(this),this[r]};Tr(aa,Kn);function Tl(){}function G1(r,e){for(var t=r.length;t--;)if(r[t]===e)return t}function om(r,e,t,n){if(n?e[G1(e,n)]=t:e[e.length++]=t,r){t.ownerElement=r;var i=r.ownerDocument;i&&(n&&j1(i,r,n),$5(i,r,t))}}function um(r,e,t){var n=G1(e,t);if(n>=0){for(var i=e.length-1;n<i;)e[n]=e[++n];if(e.length=i,r){var s=r.ownerDocument;s&&(j1(s,r,t),t.ownerElement=null)}}else throw new yt(V1,new Error(r.tagName+"@"+t))}Tl.prototype={length:0,item:Kn.prototype.item,getNamedItem:function(r){for(var e=this.length;e--;){var t=this[e];if(t.nodeName==r)return t}},setNamedItem:function(r){var e=r.ownerElement;if(e&&e!=this._ownerElement)throw new yt(am);var t=this.getNamedItem(r.nodeName);return om(this._ownerElement,this,r,t),t},setNamedItemNS:function(r){var e=r.ownerElement,t;if(e&&e!=this._ownerElement)throw new yt(am);return t=this.getNamedItemNS(r.namespaceURI,r.localName),om(this._ownerElement,this,r,t),t},removeNamedItem:function(r){var e=this.getNamedItem(r);return um(this._ownerElement,this,e),e},removeNamedItemNS:function(r,e){var t=this.getNamedItemNS(r,e);return um(this._ownerElement,this,t),t},getNamedItemNS:function(r,e){for(var t=this.length;t--;){var n=this[t];if(n.localName==e&&n.namespaceURI==r)return n}return null}};function W1(){}W1.prototype={hasFeature:function(r,e){return!0},createDocument:function(r,e,t){var n=new No;if(n.implementation=this,n.childNodes=new Kn,n.doctype=t||null,t&&n.appendChild(t),e){var i=n.createElementNS(r,e);n.appendChild(i)}return n},createDocumentType:function(r,e,t){var n=new Ql;return n.name=r,n.nodeName=r,n.publicId=e||"",n.systemId=t||"",n}};function Ye(){}Ye.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(r,e){return Sl(this,r,e)},replaceChild:function(r,e){Sl(this,r,e,q1),e&&this.removeChild(e)},removeChild:function(r){return K1(this,r)},appendChild:function(r){return this.insertBefore(r,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(r){return Yf(this.ownerDocument||this,this,r)},normalize:function(){for(var r=this.firstChild;r;){var e=r.nextSibling;e&&e.nodeType==Cl&&r.nodeType==Cl?(this.removeChild(e),r.appendData(e.data)):(r.normalize(),r=e)}},isSupported:function(r,e){return this.ownerDocument.implementation.hasFeature(r,e)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(r){for(var e=this;e;){var t=e._nsMap;if(t){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&t[n]===r)return n}e=e.nodeType==sa?e.ownerDocument:e.parentNode}return null},lookupNamespaceURI:function(r){for(var e=this;e;){var t=e._nsMap;if(t&&r in t&&Object.prototype.hasOwnProperty.call(t,r))return t[r];e=e.nodeType==sa?e.ownerDocument:e.parentNode}return null},isDefaultNamespace:function(r){var e=this.lookupPrefix(r);return e==null}};function H1(r){return r=="<"&&"&lt;"||r==">"&&"&gt;"||r=="&"&&"&amp;"||r=='"'&&"&quot;"||"&#"+r.charCodeAt()+";"}Oo(Sr,Ye);Oo(Sr,Ye.prototype);function Co(r,e){if(e(r))return!0;if(r=r.firstChild)do if(Co(r,e))return!0;while(r=r.nextSibling)}function No(){this.ownerDocument=this}function $5(r,e,t){r&&r._inc++;var n=t.namespaceURI;n===Ao.XMLNS&&(e._nsMap[t.prefix?t.localName:""]=t.value)}function j1(r,e,t,n){r&&r._inc++;var i=t.namespaceURI;i===Ao.XMLNS&&delete e._nsMap[t.prefix?t.localName:""]}function x0(r,e,t){if(r&&r._inc){r._inc++;var n=e.childNodes;if(t)n[n.length++]=t;else{for(var i=e.firstChild,s=0;i;)n[s++]=i,i=i.nextSibling;n.length=s,delete n[n.length]}}}function K1(r,e){var t=e.previousSibling,n=e.nextSibling;return t?t.nextSibling=n:r.firstChild=n,n?n.previousSibling=t:r.lastChild=t,e.parentNode=null,e.previousSibling=null,e.nextSibling=null,x0(r.ownerDocument,r),e}function z5(r){return r&&(r.nodeType===Ye.DOCUMENT_NODE||r.nodeType===Ye.DOCUMENT_FRAGMENT_NODE||r.nodeType===Ye.ELEMENT_NODE)}function V5(r){return r&&(Rn(r)||A0(r)||Jn(r)||r.nodeType===Ye.DOCUMENT_FRAGMENT_NODE||r.nodeType===Ye.COMMENT_NODE||r.nodeType===Ye.PROCESSING_INSTRUCTION_NODE)}function Jn(r){return r&&r.nodeType===Ye.DOCUMENT_TYPE_NODE}function Rn(r){return r&&r.nodeType===Ye.ELEMENT_NODE}function A0(r){return r&&r.nodeType===Ye.TEXT_NODE}function lm(r,e){var t=r.childNodes||[];if(bn(t,Rn)||Jn(e))return!1;var n=bn(t,Jn);return!(e&&n&&t.indexOf(n)>t.indexOf(e))}function cm(r,e){var t=r.childNodes||[];function n(s){return Rn(s)&&s!==e}if(bn(t,n))return!1;var i=bn(t,Jn);return!(e&&i&&t.indexOf(i)>t.indexOf(e))}function G5(r,e,t){if(!z5(r))throw new yt(mr,"Unexpected parent node type "+r.nodeType);if(t&&t.parentNode!==r)throw new yt(V1,"child not in parent");if(!V5(e)||Jn(e)&&r.nodeType!==Ye.DOCUMENT_NODE)throw new yt(mr,"Unexpected node type "+e.nodeType+" for parent node type "+r.nodeType)}function W5(r,e,t){var n=r.childNodes||[],i=e.childNodes||[];if(e.nodeType===Ye.DOCUMENT_FRAGMENT_NODE){var s=i.filter(Rn);if(s.length>1||bn(i,A0))throw new yt(mr,"More than one element or text in fragment");if(s.length===1&&!lm(r,t))throw new yt(mr,"Element in fragment can not be inserted before doctype")}if(Rn(e)&&!lm(r,t))throw new yt(mr,"Only one element can be added and only after doctype");if(Jn(e)){if(bn(n,Jn))throw new yt(mr,"Only one doctype is allowed");var a=bn(n,Rn);if(t&&n.indexOf(a)<n.indexOf(t))throw new yt(mr,"Doctype can only be inserted before an element");if(!t&&a)throw new yt(mr,"Doctype can not be appended since element is present")}}function q1(r,e,t){var n=r.childNodes||[],i=e.childNodes||[];if(e.nodeType===Ye.DOCUMENT_FRAGMENT_NODE){var s=i.filter(Rn);if(s.length>1||bn(i,A0))throw new yt(mr,"More than one element or text in fragment");if(s.length===1&&!cm(r,t))throw new yt(mr,"Element in fragment can not be inserted before doctype")}if(Rn(e)&&!cm(r,t))throw new yt(mr,"Only one element can be added and only after doctype");if(Jn(e)){let u=function(l){return Jn(l)&&l!==t};var o=u;if(bn(n,u))throw new yt(mr,"Only one doctype is allowed");var a=bn(n,Rn);if(t&&n.indexOf(a)<n.indexOf(t))throw new yt(mr,"Doctype can only be inserted before an element")}}function Sl(r,e,t,n){G5(r,e,t),r.nodeType===Ye.DOCUMENT_NODE&&(n||W5)(r,e,t);var i=e.parentNode;if(i&&i.removeChild(e),e.nodeType===Qn){var s=e.firstChild;if(s==null)return e;var a=e.lastChild}else s=a=e;var o=t?t.previousSibling:r.lastChild;s.previousSibling=o,a.nextSibling=t,o?o.nextSibling=s:r.firstChild=s,t==null?r.lastChild=a:t.previousSibling=a;do s.parentNode=r;while(s!==a&&(s=s.nextSibling));return x0(r.ownerDocument||r,r),e.nodeType==Qn&&(e.firstChild=e.lastChild=null),e}function H5(r,e){return e.parentNode&&e.parentNode.removeChild(e),e.parentNode=r,e.previousSibling=r.lastChild,e.nextSibling=null,e.previousSibling?e.previousSibling.nextSibling=e:r.firstChild=e,r.lastChild=e,x0(r.ownerDocument,r,e),e}No.prototype={nodeName:"#document",nodeType:$1,doctype:null,documentElement:null,_inc:1,insertBefore:function(r,e){if(r.nodeType==Qn){for(var t=r.firstChild;t;){var n=t.nextSibling;this.insertBefore(t,e),t=n}return r}return Sl(this,r,e),r.ownerDocument=this,this.documentElement===null&&r.nodeType===mn&&(this.documentElement=r),r},removeChild:function(r){return this.documentElement==r&&(this.documentElement=null),K1(this,r)},replaceChild:function(r,e){Sl(this,r,e,q1),r.ownerDocument=this,e&&this.removeChild(e),Rn(r)&&(this.documentElement=r)},importNode:function(r,e){return J1(this,r,e)},getElementById:function(r){var e=null;return Co(this.documentElement,function(t){if(t.nodeType==mn&&t.getAttribute("id")==r)return e=t,!0}),e},getElementsByClassName:function(r){var e=sm(r);return new aa(this,function(t){var n=[];return e.length>0&&Co(t.documentElement,function(i){if(i!==t&&i.nodeType===mn){var s=i.getAttribute("class");if(s){var a=r===s;if(!a){var o=sm(s);a=e.every(P5(o))}a&&n.push(i)}}}),n})},createElement:function(r){var e=new rs;e.ownerDocument=this,e.nodeName=r,e.tagName=r,e.localName=r,e.childNodes=new Kn;var t=e.attributes=new Tl;return t._ownerElement=e,e},createDocumentFragment:function(){var r=new Jl;return r.ownerDocument=this,r.childNodes=new Kn,r},createTextNode:function(r){var e=new C0;return e.ownerDocument=this,e.appendData(r),e},createComment:function(r){var e=new T0;return e.ownerDocument=this,e.appendData(r),e},createCDATASection:function(r){var e=new S0;return e.ownerDocument=this,e.appendData(r),e},createProcessingInstruction:function(r,e){var t=new w0;return t.ownerDocument=this,t.tagName=t.target=r,t.nodeValue=t.data=e,t},createAttribute:function(r){var e=new Dl;return e.ownerDocument=this,e.name=r,e.nodeName=r,e.localName=r,e.specified=!0,e},createEntityReference:function(r){var e=new D0;return e.ownerDocument=this,e.nodeName=r,e},createElementNS:function(r,e){var t=new rs,n=e.split(":"),i=t.attributes=new Tl;return t.childNodes=new Kn,t.ownerDocument=this,t.nodeName=e,t.tagName=e,t.namespaceURI=r,n.length==2?(t.prefix=n[0],t.localName=n[1]):t.localName=e,i._ownerElement=t,t},createAttributeNS:function(r,e){var t=new Dl,n=e.split(":");return t.ownerDocument=this,t.nodeName=e,t.name=e,t.namespaceURI=r,t.specified=!0,n.length==2?(t.prefix=n[0],t.localName=n[1]):t.localName=e,t}};Tr(No,Ye);function rs(){this._nsMap={}}rs.prototype={nodeType:mn,hasAttribute:function(r){return this.getAttributeNode(r)!=null},getAttribute:function(r){var e=this.getAttributeNode(r);return e&&e.value||""},getAttributeNode:function(r){return this.attributes.getNamedItem(r)},setAttribute:function(r,e){var t=this.ownerDocument.createAttribute(r);t.value=t.nodeValue=""+e,this.setAttributeNode(t)},removeAttribute:function(r){var e=this.getAttributeNode(r);e&&this.removeAttributeNode(e)},appendChild:function(r){return r.nodeType===Qn?this.insertBefore(r,null):H5(this,r)},setAttributeNode:function(r){return this.attributes.setNamedItem(r)},setAttributeNodeNS:function(r){return this.attributes.setNamedItemNS(r)},removeAttributeNode:function(r){return this.attributes.removeNamedItem(r.nodeName)},removeAttributeNS:function(r,e){var t=this.getAttributeNodeNS(r,e);t&&this.removeAttributeNode(t)},hasAttributeNS:function(r,e){return this.getAttributeNodeNS(r,e)!=null},getAttributeNS:function(r,e){var t=this.getAttributeNodeNS(r,e);return t&&t.value||""},setAttributeNS:function(r,e,t){var n=this.ownerDocument.createAttributeNS(r,e);n.value=n.nodeValue=""+t,this.setAttributeNode(n)},getAttributeNodeNS:function(r,e){return this.attributes.getNamedItemNS(r,e)},getElementsByTagName:function(r){return new aa(this,function(e){var t=[];return Co(e,function(n){n!==e&&n.nodeType==mn&&(r==="*"||n.tagName==r)&&t.push(n)}),t})},getElementsByTagNameNS:function(r,e){return new aa(this,function(t){var n=[];return Co(t,function(i){i!==t&&i.nodeType===mn&&(r==="*"||i.namespaceURI===r)&&(e==="*"||i.localName==e)&&n.push(i)}),n})}};No.prototype.getElementsByTagName=rs.prototype.getElementsByTagName;No.prototype.getElementsByTagNameNS=rs.prototype.getElementsByTagNameNS;Tr(rs,Ye);function Dl(){}Dl.prototype.nodeType=sa;Tr(Dl,Ye);function Po(){}Po.prototype={data:"",substringData:function(r,e){return this.data.substring(r,r+e)},appendData:function(r){r=this.data+r,this.nodeValue=this.data=r,this.length=r.length},insertData:function(r,e){this.replaceData(r,0,e)},appendChild:function(r){throw new Error(Bt[mr])},deleteData:function(r,e){this.replaceData(r,e,"")},replaceData:function(r,e,t){var n=this.data.substring(0,r),i=this.data.substring(r+e);t=n+t+i,this.nodeValue=this.data=t,this.length=t.length}};Tr(Po,Ye);function C0(){}C0.prototype={nodeName:"#text",nodeType:Cl,splitText:function(r){var e=this.data,t=e.substring(r);e=e.substring(0,r),this.data=this.nodeValue=e,this.length=e.length;var n=this.ownerDocument.createTextNode(t);return this.parentNode&&this.parentNode.insertBefore(n,this.nextSibling),n}};Tr(C0,Po);function T0(){}T0.prototype={nodeName:"#comment",nodeType:U1};Tr(T0,Po);function S0(){}S0.prototype={nodeName:"#cdata-section",nodeType:N1};Tr(S0,Po);function Ql(){}Ql.prototype.nodeType=z1;Tr(Ql,Ye);function Y1(){}Y1.prototype.nodeType=U5;Tr(Y1,Ye);function X1(){}X1.prototype.nodeType=M5;Tr(X1,Ye);function D0(){}D0.prototype.nodeType=P1;Tr(D0,Ye);function Jl(){}Jl.prototype.nodeName="#document-fragment";Jl.prototype.nodeType=Qn;Tr(Jl,Ye);function w0(){}w0.prototype.nodeType=M1;Tr(w0,Ye);function Z1(){}Z1.prototype.serializeToString=function(r,e,t){return Q1.call(r,e,t)};Ye.prototype.toString=Q1;function Q1(r,e){var t=[],n=this.nodeType==9&&this.documentElement||this,i=n.prefix,s=n.namespaceURI;if(s&&i==null){var i=n.lookupPrefix(s);if(i==null)var a=[{namespace:s,prefix:null}]}return Gs(this,t,r,e,a),t.join("")}function hm(r,e,t){var n=r.prefix||"",i=r.namespaceURI;if(!i||n==="xml"&&i===Ao.XML||i===Ao.XMLNS)return!1;for(var s=t.length;s--;){var a=t[s];if(a.prefix===n)return a.namespace!==i}return!0}function kh(r,e,t){r.push(" ",e,'="',t.replace(/[<&"]/g,H1),'"')}function Gs(r,e,t,n,i){if(i||(i=[]),n)if(r=n(r),r){if(typeof r=="string"){e.push(r);return}}else return;switch(r.nodeType){case mn:var s=r.attributes,a=s.length,g=r.firstChild,o=r.tagName;t=Ao.isHTML(r.namespaceURI)||t;var u=o;if(!t&&!r.prefix&&r.namespaceURI){for(var l,c=0;c<s.length;c++)if(s.item(c).name==="xmlns"){l=s.item(c).value;break}if(!l)for(var h=i.length-1;h>=0;h--){var f=i[h];if(f.prefix===""&&f.namespace===r.namespaceURI){l=f.namespace;break}}if(l!==r.namespaceURI)for(var h=i.length-1;h>=0;h--){var f=i[h];if(f.namespace===r.namespaceURI){f.prefix&&(u=f.prefix+":"+o);break}}}e.push("<",u);for(var d=0;d<a;d++){var m=s.item(d);m.prefix=="xmlns"?i.push({prefix:m.localName,namespace:m.value}):m.nodeName=="xmlns"&&i.push({prefix:"",namespace:m.value})}for(var d=0;d<a;d++){var m=s.item(d);if(hm(m,t,i)){var E=m.prefix||"",p=m.namespaceURI;kh(e,E?"xmlns:"+E:"xmlns",p),i.push({prefix:E,namespace:p})}Gs(m,e,t,n,i)}if(o===u&&hm(r,t,i)){var E=r.prefix||"",p=r.namespaceURI;kh(e,E?"xmlns:"+E:"xmlns",p),i.push({prefix:E,namespace:p})}if(g||t&&!/^(?:meta|link|img|br|hr|input)$/i.test(o)){if(e.push(">"),t&&/^script$/i.test(o))for(;g;)g.data?e.push(g.data):Gs(g,e,t,n,i.slice()),g=g.nextSibling;else for(;g;)Gs(g,e,t,n,i.slice()),g=g.nextSibling;e.push("</",u,">")}else e.push("/>");return;case $1:case Qn:for(var g=r.firstChild;g;)Gs(g,e,t,n,i.slice()),g=g.nextSibling;return;case sa:return kh(e,r.name,r.value);case Cl:return e.push(r.data.replace(/[<&]/g,H1).replace(/]]>/g,"]]&gt;"));case N1:return e.push("<![CDATA[",r.data,"]]>");case U1:return e.push("<!--",r.data,"-->");case z1:var v=r.publicId,y=r.systemId;if(e.push("<!DOCTYPE ",r.name),v)e.push(" PUBLIC ",v),y&&y!="."&&e.push(" ",y),e.push(">");else if(y&&y!=".")e.push(" SYSTEM ",y,">");else{var C=r.internalSubset;C&&e.push(" [",C,"]"),e.push(">")}return;case M1:return e.push("<?",r.target," ",r.data,"?>");case P1:return e.push("&",r.nodeName,";");default:e.push("??",r.nodeName)}}function J1(r,e,t){var n;switch(e.nodeType){case mn:n=e.cloneNode(!1),n.ownerDocument=r;case Qn:break;case sa:t=!0;break}if(n||(n=e.cloneNode(!1)),n.ownerDocument=r,n.parentNode=null,t)for(var i=e.firstChild;i;)n.appendChild(J1(r,i,t)),i=i.nextSibling;return n}function Yf(r,e,t){var n=new e.constructor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var s=e[i];typeof s!="object"&&s!=n[i]&&(n[i]=s)}switch(e.childNodes&&(n.childNodes=new Kn),n.ownerDocument=r,n.nodeType){case mn:var a=e.attributes,o=n.attributes=new Tl,u=a.length;o._ownerElement=n;for(var l=0;l<u;l++)n.setAttributeNode(Yf(r,a.item(l),!0));break;case sa:t=!0}if(t)for(var c=e.firstChild;c;)n.appendChild(Yf(r,c,t)),c=c.nextSibling;return n}function e2(r,e,t){r[e]=t}try{if(Object.defineProperty){let r=function(t){switch(t.nodeType){case mn:case Qn:var n=[];for(t=t.firstChild;t;)t.nodeType!==7&&t.nodeType!==8&&n.push(r(t)),t=t.nextSibling;return n.join("");default:return t.nodeValue}};var A1=r;Object.defineProperty(aa.prototype,"length",{get:function(){return y0(this),this.$$length}}),Object.defineProperty(Ye.prototype,"textContent",{get:function(){return r(this)},set:function(t){switch(this.nodeType){case mn:case Qn:for(;this.firstChild;)this.removeChild(this.firstChild);(t||String(t))&&this.appendChild(this.ownerDocument.createTextNode(t));break;default:this.data=t,this.value=t,this.nodeValue=t}}}),e2=function(t,n,i){t["$$"+n]=i}}}catch{}ti.DocumentType=Ql;ti.DOMException=yt;ti.DOMImplementation=W1;ti.Element=rs;ti.Node=Ye;ti.NodeList=Kn;ti.XMLSerializer=Z1;var Mo={},t2={};(function(r){var e=ki.freeze;r.XML_ENTITIES=e({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),r.HTML_ENTITIES=e({Aacute:"\xC1",aacute:"\xE1",Abreve:"\u0102",abreve:"\u0103",ac:"\u223E",acd:"\u223F",acE:"\u223E\u0333",Acirc:"\xC2",acirc:"\xE2",acute:"\xB4",Acy:"\u0410",acy:"\u0430",AElig:"\xC6",aelig:"\xE6",af:"\u2061",Afr:"\u{1D504}",afr:"\u{1D51E}",Agrave:"\xC0",agrave:"\xE0",alefsym:"\u2135",aleph:"\u2135",Alpha:"\u0391",alpha:"\u03B1",Amacr:"\u0100",amacr:"\u0101",amalg:"\u2A3F",AMP:"&",amp:"&",And:"\u2A53",and:"\u2227",andand:"\u2A55",andd:"\u2A5C",andslope:"\u2A58",andv:"\u2A5A",ang:"\u2220",ange:"\u29A4",angle:"\u2220",angmsd:"\u2221",angmsdaa:"\u29A8",angmsdab:"\u29A9",angmsdac:"\u29AA",angmsdad:"\u29AB",angmsdae:"\u29AC",angmsdaf:"\u29AD",angmsdag:"\u29AE",angmsdah:"\u29AF",angrt:"\u221F",angrtvb:"\u22BE",angrtvbd:"\u299D",angsph:"\u2222",angst:"\xC5",angzarr:"\u237C",Aogon:"\u0104",aogon:"\u0105",Aopf:"\u{1D538}",aopf:"\u{1D552}",ap:"\u2248",apacir:"\u2A6F",apE:"\u2A70",ape:"\u224A",apid:"\u224B",apos:"'",ApplyFunction:"\u2061",approx:"\u2248",approxeq:"\u224A",Aring:"\xC5",aring:"\xE5",Ascr:"\u{1D49C}",ascr:"\u{1D4B6}",Assign:"\u2254",ast:"*",asymp:"\u2248",asympeq:"\u224D",Atilde:"\xC3",atilde:"\xE3",Auml:"\xC4",auml:"\xE4",awconint:"\u2233",awint:"\u2A11",backcong:"\u224C",backepsilon:"\u03F6",backprime:"\u2035",backsim:"\u223D",backsimeq:"\u22CD",Backslash:"\u2216",Barv:"\u2AE7",barvee:"\u22BD",Barwed:"\u2306",barwed:"\u2305",barwedge:"\u2305",bbrk:"\u23B5",bbrktbrk:"\u23B6",bcong:"\u224C",Bcy:"\u0411",bcy:"\u0431",bdquo:"\u201E",becaus:"\u2235",Because:"\u2235",because:"\u2235",bemptyv:"\u29B0",bepsi:"\u03F6",bernou:"\u212C",Bernoullis:"\u212C",Beta:"\u0392",beta:"\u03B2",beth:"\u2136",between:"\u226C",Bfr:"\u{1D505}",bfr:"\u{1D51F}",bigcap:"\u22C2",bigcirc:"\u25EF",bigcup:"\u22C3",bigodot:"\u2A00",bigoplus:"\u2A01",bigotimes:"\u2A02",bigsqcup:"\u2A06",bigstar:"\u2605",bigtriangledown:"\u25BD",bigtriangleup:"\u25B3",biguplus:"\u2A04",bigvee:"\u22C1",bigwedge:"\u22C0",bkarow:"\u290D",blacklozenge:"\u29EB",blacksquare:"\u25AA",blacktriangle:"\u25B4",blacktriangledown:"\u25BE",blacktriangleleft:"\u25C2",blacktriangleright:"\u25B8",blank:"\u2423",blk12:"\u2592",blk14:"\u2591",blk34:"\u2593",block:"\u2588",bne:"=\u20E5",bnequiv:"\u2261\u20E5",bNot:"\u2AED",bnot:"\u2310",Bopf:"\u{1D539}",bopf:"\u{1D553}",bot:"\u22A5",bottom:"\u22A5",bowtie:"\u22C8",boxbox:"\u29C9",boxDL:"\u2557",boxDl:"\u2556",boxdL:"\u2555",boxdl:"\u2510",boxDR:"\u2554",boxDr:"\u2553",boxdR:"\u2552",boxdr:"\u250C",boxH:"\u2550",boxh:"\u2500",boxHD:"\u2566",boxHd:"\u2564",boxhD:"\u2565",boxhd:"\u252C",boxHU:"\u2569",boxHu:"\u2567",boxhU:"\u2568",boxhu:"\u2534",boxminus:"\u229F",boxplus:"\u229E",boxtimes:"\u22A0",boxUL:"\u255D",boxUl:"\u255C",boxuL:"\u255B",boxul:"\u2518",boxUR:"\u255A",boxUr:"\u2559",boxuR:"\u2558",boxur:"\u2514",boxV:"\u2551",boxv:"\u2502",boxVH:"\u256C",boxVh:"\u256B",boxvH:"\u256A",boxvh:"\u253C",boxVL:"\u2563",boxVl:"\u2562",boxvL:"\u2561",boxvl:"\u2524",boxVR:"\u2560",boxVr:"\u255F",boxvR:"\u255E",boxvr:"\u251C",bprime:"\u2035",Breve:"\u02D8",breve:"\u02D8",brvbar:"\xA6",Bscr:"\u212C",bscr:"\u{1D4B7}",bsemi:"\u204F",bsim:"\u223D",bsime:"\u22CD",bsol:"\\",bsolb:"\u29C5",bsolhsub:"\u27C8",bull:"\u2022",bullet:"\u2022",bump:"\u224E",bumpE:"\u2AAE",bumpe:"\u224F",Bumpeq:"\u224E",bumpeq:"\u224F",Cacute:"\u0106",cacute:"\u0107",Cap:"\u22D2",cap:"\u2229",capand:"\u2A44",capbrcup:"\u2A49",capcap:"\u2A4B",capcup:"\u2A47",capdot:"\u2A40",CapitalDifferentialD:"\u2145",caps:"\u2229\uFE00",caret:"\u2041",caron:"\u02C7",Cayleys:"\u212D",ccaps:"\u2A4D",Ccaron:"\u010C",ccaron:"\u010D",Ccedil:"\xC7",ccedil:"\xE7",Ccirc:"\u0108",ccirc:"\u0109",Cconint:"\u2230",ccups:"\u2A4C",ccupssm:"\u2A50",Cdot:"\u010A",cdot:"\u010B",cedil:"\xB8",Cedilla:"\xB8",cemptyv:"\u29B2",cent:"\xA2",CenterDot:"\xB7",centerdot:"\xB7",Cfr:"\u212D",cfr:"\u{1D520}",CHcy:"\u0427",chcy:"\u0447",check:"\u2713",checkmark:"\u2713",Chi:"\u03A7",chi:"\u03C7",cir:"\u25CB",circ:"\u02C6",circeq:"\u2257",circlearrowleft:"\u21BA",circlearrowright:"\u21BB",circledast:"\u229B",circledcirc:"\u229A",circleddash:"\u229D",CircleDot:"\u2299",circledR:"\xAE",circledS:"\u24C8",CircleMinus:"\u2296",CirclePlus:"\u2295",CircleTimes:"\u2297",cirE:"\u29C3",cire:"\u2257",cirfnint:"\u2A10",cirmid:"\u2AEF",cirscir:"\u29C2",ClockwiseContourIntegral:"\u2232",CloseCurlyDoubleQuote:"\u201D",CloseCurlyQuote:"\u2019",clubs:"\u2663",clubsuit:"\u2663",Colon:"\u2237",colon:":",Colone:"\u2A74",colone:"\u2254",coloneq:"\u2254",comma:",",commat:"@",comp:"\u2201",compfn:"\u2218",complement:"\u2201",complexes:"\u2102",cong:"\u2245",congdot:"\u2A6D",Congruent:"\u2261",Conint:"\u222F",conint:"\u222E",ContourIntegral:"\u222E",Copf:"\u2102",copf:"\u{1D554}",coprod:"\u2210",Coproduct:"\u2210",COPY:"\xA9",copy:"\xA9",copysr:"\u2117",CounterClockwiseContourIntegral:"\u2233",crarr:"\u21B5",Cross:"\u2A2F",cross:"\u2717",Cscr:"\u{1D49E}",cscr:"\u{1D4B8}",csub:"\u2ACF",csube:"\u2AD1",csup:"\u2AD0",csupe:"\u2AD2",ctdot:"\u22EF",cudarrl:"\u2938",cudarrr:"\u2935",cuepr:"\u22DE",cuesc:"\u22DF",cularr:"\u21B6",cularrp:"\u293D",Cup:"\u22D3",cup:"\u222A",cupbrcap:"\u2A48",CupCap:"\u224D",cupcap:"\u2A46",cupcup:"\u2A4A",cupdot:"\u228D",cupor:"\u2A45",cups:"\u222A\uFE00",curarr:"\u21B7",curarrm:"\u293C",curlyeqprec:"\u22DE",curlyeqsucc:"\u22DF",curlyvee:"\u22CE",curlywedge:"\u22CF",curren:"\xA4",curvearrowleft:"\u21B6",curvearrowright:"\u21B7",cuvee:"\u22CE",cuwed:"\u22CF",cwconint:"\u2232",cwint:"\u2231",cylcty:"\u232D",Dagger:"\u2021",dagger:"\u2020",daleth:"\u2138",Darr:"\u21A1",dArr:"\u21D3",darr:"\u2193",dash:"\u2010",Dashv:"\u2AE4",dashv:"\u22A3",dbkarow:"\u290F",dblac:"\u02DD",Dcaron:"\u010E",dcaron:"\u010F",Dcy:"\u0414",dcy:"\u0434",DD:"\u2145",dd:"\u2146",ddagger:"\u2021",ddarr:"\u21CA",DDotrahd:"\u2911",ddotseq:"\u2A77",deg:"\xB0",Del:"\u2207",Delta:"\u0394",delta:"\u03B4",demptyv:"\u29B1",dfisht:"\u297F",Dfr:"\u{1D507}",dfr:"\u{1D521}",dHar:"\u2965",dharl:"\u21C3",dharr:"\u21C2",DiacriticalAcute:"\xB4",DiacriticalDot:"\u02D9",DiacriticalDoubleAcute:"\u02DD",DiacriticalGrave:"`",DiacriticalTilde:"\u02DC",diam:"\u22C4",Diamond:"\u22C4",diamond:"\u22C4",diamondsuit:"\u2666",diams:"\u2666",die:"\xA8",DifferentialD:"\u2146",digamma:"\u03DD",disin:"\u22F2",div:"\xF7",divide:"\xF7",divideontimes:"\u22C7",divonx:"\u22C7",DJcy:"\u0402",djcy:"\u0452",dlcorn:"\u231E",dlcrop:"\u230D",dollar:"$",Dopf:"\u{1D53B}",dopf:"\u{1D555}",Dot:"\xA8",dot:"\u02D9",DotDot:"\u20DC",doteq:"\u2250",doteqdot:"\u2251",DotEqual:"\u2250",dotminus:"\u2238",dotplus:"\u2214",dotsquare:"\u22A1",doublebarwedge:"\u2306",DoubleContourIntegral:"\u222F",DoubleDot:"\xA8",DoubleDownArrow:"\u21D3",DoubleLeftArrow:"\u21D0",DoubleLeftRightArrow:"\u21D4",DoubleLeftTee:"\u2AE4",DoubleLongLeftArrow:"\u27F8",DoubleLongLeftRightArrow:"\u27FA",DoubleLongRightArrow:"\u27F9",DoubleRightArrow:"\u21D2",DoubleRightTee:"\u22A8",DoubleUpArrow:"\u21D1",DoubleUpDownArrow:"\u21D5",DoubleVerticalBar:"\u2225",DownArrow:"\u2193",Downarrow:"\u21D3",downarrow:"\u2193",DownArrowBar:"\u2913",DownArrowUpArrow:"\u21F5",DownBreve:"\u0311",downdownarrows:"\u21CA",downharpoonleft:"\u21C3",downharpoonright:"\u21C2",DownLeftRightVector:"\u2950",DownLeftTeeVector:"\u295E",DownLeftVector:"\u21BD",DownLeftVectorBar:"\u2956",DownRightTeeVector:"\u295F",DownRightVector:"\u21C1",DownRightVectorBar:"\u2957",DownTee:"\u22A4",DownTeeArrow:"\u21A7",drbkarow:"\u2910",drcorn:"\u231F",drcrop:"\u230C",Dscr:"\u{1D49F}",dscr:"\u{1D4B9}",DScy:"\u0405",dscy:"\u0455",dsol:"\u29F6",Dstrok:"\u0110",dstrok:"\u0111",dtdot:"\u22F1",dtri:"\u25BF",dtrif:"\u25BE",duarr:"\u21F5",duhar:"\u296F",dwangle:"\u29A6",DZcy:"\u040F",dzcy:"\u045F",dzigrarr:"\u27FF",Eacute:"\xC9",eacute:"\xE9",easter:"\u2A6E",Ecaron:"\u011A",ecaron:"\u011B",ecir:"\u2256",Ecirc:"\xCA",ecirc:"\xEA",ecolon:"\u2255",Ecy:"\u042D",ecy:"\u044D",eDDot:"\u2A77",Edot:"\u0116",eDot:"\u2251",edot:"\u0117",ee:"\u2147",efDot:"\u2252",Efr:"\u{1D508}",efr:"\u{1D522}",eg:"\u2A9A",Egrave:"\xC8",egrave:"\xE8",egs:"\u2A96",egsdot:"\u2A98",el:"\u2A99",Element:"\u2208",elinters:"\u23E7",ell:"\u2113",els:"\u2A95",elsdot:"\u2A97",Emacr:"\u0112",emacr:"\u0113",empty:"\u2205",emptyset:"\u2205",EmptySmallSquare:"\u25FB",emptyv:"\u2205",EmptyVerySmallSquare:"\u25AB",emsp:"\u2003",emsp13:"\u2004",emsp14:"\u2005",ENG:"\u014A",eng:"\u014B",ensp:"\u2002",Eogon:"\u0118",eogon:"\u0119",Eopf:"\u{1D53C}",eopf:"\u{1D556}",epar:"\u22D5",eparsl:"\u29E3",eplus:"\u2A71",epsi:"\u03B5",Epsilon:"\u0395",epsilon:"\u03B5",epsiv:"\u03F5",eqcirc:"\u2256",eqcolon:"\u2255",eqsim:"\u2242",eqslantgtr:"\u2A96",eqslantless:"\u2A95",Equal:"\u2A75",equals:"=",EqualTilde:"\u2242",equest:"\u225F",Equilibrium:"\u21CC",equiv:"\u2261",equivDD:"\u2A78",eqvparsl:"\u29E5",erarr:"\u2971",erDot:"\u2253",Escr:"\u2130",escr:"\u212F",esdot:"\u2250",Esim:"\u2A73",esim:"\u2242",Eta:"\u0397",eta:"\u03B7",ETH:"\xD0",eth:"\xF0",Euml:"\xCB",euml:"\xEB",euro:"\u20AC",excl:"!",exist:"\u2203",Exists:"\u2203",expectation:"\u2130",ExponentialE:"\u2147",exponentiale:"\u2147",fallingdotseq:"\u2252",Fcy:"\u0424",fcy:"\u0444",female:"\u2640",ffilig:"\uFB03",fflig:"\uFB00",ffllig:"\uFB04",Ffr:"\u{1D509}",ffr:"\u{1D523}",filig:"\uFB01",FilledSmallSquare:"\u25FC",FilledVerySmallSquare:"\u25AA",fjlig:"fj",flat:"\u266D",fllig:"\uFB02",fltns:"\u25B1",fnof:"\u0192",Fopf:"\u{1D53D}",fopf:"\u{1D557}",ForAll:"\u2200",forall:"\u2200",fork:"\u22D4",forkv:"\u2AD9",Fouriertrf:"\u2131",fpartint:"\u2A0D",frac12:"\xBD",frac13:"\u2153",frac14:"\xBC",frac15:"\u2155",frac16:"\u2159",frac18:"\u215B",frac23:"\u2154",frac25:"\u2156",frac34:"\xBE",frac35:"\u2157",frac38:"\u215C",frac45:"\u2158",frac56:"\u215A",frac58:"\u215D",frac78:"\u215E",frasl:"\u2044",frown:"\u2322",Fscr:"\u2131",fscr:"\u{1D4BB}",gacute:"\u01F5",Gamma:"\u0393",gamma:"\u03B3",Gammad:"\u03DC",gammad:"\u03DD",gap:"\u2A86",Gbreve:"\u011E",gbreve:"\u011F",Gcedil:"\u0122",Gcirc:"\u011C",gcirc:"\u011D",Gcy:"\u0413",gcy:"\u0433",Gdot:"\u0120",gdot:"\u0121",gE:"\u2267",ge:"\u2265",gEl:"\u2A8C",gel:"\u22DB",geq:"\u2265",geqq:"\u2267",geqslant:"\u2A7E",ges:"\u2A7E",gescc:"\u2AA9",gesdot:"\u2A80",gesdoto:"\u2A82",gesdotol:"\u2A84",gesl:"\u22DB\uFE00",gesles:"\u2A94",Gfr:"\u{1D50A}",gfr:"\u{1D524}",Gg:"\u22D9",gg:"\u226B",ggg:"\u22D9",gimel:"\u2137",GJcy:"\u0403",gjcy:"\u0453",gl:"\u2277",gla:"\u2AA5",glE:"\u2A92",glj:"\u2AA4",gnap:"\u2A8A",gnapprox:"\u2A8A",gnE:"\u2269",gne:"\u2A88",gneq:"\u2A88",gneqq:"\u2269",gnsim:"\u22E7",Gopf:"\u{1D53E}",gopf:"\u{1D558}",grave:"`",GreaterEqual:"\u2265",GreaterEqualLess:"\u22DB",GreaterFullEqual:"\u2267",GreaterGreater:"\u2AA2",GreaterLess:"\u2277",GreaterSlantEqual:"\u2A7E",GreaterTilde:"\u2273",Gscr:"\u{1D4A2}",gscr:"\u210A",gsim:"\u2273",gsime:"\u2A8E",gsiml:"\u2A90",Gt:"\u226B",GT:">",gt:">",gtcc:"\u2AA7",gtcir:"\u2A7A",gtdot:"\u22D7",gtlPar:"\u2995",gtquest:"\u2A7C",gtrapprox:"\u2A86",gtrarr:"\u2978",gtrdot:"\u22D7",gtreqless:"\u22DB",gtreqqless:"\u2A8C",gtrless:"\u2277",gtrsim:"\u2273",gvertneqq:"\u2269\uFE00",gvnE:"\u2269\uFE00",Hacek:"\u02C7",hairsp:"\u200A",half:"\xBD",hamilt:"\u210B",HARDcy:"\u042A",hardcy:"\u044A",hArr:"\u21D4",harr:"\u2194",harrcir:"\u2948",harrw:"\u21AD",Hat:"^",hbar:"\u210F",Hcirc:"\u0124",hcirc:"\u0125",hearts:"\u2665",heartsuit:"\u2665",hellip:"\u2026",hercon:"\u22B9",Hfr:"\u210C",hfr:"\u{1D525}",HilbertSpace:"\u210B",hksearow:"\u2925",hkswarow:"\u2926",hoarr:"\u21FF",homtht:"\u223B",hookleftarrow:"\u21A9",hookrightarrow:"\u21AA",Hopf:"\u210D",hopf:"\u{1D559}",horbar:"\u2015",HorizontalLine:"\u2500",Hscr:"\u210B",hscr:"\u{1D4BD}",hslash:"\u210F",Hstrok:"\u0126",hstrok:"\u0127",HumpDownHump:"\u224E",HumpEqual:"\u224F",hybull:"\u2043",hyphen:"\u2010",Iacute:"\xCD",iacute:"\xED",ic:"\u2063",Icirc:"\xCE",icirc:"\xEE",Icy:"\u0418",icy:"\u0438",Idot:"\u0130",IEcy:"\u0415",iecy:"\u0435",iexcl:"\xA1",iff:"\u21D4",Ifr:"\u2111",ifr:"\u{1D526}",Igrave:"\xCC",igrave:"\xEC",ii:"\u2148",iiiint:"\u2A0C",iiint:"\u222D",iinfin:"\u29DC",iiota:"\u2129",IJlig:"\u0132",ijlig:"\u0133",Im:"\u2111",Imacr:"\u012A",imacr:"\u012B",image:"\u2111",ImaginaryI:"\u2148",imagline:"\u2110",imagpart:"\u2111",imath:"\u0131",imof:"\u22B7",imped:"\u01B5",Implies:"\u21D2",in:"\u2208",incare:"\u2105",infin:"\u221E",infintie:"\u29DD",inodot:"\u0131",Int:"\u222C",int:"\u222B",intcal:"\u22BA",integers:"\u2124",Integral:"\u222B",intercal:"\u22BA",Intersection:"\u22C2",intlarhk:"\u2A17",intprod:"\u2A3C",InvisibleComma:"\u2063",InvisibleTimes:"\u2062",IOcy:"\u0401",iocy:"\u0451",Iogon:"\u012E",iogon:"\u012F",Iopf:"\u{1D540}",iopf:"\u{1D55A}",Iota:"\u0399",iota:"\u03B9",iprod:"\u2A3C",iquest:"\xBF",Iscr:"\u2110",iscr:"\u{1D4BE}",isin:"\u2208",isindot:"\u22F5",isinE:"\u22F9",isins:"\u22F4",isinsv:"\u22F3",isinv:"\u2208",it:"\u2062",Itilde:"\u0128",itilde:"\u0129",Iukcy:"\u0406",iukcy:"\u0456",Iuml:"\xCF",iuml:"\xEF",Jcirc:"\u0134",jcirc:"\u0135",Jcy:"\u0419",jcy:"\u0439",Jfr:"\u{1D50D}",jfr:"\u{1D527}",jmath:"\u0237",Jopf:"\u{1D541}",jopf:"\u{1D55B}",Jscr:"\u{1D4A5}",jscr:"\u{1D4BF}",Jsercy:"\u0408",jsercy:"\u0458",Jukcy:"\u0404",jukcy:"\u0454",Kappa:"\u039A",kappa:"\u03BA",kappav:"\u03F0",Kcedil:"\u0136",kcedil:"\u0137",Kcy:"\u041A",kcy:"\u043A",Kfr:"\u{1D50E}",kfr:"\u{1D528}",kgreen:"\u0138",KHcy:"\u0425",khcy:"\u0445",KJcy:"\u040C",kjcy:"\u045C",Kopf:"\u{1D542}",kopf:"\u{1D55C}",Kscr:"\u{1D4A6}",kscr:"\u{1D4C0}",lAarr:"\u21DA",Lacute:"\u0139",lacute:"\u013A",laemptyv:"\u29B4",lagran:"\u2112",Lambda:"\u039B",lambda:"\u03BB",Lang:"\u27EA",lang:"\u27E8",langd:"\u2991",langle:"\u27E8",lap:"\u2A85",Laplacetrf:"\u2112",laquo:"\xAB",Larr:"\u219E",lArr:"\u21D0",larr:"\u2190",larrb:"\u21E4",larrbfs:"\u291F",larrfs:"\u291D",larrhk:"\u21A9",larrlp:"\u21AB",larrpl:"\u2939",larrsim:"\u2973",larrtl:"\u21A2",lat:"\u2AAB",lAtail:"\u291B",latail:"\u2919",late:"\u2AAD",lates:"\u2AAD\uFE00",lBarr:"\u290E",lbarr:"\u290C",lbbrk:"\u2772",lbrace:"{",lbrack:"[",lbrke:"\u298B",lbrksld:"\u298F",lbrkslu:"\u298D",Lcaron:"\u013D",lcaron:"\u013E",Lcedil:"\u013B",lcedil:"\u013C",lceil:"\u2308",lcub:"{",Lcy:"\u041B",lcy:"\u043B",ldca:"\u2936",ldquo:"\u201C",ldquor:"\u201E",ldrdhar:"\u2967",ldrushar:"\u294B",ldsh:"\u21B2",lE:"\u2266",le:"\u2264",LeftAngleBracket:"\u27E8",LeftArrow:"\u2190",Leftarrow:"\u21D0",leftarrow:"\u2190",LeftArrowBar:"\u21E4",LeftArrowRightArrow:"\u21C6",leftarrowtail:"\u21A2",LeftCeiling:"\u2308",LeftDoubleBracket:"\u27E6",LeftDownTeeVector:"\u2961",LeftDownVector:"\u21C3",LeftDownVectorBar:"\u2959",LeftFloor:"\u230A",leftharpoondown:"\u21BD",leftharpoonup:"\u21BC",leftleftarrows:"\u21C7",LeftRightArrow:"\u2194",Leftrightarrow:"\u21D4",leftrightarrow:"\u2194",leftrightarrows:"\u21C6",leftrightharpoons:"\u21CB",leftrightsquigarrow:"\u21AD",LeftRightVector:"\u294E",LeftTee:"\u22A3",LeftTeeArrow:"\u21A4",LeftTeeVector:"\u295A",leftthreetimes:"\u22CB",LeftTriangle:"\u22B2",LeftTriangleBar:"\u29CF",LeftTriangleEqual:"\u22B4",LeftUpDownVector:"\u2951",LeftUpTeeVector:"\u2960",LeftUpVector:"\u21BF",LeftUpVectorBar:"\u2958",LeftVector:"\u21BC",LeftVectorBar:"\u2952",lEg:"\u2A8B",leg:"\u22DA",leq:"\u2264",leqq:"\u2266",leqslant:"\u2A7D",les:"\u2A7D",lescc:"\u2AA8",lesdot:"\u2A7F",lesdoto:"\u2A81",lesdotor:"\u2A83",lesg:"\u22DA\uFE00",lesges:"\u2A93",lessapprox:"\u2A85",lessdot:"\u22D6",lesseqgtr:"\u22DA",lesseqqgtr:"\u2A8B",LessEqualGreater:"\u22DA",LessFullEqual:"\u2266",LessGreater:"\u2276",lessgtr:"\u2276",LessLess:"\u2AA1",lesssim:"\u2272",LessSlantEqual:"\u2A7D",LessTilde:"\u2272",lfisht:"\u297C",lfloor:"\u230A",Lfr:"\u{1D50F}",lfr:"\u{1D529}",lg:"\u2276",lgE:"\u2A91",lHar:"\u2962",lhard:"\u21BD",lharu:"\u21BC",lharul:"\u296A",lhblk:"\u2584",LJcy:"\u0409",ljcy:"\u0459",Ll:"\u22D8",ll:"\u226A",llarr:"\u21C7",llcorner:"\u231E",Lleftarrow:"\u21DA",llhard:"\u296B",lltri:"\u25FA",Lmidot:"\u013F",lmidot:"\u0140",lmoust:"\u23B0",lmoustache:"\u23B0",lnap:"\u2A89",lnapprox:"\u2A89",lnE:"\u2268",lne:"\u2A87",lneq:"\u2A87",lneqq:"\u2268",lnsim:"\u22E6",loang:"\u27EC",loarr:"\u21FD",lobrk:"\u27E6",LongLeftArrow:"\u27F5",Longleftarrow:"\u27F8",longleftarrow:"\u27F5",LongLeftRightArrow:"\u27F7",Longleftrightarrow:"\u27FA",longleftrightarrow:"\u27F7",longmapsto:"\u27FC",LongRightArrow:"\u27F6",Longrightarrow:"\u27F9",longrightarrow:"\u27F6",looparrowleft:"\u21AB",looparrowright:"\u21AC",lopar:"\u2985",Lopf:"\u{1D543}",lopf:"\u{1D55D}",loplus:"\u2A2D",lotimes:"\u2A34",lowast:"\u2217",lowbar:"_",LowerLeftArrow:"\u2199",LowerRightArrow:"\u2198",loz:"\u25CA",lozenge:"\u25CA",lozf:"\u29EB",lpar:"(",lparlt:"\u2993",lrarr:"\u21C6",lrcorner:"\u231F",lrhar:"\u21CB",lrhard:"\u296D",lrm:"\u200E",lrtri:"\u22BF",lsaquo:"\u2039",Lscr:"\u2112",lscr:"\u{1D4C1}",Lsh:"\u21B0",lsh:"\u21B0",lsim:"\u2272",lsime:"\u2A8D",lsimg:"\u2A8F",lsqb:"[",lsquo:"\u2018",lsquor:"\u201A",Lstrok:"\u0141",lstrok:"\u0142",Lt:"\u226A",LT:"<",lt:"<",ltcc:"\u2AA6",ltcir:"\u2A79",ltdot:"\u22D6",lthree:"\u22CB",ltimes:"\u22C9",ltlarr:"\u2976",ltquest:"\u2A7B",ltri:"\u25C3",ltrie:"\u22B4",ltrif:"\u25C2",ltrPar:"\u2996",lurdshar:"\u294A",luruhar:"\u2966",lvertneqq:"\u2268\uFE00",lvnE:"\u2268\uFE00",macr:"\xAF",male:"\u2642",malt:"\u2720",maltese:"\u2720",Map:"\u2905",map:"\u21A6",mapsto:"\u21A6",mapstodown:"\u21A7",mapstoleft:"\u21A4",mapstoup:"\u21A5",marker:"\u25AE",mcomma:"\u2A29",Mcy:"\u041C",mcy:"\u043C",mdash:"\u2014",mDDot:"\u223A",measuredangle:"\u2221",MediumSpace:"\u205F",Mellintrf:"\u2133",Mfr:"\u{1D510}",mfr:"\u{1D52A}",mho:"\u2127",micro:"\xB5",mid:"\u2223",midast:"*",midcir:"\u2AF0",middot:"\xB7",minus:"\u2212",minusb:"\u229F",minusd:"\u2238",minusdu:"\u2A2A",MinusPlus:"\u2213",mlcp:"\u2ADB",mldr:"\u2026",mnplus:"\u2213",models:"\u22A7",Mopf:"\u{1D544}",mopf:"\u{1D55E}",mp:"\u2213",Mscr:"\u2133",mscr:"\u{1D4C2}",mstpos:"\u223E",Mu:"\u039C",mu:"\u03BC",multimap:"\u22B8",mumap:"\u22B8",nabla:"\u2207",Nacute:"\u0143",nacute:"\u0144",nang:"\u2220\u20D2",nap:"\u2249",napE:"\u2A70\u0338",napid:"\u224B\u0338",napos:"\u0149",napprox:"\u2249",natur:"\u266E",natural:"\u266E",naturals:"\u2115",nbsp:"\xA0",nbump:"\u224E\u0338",nbumpe:"\u224F\u0338",ncap:"\u2A43",Ncaron:"\u0147",ncaron:"\u0148",Ncedil:"\u0145",ncedil:"\u0146",ncong:"\u2247",ncongdot:"\u2A6D\u0338",ncup:"\u2A42",Ncy:"\u041D",ncy:"\u043D",ndash:"\u2013",ne:"\u2260",nearhk:"\u2924",neArr:"\u21D7",nearr:"\u2197",nearrow:"\u2197",nedot:"\u2250\u0338",NegativeMediumSpace:"\u200B",NegativeThickSpace:"\u200B",NegativeThinSpace:"\u200B",NegativeVeryThinSpace:"\u200B",nequiv:"\u2262",nesear:"\u2928",nesim:"\u2242\u0338",NestedGreaterGreater:"\u226B",NestedLessLess:"\u226A",NewLine:`
`,nexist:"\u2204",nexists:"\u2204",Nfr:"\u{1D511}",nfr:"\u{1D52B}",ngE:"\u2267\u0338",nge:"\u2271",ngeq:"\u2271",ngeqq:"\u2267\u0338",ngeqslant:"\u2A7E\u0338",nges:"\u2A7E\u0338",nGg:"\u22D9\u0338",ngsim:"\u2275",nGt:"\u226B\u20D2",ngt:"\u226F",ngtr:"\u226F",nGtv:"\u226B\u0338",nhArr:"\u21CE",nharr:"\u21AE",nhpar:"\u2AF2",ni:"\u220B",nis:"\u22FC",nisd:"\u22FA",niv:"\u220B",NJcy:"\u040A",njcy:"\u045A",nlArr:"\u21CD",nlarr:"\u219A",nldr:"\u2025",nlE:"\u2266\u0338",nle:"\u2270",nLeftarrow:"\u21CD",nleftarrow:"\u219A",nLeftrightarrow:"\u21CE",nleftrightarrow:"\u21AE",nleq:"\u2270",nleqq:"\u2266\u0338",nleqslant:"\u2A7D\u0338",nles:"\u2A7D\u0338",nless:"\u226E",nLl:"\u22D8\u0338",nlsim:"\u2274",nLt:"\u226A\u20D2",nlt:"\u226E",nltri:"\u22EA",nltrie:"\u22EC",nLtv:"\u226A\u0338",nmid:"\u2224",NoBreak:"\u2060",NonBreakingSpace:"\xA0",Nopf:"\u2115",nopf:"\u{1D55F}",Not:"\u2AEC",not:"\xAC",NotCongruent:"\u2262",NotCupCap:"\u226D",NotDoubleVerticalBar:"\u2226",NotElement:"\u2209",NotEqual:"\u2260",NotEqualTilde:"\u2242\u0338",NotExists:"\u2204",NotGreater:"\u226F",NotGreaterEqual:"\u2271",NotGreaterFullEqual:"\u2267\u0338",NotGreaterGreater:"\u226B\u0338",NotGreaterLess:"\u2279",NotGreaterSlantEqual:"\u2A7E\u0338",NotGreaterTilde:"\u2275",NotHumpDownHump:"\u224E\u0338",NotHumpEqual:"\u224F\u0338",notin:"\u2209",notindot:"\u22F5\u0338",notinE:"\u22F9\u0338",notinva:"\u2209",notinvb:"\u22F7",notinvc:"\u22F6",NotLeftTriangle:"\u22EA",NotLeftTriangleBar:"\u29CF\u0338",NotLeftTriangleEqual:"\u22EC",NotLess:"\u226E",NotLessEqual:"\u2270",NotLessGreater:"\u2278",NotLessLess:"\u226A\u0338",NotLessSlantEqual:"\u2A7D\u0338",NotLessTilde:"\u2274",NotNestedGreaterGreater:"\u2AA2\u0338",NotNestedLessLess:"\u2AA1\u0338",notni:"\u220C",notniva:"\u220C",notnivb:"\u22FE",notnivc:"\u22FD",NotPrecedes:"\u2280",NotPrecedesEqual:"\u2AAF\u0338",NotPrecedesSlantEqual:"\u22E0",NotReverseElement:"\u220C",NotRightTriangle:"\u22EB",NotRightTriangleBar:"\u29D0\u0338",NotRightTriangleEqual:"\u22ED",NotSquareSubset:"\u228F\u0338",NotSquareSubsetEqual:"\u22E2",NotSquareSuperset:"\u2290\u0338",NotSquareSupersetEqual:"\u22E3",NotSubset:"\u2282\u20D2",NotSubsetEqual:"\u2288",NotSucceeds:"\u2281",NotSucceedsEqual:"\u2AB0\u0338",NotSucceedsSlantEqual:"\u22E1",NotSucceedsTilde:"\u227F\u0338",NotSuperset:"\u2283\u20D2",NotSupersetEqual:"\u2289",NotTilde:"\u2241",NotTildeEqual:"\u2244",NotTildeFullEqual:"\u2247",NotTildeTilde:"\u2249",NotVerticalBar:"\u2224",npar:"\u2226",nparallel:"\u2226",nparsl:"\u2AFD\u20E5",npart:"\u2202\u0338",npolint:"\u2A14",npr:"\u2280",nprcue:"\u22E0",npre:"\u2AAF\u0338",nprec:"\u2280",npreceq:"\u2AAF\u0338",nrArr:"\u21CF",nrarr:"\u219B",nrarrc:"\u2933\u0338",nrarrw:"\u219D\u0338",nRightarrow:"\u21CF",nrightarrow:"\u219B",nrtri:"\u22EB",nrtrie:"\u22ED",nsc:"\u2281",nsccue:"\u22E1",nsce:"\u2AB0\u0338",Nscr:"\u{1D4A9}",nscr:"\u{1D4C3}",nshortmid:"\u2224",nshortparallel:"\u2226",nsim:"\u2241",nsime:"\u2244",nsimeq:"\u2244",nsmid:"\u2224",nspar:"\u2226",nsqsube:"\u22E2",nsqsupe:"\u22E3",nsub:"\u2284",nsubE:"\u2AC5\u0338",nsube:"\u2288",nsubset:"\u2282\u20D2",nsubseteq:"\u2288",nsubseteqq:"\u2AC5\u0338",nsucc:"\u2281",nsucceq:"\u2AB0\u0338",nsup:"\u2285",nsupE:"\u2AC6\u0338",nsupe:"\u2289",nsupset:"\u2283\u20D2",nsupseteq:"\u2289",nsupseteqq:"\u2AC6\u0338",ntgl:"\u2279",Ntilde:"\xD1",ntilde:"\xF1",ntlg:"\u2278",ntriangleleft:"\u22EA",ntrianglelefteq:"\u22EC",ntriangleright:"\u22EB",ntrianglerighteq:"\u22ED",Nu:"\u039D",nu:"\u03BD",num:"#",numero:"\u2116",numsp:"\u2007",nvap:"\u224D\u20D2",nVDash:"\u22AF",nVdash:"\u22AE",nvDash:"\u22AD",nvdash:"\u22AC",nvge:"\u2265\u20D2",nvgt:">\u20D2",nvHarr:"\u2904",nvinfin:"\u29DE",nvlArr:"\u2902",nvle:"\u2264\u20D2",nvlt:"<\u20D2",nvltrie:"\u22B4\u20D2",nvrArr:"\u2903",nvrtrie:"\u22B5\u20D2",nvsim:"\u223C\u20D2",nwarhk:"\u2923",nwArr:"\u21D6",nwarr:"\u2196",nwarrow:"\u2196",nwnear:"\u2927",Oacute:"\xD3",oacute:"\xF3",oast:"\u229B",ocir:"\u229A",Ocirc:"\xD4",ocirc:"\xF4",Ocy:"\u041E",ocy:"\u043E",odash:"\u229D",Odblac:"\u0150",odblac:"\u0151",odiv:"\u2A38",odot:"\u2299",odsold:"\u29BC",OElig:"\u0152",oelig:"\u0153",ofcir:"\u29BF",Ofr:"\u{1D512}",ofr:"\u{1D52C}",ogon:"\u02DB",Ograve:"\xD2",ograve:"\xF2",ogt:"\u29C1",ohbar:"\u29B5",ohm:"\u03A9",oint:"\u222E",olarr:"\u21BA",olcir:"\u29BE",olcross:"\u29BB",oline:"\u203E",olt:"\u29C0",Omacr:"\u014C",omacr:"\u014D",Omega:"\u03A9",omega:"\u03C9",Omicron:"\u039F",omicron:"\u03BF",omid:"\u29B6",ominus:"\u2296",Oopf:"\u{1D546}",oopf:"\u{1D560}",opar:"\u29B7",OpenCurlyDoubleQuote:"\u201C",OpenCurlyQuote:"\u2018",operp:"\u29B9",oplus:"\u2295",Or:"\u2A54",or:"\u2228",orarr:"\u21BB",ord:"\u2A5D",order:"\u2134",orderof:"\u2134",ordf:"\xAA",ordm:"\xBA",origof:"\u22B6",oror:"\u2A56",orslope:"\u2A57",orv:"\u2A5B",oS:"\u24C8",Oscr:"\u{1D4AA}",oscr:"\u2134",Oslash:"\xD8",oslash:"\xF8",osol:"\u2298",Otilde:"\xD5",otilde:"\xF5",Otimes:"\u2A37",otimes:"\u2297",otimesas:"\u2A36",Ouml:"\xD6",ouml:"\xF6",ovbar:"\u233D",OverBar:"\u203E",OverBrace:"\u23DE",OverBracket:"\u23B4",OverParenthesis:"\u23DC",par:"\u2225",para:"\xB6",parallel:"\u2225",parsim:"\u2AF3",parsl:"\u2AFD",part:"\u2202",PartialD:"\u2202",Pcy:"\u041F",pcy:"\u043F",percnt:"%",period:".",permil:"\u2030",perp:"\u22A5",pertenk:"\u2031",Pfr:"\u{1D513}",pfr:"\u{1D52D}",Phi:"\u03A6",phi:"\u03C6",phiv:"\u03D5",phmmat:"\u2133",phone:"\u260E",Pi:"\u03A0",pi:"\u03C0",pitchfork:"\u22D4",piv:"\u03D6",planck:"\u210F",planckh:"\u210E",plankv:"\u210F",plus:"+",plusacir:"\u2A23",plusb:"\u229E",pluscir:"\u2A22",plusdo:"\u2214",plusdu:"\u2A25",pluse:"\u2A72",PlusMinus:"\xB1",plusmn:"\xB1",plussim:"\u2A26",plustwo:"\u2A27",pm:"\xB1",Poincareplane:"\u210C",pointint:"\u2A15",Popf:"\u2119",popf:"\u{1D561}",pound:"\xA3",Pr:"\u2ABB",pr:"\u227A",prap:"\u2AB7",prcue:"\u227C",prE:"\u2AB3",pre:"\u2AAF",prec:"\u227A",precapprox:"\u2AB7",preccurlyeq:"\u227C",Precedes:"\u227A",PrecedesEqual:"\u2AAF",PrecedesSlantEqual:"\u227C",PrecedesTilde:"\u227E",preceq:"\u2AAF",precnapprox:"\u2AB9",precneqq:"\u2AB5",precnsim:"\u22E8",precsim:"\u227E",Prime:"\u2033",prime:"\u2032",primes:"\u2119",prnap:"\u2AB9",prnE:"\u2AB5",prnsim:"\u22E8",prod:"\u220F",Product:"\u220F",profalar:"\u232E",profline:"\u2312",profsurf:"\u2313",prop:"\u221D",Proportion:"\u2237",Proportional:"\u221D",propto:"\u221D",prsim:"\u227E",prurel:"\u22B0",Pscr:"\u{1D4AB}",pscr:"\u{1D4C5}",Psi:"\u03A8",psi:"\u03C8",puncsp:"\u2008",Qfr:"\u{1D514}",qfr:"\u{1D52E}",qint:"\u2A0C",Qopf:"\u211A",qopf:"\u{1D562}",qprime:"\u2057",Qscr:"\u{1D4AC}",qscr:"\u{1D4C6}",quaternions:"\u210D",quatint:"\u2A16",quest:"?",questeq:"\u225F",QUOT:'"',quot:'"',rAarr:"\u21DB",race:"\u223D\u0331",Racute:"\u0154",racute:"\u0155",radic:"\u221A",raemptyv:"\u29B3",Rang:"\u27EB",rang:"\u27E9",rangd:"\u2992",range:"\u29A5",rangle:"\u27E9",raquo:"\xBB",Rarr:"\u21A0",rArr:"\u21D2",rarr:"\u2192",rarrap:"\u2975",rarrb:"\u21E5",rarrbfs:"\u2920",rarrc:"\u2933",rarrfs:"\u291E",rarrhk:"\u21AA",rarrlp:"\u21AC",rarrpl:"\u2945",rarrsim:"\u2974",Rarrtl:"\u2916",rarrtl:"\u21A3",rarrw:"\u219D",rAtail:"\u291C",ratail:"\u291A",ratio:"\u2236",rationals:"\u211A",RBarr:"\u2910",rBarr:"\u290F",rbarr:"\u290D",rbbrk:"\u2773",rbrace:"}",rbrack:"]",rbrke:"\u298C",rbrksld:"\u298E",rbrkslu:"\u2990",Rcaron:"\u0158",rcaron:"\u0159",Rcedil:"\u0156",rcedil:"\u0157",rceil:"\u2309",rcub:"}",Rcy:"\u0420",rcy:"\u0440",rdca:"\u2937",rdldhar:"\u2969",rdquo:"\u201D",rdquor:"\u201D",rdsh:"\u21B3",Re:"\u211C",real:"\u211C",realine:"\u211B",realpart:"\u211C",reals:"\u211D",rect:"\u25AD",REG:"\xAE",reg:"\xAE",ReverseElement:"\u220B",ReverseEquilibrium:"\u21CB",ReverseUpEquilibrium:"\u296F",rfisht:"\u297D",rfloor:"\u230B",Rfr:"\u211C",rfr:"\u{1D52F}",rHar:"\u2964",rhard:"\u21C1",rharu:"\u21C0",rharul:"\u296C",Rho:"\u03A1",rho:"\u03C1",rhov:"\u03F1",RightAngleBracket:"\u27E9",RightArrow:"\u2192",Rightarrow:"\u21D2",rightarrow:"\u2192",RightArrowBar:"\u21E5",RightArrowLeftArrow:"\u21C4",rightarrowtail:"\u21A3",RightCeiling:"\u2309",RightDoubleBracket:"\u27E7",RightDownTeeVector:"\u295D",RightDownVector:"\u21C2",RightDownVectorBar:"\u2955",RightFloor:"\u230B",rightharpoondown:"\u21C1",rightharpoonup:"\u21C0",rightleftarrows:"\u21C4",rightleftharpoons:"\u21CC",rightrightarrows:"\u21C9",rightsquigarrow:"\u219D",RightTee:"\u22A2",RightTeeArrow:"\u21A6",RightTeeVector:"\u295B",rightthreetimes:"\u22CC",RightTriangle:"\u22B3",RightTriangleBar:"\u29D0",RightTriangleEqual:"\u22B5",RightUpDownVector:"\u294F",RightUpTeeVector:"\u295C",RightUpVector:"\u21BE",RightUpVectorBar:"\u2954",RightVector:"\u21C0",RightVectorBar:"\u2953",ring:"\u02DA",risingdotseq:"\u2253",rlarr:"\u21C4",rlhar:"\u21CC",rlm:"\u200F",rmoust:"\u23B1",rmoustache:"\u23B1",rnmid:"\u2AEE",roang:"\u27ED",roarr:"\u21FE",robrk:"\u27E7",ropar:"\u2986",Ropf:"\u211D",ropf:"\u{1D563}",roplus:"\u2A2E",rotimes:"\u2A35",RoundImplies:"\u2970",rpar:")",rpargt:"\u2994",rppolint:"\u2A12",rrarr:"\u21C9",Rrightarrow:"\u21DB",rsaquo:"\u203A",Rscr:"\u211B",rscr:"\u{1D4C7}",Rsh:"\u21B1",rsh:"\u21B1",rsqb:"]",rsquo:"\u2019",rsquor:"\u2019",rthree:"\u22CC",rtimes:"\u22CA",rtri:"\u25B9",rtrie:"\u22B5",rtrif:"\u25B8",rtriltri:"\u29CE",RuleDelayed:"\u29F4",ruluhar:"\u2968",rx:"\u211E",Sacute:"\u015A",sacute:"\u015B",sbquo:"\u201A",Sc:"\u2ABC",sc:"\u227B",scap:"\u2AB8",Scaron:"\u0160",scaron:"\u0161",sccue:"\u227D",scE:"\u2AB4",sce:"\u2AB0",Scedil:"\u015E",scedil:"\u015F",Scirc:"\u015C",scirc:"\u015D",scnap:"\u2ABA",scnE:"\u2AB6",scnsim:"\u22E9",scpolint:"\u2A13",scsim:"\u227F",Scy:"\u0421",scy:"\u0441",sdot:"\u22C5",sdotb:"\u22A1",sdote:"\u2A66",searhk:"\u2925",seArr:"\u21D8",searr:"\u2198",searrow:"\u2198",sect:"\xA7",semi:";",seswar:"\u2929",setminus:"\u2216",setmn:"\u2216",sext:"\u2736",Sfr:"\u{1D516}",sfr:"\u{1D530}",sfrown:"\u2322",sharp:"\u266F",SHCHcy:"\u0429",shchcy:"\u0449",SHcy:"\u0428",shcy:"\u0448",ShortDownArrow:"\u2193",ShortLeftArrow:"\u2190",shortmid:"\u2223",shortparallel:"\u2225",ShortRightArrow:"\u2192",ShortUpArrow:"\u2191",shy:"\xAD",Sigma:"\u03A3",sigma:"\u03C3",sigmaf:"\u03C2",sigmav:"\u03C2",sim:"\u223C",simdot:"\u2A6A",sime:"\u2243",simeq:"\u2243",simg:"\u2A9E",simgE:"\u2AA0",siml:"\u2A9D",simlE:"\u2A9F",simne:"\u2246",simplus:"\u2A24",simrarr:"\u2972",slarr:"\u2190",SmallCircle:"\u2218",smallsetminus:"\u2216",smashp:"\u2A33",smeparsl:"\u29E4",smid:"\u2223",smile:"\u2323",smt:"\u2AAA",smte:"\u2AAC",smtes:"\u2AAC\uFE00",SOFTcy:"\u042C",softcy:"\u044C",sol:"/",solb:"\u29C4",solbar:"\u233F",Sopf:"\u{1D54A}",sopf:"\u{1D564}",spades:"\u2660",spadesuit:"\u2660",spar:"\u2225",sqcap:"\u2293",sqcaps:"\u2293\uFE00",sqcup:"\u2294",sqcups:"\u2294\uFE00",Sqrt:"\u221A",sqsub:"\u228F",sqsube:"\u2291",sqsubset:"\u228F",sqsubseteq:"\u2291",sqsup:"\u2290",sqsupe:"\u2292",sqsupset:"\u2290",sqsupseteq:"\u2292",squ:"\u25A1",Square:"\u25A1",square:"\u25A1",SquareIntersection:"\u2293",SquareSubset:"\u228F",SquareSubsetEqual:"\u2291",SquareSuperset:"\u2290",SquareSupersetEqual:"\u2292",SquareUnion:"\u2294",squarf:"\u25AA",squf:"\u25AA",srarr:"\u2192",Sscr:"\u{1D4AE}",sscr:"\u{1D4C8}",ssetmn:"\u2216",ssmile:"\u2323",sstarf:"\u22C6",Star:"\u22C6",star:"\u2606",starf:"\u2605",straightepsilon:"\u03F5",straightphi:"\u03D5",strns:"\xAF",Sub:"\u22D0",sub:"\u2282",subdot:"\u2ABD",subE:"\u2AC5",sube:"\u2286",subedot:"\u2AC3",submult:"\u2AC1",subnE:"\u2ACB",subne:"\u228A",subplus:"\u2ABF",subrarr:"\u2979",Subset:"\u22D0",subset:"\u2282",subseteq:"\u2286",subseteqq:"\u2AC5",SubsetEqual:"\u2286",subsetneq:"\u228A",subsetneqq:"\u2ACB",subsim:"\u2AC7",subsub:"\u2AD5",subsup:"\u2AD3",succ:"\u227B",succapprox:"\u2AB8",succcurlyeq:"\u227D",Succeeds:"\u227B",SucceedsEqual:"\u2AB0",SucceedsSlantEqual:"\u227D",SucceedsTilde:"\u227F",succeq:"\u2AB0",succnapprox:"\u2ABA",succneqq:"\u2AB6",succnsim:"\u22E9",succsim:"\u227F",SuchThat:"\u220B",Sum:"\u2211",sum:"\u2211",sung:"\u266A",Sup:"\u22D1",sup:"\u2283",sup1:"\xB9",sup2:"\xB2",sup3:"\xB3",supdot:"\u2ABE",supdsub:"\u2AD8",supE:"\u2AC6",supe:"\u2287",supedot:"\u2AC4",Superset:"\u2283",SupersetEqual:"\u2287",suphsol:"\u27C9",suphsub:"\u2AD7",suplarr:"\u297B",supmult:"\u2AC2",supnE:"\u2ACC",supne:"\u228B",supplus:"\u2AC0",Supset:"\u22D1",supset:"\u2283",supseteq:"\u2287",supseteqq:"\u2AC6",supsetneq:"\u228B",supsetneqq:"\u2ACC",supsim:"\u2AC8",supsub:"\u2AD4",supsup:"\u2AD6",swarhk:"\u2926",swArr:"\u21D9",swarr:"\u2199",swarrow:"\u2199",swnwar:"\u292A",szlig:"\xDF",Tab:"	",target:"\u2316",Tau:"\u03A4",tau:"\u03C4",tbrk:"\u23B4",Tcaron:"\u0164",tcaron:"\u0165",Tcedil:"\u0162",tcedil:"\u0163",Tcy:"\u0422",tcy:"\u0442",tdot:"\u20DB",telrec:"\u2315",Tfr:"\u{1D517}",tfr:"\u{1D531}",there4:"\u2234",Therefore:"\u2234",therefore:"\u2234",Theta:"\u0398",theta:"\u03B8",thetasym:"\u03D1",thetav:"\u03D1",thickapprox:"\u2248",thicksim:"\u223C",ThickSpace:"\u205F\u200A",thinsp:"\u2009",ThinSpace:"\u2009",thkap:"\u2248",thksim:"\u223C",THORN:"\xDE",thorn:"\xFE",Tilde:"\u223C",tilde:"\u02DC",TildeEqual:"\u2243",TildeFullEqual:"\u2245",TildeTilde:"\u2248",times:"\xD7",timesb:"\u22A0",timesbar:"\u2A31",timesd:"\u2A30",tint:"\u222D",toea:"\u2928",top:"\u22A4",topbot:"\u2336",topcir:"\u2AF1",Topf:"\u{1D54B}",topf:"\u{1D565}",topfork:"\u2ADA",tosa:"\u2929",tprime:"\u2034",TRADE:"\u2122",trade:"\u2122",triangle:"\u25B5",triangledown:"\u25BF",triangleleft:"\u25C3",trianglelefteq:"\u22B4",triangleq:"\u225C",triangleright:"\u25B9",trianglerighteq:"\u22B5",tridot:"\u25EC",trie:"\u225C",triminus:"\u2A3A",TripleDot:"\u20DB",triplus:"\u2A39",trisb:"\u29CD",tritime:"\u2A3B",trpezium:"\u23E2",Tscr:"\u{1D4AF}",tscr:"\u{1D4C9}",TScy:"\u0426",tscy:"\u0446",TSHcy:"\u040B",tshcy:"\u045B",Tstrok:"\u0166",tstrok:"\u0167",twixt:"\u226C",twoheadleftarrow:"\u219E",twoheadrightarrow:"\u21A0",Uacute:"\xDA",uacute:"\xFA",Uarr:"\u219F",uArr:"\u21D1",uarr:"\u2191",Uarrocir:"\u2949",Ubrcy:"\u040E",ubrcy:"\u045E",Ubreve:"\u016C",ubreve:"\u016D",Ucirc:"\xDB",ucirc:"\xFB",Ucy:"\u0423",ucy:"\u0443",udarr:"\u21C5",Udblac:"\u0170",udblac:"\u0171",udhar:"\u296E",ufisht:"\u297E",Ufr:"\u{1D518}",ufr:"\u{1D532}",Ugrave:"\xD9",ugrave:"\xF9",uHar:"\u2963",uharl:"\u21BF",uharr:"\u21BE",uhblk:"\u2580",ulcorn:"\u231C",ulcorner:"\u231C",ulcrop:"\u230F",ultri:"\u25F8",Umacr:"\u016A",umacr:"\u016B",uml:"\xA8",UnderBar:"_",UnderBrace:"\u23DF",UnderBracket:"\u23B5",UnderParenthesis:"\u23DD",Union:"\u22C3",UnionPlus:"\u228E",Uogon:"\u0172",uogon:"\u0173",Uopf:"\u{1D54C}",uopf:"\u{1D566}",UpArrow:"\u2191",Uparrow:"\u21D1",uparrow:"\u2191",UpArrowBar:"\u2912",UpArrowDownArrow:"\u21C5",UpDownArrow:"\u2195",Updownarrow:"\u21D5",updownarrow:"\u2195",UpEquilibrium:"\u296E",upharpoonleft:"\u21BF",upharpoonright:"\u21BE",uplus:"\u228E",UpperLeftArrow:"\u2196",UpperRightArrow:"\u2197",Upsi:"\u03D2",upsi:"\u03C5",upsih:"\u03D2",Upsilon:"\u03A5",upsilon:"\u03C5",UpTee:"\u22A5",UpTeeArrow:"\u21A5",upuparrows:"\u21C8",urcorn:"\u231D",urcorner:"\u231D",urcrop:"\u230E",Uring:"\u016E",uring:"\u016F",urtri:"\u25F9",Uscr:"\u{1D4B0}",uscr:"\u{1D4CA}",utdot:"\u22F0",Utilde:"\u0168",utilde:"\u0169",utri:"\u25B5",utrif:"\u25B4",uuarr:"\u21C8",Uuml:"\xDC",uuml:"\xFC",uwangle:"\u29A7",vangrt:"\u299C",varepsilon:"\u03F5",varkappa:"\u03F0",varnothing:"\u2205",varphi:"\u03D5",varpi:"\u03D6",varpropto:"\u221D",vArr:"\u21D5",varr:"\u2195",varrho:"\u03F1",varsigma:"\u03C2",varsubsetneq:"\u228A\uFE00",varsubsetneqq:"\u2ACB\uFE00",varsupsetneq:"\u228B\uFE00",varsupsetneqq:"\u2ACC\uFE00",vartheta:"\u03D1",vartriangleleft:"\u22B2",vartriangleright:"\u22B3",Vbar:"\u2AEB",vBar:"\u2AE8",vBarv:"\u2AE9",Vcy:"\u0412",vcy:"\u0432",VDash:"\u22AB",Vdash:"\u22A9",vDash:"\u22A8",vdash:"\u22A2",Vdashl:"\u2AE6",Vee:"\u22C1",vee:"\u2228",veebar:"\u22BB",veeeq:"\u225A",vellip:"\u22EE",Verbar:"\u2016",verbar:"|",Vert:"\u2016",vert:"|",VerticalBar:"\u2223",VerticalLine:"|",VerticalSeparator:"\u2758",VerticalTilde:"\u2240",VeryThinSpace:"\u200A",Vfr:"\u{1D519}",vfr:"\u{1D533}",vltri:"\u22B2",vnsub:"\u2282\u20D2",vnsup:"\u2283\u20D2",Vopf:"\u{1D54D}",vopf:"\u{1D567}",vprop:"\u221D",vrtri:"\u22B3",Vscr:"\u{1D4B1}",vscr:"\u{1D4CB}",vsubnE:"\u2ACB\uFE00",vsubne:"\u228A\uFE00",vsupnE:"\u2ACC\uFE00",vsupne:"\u228B\uFE00",Vvdash:"\u22AA",vzigzag:"\u299A",Wcirc:"\u0174",wcirc:"\u0175",wedbar:"\u2A5F",Wedge:"\u22C0",wedge:"\u2227",wedgeq:"\u2259",weierp:"\u2118",Wfr:"\u{1D51A}",wfr:"\u{1D534}",Wopf:"\u{1D54E}",wopf:"\u{1D568}",wp:"\u2118",wr:"\u2240",wreath:"\u2240",Wscr:"\u{1D4B2}",wscr:"\u{1D4CC}",xcap:"\u22C2",xcirc:"\u25EF",xcup:"\u22C3",xdtri:"\u25BD",Xfr:"\u{1D51B}",xfr:"\u{1D535}",xhArr:"\u27FA",xharr:"\u27F7",Xi:"\u039E",xi:"\u03BE",xlArr:"\u27F8",xlarr:"\u27F5",xmap:"\u27FC",xnis:"\u22FB",xodot:"\u2A00",Xopf:"\u{1D54F}",xopf:"\u{1D569}",xoplus:"\u2A01",xotime:"\u2A02",xrArr:"\u27F9",xrarr:"\u27F6",Xscr:"\u{1D4B3}",xscr:"\u{1D4CD}",xsqcup:"\u2A06",xuplus:"\u2A04",xutri:"\u25B3",xvee:"\u22C1",xwedge:"\u22C0",Yacute:"\xDD",yacute:"\xFD",YAcy:"\u042F",yacy:"\u044F",Ycirc:"\u0176",ycirc:"\u0177",Ycy:"\u042B",ycy:"\u044B",yen:"\xA5",Yfr:"\u{1D51C}",yfr:"\u{1D536}",YIcy:"\u0407",yicy:"\u0457",Yopf:"\u{1D550}",yopf:"\u{1D56A}",Yscr:"\u{1D4B4}",yscr:"\u{1D4CE}",YUcy:"\u042E",yucy:"\u044E",Yuml:"\u0178",yuml:"\xFF",Zacute:"\u0179",zacute:"\u017A",Zcaron:"\u017D",zcaron:"\u017E",Zcy:"\u0417",zcy:"\u0437",Zdot:"\u017B",zdot:"\u017C",zeetrf:"\u2128",ZeroWidthSpace:"\u200B",Zeta:"\u0396",zeta:"\u03B6",Zfr:"\u2128",zfr:"\u{1D537}",ZHcy:"\u0416",zhcy:"\u0436",zigrarr:"\u21DD",Zopf:"\u2124",zopf:"\u{1D56B}",Zscr:"\u{1D4B5}",zscr:"\u{1D4CF}",zwj:"\u200D",zwnj:"\u200C"}),r.entityMap=r.HTML_ENTITIES})(t2);var _0={},To=ki.NAMESPACE,Xf=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,fm=new RegExp("[\\-\\.0-9"+Xf.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),dm=new RegExp("^"+Xf.source+fm.source+"*(?::"+Xf.source+fm.source+"*)?$"),Fa=0,si=1,As=2,ba=3,Cs=4,Ts=5,Ra=6,Tu=7;function oa(r,e){this.message=r,this.locator=e,Error.captureStackTrace&&Error.captureStackTrace(this,oa)}oa.prototype=new Error;oa.prototype.name=oa.name;function r2(){}r2.prototype={parse:function(r,e,t){var n=this.domBuilder;n.startDocument(),n2(e,e={}),j5(r,e,t,n,this.errorHandler),n.endDocument()}};function j5(r,e,t,n,i){function s(j){if(j>65535){j-=65536;var X=55296+(j>>10),B=56320+(j&1023);return String.fromCharCode(X,B)}else return String.fromCharCode(j)}function a(j){var X=j.slice(1,-1);return X in t?t[X]:X.charAt(0)==="#"?s(parseInt(X.substr(1).replace("x","0x"))):(i.error("entity not found:"+j),j)}function o(j){if(j>E){var X=r.substring(E,j).replace(/&#?\w+;/g,a);f&&u(E),n.characters(X,0,j-E),E=j}}function u(j,X){for(;j>=c&&(X=h.exec(r));)l=X.index,c=l+X[0].length,f.lineNumber++;f.columnNumber=j-l+1}for(var l=0,c=0,h=/.*(?:\r\n?|\n)|.*$/g,f=n.locator,d=[{currentNSMap:e}],m={},E=0;;){try{var p=r.indexOf("<",E);if(p<0){if(!r.substr(E).match(/^\s*$/)){var g=n.doc,v=g.createTextNode(r.substr(E));g.appendChild(v),n.currentElement=v}return}switch(p>E&&o(p),r.charAt(p+1)){case"/":var V=r.indexOf(">",p+3),y=r.substring(p+2,V).replace(/[ \t\n\r]+$/g,""),C=d.pop();V<0?(y=r.substring(p+2).replace(/[\s<].*/,""),i.error("end tag name: "+y+" is not complete:"+C.tagName),V=p+1+y.length):y.match(/\s</)&&(y=y.replace(/[\s<].*/,""),i.error("end tag name: "+y+" maybe not complete"),V=p+1+y.length);var A=C.localNSMap,T=C.tagName==y,S=T||C.tagName&&C.tagName.toLowerCase()==y.toLowerCase();if(S){if(n.endElement(C.uri,C.localName,y),A)for(var F in A)Object.prototype.hasOwnProperty.call(A,F)&&n.endPrefixMapping(F);T||i.fatalError("end tag name: "+y+" is not match the current start tagName:"+C.tagName)}else d.push(C);V++;break;case"?":f&&u(p),V=Z5(r,p,n);break;case"!":f&&u(p),V=X5(r,p,n,i);break;default:f&&u(p);var k=new i2,R=d[d.length-1].currentNSMap,V=K5(r,p,k,R,a,i),$=k.length;if(!k.closed&&Y5(r,V,k.tagName,m)&&(k.closed=!0,t.nbsp||i.warning("unclosed xml attribute")),f&&$){for(var ne=pm(f,{}),ve=0;ve<$;ve++){var H=k[ve];u(H.offset),H.locator=pm(f,{})}n.locator=ne,gm(k,n,R)&&d.push(k),n.locator=f}else gm(k,n,R)&&d.push(k);To.isHTML(k.uri)&&!k.closed?V=q5(r,V,k.tagName,a,n):V++}}catch(j){if(j instanceof oa)throw j;i.error("element parse error: "+j),V=-1}V>E?E=V:o(Math.max(p,E)+1)}}function pm(r,e){return e.lineNumber=r.lineNumber,e.columnNumber=r.columnNumber,e}function K5(r,e,t,n,i,s){function a(f,d,m){t.attributeNames.hasOwnProperty(f)&&s.fatalError("Attribute "+f+" redefined"),t.addValue(f,d,m)}for(var o,u,l=++e,c=Fa;;){var h=r.charAt(l);switch(h){case"=":if(c===si)o=r.slice(e,l),c=ba;else if(c===As)c=ba;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if(c===ba||c===si)if(c===si&&(s.warning('attribute value must after "="'),o=r.slice(e,l)),e=l+1,l=r.indexOf(h,e),l>0)u=r.slice(e,l).replace(/&#?\w+;/g,i),a(o,u,e-1),c=Ts;else throw new Error("attribute value no end '"+h+"' match");else if(c==Cs)u=r.slice(e,l).replace(/&#?\w+;/g,i),a(o,u,e),s.warning('attribute "'+o+'" missed start quot('+h+")!!"),e=l+1,c=Ts;else throw new Error('attribute value must after "="');break;case"/":switch(c){case Fa:t.setTagName(r.slice(e,l));case Ts:case Ra:case Tu:c=Tu,t.closed=!0;case Cs:case si:break;case As:t.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return s.error("unexpected end of input"),c==Fa&&t.setTagName(r.slice(e,l)),l;case">":switch(c){case Fa:t.setTagName(r.slice(e,l));case Ts:case Ra:case Tu:break;case Cs:case si:u=r.slice(e,l),u.slice(-1)==="/"&&(t.closed=!0,u=u.slice(0,-1));case As:c===As&&(u=o),c==Cs?(s.warning('attribute "'+u+'" missed quot(")!'),a(o,u.replace(/&#?\w+;/g,i),e)):((!To.isHTML(n[""])||!u.match(/^(?:disabled|checked|selected)$/i))&&s.warning('attribute "'+u+'" missed value!! "'+u+'" instead!!'),a(u,u,e));break;case ba:throw new Error("attribute value missed!!")}return l;case"\x80":h=" ";default:if(h<=" ")switch(c){case Fa:t.setTagName(r.slice(e,l)),c=Ra;break;case si:o=r.slice(e,l),c=As;break;case Cs:var u=r.slice(e,l).replace(/&#?\w+;/g,i);s.warning('attribute "'+u+'" missed quot(")!!'),a(o,u,e);case Ts:c=Ra;break}else switch(c){case As:t.tagName,(!To.isHTML(n[""])||!o.match(/^(?:disabled|checked|selected)$/i))&&s.warning('attribute "'+o+'" missed value!! "'+o+'" instead2!!'),a(o,o,e),e=l,c=si;break;case Ts:s.warning('attribute space is required"'+o+'"!!');case Ra:c=si,e=l;break;case ba:c=Cs,e=l;break;case Tu:throw new Error("elements closed character '/' and '>' must be connected to")}}l++}}function gm(r,e,t){for(var n=r.tagName,i=null,h=r.length;h--;){var s=r[h],a=s.qName,o=s.value,f=a.indexOf(":");if(f>0)var u=s.prefix=a.slice(0,f),l=a.slice(f+1),c=u==="xmlns"&&l;else l=a,u=null,c=a==="xmlns"&&"";s.localName=l,c!==!1&&(i==null&&(i={},n2(t,t={})),t[c]=i[c]=o,s.uri=To.XMLNS,e.startPrefixMapping(c,o))}for(var h=r.length;h--;){s=r[h];var u=s.prefix;u&&(u==="xml"&&(s.uri=To.XML),u!=="xmlns"&&(s.uri=t[u||""]))}var f=n.indexOf(":");f>0?(u=r.prefix=n.slice(0,f),l=r.localName=n.slice(f+1)):(u=null,l=r.localName=n);var d=r.uri=t[u||""];if(e.startElement(d,l,n,r),r.closed){if(e.endElement(d,l,n),i)for(u in i)Object.prototype.hasOwnProperty.call(i,u)&&e.endPrefixMapping(u)}else return r.currentNSMap=t,r.localNSMap=i,!0}function q5(r,e,t,n,i){if(/^(?:script|textarea)$/i.test(t)){var s=r.indexOf("</"+t+">",e),a=r.substring(e+1,s);if(/[&<]/.test(a))return/^script$/i.test(t)?(i.characters(a,0,a.length),s):(a=a.replace(/&#?\w+;/g,n),i.characters(a,0,a.length),s)}return e+1}function Y5(r,e,t,n){var i=n[t];return i==null&&(i=r.lastIndexOf("</"+t+">"),i<e&&(i=r.lastIndexOf("</"+t)),n[t]=i),i<e}function n2(r,e){for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}function X5(r,e,t,n){var i=r.charAt(e+2);switch(i){case"-":if(r.charAt(e+3)==="-"){var s=r.indexOf("-->",e+4);return s>e?(t.comment(r,e+4,s-e-4),s+3):(n.error("Unclosed comment"),-1)}else return-1;default:if(r.substr(e+3,6)=="CDATA["){var s=r.indexOf("]]>",e+9);return t.startCDATA(),t.characters(r,e+9,s-e-9),t.endCDATA(),s+3}var a=Q5(r,e),o=a.length;if(o>1&&/!doctype/i.test(a[0][0])){var u=a[1][0],l=!1,c=!1;o>3&&(/^public$/i.test(a[2][0])?(l=a[3][0],c=o>4&&a[4][0]):/^system$/i.test(a[2][0])&&(c=a[3][0]));var h=a[o-1];return t.startDTD(u,l,c),t.endDTD(),h.index+h[0].length}}return-1}function Z5(r,e,t){var n=r.indexOf("?>",e);if(n){var i=r.substring(e,n).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return i?(i[0].length,t.processingInstruction(i[1],i[2]),n+2):-1}return-1}function i2(){this.attributeNames={}}i2.prototype={setTagName:function(r){if(!dm.test(r))throw new Error("invalid tagName:"+r);this.tagName=r},addValue:function(r,e,t){if(!dm.test(r))throw new Error("invalid attribute:"+r);this.attributeNames[r]=this.length,this[this.length++]={qName:r,value:e,offset:t}},length:0,getLocalName:function(r){return this[r].localName},getLocator:function(r){return this[r].locator},getQName:function(r){return this[r].qName},getURI:function(r){return this[r].uri},getValue:function(r){return this[r].value}};function Q5(r,e){var t,n=[],i=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(i.lastIndex=e,i.exec(r);t=i.exec(r);)if(n.push(t),t[1])return n}_0.XMLReader=r2;_0.ParseError=oa;var J5=ki,F0=ti,mm=t2,s2=_0,e_=F0.DOMImplementation,vm=J5.NAMESPACE,t_=s2.ParseError,r_=s2.XMLReader;function a2(r){this.options=r||{locator:{}}}a2.prototype.parseFromString=function(r,e){var t=this.options,n=new r_,i=t.domBuilder||new Uo,s=t.errorHandler,a=t.locator,o=t.xmlns||{},u=/\/x?html?$/.test(e),l=u?mm.HTML_ENTITIES:mm.XML_ENTITIES;return a&&i.setDocumentLocator(a),n.errorHandler=n_(s,i,a),n.domBuilder=t.domBuilder||i,u&&(o[""]=vm.HTML),o.xml=o.xml||vm.XML,r&&typeof r=="string"?n.parse(r,o,l):n.errorHandler.error("invalid doc source"),i.doc};function n_(r,e,t){if(!r){if(e instanceof Uo)return e;r=e}var n={},i=r instanceof Function;t=t||{};function s(a){var o=r[a];!o&&i&&(o=r.length==2?function(u){r(a,u)}:r),n[a]=o&&function(u){o("[xmldom "+a+"]	"+u+Zf(t))}||function(){}}return s("warning"),s("error"),s("fatalError"),n}function Uo(){this.cdata=!1}function Ss(r,e){e.lineNumber=r.lineNumber,e.columnNumber=r.columnNumber}Uo.prototype={startDocument:function(){this.doc=new e_().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(r,e,t,n){var i=this.doc,s=i.createElementNS(r,t||e),a=n.length;Su(this,s),this.currentElement=s,this.locator&&Ss(this.locator,s);for(var o=0;o<a;o++){var r=n.getURI(o),u=n.getValue(o),t=n.getQName(o),l=i.createAttributeNS(r,t);this.locator&&Ss(n.getLocator(o),l),l.value=l.nodeValue=u,s.setAttributeNode(l)}},endElement:function(r,e,t){var n=this.currentElement;n.tagName,this.currentElement=n.parentNode},startPrefixMapping:function(r,e){},endPrefixMapping:function(r){},processingInstruction:function(r,e){var t=this.doc.createProcessingInstruction(r,e);this.locator&&Ss(this.locator,t),Su(this,t)},ignorableWhitespace:function(r,e,t){},characters:function(r,e,t){if(r=Em.apply(this,arguments),r){if(this.cdata)var n=this.doc.createCDATASection(r);else var n=this.doc.createTextNode(r);this.currentElement?this.currentElement.appendChild(n):/^\s*$/.test(r)&&this.doc.appendChild(n),this.locator&&Ss(this.locator,n)}},skippedEntity:function(r){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(r){(this.locator=r)&&(r.lineNumber=0)},comment:function(r,e,t){r=Em.apply(this,arguments);var n=this.doc.createComment(r);this.locator&&Ss(this.locator,n),Su(this,n)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(r,e,t){var n=this.doc.implementation;if(n&&n.createDocumentType){var i=n.createDocumentType(r,e,t);this.locator&&Ss(this.locator,i),Su(this,i),this.doc.doctype=i}},warning:function(r){console.warn("[xmldom warning]	"+r,Zf(this.locator))},error:function(r){console.error("[xmldom error]	"+r,Zf(this.locator))},fatalError:function(r){throw new t_(r,this.locator)}};function Zf(r){if(r)return`
@`+(r.systemId||"")+"#[line:"+r.lineNumber+",col:"+r.columnNumber+"]"}function Em(r,e,t){return typeof r=="string"?r.substr(e,t):r.length>=e+t||e?new java.lang.String(r,e,t)+"":r}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(r){Uo.prototype[r]=function(){return null}});function Su(r,e){r.currentElement?r.currentElement.appendChild(e):r.doc.appendChild(e)}Mo.__DOMHandler=Uo;Mo.DOMParser=a2;Mo.DOMImplementation=F0.DOMImplementation;Mo.XMLSerializer=F0.XMLSerializer;var o2=ti;Bo.DOMImplementation=o2.DOMImplementation;Bo.XMLSerializer=o2.XMLSerializer;Bo.DOMParser=Mo.DOMParser;Object.defineProperty(xe,"__esModule",{value:!0});xe.RangeObject=void 0;xe.blob2base64=R_;xe.borders=m_;xe.bounds=g_;xe.createBase64Url=S_;xe.createBlob=h2;xe.createBlobUrl=C_;xe.defaults=f_;xe.defer=L_;xe.documentHeight=u_;xe.extend=d_;xe.filterChildren=B_;xe.findChildren=k_;xe.getParentByTagName=O_;xe.indexOfElementNode=x_;xe.indexOfNode=b0;xe.indexOfSorted=Qf;xe.indexOfTextNode=y_;xe.insert=p_;xe.isElement=l_;xe.isFloat=c_;xe.isNumber=c2;xe.isXml=A_;xe.locationOf=wl;xe.nodeBounds=v_;xe.parents=Jf;xe.parse=w_;xe.prefixed=h_;xe.qs=__;xe.qsa=f2;xe.qsp=F_;xe.querySelectorByType=I_;xe.requestAnimationFrame=void 0;xe.revokeBlobUrl=T_;xe.sprint=b_;xe.treeWalker=d2;xe.type=D_;xe.uuid=l2;xe.walk=R0;xe.windowBounds=E_;var i_=Bo;const s_=typeof window<"u"?window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame:!1;xe.requestAnimationFrame=s_;const a_=1,o_=3,u2=typeof URL<"u"?URL:typeof window<"u"?window.URL||window.webkitURL||window.mozURL:void 0;function l2(){var r=new Date().getTime(),e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=(r+Math.random()*16)%16|0;return r=Math.floor(r/16),(t=="x"?n:n&7|8).toString(16)});return e}function u_(){return Math.max(document.documentElement.clientHeight,document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight)}function l_(r){return!!(r&&r.nodeType==1)}function c2(r){return!isNaN(parseFloat(r))&&isFinite(r)}function c_(r){let e=parseFloat(r);return c2(r)===!1?!1:typeof r=="string"&&r.indexOf(".")>-1?!0:Math.floor(e)!==e}function h_(r){var e=["Webkit","webkit","Moz","O","ms"],t=["-webkit-","-webkit-","-moz-","-o-","-ms-"],n=r.toLowerCase(),i=e.length;if(typeof document>"u"||typeof document.body.style[n]<"u")return r;for(var s=0;s<i;s++)if(typeof document.body.style[t[s]+n]<"u")return t[s]+n;return r}function f_(r){for(var e=1,t=arguments.length;e<t;e++){var n=arguments[e];for(var i in n)r[i]===void 0&&(r[i]=n[i])}return r}function d_(r){var e=[].slice.call(arguments,1);return e.forEach(function(t){!t||Object.getOwnPropertyNames(t).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}),r}function p_(r,e,t){var n=wl(r,e,t);return e.splice(n,0,r),n}function wl(r,e,t,n,i){var s=n||0,a=i||e.length,o=parseInt(s+(a-s)/2),u;return t||(t=function(l,c){if(l>c)return 1;if(l<c)return-1;if(l==c)return 0}),a-s<=0?o:(u=t(e[o],r),a-s===1?u>=0?o:o+1:u===0?o:u===-1?wl(r,e,t,o,a):wl(r,e,t,s,o))}function Qf(r,e,t,n,i){var s=n||0,a=i||e.length,o=parseInt(s+(a-s)/2),u;return t||(t=function(l,c){if(l>c)return 1;if(l<c)return-1;if(l==c)return 0}),a-s<=0?-1:(u=t(e[o],r),a-s===1?u===0?o:-1:u===0?o:u===-1?Qf(r,e,t,o,a):Qf(r,e,t,s,o))}function g_(r){var e=window.getComputedStyle(r),t=["width","paddingRight","paddingLeft","marginRight","marginLeft","borderRightWidth","borderLeftWidth"],n=["height","paddingTop","paddingBottom","marginTop","marginBottom","borderTopWidth","borderBottomWidth"],i=0,s=0;return t.forEach(function(a){i+=parseFloat(e[a])||0}),n.forEach(function(a){s+=parseFloat(e[a])||0}),{height:s,width:i}}function m_(r){var e=window.getComputedStyle(r),t=["paddingRight","paddingLeft","marginRight","marginLeft","borderRightWidth","borderLeftWidth"],n=["paddingTop","paddingBottom","marginTop","marginBottom","borderTopWidth","borderBottomWidth"],i=0,s=0;return t.forEach(function(a){i+=parseFloat(e[a])||0}),n.forEach(function(a){s+=parseFloat(e[a])||0}),{height:s,width:i}}function v_(r){let e,t=r.ownerDocument;if(r.nodeType==Node.TEXT_NODE){let n=t.createRange();n.selectNodeContents(r),e=n.getBoundingClientRect()}else e=r.getBoundingClientRect();return e}function E_(){var r=window.innerWidth,e=window.innerHeight;return{top:0,left:0,right:r,bottom:e,width:r,height:e}}function b0(r,e){for(var t=r.parentNode,n=t.childNodes,i,s=-1,a=0;a<n.length&&(i=n[a],i.nodeType===e&&s++,i!=r);a++);return s}function y_(r){return b0(r,o_)}function x_(r){return b0(r,a_)}function A_(r){return["xml","opf","ncx"].indexOf(r)>-1}function h2(r,e){return new Blob([r],{type:e})}function C_(r,e){var t,n=h2(r,e);return t=u2.createObjectURL(n),t}function T_(r){return u2.revokeObjectURL(r)}function S_(r,e){var t,n;if(typeof r=="string")return t=btoa(r),n="data:"+e+";base64,"+t,n}function D_(r){return Object.prototype.toString.call(r).slice(8,-1)}function w_(r,e,t){var n,i;return typeof DOMParser>"u"||t?i=i_.DOMParser:i=DOMParser,r.charCodeAt(0)===65279&&(r=r.slice(1)),n=new i().parseFromString(r,e),n}function __(r,e){var t;if(!r)throw new Error("No Element Provided");if(typeof r.querySelector<"u")return r.querySelector(e);if(t=r.getElementsByTagName(e),t.length)return t[0]}function f2(r,e){return typeof r.querySelector<"u"?r.querySelectorAll(e):r.getElementsByTagName(e)}function F_(r,e,t){var n,i;if(typeof r.querySelector<"u"){e+="[";for(var s in t)e+=s+"~='"+t[s]+"'";return e+="]",r.querySelector(e)}else if(n=r.getElementsByTagName(e),i=Array.prototype.slice.call(n,0).filter(function(a){for(var o in t)if(a.getAttribute(o)===t[o])return!0;return!1}),i)return i[0]}function b_(r,e){var t=r.ownerDocument||r;typeof t.createTreeWalker<"u"?d2(r,e,NodeFilter.SHOW_TEXT):R0(r,function(n){n&&n.nodeType===3&&e(n)})}function d2(r,e,t){var n=document.createTreeWalker(r,t,null,!1);let i;for(;i=n.nextNode();)e(i)}function R0(r,e){if(e(r))return!0;if(r=r.firstChild,r)do{if(R0(r,e))return!0;r=r.nextSibling}while(r)}function R_(r){return new Promise(function(e,t){var n=new FileReader;n.readAsDataURL(r),n.onloadend=function(){e(n.result)}})}function L_(){this.resolve=null,this.reject=null,this.id=l2(),this.promise=new Promise((r,e)=>{this.resolve=r,this.reject=e}),Object.freeze(this)}function I_(r,e,t){var n;if(typeof r.querySelector<"u"&&(n=r.querySelector(`${e}[*|type="${t}"]`)),!n||n.length===0){n=f2(r,e);for(var i=0;i<n.length;i++)if(n[i].getAttributeNS("http://www.idpf.org/2007/ops","type")===t||n[i].getAttribute("epub:type")===t)return n[i]}else return n}function k_(r){for(var e=[],t=r.childNodes,n=0;n<t.length;n++){let i=t[n];i.nodeType===1&&e.push(i)}return e}function Jf(r){for(var e=[r];r;r=r.parentNode)e.unshift(r);return e}function B_(r,e,t){for(var n=[],i=r.childNodes,s=0;s<i.length;s++){let a=i[s];if(a.nodeType===1&&a.nodeName.toLowerCase()===e){if(t)return a;n.push(a)}}if(!t)return n}function O_(r,e){let t;if(!(r===null||e===""))for(t=r.parentNode;t.nodeType===1;){if(t.tagName.toLowerCase()===e)return t;t=t.parentNode}}class N_{constructor(){this.collapsed=!1,this.commonAncestorContainer=void 0,this.endContainer=void 0,this.endOffset=void 0,this.startContainer=void 0,this.startOffset=void 0}setStart(e,t){this.startContainer=e,this.startOffset=t,this.endContainer?this.commonAncestorContainer=this._commonAncestorContainer():this.collapse(!0),this._checkCollapsed()}setEnd(e,t){this.endContainer=e,this.endOffset=t,this.startContainer?(this.collapsed=!1,this.commonAncestorContainer=this._commonAncestorContainer()):this.collapse(!1),this._checkCollapsed()}collapse(e){this.collapsed=!0,e?(this.endContainer=this.startContainer,this.endOffset=this.startOffset,this.commonAncestorContainer=this.startContainer.parentNode):(this.startContainer=this.endContainer,this.startOffset=this.endOffset,this.commonAncestorContainer=this.endOffset.parentNode)}selectNode(e){let t=e.parentNode,n=Array.prototype.indexOf.call(t.childNodes,e);this.setStart(t,n),this.setEnd(t,n+1)}selectNodeContents(e){e.childNodes[e.childNodes-1];let t=e.nodeType===3?e.textContent.length:parent.childNodes.length;this.setStart(e,0),this.setEnd(e,t)}_commonAncestorContainer(e,t){var n=Jf(e||this.startContainer),i=Jf(t||this.endContainer);if(n[0]==i[0]){for(var s=0;s<n.length;s++)if(n[s]!=i[s])return n[s-1]}}_checkCollapsed(){this.startContainer===this.endContainer&&this.startOffset===this.endOffset?this.collapsed=!0:this.collapsed=!1}toString(){}}xe.RangeObject=N_;var us={},Ln={};if(!p2)var p2={cwd:function(){return"/"}};function xn(r){if(typeof r!="string")throw new TypeError("Path must be a string. Received "+r)}function ym(r,e){for(var t="",n=-1,i=0,s,a=0;a<=r.length;++a){if(a<r.length)s=r.charCodeAt(a);else{if(s===47)break;s=47}if(s===47){if(!(n===a-1||i===1))if(n!==a-1&&i===2){if(t.length<2||t.charCodeAt(t.length-1)!==46||t.charCodeAt(t.length-2)!==46){if(t.length>2){for(var o=t.length-1,u=o;u>=0&&t.charCodeAt(u)!==47;--u);if(u!==o){u===-1?t="":t=t.slice(0,u),n=a,i=0;continue}}else if(t.length===2||t.length===1){t="",n=a,i=0;continue}}e&&(t.length>0?t+="/..":t="..")}else t.length>0?t+="/"+r.slice(n+1,a):t=r.slice(n+1,a);n=a,i=0}else s===46&&i!==-1?++i:i=-1}return t}function P_(r,e){var t=e.dir||e.root,n=e.base||(e.name||"")+(e.ext||"");return t?t===e.root?t+n:t+r+n:n}var Wu={resolve:function(){for(var e="",t=!1,n,i=arguments.length-1;i>=-1&&!t;i--){var s;i>=0?s=arguments[i]:(n===void 0&&(n=p2.cwd()),s=n),xn(s),s.length!==0&&(e=s+"/"+e,t=s.charCodeAt(0)===47)}return e=ym(e,!t),t?e.length>0?"/"+e:"/":e.length>0?e:"."},normalize:function(e){if(xn(e),e.length===0)return".";var t=e.charCodeAt(0)===47,n=e.charCodeAt(e.length-1)===47;return e=ym(e,!t),e.length===0&&!t&&(e="."),e.length>0&&n&&(e+="/"),t?"/"+e:e},isAbsolute:function(e){return xn(e),e.length>0&&e.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var e,t=0;t<arguments.length;++t){var n=arguments[t];xn(n),n.length>0&&(e===void 0?e=n:e+="/"+n)}return e===void 0?".":Wu.normalize(e)},relative:function(e,t){if(xn(e),xn(t),e===t||(e=Wu.resolve(e),t=Wu.resolve(t),e===t))return"";for(var n=1;n<e.length&&e.charCodeAt(n)===47;++n);for(var i=e.length,s=i-n,a=1;a<t.length&&t.charCodeAt(a)===47;++a);for(var o=t.length,u=o-a,l=s<u?s:u,c=-1,h=0;h<=l;++h){if(h===l){if(u>l){if(t.charCodeAt(a+h)===47)return t.slice(a+h+1);if(h===0)return t.slice(a+h)}else s>l&&(e.charCodeAt(n+h)===47?c=h:h===0&&(c=0));break}var f=e.charCodeAt(n+h),d=t.charCodeAt(a+h);if(f!==d)break;f===47&&(c=h)}var m="";for(h=n+c+1;h<=i;++h)(h===i||e.charCodeAt(h)===47)&&(m.length===0?m+="..":m+="/..");return m.length>0?m+t.slice(a+c):(a+=c,t.charCodeAt(a)===47&&++a,t.slice(a))},_makeLong:function(e){return e},dirname:function(e){if(xn(e),e.length===0)return".";for(var t=e.charCodeAt(0),n=t===47,i=-1,s=!0,a=e.length-1;a>=1;--a)if(t=e.charCodeAt(a),t===47){if(!s){i=a;break}}else s=!1;return i===-1?n?"/":".":n&&i===1?"//":e.slice(0,i)},basename:function(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');xn(e);var n=0,i=-1,s=!0,a;if(t!==void 0&&t.length>0&&t.length<=e.length){if(t.length===e.length&&t===e)return"";var o=t.length-1,u=-1;for(a=e.length-1;a>=0;--a){var l=e.charCodeAt(a);if(l===47){if(!s){n=a+1;break}}else u===-1&&(s=!1,u=a+1),o>=0&&(l===t.charCodeAt(o)?--o===-1&&(i=a):(o=-1,i=u))}return n===i?i=u:i===-1&&(i=e.length),e.slice(n,i)}else{for(a=e.length-1;a>=0;--a)if(e.charCodeAt(a)===47){if(!s){n=a+1;break}}else i===-1&&(s=!1,i=a+1);return i===-1?"":e.slice(n,i)}},extname:function(e){xn(e);for(var t=-1,n=0,i=-1,s=!0,a=0,o=e.length-1;o>=0;--o){var u=e.charCodeAt(o);if(u===47){if(!s){n=o+1;break}continue}i===-1&&(s=!1,i=o+1),u===46?t===-1?t=o:a!==1&&(a=1):t!==-1&&(a=-1)}return t===-1||i===-1||a===0||a===1&&t===i-1&&t===n+1?"":e.slice(t,i)},format:function(e){if(e===null||typeof e!="object")throw new TypeError('Parameter "pathObject" must be an object, not '+typeof e);return P_("/",e)},parse:function(e){xn(e);var t={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return t;var n=e.charCodeAt(0),i=n===47,s;i?(t.root="/",s=1):s=0;for(var a=-1,o=0,u=-1,l=!0,c=e.length-1,h=0;c>=s;--c){if(n=e.charCodeAt(c),n===47){if(!l){o=c+1;break}continue}u===-1&&(l=!1,u=c+1),n===46?a===-1?a=c:h!==1&&(h=1):a!==-1&&(h=-1)}return a===-1||u===-1||h===0||h===1&&a===u-1&&a===o+1?u!==-1&&(o===0&&i?t.base=t.name=e.slice(1,u):t.base=t.name=e.slice(o,u)):(o===0&&i?(t.name=e.slice(1,a),t.base=e.slice(1,u)):(t.name=e.slice(o,a),t.base=e.slice(o,u)),t.ext=e.slice(a,u)),o>0?t.dir=e.slice(0,o-1):i&&(t.dir="/"),t},sep:"/",delimiter:":",posix:null},ec=Wu;Object.defineProperty(Ln,"__esModule",{value:!0});Ln.default=void 0;var Du=M_(ec);function M_(r){return r&&r.__esModule?r:{default:r}}class U_{constructor(e){var t,n;t=e.indexOf("://"),t>-1&&(e=new URL(e).pathname),n=this.parse(e),this.path=e,this.isDirectory(e)?this.directory=e:this.directory=n.dir+"/",this.filename=n.base,this.extension=n.ext.slice(1)}parse(e){return Du.default.parse(e)}isAbsolute(e){return Du.default.isAbsolute(e||this.path)}isDirectory(e){return e.charAt(e.length-1)==="/"}resolve(e){return Du.default.resolve(this.directory,e)}relative(e){var t=e&&e.indexOf("://")>-1;return t?e:Du.default.relative(this.directory,e)}splitPath(e){return this.splitPathRe.exec(e).slice(1)}toString(){return this.path}}var $_=U_;Ln.default=$_;Object.defineProperty(us,"__esModule",{value:!0});us.default=void 0;var xm=g2(Ln),Am=g2(ec);function g2(r){return r&&r.__esModule?r:{default:r}}class z_{constructor(e,t){var n=e.indexOf("://")>-1,i=e,s;if(this.Url=void 0,this.href=e,this.protocol="",this.origin="",this.hash="",this.hash="",this.search="",this.base=t,!n&&t!==!1&&typeof t!="string"&&window&&window.location&&(this.base=window.location.href),n||this.base)try{this.base?this.Url=new URL(e,this.base):this.Url=new URL(e),this.href=this.Url.href,this.protocol=this.Url.protocol,this.origin=this.Url.origin,this.hash=this.Url.hash,this.search=this.Url.search,i=this.Url.pathname+(this.Url.search?this.Url.search:"")}catch{this.Url=void 0,this.base&&(s=new xm.default(this.base),i=s.resolve(i))}this.Path=new xm.default(i),this.directory=this.Path.directory,this.filename=this.Path.filename,this.extension=this.Path.extension}path(){return this.Path}resolve(e){var t=e.indexOf("://")>-1,n;return t?e:(n=Am.default.resolve(this.directory,e),this.origin+n)}relative(e){return Am.default.relative(e,this.directory)}toString(){return this.href}}var V_=z_;us.default=V_;var tc={},ar={};Object.defineProperty(ar,"__esModule",{value:!0});ar.default=void 0;var ai=xe;const Ds=1,Mr=3,G_=9;class Vi{constructor(e,t,n){var i;if(this.str="",this.base={},this.spinePos=0,this.range=!1,this.path={},this.start=null,this.end=null,!(this instanceof Vi))return new Vi(e,t,n);if(typeof t=="string"?this.base=this.parseComponent(t):typeof t=="object"&&t.steps&&(this.base=t),i=this.checkType(e),i==="string")return this.str=e,(0,ai.extend)(this,this.parse(e));if(i==="range")return(0,ai.extend)(this,this.fromRange(e,this.base,n));if(i==="node")return(0,ai.extend)(this,this.fromNode(e,this.base,n));if(i==="EpubCFI"&&e.path)return e;if(e)throw new TypeError("not a valid argument for EpubCFI");return this}checkType(e){return this.isCfiString(e)?"string":e&&typeof e=="object"&&((0,ai.type)(e)==="Range"||typeof e.startContainer<"u")?"range":e&&typeof e=="object"&&typeof e.nodeType<"u"?"node":e&&typeof e=="object"&&e instanceof Vi?"EpubCFI":!1}parse(e){var t={spinePos:-1,range:!1,base:{},path:{},start:null,end:null},n,i,s;return typeof e!="string"?{spinePos:-1}:(e.indexOf("epubcfi(")===0&&e[e.length-1]===")"&&(e=e.slice(8,e.length-1)),n=this.getChapterComponent(e),n?(t.base=this.parseComponent(n),i=this.getPathComponent(e),t.path=this.parseComponent(i),s=this.getRange(e),s&&(t.range=!0,t.start=this.parseComponent(s[0]),t.end=this.parseComponent(s[1])),t.spinePos=t.base.steps[1].index,t):{spinePos:-1})}parseComponent(e){var t={steps:[],terminal:{offset:null,assertion:null}},n=e.split(":"),i=n[0].split("/"),s;return n.length>1&&(s=n[1],t.terminal=this.parseTerminal(s)),i[0]===""&&i.shift(),t.steps=i.map(function(a){return this.parseStep(a)}.bind(this)),t}parseStep(e){var t,n,i,s,a;if(s=e.match(/\[(.*)\]/),s&&s[1]&&(a=s[1]),n=parseInt(e),!isNaN(n))return n%2===0?(t="element",i=n/2-1):(t="text",i=(n-1)/2),{type:t,index:i,id:a||null}}parseTerminal(e){var t,n,i=e.match(/\[(.*)\]/);return i&&i[1]?(t=parseInt(e.split("[")[0]),n=i[1]):t=parseInt(e),(0,ai.isNumber)(t)||(t=null),{offset:t,assertion:n}}getChapterComponent(e){var t=e.split("!");return t[0]}getPathComponent(e){var t=e.split("!");if(t[1])return t[1].split(",")[0]}getRange(e){var t=e.split(",");return t.length===3?[t[1],t[2]]:!1}getCharecterOffsetComponent(e){var t=e.split(":");return t[1]||""}joinSteps(e){return e?e.map(function(t){var n="";return t.type==="element"&&(n+=(t.index+1)*2),t.type==="text"&&(n+=1+2*t.index),t.id&&(n+="["+t.id+"]"),n}).join("/"):""}segmentString(e){var t="/";return t+=this.joinSteps(e.steps),e.terminal&&e.terminal.offset!=null&&(t+=":"+e.terminal.offset),e.terminal&&e.terminal.assertion!=null&&(t+="["+e.terminal.assertion+"]"),t}toString(){var e="epubcfi(";return e+=this.segmentString(this.base),e+="!",e+=this.segmentString(this.path),this.range&&this.start&&(e+=",",e+=this.segmentString(this.start)),this.range&&this.end&&(e+=",",e+=this.segmentString(this.end)),e+=")",e}compare(e,t){var n,i,s,a;if(typeof e=="string"&&(e=new Vi(e)),typeof t=="string"&&(t=new Vi(t)),e.spinePos>t.spinePos)return 1;if(e.spinePos<t.spinePos)return-1;e.range?(n=e.path.steps.concat(e.start.steps),s=e.start.terminal):(n=e.path.steps,s=e.path.terminal),t.range?(i=t.path.steps.concat(t.start.steps),a=t.start.terminal):(i=t.path.steps,a=t.path.terminal);for(var o=0;o<n.length;o++){if(!n[o])return-1;if(!i[o]||n[o].index>i[o].index)return 1;if(n[o].index<i[o].index)return-1}return n.length<i.length?-1:s.offset>a.offset?1:s.offset<a.offset?-1:0}step(e){var t=e.nodeType===Mr?"text":"element";return{id:e.id,tagName:e.tagName,type:t,index:this.position(e)}}filteredStep(e,t){var n=this.filter(e,t),i;if(!!n)return i=n.nodeType===Mr?"text":"element",{id:n.id,tagName:n.tagName,type:i,index:this.filteredPosition(n,t)}}pathTo(e,t,n){for(var i={steps:[],terminal:{offset:null,assertion:null}},s=e,a;s&&s.parentNode&&s.parentNode.nodeType!=G_;)n?a=this.filteredStep(s,n):a=this.step(s),a&&i.steps.unshift(a),s=s.parentNode;return t!=null&&t>=0&&(i.terminal.offset=t,i.steps[i.steps.length-1].type!="text"&&i.steps.push({type:"text",index:0})),i}equalStep(e,t){return!e||!t?!1:e.index===t.index&&e.id===t.id&&e.type===t.type}fromRange(e,t,n){var i={range:!1,base:{},path:{},start:null,end:null},s=e.startContainer,a=e.endContainer,o=e.startOffset,u=e.endOffset,l=!1;if(n&&(l=s.ownerDocument.querySelector("."+n)!=null),typeof t=="string"?(i.base=this.parseComponent(t),i.spinePos=i.base.steps[1].index):typeof t=="object"&&(i.base=t),e.collapsed)l&&(o=this.patchOffset(s,o,n)),i.path=this.pathTo(s,o,n);else{i.range=!0,l&&(o=this.patchOffset(s,o,n)),i.start=this.pathTo(s,o,n),l&&(u=this.patchOffset(a,u,n)),i.end=this.pathTo(a,u,n),i.path={steps:[],terminal:null};var c=i.start.steps.length,h;for(h=0;h<c&&this.equalStep(i.start.steps[h],i.end.steps[h]);h++)h===c-1?i.start.terminal===i.end.terminal&&(i.path.steps.push(i.start.steps[h]),i.range=!1):i.path.steps.push(i.start.steps[h]);i.start.steps=i.start.steps.slice(i.path.steps.length),i.end.steps=i.end.steps.slice(i.path.steps.length)}return i}fromNode(e,t,n){var i={range:!1,base:{},path:{},start:null,end:null};return typeof t=="string"?(i.base=this.parseComponent(t),i.spinePos=i.base.steps[1].index):typeof t=="object"&&(i.base=t),i.path=this.pathTo(e,null,n),i}filter(e,t){var n,i,s,a,o,u=!1;return e.nodeType===Mr?(u=!0,s=e.parentNode,n=e.parentNode.classList.contains(t)):(u=!1,n=e.classList.contains(t)),n&&u?(a=s.previousSibling,o=s.nextSibling,a&&a.nodeType===Mr?i=a:o&&o.nodeType===Mr&&(i=o),i||e):n&&!u?!1:e}patchOffset(e,t,n){if(e.nodeType!=Mr)throw new Error("Anchor must be a text node");var i=e,s=t;for(e.parentNode.classList.contains(n)&&(i=e.parentNode);i.previousSibling;){if(i.previousSibling.nodeType===Ds)if(i.previousSibling.classList.contains(n))s+=i.previousSibling.textContent.length;else break;else s+=i.previousSibling.textContent.length;i=i.previousSibling}return s}normalizedMap(e,t,n){var i={},s=-1,a,o=e.length,u,l;for(a=0;a<o;a++)u=e[a].nodeType,u===Ds&&e[a].classList.contains(n)&&(u=Mr),a>0&&u===Mr&&l===Mr?i[a]=s:t===u&&(s=s+1,i[a]=s),l=u;return i}position(e){var t,n;return e.nodeType===Ds?(t=e.parentNode.children,t||(t=(0,ai.findChildren)(e.parentNode)),n=Array.prototype.indexOf.call(t,e)):(t=this.textNodes(e.parentNode),n=t.indexOf(e)),n}filteredPosition(e,t){var n,i,s;return e.nodeType===Ds?(n=e.parentNode.children,s=this.normalizedMap(n,Ds,t)):(n=e.parentNode.childNodes,e.parentNode.classList.contains(t)&&(e=e.parentNode,n=e.parentNode.childNodes),s=this.normalizedMap(n,Mr,t)),i=Array.prototype.indexOf.call(n,e),s[i]}stepsToXpath(e){var t=[".","*"];return e.forEach(function(n){var i=n.index+1;n.id?t.push("*[position()="+i+" and @id='"+n.id+"']"):n.type==="text"?t.push("text()["+i+"]"):t.push("*["+i+"]")}),t.join("/")}stepsToQuerySelector(e){var t=["html"];return e.forEach(function(n){var i=n.index+1;n.id?t.push("#"+n.id):n.type==="text"||t.push("*:nth-child("+i+")")}),t.join(">")}textNodes(e,t){return Array.prototype.slice.call(e.childNodes).filter(function(n){return n.nodeType===Mr?!0:!!(t&&n.classList.contains(t))})}walkToNode(e,t,n){var i=t||document,s=i.documentElement,a,o,u=e.length,l;for(l=0;l<u&&(o=e[l],o.type==="element"?o.id?s=i.getElementById(o.id):(a=s.children||(0,ai.findChildren)(s),s=a[o.index]):o.type==="text"&&(s=this.textNodes(s,n)[o.index]),!!s);l++);return s}findNode(e,t,n){var i=t||document,s,a;return!n&&typeof i.evaluate<"u"?(a=this.stepsToXpath(e),s=i.evaluate(a,i,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue):n?s=this.walkToNode(e,i,n):s=this.walkToNode(e,i),s}fixMiss(e,t,n,i){var s=this.findNode(e.slice(0,-1),n,i),a=s.childNodes,o=this.normalizedMap(a,Mr,i),u,l,c=e[e.length-1].index;for(let h in o){if(!o.hasOwnProperty(h))return;if(o[h]===c)if(u=a[h],l=u.textContent.length,t>l)t=t-l;else{u.nodeType===Ds?s=u.childNodes[0]:s=u;break}}return{container:s,offset:t}}toRange(e,t){var n=e||document,i,s,a,o,u,l=this,c,h,f=t?n.querySelector("."+t)!=null:!1,d;if(typeof n.createRange<"u"?i=n.createRange():i=new ai.RangeObject,l.range?(s=l.start,c=l.path.steps.concat(s.steps),o=this.findNode(c,n,f?t:null),a=l.end,h=l.path.steps.concat(a.steps),u=this.findNode(h,n,f?t:null)):(s=l.path,c=l.path.steps,o=this.findNode(l.path.steps,n,f?t:null)),o)try{s.terminal.offset!=null?i.setStart(o,s.terminal.offset):i.setStart(o,0)}catch{d=this.fixMiss(c,s.terminal.offset,n,f?t:null),i.setStart(d.container,d.offset)}else return console.log("No startContainer found for",this.toString()),null;if(u)try{a.terminal.offset!=null?i.setEnd(u,a.terminal.offset):i.setEnd(u,0)}catch{d=this.fixMiss(h,l.end.terminal.offset,n,f?t:null),i.setEnd(d.container,d.offset)}return i}isCfiString(e){return typeof e=="string"&&e.indexOf("epubcfi(")===0&&e[e.length-1]===")"}generateChapterComponent(e,t,n){var i=parseInt(t),s=(e+1)*2,a="/"+s+"/";return a+=(i+1)*2,n&&(a+="["+n+"]"),a}collapse(e){!this.range||(this.range=!1,e?(this.path.steps=this.path.steps.concat(this.start.steps),this.path.terminal=this.start.terminal):(this.path.steps=this.path.steps.concat(this.end.steps),this.path.terminal=this.end.terminal))}}var W_=Vi;ar.default=W_;var fa={};Object.defineProperty(fa,"__esModule",{value:!0});fa.default=void 0;class H_{constructor(e){this.context=e||this,this.hooks=[]}register(){for(var e=0;e<arguments.length;++e)if(typeof arguments[e]=="function")this.hooks.push(arguments[e]);else for(var t=0;t<arguments[e].length;++t)this.hooks.push(arguments[e][t])}deregister(e){let t;for(let n=0;n<this.hooks.length;n++)if(t=this.hooks[n],t===e){this.hooks.splice(n,1);break}}trigger(){var e=arguments,t=this.context,n=[];return this.hooks.forEach(function(i){try{var s=i.apply(t,e)}catch(a){console.log(a)}s&&typeof s.then=="function"&&n.push(s)}),Promise.all(n)}list(){return this.hooks}clear(){return this.hooks=[]}}var j_=H_;fa.default=j_;var rc={},In={};Object.defineProperty(In,"__esModule",{value:!0});In.replaceBase=q_;In.replaceCanonical=Y_;In.replaceLinks=Z_;In.replaceMeta=X_;In.substitute=Q_;var ns=xe,K_=m2(us);m2(Ln);function m2(r){return r&&r.__esModule?r:{default:r}}function q_(r,e){var t,n,i=e.url,s=i.indexOf("://")>-1;!r||(n=(0,ns.qs)(r,"head"),t=(0,ns.qs)(n,"base"),t||(t=r.createElement("base"),n.insertBefore(t,n.firstChild)),!s&&window&&window.location&&(i=window.location.origin+i),t.setAttribute("href",i))}function Y_(r,e){var t,n,i=e.canonical;!r||(t=(0,ns.qs)(r,"head"),n=(0,ns.qs)(t,"link[rel='canonical']"),n?n.setAttribute("href",i):(n=r.createElement("link"),n.setAttribute("rel","canonical"),n.setAttribute("href",i),t.appendChild(n)))}function X_(r,e){var t,n,i=e.idref;!r||(t=(0,ns.qs)(r,"head"),n=(0,ns.qs)(t,"link[property='dc.identifier']"),n?n.setAttribute("content",i):(n=r.createElement("meta"),n.setAttribute("name","dc.identifier"),n.setAttribute("content",i),t.appendChild(n)))}function Z_(r,e){var t=r.querySelectorAll("a[href]");if(!!t.length)for(var n=(0,ns.qs)(r.ownerDocument,"base"),i=n?n.getAttribute("href"):void 0,s=function(o){var u=o.getAttribute("href");if(u.indexOf("mailto:")!==0){var l=u.indexOf("://")>-1;if(l)o.setAttribute("target","_blank");else{var c;try{c=new K_.default(u,i)}catch{}o.onclick=function(){return c&&c.hash?e(c.Path.path+c.hash):e(c?c.Path.path:u),!1}}}}.bind(this),a=0;a<t.length;a++)s(t[a])}function Q_(r,e,t){return e.forEach(function(n,i){n&&t[i]&&(n=n.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),r=r.replace(new RegExp(n,"g"),t[i]))}),r}var ls={};Object.defineProperty(ls,"__esModule",{value:!0});ls.default=void 0;var ws=xe,J_=eF(Ln);function eF(r){return r&&r.__esModule?r:{default:r}}function tF(r,e,t,n){var i=typeof window<"u"?window.URL:!1,s=i?"blob":"arraybuffer",a=new ws.defer,o=new XMLHttpRequest,u=XMLHttpRequest.prototype,l;"overrideMimeType"in u||Object.defineProperty(u,"overrideMimeType",{value:function(){}}),t&&(o.withCredentials=!0),o.onreadystatechange=h,o.onerror=c,o.open("GET",r,!0);for(l in n)o.setRequestHeader(l,n[l]);e=="json"&&o.setRequestHeader("Accept","application/json"),e||(e=new J_.default(r).extension),e=="blob"&&(o.responseType=s),(0,ws.isXml)(e)&&o.overrideMimeType("text/xml"),e=="binary"&&(o.responseType="arraybuffer"),o.send();function c(f){a.reject(f)}function h(){if(this.readyState===XMLHttpRequest.DONE){var f=!1;if((this.responseType===""||this.responseType==="document")&&(f=this.responseXML),this.status===200||this.status===0||f){var d;if(!this.response&&!f)return a.reject({status:this.status,message:"Empty Response",stack:new Error().stack}),a.promise;if(this.status===403)return a.reject({status:this.status,response:this.response,message:"Forbidden",stack:new Error().stack}),a.promise;f?d=this.responseXML:(0,ws.isXml)(e)?d=(0,ws.parse)(this.response,"text/xml"):e=="xhtml"?d=(0,ws.parse)(this.response,"application/xhtml+xml"):e=="html"||e=="htm"?d=(0,ws.parse)(this.response,"text/html"):e=="json"?d=JSON.parse(this.response):e=="blob"?i?d=this.response:d=new Blob([this.response]):d=this.response,a.resolve(d)}else a.reject({status:this.status,message:this.response,stack:new Error().stack})}}return a.promise}var rF=tF;ls.default=rF;Object.defineProperty(rc,"__esModule",{value:!0});rc.default=void 0;var Bh=xe,Cm=L0(ar),Tm=L0(fa),nF=In,iF=L0(ls),sF=Bo;function L0(r){return r&&r.__esModule?r:{default:r}}class aF{constructor(e,t){this.idref=e.idref,this.linear=e.linear==="yes",this.properties=e.properties,this.index=e.index,this.href=e.href,this.url=e.url,this.canonical=e.canonical,this.next=e.next,this.prev=e.prev,this.cfiBase=e.cfiBase,t?this.hooks=t:(this.hooks={},this.hooks.serialize=new Tm.default(this),this.hooks.content=new Tm.default(this)),this.document=void 0,this.contents=void 0,this.output=void 0}load(e){var t=e||this.request||iF.default,n=new Bh.defer,i=n.promise;return this.contents?n.resolve(this.contents):t(this.url).then(function(s){return this.document=s,this.contents=s.documentElement,this.hooks.content.trigger(this.document,this)}.bind(this)).then(function(){n.resolve(this.contents)}.bind(this)).catch(function(s){n.reject(s)}),i}base(){return(0,nF.replaceBase)(this.document,this)}render(e){var t=new Bh.defer,n=t.promise;return this.output,this.load(e).then(function(i){var s=typeof navigator<"u"&&navigator.userAgent||"",a=s.indexOf("Trident")>=0,o;typeof XMLSerializer>"u"||a?o=sF.DOMParser:o=XMLSerializer;var u=new o;return this.output=u.serializeToString(i),this.output}.bind(this)).then(function(){return this.hooks.serialize.trigger(this.output,this)}.bind(this)).then(function(){t.resolve(this.output)}.bind(this)).catch(function(i){t.reject(i)}),n}find(e){var t=this,n=[],i=e.toLowerCase(),s=function(a){for(var o=a.textContent.toLowerCase(),u=t.document.createRange(),l,c,h=-1,f,d=150;c!=-1;)c=o.indexOf(i,h+1),c!=-1&&(u=t.document.createRange(),u.setStart(a,c),u.setEnd(a,c+i.length),l=t.cfiFromRange(u),a.textContent.length<d?f=a.textContent:(f=a.textContent.substring(c-d/2,c+d/2),f="..."+f+"..."),n.push({cfi:l,excerpt:f})),h=c};return(0,Bh.sprint)(t.document,function(a){s(a)}),n}search(e,t=5){if(typeof document.createTreeWalker>"u")return this.find(e);let n=[];const i=150,s=this,a=e.toLowerCase(),o=function(h){const m=h.reduce((E,p)=>E+p.textContent,"").toLowerCase().indexOf(a);if(m!=-1){const p=m+a.length;let g=0,v=0;if(m<h[0].length){let y;for(;g<h.length-1&&(v+=h[g].length,!(p<=v));)g+=1;let C=h[0],A=h[g],T=s.document.createRange();T.setStart(C,m);let S=h.slice(0,g).reduce((k,R)=>k+R.textContent.length,0);T.setEnd(A,S>p?p:p-S),y=s.cfiFromRange(T);let F=h.slice(0,g+1).reduce((k,R)=>k+R.textContent,"");F.length>i&&(F=F.substring(m-i/2,m+i/2),F="..."+F+"..."),n.push({cfi:y,excerpt:F})}}},u=document.createTreeWalker(s.document,NodeFilter.SHOW_TEXT,null,!1);let l,c=[];for(;l=u.nextNode();)c.push(l),c.length==t&&(o(c.slice(0,t)),c=c.slice(1,t));return c.length>0&&o(c),n}reconcileLayoutSettings(e){var t={layout:e.layout,spread:e.spread,orientation:e.orientation};return this.properties.forEach(function(n){var i=n.replace("rendition:",""),s=i.indexOf("-"),a,o;s!=-1&&(a=i.slice(0,s),o=i.slice(s+1),t[a]=o)}),t}cfiFromRange(e){return new Cm.default(e,this.cfiBase).toString()}cfiFromElement(e){return new Cm.default(e,this.cfiBase).toString()}unload(){this.document=void 0,this.contents=void 0,this.output=void 0}destroy(){this.unload(),this.hooks.serialize.clear(),this.hooks.content.clear(),this.hooks=void 0,this.idref=void 0,this.linear=void 0,this.properties=void 0,this.index=void 0,this.href=void 0,this.url=void 0,this.next=void 0,this.prev=void 0,this.cfiBase=void 0}}var oF=aF;rc.default=oF;Object.defineProperty(tc,"__esModule",{value:!0});tc.default=void 0;var Sm=I0(ar),Dm=I0(fa),uF=I0(rc),Oh=In;function I0(r){return r&&r.__esModule?r:{default:r}}class lF{constructor(){this.spineItems=[],this.spineByHref={},this.spineById={},this.hooks={},this.hooks.serialize=new Dm.default,this.hooks.content=new Dm.default,this.hooks.content.register(Oh.replaceBase),this.hooks.content.register(Oh.replaceCanonical),this.hooks.content.register(Oh.replaceMeta),this.epubcfi=new Sm.default,this.loaded=!1,this.items=void 0,this.manifest=void 0,this.spineNodeIndex=void 0,this.baseUrl=void 0,this.length=void 0}unpack(e,t,n){this.items=e.spine,this.manifest=e.manifest,this.spineNodeIndex=e.spineNodeIndex,this.baseUrl=e.baseUrl||e.basePath||"",this.length=this.items.length,this.items.forEach((i,s)=>{var a=this.manifest[i.idref],o;i.index=s,i.cfiBase=this.epubcfi.generateChapterComponent(this.spineNodeIndex,i.index,i.id),i.href&&(i.url=t(i.href,!0),i.canonical=n(i.href)),a&&(i.href=a.href,i.url=t(i.href,!0),i.canonical=n(i.href),a.properties.length&&i.properties.push.apply(i.properties,a.properties)),i.linear==="yes"?(i.prev=function(){let u=i.index;for(;u>0;){let l=this.get(u-1);if(l&&l.linear)return l;u-=1}}.bind(this),i.next=function(){let u=i.index;for(;u<this.spineItems.length-1;){let l=this.get(u+1);if(l&&l.linear)return l;u+=1}}.bind(this)):(i.prev=function(){},i.next=function(){}),o=new uF.default(i,this.hooks),this.append(o)}),this.loaded=!0}get(e){var t=0;if(typeof e>"u")for(;t<this.spineItems.length;){let n=this.spineItems[t];if(n&&n.linear)break;t+=1}else this.epubcfi.isCfiString(e)?t=new Sm.default(e).spinePos:typeof e=="number"||isNaN(e)===!1?t=e:typeof e=="string"&&e.indexOf("#")===0?t=this.spineById[e.substring(1)]:typeof e=="string"&&(e=e.split("#")[0],t=this.spineByHref[e]||this.spineByHref[encodeURI(e)]);return this.spineItems[t]||null}append(e){var t=this.spineItems.length;return e.index=t,this.spineItems.push(e),this.spineByHref[decodeURI(e.href)]=t,this.spineByHref[encodeURI(e.href)]=t,this.spineByHref[e.href]=t,this.spineById[e.idref]=t,t}prepend(e){return this.spineByHref[e.href]=0,this.spineById[e.idref]=0,this.spineItems.forEach(function(t,n){t.index=n}),0}remove(e){var t=this.spineItems.indexOf(e);if(t>-1)return delete this.spineByHref[e.href],delete this.spineById[e.idref],this.spineItems.splice(t,1)}each(){return this.spineItems.forEach.apply(this.spineItems,arguments)}first(){let e=0;do{let t=this.get(e);if(t&&t.linear)return t;e+=1}while(e<this.spineItems.length)}last(){let e=this.spineItems.length-1;do{let t=this.get(e);if(t&&t.linear)return t;e-=1}while(e>=0)}destroy(){this.each(e=>e.destroy()),this.spineItems=void 0,this.spineByHref=void 0,this.spineById=void 0,this.hooks.serialize.clear(),this.hooks.content.clear(),this.hooks=void 0,this.epubcfi=void 0,this.loaded=!1,this.items=void 0,this.manifest=void 0,this.spineNodeIndex=void 0,this.baseUrl=void 0,this.length=void 0}}var cF=lF;tc.default=cF;var nc={},bi={};Object.defineProperty(bi,"__esModule",{value:!0});bi.default=bi.Task=void 0;var wu=xe;class hF{constructor(e){this._q=[],this.context=e,this.tick=wu.requestAnimationFrame,this.running=!1,this.paused=!1}enqueue(){var e,t,n,i=[].shift.call(arguments),s=arguments;if(!i)throw new Error("No Task Provided");return typeof i=="function"?(e=new wu.defer,t=e.promise,n={task:i,args:s,deferred:e,promise:t}):n={promise:i},this._q.push(n),this.paused==!1&&!this.running&&this.run(),n.promise}dequeue(){var e,t,n;if(this._q.length&&!this.paused){if(e=this._q.shift(),t=e.task,t)return n=t.apply(this.context,e.args),n&&typeof n.then=="function"?n.then(function(){e.deferred.resolve.apply(this.context,arguments)}.bind(this),function(){e.deferred.reject.apply(this.context,arguments)}.bind(this)):(e.deferred.resolve.apply(this.context,n),e.promise);if(e.promise)return e.promise}else return e=new wu.defer,e.deferred.resolve(),e.promise}dump(){for(;this._q.length;)this.dequeue()}run(){return this.running||(this.running=!0,this.defered=new wu.defer),this.tick.call(window,()=>{this._q.length?this.dequeue().then(function(){this.run()}.bind(this)):(this.defered.resolve(),this.running=void 0)}),this.paused==!0&&(this.paused=!1),this.defered.promise}flush(){if(this.running)return this.running;if(this._q.length)return this.running=this.dequeue().then(function(){return this.running=void 0,this.flush()}.bind(this)),this.running}clear(){this._q=[]}length(){return this._q.length}pause(){this.paused=!0}stop(){this._q=[],this.running=!1,this.paused=!0}}class fF{constructor(e,t,n){return function(){var i=arguments||[];return new Promise((s,a)=>{var o=function(u,l){!u&&l?a(l):s(u)};i.push(o),e.apply(n||this,i)})}}}bi.Task=fF;var dF=hF;bi.default=dF;var kt={};Object.defineProperty(kt,"__esModule",{value:!0});kt.EVENTS=kt.EPUBJS_VERSION=kt.DOM_EVENTS=void 0;const pF="0.3";kt.EPUBJS_VERSION=pF;const gF=["keydown","keyup","keypressed","mouseup","mousedown","mousemove","click","touchend","touchstart","touchmove"];kt.DOM_EVENTS=gF;const mF={BOOK:{OPEN_FAILED:"openFailed"},CONTENTS:{EXPAND:"expand",RESIZE:"resize",SELECTED:"selected",SELECTED_RANGE:"selectedRange",LINK_CLICKED:"linkClicked"},LOCATIONS:{CHANGED:"changed"},MANAGERS:{RESIZE:"resize",RESIZED:"resized",ORIENTATION_CHANGE:"orientationchange",ADDED:"added",SCROLL:"scroll",SCROLLED:"scrolled",REMOVED:"removed"},VIEWS:{AXIS:"axis",WRITING_MODE:"writingMode",LOAD_ERROR:"loaderror",RENDERED:"rendered",RESIZED:"resized",DISPLAYED:"displayed",SHOWN:"shown",HIDDEN:"hidden",MARK_CLICKED:"markClicked"},RENDITION:{STARTED:"started",ATTACHED:"attached",DISPLAYED:"displayed",DISPLAY_ERROR:"displayerror",RENDERED:"rendered",REMOVED:"removed",RESIZED:"resized",ORIENTATION_CHANGE:"orientationchange",LOCATION_CHANGED:"locationChanged",RELOCATED:"relocated",MARK_CLICKED:"markClicked",SELECTED:"selected",LAYOUT:"layout"},LAYOUT:{UPDATED:"updated"},ANNOTATION:{ATTACH:"attach",DETACH:"detach"}};kt.EVENTS=mF;Object.defineProperty(nc,"__esModule",{value:!0});nc.default=void 0;var Oi=xe,vF=k0(bi),oi=k0(ar),EF=kt,yF=k0(Yr.exports);function k0(r){return r&&r.__esModule?r:{default:r}}class v2{constructor(e,t,n){this.spine=e,this.request=t,this.pause=n||100,this.q=new vF.default(this),this.epubcfi=new oi.default,this._locations=[],this._locationsWords=[],this.total=0,this.break=150,this._current=0,this._wordCounter=0,this.currentLocation="",this._currentCfi="",this.processingTimeout=void 0}generate(e){return e&&(this.break=e),this.q.pause(),this.spine.each(function(t){t.linear&&this.q.enqueue(this.process.bind(this),t)}.bind(this)),this.q.run().then(function(){return this.total=this._locations.length-1,this._currentCfi&&(this.currentLocation=this._currentCfi),this._locations}.bind(this))}createRange(){return{startContainer:void 0,startOffset:void 0,endContainer:void 0,endOffset:void 0}}process(e){return e.load(this.request).then(function(t){var n=new Oi.defer,i=this.parse(t,e.cfiBase);return this._locations=this._locations.concat(i),e.unload(),this.processingTimeout=setTimeout(()=>n.resolve(i),this.pause),n.promise}.bind(this))}parse(e,t,n){var i=[],s,a=e.ownerDocument,o=(0,Oi.qs)(a,"body"),u=0,l,c=n||this.break,h=function(f){var d=f.length,m,E=0;if(f.textContent.trim().length===0)return!1;for(u==0&&(s=this.createRange(),s.startContainer=f,s.startOffset=0),m=c-u,m>d&&(u+=d,E=d);E<d;)if(m=c-u,u===0&&(E+=1,s=this.createRange(),s.startContainer=f,s.startOffset=E),E+m>=d)u+=d-E,E=d;else{E+=m,s.endContainer=f,s.endOffset=E;let p=new oi.default(s,t).toString();i.push(p),u=0}l=f};if((0,Oi.sprint)(o,h.bind(this)),s&&s.startContainer&&l){s.endContainer=l,s.endOffset=l.length;let f=new oi.default(s,t).toString();i.push(f),u=0}return i}generateFromWords(e,t,n){var i=e?new oi.default(e):void 0;return this.q.pause(),this._locationsWords=[],this._wordCounter=0,this.spine.each(function(s){s.linear&&(i?s.index>=i.spinePos&&this.q.enqueue(this.processWords.bind(this),s,t,i,n):this.q.enqueue(this.processWords.bind(this),s,t,i,n))}.bind(this)),this.q.run().then(function(){return this._currentCfi&&(this.currentLocation=this._currentCfi),this._locationsWords}.bind(this))}processWords(e,t,n,i){return i&&this._locationsWords.length>=i?Promise.resolve():e.load(this.request).then(function(s){var a=new Oi.defer,o=this.parseWords(s,e,t,n),u=i-this._locationsWords.length;return this._locationsWords=this._locationsWords.concat(o.length>=i?o.slice(0,u):o),e.unload(),this.processingTimeout=setTimeout(()=>a.resolve(o),this.pause),a.promise}.bind(this))}countWords(e){return e=e.replace(/(^\s*)|(\s*$)/gi,""),e=e.replace(/[ ]{2,}/gi," "),e=e.replace(/\n /,`
`),e.split(" ").length}parseWords(e,t,n,i){var s=t.cfiBase,a=[],o=e.ownerDocument,u=(0,Oi.qs)(o,"body"),l=n,c=i?i.spinePos!==t.index:!0,h;i&&t.index===i.spinePos&&(h=i.findNode(i.range?i.path.steps.concat(i.start.steps):i.path.steps,e.ownerDocument));var f=function(d){if(!c)if(d===h)c=!0;else return!1;if(d.textContent.length<10&&d.textContent.trim().length===0)return!1;var m=this.countWords(d.textContent),E,p=0;if(m===0)return!1;for(E=l-this._wordCounter,E>m&&(this._wordCounter+=m,p=m);p<m;)if(E=l-this._wordCounter,p+E>=m)this._wordCounter+=m-p,p=m;else{p+=E;let g=new oi.default(d,s);a.push({cfi:g.toString(),wordCount:this._wordCounter}),this._wordCounter=0}};return(0,Oi.sprint)(u,f.bind(this)),a}locationFromCfi(e){let t;return oi.default.prototype.isCfiString(e)&&(e=new oi.default(e)),this._locations.length===0?-1:(t=(0,Oi.locationOf)(e,this._locations,this.epubcfi.compare),t>this.total?this.total:t)}percentageFromCfi(e){if(this._locations.length===0)return null;var t=this.locationFromCfi(e);return this.percentageFromLocation(t)}percentageFromLocation(e){return!e||!this.total?0:e/this.total}cfiFromLocation(e){var t=-1;return typeof e!="number"&&(e=parseInt(e)),e>=0&&e<this._locations.length&&(t=this._locations[e]),t}cfiFromPercentage(e){let t;if(e>1&&console.warn("Normalize cfiFromPercentage value to between 0 - 1"),e>=1){let n=new oi.default(this._locations[this.total]);return n.collapse(),n.toString()}return t=Math.ceil(this.total*e),this.cfiFromLocation(t)}load(e){return typeof e=="string"?this._locations=JSON.parse(e):this._locations=e,this.total=this._locations.length-1,this._locations}save(){return JSON.stringify(this._locations)}getCurrent(){return this._current}setCurrent(e){var t;if(typeof e=="string")this._currentCfi=e;else if(typeof e=="number")this._current=e;else return;this._locations.length!==0&&(typeof e=="string"?(t=this.locationFromCfi(e),this._current=t):t=e,this.emit(EF.EVENTS.LOCATIONS.CHANGED,{percentage:this.percentageFromLocation(t)}))}get currentLocation(){return this._current}set currentLocation(e){this.setCurrent(e)}length(){return this._locations.length}destroy(){this.spine=void 0,this.request=void 0,this.pause=void 0,this.q.stop(),this.q=void 0,this.epubcfi=void 0,this._locations=void 0,this.total=void 0,this.break=void 0,this._current=void 0,this.currentLocation=void 0,this._currentCfi=void 0,clearTimeout(this.processingTimeout)}}(0,yF.default)(v2.prototype);var xF=v2;nc.default=xF;var ic={};Object.defineProperty(ic,"__esModule",{value:!0});ic.default=void 0;var AF=TF(ec),CF=xe;function TF(r){return r&&r.__esModule?r:{default:r}}class SF{constructor(e){this.packagePath="",this.directory="",this.encoding="",e&&this.parse(e)}parse(e){var t;if(!e)throw new Error("Container File Not Found");if(t=(0,CF.qs)(e,"rootfile"),!t)throw new Error("No RootFile Found");this.packagePath=t.getAttribute("full-path"),this.directory=AF.default.dirname(this.packagePath),this.encoding=e.xmlEncoding}destroy(){this.packagePath=void 0,this.directory=void 0,this.encoding=void 0}}var DF=SF;ic.default=DF;var sc={};Object.defineProperty(sc,"__esModule",{value:!0});sc.default=void 0;var Ur=xe;class wF{constructor(e){this.manifest={},this.navPath="",this.ncxPath="",this.coverPath="",this.spineNodeIndex=0,this.spine=[],this.metadata={},e&&this.parse(e)}parse(e){var t,n,i;if(!e)throw new Error("Package File Not Found");if(t=(0,Ur.qs)(e,"metadata"),!t)throw new Error("No Metadata Found");if(n=(0,Ur.qs)(e,"manifest"),!n)throw new Error("No Manifest Found");if(i=(0,Ur.qs)(e,"spine"),!i)throw new Error("No Spine Found");return this.manifest=this.parseManifest(n),this.navPath=this.findNavPath(n),this.ncxPath=this.findNcxPath(n,i),this.coverPath=this.findCoverPath(e),this.spineNodeIndex=(0,Ur.indexOfElementNode)(i),this.spine=this.parseSpine(i,this.manifest),this.uniqueIdentifier=this.findUniqueIdentifier(e),this.metadata=this.parseMetadata(t),this.metadata.direction=i.getAttribute("page-progression-direction"),{metadata:this.metadata,spine:this.spine,manifest:this.manifest,navPath:this.navPath,ncxPath:this.ncxPath,coverPath:this.coverPath,spineNodeIndex:this.spineNodeIndex}}parseMetadata(e){var t={};return t.title=this.getElementText(e,"title"),t.creator=this.getElementText(e,"creator"),t.description=this.getElementText(e,"description"),t.pubdate=this.getElementText(e,"date"),t.publisher=this.getElementText(e,"publisher"),t.identifier=this.getElementText(e,"identifier"),t.language=this.getElementText(e,"language"),t.rights=this.getElementText(e,"rights"),t.modified_date=this.getPropertyText(e,"dcterms:modified"),t.layout=this.getPropertyText(e,"rendition:layout"),t.orientation=this.getPropertyText(e,"rendition:orientation"),t.flow=this.getPropertyText(e,"rendition:flow"),t.viewport=this.getPropertyText(e,"rendition:viewport"),t.media_active_class=this.getPropertyText(e,"media:active-class"),t.spread=this.getPropertyText(e,"rendition:spread"),t}parseManifest(e){var t={},n=(0,Ur.qsa)(e,"item"),i=Array.prototype.slice.call(n);return i.forEach(function(s){var a=s.getAttribute("id"),o=s.getAttribute("href")||"",u=s.getAttribute("media-type")||"",l=s.getAttribute("media-overlay")||"",c=s.getAttribute("properties")||"";t[a]={href:o,type:u,overlay:l,properties:c.length?c.split(" "):[]}}),t}parseSpine(e,t){var n=[],i=(0,Ur.qsa)(e,"itemref"),s=Array.prototype.slice.call(i);return s.forEach(function(a,o){var u=a.getAttribute("idref"),l=a.getAttribute("properties")||"",c=l.length?l.split(" "):[],h={id:a.getAttribute("id"),idref:u,linear:a.getAttribute("linear")||"yes",properties:c,index:o};n.push(h)}),n}findUniqueIdentifier(e){var t=e.documentElement.getAttribute("unique-identifier");if(!t)return"";var n=e.getElementById(t);return n&&n.localName==="identifier"&&n.namespaceURI==="http://purl.org/dc/elements/1.1/"&&n.childNodes.length>0?n.childNodes[0].nodeValue.trim():""}findNavPath(e){var t=(0,Ur.qsp)(e,"item",{properties:"nav"});return t?t.getAttribute("href"):!1}findNcxPath(e,t){var n=(0,Ur.qsp)(e,"item",{"media-type":"application/x-dtbncx+xml"}),i;return n||(i=t.getAttribute("toc"),i&&(n=e.querySelector(`#${i}`))),n?n.getAttribute("href"):!1}findCoverPath(e){var t=(0,Ur.qs)(e,"package");t.getAttribute("version");var n=(0,Ur.qsp)(e,"item",{properties:"cover-image"});if(n)return n.getAttribute("href");var i=(0,Ur.qsp)(e,"meta",{name:"cover"});if(i){var s=i.getAttribute("content"),a=e.getElementById(s);return a?a.getAttribute("href"):""}else return!1}getElementText(e,t){var n=e.getElementsByTagNameNS("http://purl.org/dc/elements/1.1/",t),i;return!n||n.length===0?"":(i=n[0],i.childNodes.length?i.childNodes[0].nodeValue:"")}getPropertyText(e,t){var n=(0,Ur.qsp)(e,"meta",{property:t});return n&&n.childNodes.length?n.childNodes[0].nodeValue:""}load(e){this.metadata=e.metadata;let t=e.readingOrder||e.spine;return this.spine=t.map((n,i)=>(n.index=i,n.linear=n.linear||"yes",n)),e.resources.forEach((n,i)=>{this.manifest[i]=n,n.rel&&n.rel[0]==="cover"&&(this.coverPath=n.href)}),this.spineNodeIndex=0,this.toc=e.toc.map((n,i)=>(n.label=n.title,n)),{metadata:this.metadata,spine:this.spine,manifest:this.manifest,navPath:this.navPath,ncxPath:this.ncxPath,coverPath:this.coverPath,spineNodeIndex:this.spineNodeIndex,toc:this.toc}}destroy(){this.manifest=void 0,this.navPath=void 0,this.ncxPath=void 0,this.coverPath=void 0,this.spineNodeIndex=void 0,this.spine=void 0,this.metadata=void 0}}var _F=wF;sc.default=_F;var ac={};Object.defineProperty(ac,"__esModule",{value:!0});ac.default=void 0;var Dr=xe;class FF{constructor(e){this.toc=[],this.tocByHref={},this.tocById={},this.landmarks=[],this.landmarksByType={},this.length=0,e&&this.parse(e)}parse(e){let t=e.nodeType,n,i;t&&(n=(0,Dr.qs)(e,"html"),i=(0,Dr.qs)(e,"ncx")),t?n?(this.toc=this.parseNav(e),this.landmarks=this.parseLandmarks(e)):i&&(this.toc=this.parseNcx(e)):this.toc=this.load(e),this.length=0,this.unpack(this.toc)}unpack(e){for(var t,n=0;n<e.length;n++)t=e[n],t.href&&(this.tocByHref[t.href]=n),t.id&&(this.tocById[t.id]=n),this.length++,t.subitems.length&&this.unpack(t.subitems)}get(e){var t;return e?(e.indexOf("#")===0?t=this.tocById[e.substring(1)]:e in this.tocByHref&&(t=this.tocByHref[e]),this.getByIndex(e,t,this.toc)):this.toc}getByIndex(e,t,n){if(n.length===0)return;const i=n[t];if(i&&(e===i.id||e===i.href))return i;{let s;for(let a=0;a<n.length&&(s=this.getByIndex(e,t,n[a].subitems),!s);++a);return s}}landmark(e){var t;return e?(t=this.landmarksByType[e],this.landmarks[t]):this.landmarks}parseNav(e){var t=(0,Dr.querySelectorByType)(e,"nav","toc"),n=[];if(!t)return n;let i=(0,Dr.filterChildren)(t,"ol",!0);return i&&(n=this.parseNavList(i)),n}parseNavList(e,t){const n=[];if(!e||!e.children)return n;for(let i=0;i<e.children.length;i++){const s=this.navItem(e.children[i],t);s&&n.push(s)}return n}navItem(e,t){let n=e.getAttribute("id")||void 0,i=(0,Dr.filterChildren)(e,"a",!0)||(0,Dr.filterChildren)(e,"span",!0);if(!i)return;let s=i.getAttribute("href")||"";n||(n=s);let a=i.textContent||"",o=[],u=(0,Dr.filterChildren)(e,"ol",!0);return u&&(o=this.parseNavList(u,n)),{id:n,href:s,label:a,subitems:o,parent:t}}parseLandmarks(e){var t=(0,Dr.querySelectorByType)(e,"nav","landmarks"),n=t?(0,Dr.qsa)(t,"li"):[],i=n.length,s,a=[],o;if(!n||i===0)return a;for(s=0;s<i;++s)o=this.landmarkItem(n[s]),o&&(a.push(o),this.landmarksByType[o.type]=s);return a}landmarkItem(e){let t=(0,Dr.filterChildren)(e,"a",!0);if(!t)return;let n=t.getAttributeNS("http://www.idpf.org/2007/ops","type")||void 0,i=t.getAttribute("href")||"",s=t.textContent||"";return{href:i,label:s,type:n}}parseNcx(e){var t=(0,Dr.qsa)(e,"navPoint"),n=t.length,i,s={},a=[],o,u;if(!t||n===0)return a;for(i=0;i<n;++i)o=this.ncxItem(t[i]),s[o.id]=o,o.parent?(u=s[o.parent],u.subitems.push(o)):a.push(o);return a}ncxItem(e){var t=e.getAttribute("id")||!1,n=(0,Dr.qs)(e,"content"),i=n.getAttribute("src"),s=(0,Dr.qs)(e,"navLabel"),a=s.textContent?s.textContent:"",o=[],u=e.parentNode,l;return u&&(u.nodeName==="navPoint"||u.nodeName.split(":").slice(-1)[0]==="navPoint")&&(l=u.getAttribute("id")),{id:t,href:i,label:a,subitems:o,parent:l}}load(e){return e.map(t=>(t.label=t.title,t.subitems=t.children?this.load(t.children):[],t))}forEach(e){return this.toc.forEach(e)}}var bF=FF;ac.default=bF;var oc={},da={};Object.defineProperty(da,"__esModule",{value:!0});da.default=void 0;var La={application:{ecmascript:["es","ecma"],javascript:"js",ogg:"ogx",pdf:"pdf",postscript:["ps","ai","eps","epsi","epsf","eps2","eps3"],"rdf+xml":"rdf",smil:["smi","smil"],"xhtml+xml":["xhtml","xht"],xml:["xml","xsl","xsd","opf","ncx"],zip:"zip","x-httpd-eruby":"rhtml","x-latex":"latex","x-maker":["frm","maker","frame","fm","fb","book","fbdoc"],"x-object":"o","x-shockwave-flash":["swf","swfl"],"x-silverlight":"scr","epub+zip":"epub","font-tdpfr":"pfr","inkml+xml":["ink","inkml"],json:"json","jsonml+json":"jsonml","mathml+xml":"mathml","metalink+xml":"metalink",mp4:"mp4s","omdoc+xml":"omdoc",oxps:"oxps","vnd.amazon.ebook":"azw",widget:"wgt","x-dtbook+xml":"dtb","x-dtbresource+xml":"res","x-font-bdf":"bdf","x-font-ghostscript":"gsf","x-font-linux-psf":"psf","x-font-otf":"otf","x-font-pcf":"pcf","x-font-snf":"snf","x-font-ttf":["ttf","ttc"],"x-font-type1":["pfa","pfb","pfm","afm"],"x-font-woff":"woff","x-mobipocket-ebook":["prc","mobi"],"x-mspublisher":"pub","x-nzb":"nzb","x-tgif":"obj","xaml+xml":"xaml","xml-dtd":"dtd","xproc+xml":"xpl","xslt+xml":"xslt","internet-property-stream":"acx","x-compress":"z","x-compressed":"tgz","x-gzip":"gz"},audio:{flac:"flac",midi:["mid","midi","kar","rmi"],mpeg:["mpga","mpega","mp2","mp3","m4a","mp2a","m2a","m3a"],mpegurl:"m3u",ogg:["oga","ogg","spx"],"x-aiff":["aif","aiff","aifc"],"x-ms-wma":"wma","x-wav":"wav",adpcm:"adp",mp4:"mp4a",webm:"weba","x-aac":"aac","x-caf":"caf","x-matroska":"mka","x-pn-realaudio-plugin":"rmp",xm:"xm",mid:["mid","rmi"]},image:{gif:"gif",ief:"ief",jpeg:["jpeg","jpg","jpe"],pcx:"pcx",png:"png","svg+xml":["svg","svgz"],tiff:["tiff","tif"],"x-icon":"ico",bmp:"bmp",webp:"webp","x-pict":["pic","pct"],"x-tga":"tga","cis-cod":"cod"},text:{"cache-manifest":["manifest","appcache"],css:"css",csv:"csv",html:["html","htm","shtml","stm"],mathml:"mml",plain:["txt","text","brf","conf","def","list","log","in","bas"],richtext:"rtx","tab-separated-values":"tsv","x-bibtex":"bib"},video:{mpeg:["mpeg","mpg","mpe","m1v","m2v","mp2","mpa","mpv2"],mp4:["mp4","mp4v","mpg4"],quicktime:["qt","mov"],ogg:"ogv","vnd.mpegurl":["mxu","m4u"],"x-flv":"flv","x-la-asf":["lsf","lsx"],"x-mng":"mng","x-ms-asf":["asf","asx","asr"],"x-ms-wm":"wm","x-ms-wmv":"wmv","x-ms-wmx":"wmx","x-ms-wvx":"wvx","x-msvideo":"avi","x-sgi-movie":"movie","x-matroska":["mpv","mkv","mk3d","mks"],"3gpp2":"3g2",h261:"h261",h263:"h263",h264:"h264",jpeg:"jpgv",jpm:["jpm","jpgm"],mj2:["mj2","mjp2"],"vnd.ms-playready.media.pyv":"pyv","vnd.uvvu.mp4":["uvu","uvvu"],"vnd.vivo":"viv",webm:"webm","x-f4v":"f4v","x-m4v":"m4v","x-ms-vob":"vob","x-smv":"smv"}},RF=function(){var r,e,t,n,i={};for(r in La)if(La.hasOwnProperty(r)){for(e in La[r])if(La[r].hasOwnProperty(e))if(t=La[r][e],typeof t=="string")i[t]=r+"/"+e;else for(n=0;n<t.length;n++)i[t[n]]=r+"/"+e}return i}(),LF="text/plain";function IF(r){return r&&RF[r.split(".").pop().toLowerCase()]||LF}var kF={lookup:IF};da.default=kF;Object.defineProperty(oc,"__esModule",{value:!0});oc.default=void 0;var wm=In,Ia=xe,BF=uc(us),OF=uc(da),_m=uc(Ln),NF=uc(ec);function uc(r){return r&&r.__esModule?r:{default:r}}class PF{constructor(e,t){this.settings={replacements:t&&t.replacements||"base64",archive:t&&t.archive,resolver:t&&t.resolver,request:t&&t.request},this.process(e)}process(e){this.manifest=e,this.resources=Object.keys(e).map(function(t){return e[t]}),this.replacementUrls=[],this.html=[],this.assets=[],this.css=[],this.urls=[],this.cssUrls=[],this.split(),this.splitUrls()}split(){this.html=this.resources.filter(function(e){if(e.type==="application/xhtml+xml"||e.type==="text/html")return!0}),this.assets=this.resources.filter(function(e){if(e.type!=="application/xhtml+xml"&&e.type!=="text/html")return!0}),this.css=this.resources.filter(function(e){if(e.type==="text/css")return!0})}splitUrls(){this.urls=this.assets.map(function(e){return e.href}.bind(this)),this.cssUrls=this.css.map(function(e){return e.href})}createUrl(e){var t=new BF.default(e),n=OF.default.lookup(t.filename);return this.settings.archive?this.settings.archive.createUrl(e,{base64:this.settings.replacements==="base64"}):this.settings.replacements==="base64"?this.settings.request(e,"blob").then(i=>(0,Ia.blob2base64)(i)).then(i=>(0,Ia.createBase64Url)(i,n)):this.settings.request(e,"blob").then(i=>(0,Ia.createBlobUrl)(i,n))}replacements(){if(this.settings.replacements==="none")return new Promise(function(t){t(this.urls)}.bind(this));var e=this.urls.map(t=>{var n=this.settings.resolver(t);return this.createUrl(n).catch(i=>(console.error(i),null))});return Promise.all(e).then(t=>(this.replacementUrls=t.filter(n=>typeof n=="string"),t))}replaceCss(e,t){var n=[];return e=e||this.settings.archive,t=t||this.settings.resolver,this.cssUrls.forEach(function(i){var s=this.createCssFile(i,e,t).then(function(a){var o=this.urls.indexOf(i);o>-1&&(this.replacementUrls[o]=a)}.bind(this));n.push(s)}.bind(this)),Promise.all(n)}createCssFile(e){var t;if(NF.default.isAbsolute(e))return new Promise(function(a){a()});var n=this.settings.resolver(e),i;this.settings.archive?i=this.settings.archive.getText(n):i=this.settings.request(n,"text");var s=this.urls.map(a=>{var o=this.settings.resolver(a),u=new _m.default(n).relative(o);return u});return i?i.then(a=>(a=(0,wm.substitute)(a,s,this.replacementUrls),this.settings.replacements==="base64"?t=(0,Ia.createBase64Url)(a,"text/css"):t=(0,Ia.createBlobUrl)(a,"text/css"),t),a=>new Promise(function(o){o()})):new Promise(function(a){a()})}relativeTo(e,t){return t=t||this.settings.resolver,this.urls.map(function(n){var i=t(n),s=new _m.default(e).relative(i);return s}.bind(this))}get(e){var t=this.urls.indexOf(e);if(t!==-1)return this.replacementUrls.length?new Promise(function(n,i){n(this.replacementUrls[t])}.bind(this)):this.createUrl(e)}substitute(e,t){var n;return t?n=this.relativeTo(t):n=this.urls,(0,wm.substitute)(e,n,this.replacementUrls)}destroy(){this.settings=void 0,this.manifest=void 0,this.resources=void 0,this.replacementUrls=void 0,this.html=void 0,this.assets=void 0,this.css=void 0,this.urls=void 0,this.cssUrls=void 0}}var MF=PF;oc.default=MF;var lc={};Object.defineProperty(lc,"__esModule",{value:!0});lc.default=void 0;var UF=$F(ar),$r=xe;function $F(r){return r&&r.__esModule?r:{default:r}}class zF{constructor(e){this.pages=[],this.locations=[],this.epubcfi=new UF.default,this.firstPage=0,this.lastPage=0,this.totalPages=0,this.toc=void 0,this.ncx=void 0,e&&(this.pageList=this.parse(e)),this.pageList&&this.pageList.length&&this.process(this.pageList)}parse(e){var t=(0,$r.qs)(e,"html"),n=(0,$r.qs)(e,"ncx");if(t)return this.parseNav(e);if(n)return this.parseNcx(e)}parseNav(e){var t=(0,$r.querySelectorByType)(e,"nav","page-list"),n=t?(0,$r.qsa)(t,"li"):[],i=n.length,s,a=[],o;if(!n||i===0)return a;for(s=0;s<i;++s)o=this.item(n[s]),a.push(o);return a}parseNcx(e){var t=[],n=0,i,s,a,o=0;if(s=(0,$r.qs)(e,"pageList"),!s||(a=(0,$r.qsa)(s,"pageTarget"),o=a.length,!a||a.length===0))return t;for(n=0;n<o;++n)i=this.ncxItem(a[n]),t.push(i);return t}ncxItem(e){var t=(0,$r.qs)(e,"navLabel"),n=(0,$r.qs)(t,"text"),i=n.textContent,s=(0,$r.qs)(e,"content"),a=s.getAttribute("src"),o=parseInt(i,10);return{href:a,page:o}}item(e){var t=(0,$r.qs)(e,"a"),n=t.getAttribute("href")||"",i=t.textContent||"",s=parseInt(i),a=n.indexOf("epubcfi"),o,u,l;return a!=-1?(o=n.split("#"),u=o[0],l=o.length>1?o[1]:!1,{cfi:l,href:n,packageUrl:u,page:s}):{href:n,page:s}}process(e){e.forEach(function(t){this.pages.push(t.page),t.cfi&&this.locations.push(t.cfi)},this),this.firstPage=parseInt(this.pages[0]),this.lastPage=parseInt(this.pages[this.pages.length-1]),this.totalPages=this.lastPage-this.firstPage}pageFromCfi(e){var t=-1;if(this.locations.length===0)return-1;var n=(0,$r.indexOfSorted)(e,this.locations,this.epubcfi.compare);return n!=-1?t=this.pages[n]:(n=(0,$r.locationOf)(e,this.locations,this.epubcfi.compare),t=n-1>=0?this.pages[n-1]:this.pages[0],t!==void 0||(t=-1)),t}cfiFromPage(e){var t=-1;typeof e!="number"&&(e=parseInt(e));var n=this.pages.indexOf(e);return n!=-1&&(t=this.locations[n]),t}pageFromPercentage(e){var t=Math.round(this.totalPages*e);return t}percentageFromPage(e){var t=(e-this.firstPage)/this.totalPages;return Math.round(t*1e3)/1e3}percentageFromCfi(e){var t=this.pageFromCfi(e),n=this.percentageFromPage(t);return n}destroy(){this.pages=void 0,this.locations=void 0,this.epubcfi=void 0,this.pageList=void 0,this.toc=void 0,this.ncx=void 0}}var VF=zF;lc.default=VF;var pa={},$o={};Object.defineProperty($o,"__esModule",{value:!0});$o.default=void 0;var GF=xe,WF=kt,HF=jF(Yr.exports);function jF(r){return r&&r.__esModule?r:{default:r}}class E2{constructor(e){this.settings=e,this.name=e.layout||"reflowable",this._spread=e.spread!=="none",this._minSpreadWidth=e.minSpreadWidth||800,this._evenSpreads=e.evenSpreads||!1,e.flow==="scrolled"||e.flow==="scrolled-continuous"||e.flow==="scrolled-doc"?this._flow="scrolled":this._flow="paginated",this.width=0,this.height=0,this.spreadWidth=0,this.delta=0,this.columnWidth=0,this.gap=0,this.divisor=1,this.props={name:this.name,spread:this._spread,flow:this._flow,width:0,height:0,spreadWidth:0,delta:0,columnWidth:0,gap:0,divisor:1}}flow(e){return typeof e<"u"&&(e==="scrolled"||e==="scrolled-continuous"||e==="scrolled-doc"?this._flow="scrolled":this._flow="paginated",this.update({flow:this._flow})),this._flow}spread(e,t){return e&&(this._spread=e!=="none",this.update({spread:this._spread})),t>=0&&(this._minSpreadWidth=t),this._spread}calculate(e,t,n){var i=1,s=n||0,a=e,o=t,u=Math.floor(a/12),l,c,h,f;this._spread&&a>=this._minSpreadWidth?i=2:i=1,this.name==="reflowable"&&this._flow==="paginated"&&!(n>=0)&&(s=u%2===0?u:u-1),this.name==="pre-paginated"&&(s=0),i>1?(l=a/i-s,h=l+s):(l=a,h=a),this.name==="pre-paginated"&&i>1&&(a=l),c=l*i+s,f=a,this.width=a,this.height=o,this.spreadWidth=c,this.pageWidth=h,this.delta=f,this.columnWidth=l,this.gap=s,this.divisor=i,this.update({width:a,height:o,spreadWidth:c,pageWidth:h,delta:f,columnWidth:l,gap:s,divisor:i})}format(e,t,n){var i;return this.name==="pre-paginated"?i=e.fit(this.columnWidth,this.height,t):this._flow==="paginated"?i=e.columns(this.width,this.height,this.columnWidth,this.gap,this.settings.direction):n&&n==="horizontal"?i=e.size(null,this.height):i=e.size(this.width,null),i}count(e,t){let n,i;return this.name==="pre-paginated"?(n=1,i=1):this._flow==="paginated"?(t=t||this.delta,n=Math.ceil(e/t),i=n*this.divisor):(t=t||this.height,n=Math.ceil(e/t),i=n),{spreads:n,pages:i}}update(e){if(Object.keys(e).forEach(t=>{this.props[t]===e[t]&&delete e[t]}),Object.keys(e).length>0){let t=(0,GF.extend)(this.props,e);this.emit(WF.EVENTS.LAYOUT.UPDATED,t,e)}}}(0,HF.default)(E2.prototype);var KF=E2;$o.default=KF;var cc={};Object.defineProperty(cc,"__esModule",{value:!0});cc.default=void 0;var qF=YF(us);function YF(r){return r&&r.__esModule?r:{default:r}}class XF{constructor(e){this.rendition=e,this._themes={default:{rules:{},url:"",serialized:""}},this._overrides={},this._current="default",this._injected=[],this.rendition.hooks.content.register(this.inject.bind(this)),this.rendition.hooks.content.register(this.overrides.bind(this))}register(){if(arguments.length!==0){if(arguments.length===1&&typeof arguments[0]=="object")return this.registerThemes(arguments[0]);if(arguments.length===1&&typeof arguments[0]=="string")return this.default(arguments[0]);if(arguments.length===2&&typeof arguments[1]=="string")return this.registerUrl(arguments[0],arguments[1]);if(arguments.length===2&&typeof arguments[1]=="object")return this.registerRules(arguments[0],arguments[1])}}default(e){if(!!e){if(typeof e=="string")return this.registerUrl("default",e);if(typeof e=="object")return this.registerRules("default",e)}}registerThemes(e){for(var t in e)e.hasOwnProperty(t)&&(typeof e[t]=="string"?this.registerUrl(t,e[t]):this.registerRules(t,e[t]))}registerCss(e,t){this._themes[e]={serialized:t},(this._injected[e]||e=="default")&&this.update(e)}registerUrl(e,t){var n=new qF.default(t);this._themes[e]={url:n.toString()},(this._injected[e]||e=="default")&&this.update(e)}registerRules(e,t){this._themes[e]={rules:t},(this._injected[e]||e=="default")&&this.update(e)}select(e){var t=this._current,n;this._current=e,this.update(e),n=this.rendition.getContents(),n.forEach(i=>{i.removeClass(t),i.addClass(e)})}update(e){var t=this.rendition.getContents();t.forEach(n=>{this.add(e,n)})}inject(e){var t=[],n=this._themes,i;for(var s in n)n.hasOwnProperty(s)&&(s===this._current||s==="default")&&(i=n[s],(i.rules&&Object.keys(i.rules).length>0||i.url&&t.indexOf(i.url)===-1)&&this.add(s,e),this._injected.push(s));this._current!="default"&&e.addClass(this._current)}add(e,t){var n=this._themes[e];!n||!t||(n.url?t.addStylesheet(n.url):n.serialized?(t.addStylesheetCss(n.serialized,e),n.injected=!0):n.rules&&(t.addStylesheetRules(n.rules,e),n.injected=!0))}override(e,t,n){var i=this.rendition.getContents();this._overrides[e]={value:t,priority:n===!0},i.forEach(s=>{s.css(e,this._overrides[e].value,this._overrides[e].priority)})}removeOverride(e){var t=this.rendition.getContents();delete this._overrides[e],t.forEach(n=>{n.css(e)})}overrides(e){var t=this._overrides;for(var n in t)t.hasOwnProperty(n)&&e.css(n,t[n].value,t[n].priority)}fontSize(e){this.override("font-size",e)}font(e){this.override("font-family",e,!0)}destroy(){this.rendition=void 0,this._themes=void 0,this._overrides=void 0,this._current=void 0,this._injected=void 0}}var ZF=XF;cc.default=ZF;var cs={},zo={};Object.defineProperty(zo,"__esModule",{value:!0});zo.default=void 0;var _u=QF(ar),Fm=xe;function QF(r){return r&&r.__esModule?r:{default:r}}class JF{constructor(e,t,n,i=!1){this.layout=e,this.horizontal=n==="horizontal",this.direction=t||"ltr",this._dev=i}section(e){var t=this.findRanges(e),n=this.rangeListToCfiList(e.section.cfiBase,t);return n}page(e,t,n,i){var s=e&&e.document?e.document.body:!1,a;if(!!s){if(a=this.rangePairToCfiPair(t,{start:this.findStart(s,n,i),end:this.findEnd(s,n,i)}),this._dev===!0){let o=e.document,u=new _u.default(a.start).toRange(o),l=new _u.default(a.end).toRange(o),c=o.defaultView.getSelection(),h=o.createRange();c.removeAllRanges(),h.setStart(u.startContainer,u.startOffset),h.setEnd(l.endContainer,l.endOffset),c.addRange(h)}return a}}walk(e,t){if(!(e&&e.nodeType===Node.TEXT_NODE)){var n={acceptNode:function(u){return u.data.trim().length>0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}},i=n.acceptNode;i.acceptNode=n.acceptNode;for(var s=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,i,!1),a,o;(a=s.nextNode())&&(o=t(a),!o););return o}}findRanges(e){for(var t=[],n=e.contents.scrollWidth(),i=Math.ceil(n/this.layout.spreadWidth),s=i*this.layout.divisor,a=this.layout.columnWidth,o=this.layout.gap,u,l,c=0;c<s.pages;c++)u=(a+o)*c,l=a*(c+1)+o*c,t.push({start:this.findStart(e.document.body,u,l),end:this.findEnd(e.document.body,u,l)});return t}findStart(e,t,n){for(var i=[e],s,a,o=e;i.length;)if(s=i.shift(),a=this.walk(s,u=>{var l,c,h,f,d;if(d=(0,Fm.nodeBounds)(u),this.horizontal&&this.direction==="ltr"){if(l=this.horizontal?d.left:d.top,c=this.horizontal?d.right:d.bottom,l>=t&&l<=n)return u;if(c>t)return u;o=u,i.push(u)}else if(this.horizontal&&this.direction==="rtl"){if(l=d.left,c=d.right,c<=n&&c>=t)return u;if(l<n)return u;o=u,i.push(u)}else{if(h=d.top,f=d.bottom,h>=t&&h<=n)return u;if(f>t)return u;o=u,i.push(u)}}),a)return this.findTextStartRange(a,t,n);return this.findTextStartRange(o,t,n)}findEnd(e,t,n){for(var i=[e],s,a=e,o;i.length;)if(s=i.shift(),o=this.walk(s,u=>{var l,c,h,f,d;if(d=(0,Fm.nodeBounds)(u),this.horizontal&&this.direction==="ltr"){if(l=Math.round(d.left),c=Math.round(d.right),l>n&&a)return a;if(c>n)return u;a=u,i.push(u)}else if(this.horizontal&&this.direction==="rtl"){if(l=Math.round(this.horizontal?d.left:d.top),c=Math.round(this.horizontal?d.right:d.bottom),c<t&&a)return a;if(l<t)return u;a=u,i.push(u)}else{if(h=Math.round(d.top),f=Math.round(d.bottom),h>n&&a)return a;if(f>n)return u;a=u,i.push(u)}}),o)return this.findTextEndRange(o,t,n);return this.findTextEndRange(a,t,n)}findTextStartRange(e,t,n){for(var i=this.splitTextNodeIntoRanges(e),s,a,o,u,l,c=0;c<i.length;c++)if(s=i[c],a=s.getBoundingClientRect(),this.horizontal&&this.direction==="ltr"){if(o=a.left,o>=t)return s}else if(this.horizontal&&this.direction==="rtl"){if(l=a.right,l<=n)return s}else if(u=a.top,u>=t)return s;return i[0]}findTextEndRange(e,t,n){for(var i=this.splitTextNodeIntoRanges(e),s,a,o,u,l,c,h,f=0;f<i.length;f++){if(a=i[f],o=a.getBoundingClientRect(),this.horizontal&&this.direction==="ltr"){if(u=o.left,l=o.right,u>n&&s)return s;if(l>n)return a}else if(this.horizontal&&this.direction==="rtl"){if(u=o.left,l=o.right,l<t&&s)return s;if(u<t)return a}else{if(c=o.top,h=o.bottom,c>n&&s)return s;if(h>n)return a}s=a}return i[i.length-1]}splitTextNodeIntoRanges(e,t){var n=[],i=e.textContent||"",s=i.trim(),a,o=e.ownerDocument,u=t||" ",l=s.indexOf(u);if(l===-1||e.nodeType!=Node.TEXT_NODE)return a=o.createRange(),a.selectNodeContents(e),[a];for(a=o.createRange(),a.setStart(e,0),a.setEnd(e,l),n.push(a),a=!1;l!=-1;)l=s.indexOf(u,l+1),l>0&&(a&&(a.setEnd(e,l),n.push(a)),a=o.createRange(),a.setStart(e,l+1));return a&&(a.setEnd(e,s.length),n.push(a)),n}rangePairToCfiPair(e,t){var n=t.start,i=t.end;n.collapse(!0),i.collapse(!1);let s=new _u.default(n,e).toString(),a=new _u.default(i,e).toString();return{start:s,end:a}}rangeListToCfiList(e,t){for(var n=[],i,s=0;s<t.length;s++)i=this.rangePairToCfiPair(e,t[s]),n.push(i);return n}axis(e){return e&&(this.horizontal=e==="horizontal"),this.horizontal}}var eb=JF;zo.default=eb;Object.defineProperty(cs,"__esModule",{value:!0});cs.default=void 0;var tb=B0(Yr.exports),nn=xe,_s=B0(ar),bm=B0(zo),rb=In,Pn=kt;function B0(r){return r&&r.__esModule?r:{default:r}}const y2=typeof navigator<"u",nb=y2&&/Chrome/.test(navigator.userAgent),Rm=y2&&!nb&&/AppleWebKit/.test(navigator.userAgent),ib=1;class x2{constructor(e,t,n,i){this.epubcfi=new _s.default,this.document=e,this.documentElement=this.document.documentElement,this.content=t||this.document.body,this.window=this.document.defaultView,this._size={width:0,height:0},this.sectionIndex=i||0,this.cfiBase=n||"",this.epubReadingSystem("epub.js",Pn.EPUBJS_VERSION),this.called=0,this.active=!0,this.listeners()}static get listenedEvents(){return Pn.DOM_EVENTS}width(e){var t=this.content;return e&&(0,nn.isNumber)(e)&&(e=e+"px"),e&&(t.style.width=e),parseInt(this.window.getComputedStyle(t).width)}height(e){var t=this.content;return e&&(0,nn.isNumber)(e)&&(e=e+"px"),e&&(t.style.height=e),parseInt(this.window.getComputedStyle(t).height)}contentWidth(e){var t=this.content||this.document.body;return e&&(0,nn.isNumber)(e)&&(e=e+"px"),e&&(t.style.width=e),parseInt(this.window.getComputedStyle(t).width)}contentHeight(e){var t=this.content||this.document.body;return e&&(0,nn.isNumber)(e)&&(e=e+"px"),e&&(t.style.height=e),parseInt(this.window.getComputedStyle(t).height)}textWidth(){let e,t,n=this.document.createRange(),i=this.content||this.document.body,s=(0,nn.borders)(i);return n.selectNodeContents(i),e=n.getBoundingClientRect(),t=e.width,s&&s.width&&(t+=s.width),Math.round(t)}textHeight(){let e,t,n=this.document.createRange(),i=this.content||this.document.body;return n.selectNodeContents(i),e=n.getBoundingClientRect(),t=e.bottom,Math.round(t)}scrollWidth(){var e=this.documentElement.scrollWidth;return e}scrollHeight(){var e=this.documentElement.scrollHeight;return e}overflow(e){return e&&(this.documentElement.style.overflow=e),this.window.getComputedStyle(this.documentElement).overflow}overflowX(e){return e&&(this.documentElement.style.overflowX=e),this.window.getComputedStyle(this.documentElement).overflowX}overflowY(e){return e&&(this.documentElement.style.overflowY=e),this.window.getComputedStyle(this.documentElement).overflowY}css(e,t,n){var i=this.content||this.document.body;return t?i.style.setProperty(e,t,n?"important":""):i.style.removeProperty(e),this.window.getComputedStyle(i)[e]}viewport(e){var t=this.document.querySelector("meta[name='viewport']"),n={width:void 0,height:void 0,scale:void 0,minimum:void 0,maximum:void 0,scalable:void 0},i=[],s={};if(t&&t.hasAttribute("content")){let a=t.getAttribute("content"),o=a.match(/width\s*=\s*([^,]*)/),u=a.match(/height\s*=\s*([^,]*)/),l=a.match(/initial-scale\s*=\s*([^,]*)/),c=a.match(/minimum-scale\s*=\s*([^,]*)/),h=a.match(/maximum-scale\s*=\s*([^,]*)/),f=a.match(/user-scalable\s*=\s*([^,]*)/);o&&o.length&&typeof o[1]<"u"&&(n.width=o[1]),u&&u.length&&typeof u[1]<"u"&&(n.height=u[1]),l&&l.length&&typeof l[1]<"u"&&(n.scale=l[1]),c&&c.length&&typeof c[1]<"u"&&(n.minimum=c[1]),h&&h.length&&typeof h[1]<"u"&&(n.maximum=h[1]),f&&f.length&&typeof f[1]<"u"&&(n.scalable=f[1])}return s=(0,nn.defaults)(e||{},n),e&&(s.width&&i.push("width="+s.width),s.height&&i.push("height="+s.height),s.scale&&i.push("initial-scale="+s.scale),s.scalable==="no"?(i.push("minimum-scale="+s.scale),i.push("maximum-scale="+s.scale),i.push("user-scalable="+s.scalable)):(s.scalable&&i.push("user-scalable="+s.scalable),s.minimum&&i.push("minimum-scale="+s.minimum),s.maximum&&i.push("minimum-scale="+s.maximum)),t||(t=this.document.createElement("meta"),t.setAttribute("name","viewport"),this.document.querySelector("head").appendChild(t)),t.setAttribute("content",i.join(", ")),this.window.scrollTo(0,0)),s}expand(){this.emit(Pn.EVENTS.CONTENTS.EXPAND)}listeners(){this.imageLoadListeners(),this.mediaQueryListeners(),this.addEventListeners(),this.addSelectionListeners(),typeof ResizeObserver>"u"?(this.resizeListeners(),this.visibilityListeners()):this.resizeObservers(),this.linksHandler()}removeListeners(){this.removeEventListeners(),this.removeSelectionListeners(),this.observer&&this.observer.disconnect(),clearTimeout(this.expanding)}resizeCheck(){let e=this.textWidth(),t=this.textHeight();(e!=this._size.width||t!=this._size.height)&&(this._size={width:e,height:t},this.onResize&&this.onResize(this._size),this.emit(Pn.EVENTS.CONTENTS.RESIZE,this._size))}resizeListeners(){clearTimeout(this.expanding),requestAnimationFrame(this.resizeCheck.bind(this)),this.expanding=setTimeout(this.resizeListeners.bind(this),350)}visibilityListeners(){document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&this.active===!1?(this.active=!0,this.resizeListeners()):(this.active=!1,clearTimeout(this.expanding))})}transitionListeners(){let e=this.content;e.style.transitionProperty="font, font-size, font-size-adjust, font-stretch, font-variation-settings, font-weight, width, height",e.style.transitionDuration="0.001ms",e.style.transitionTimingFunction="linear",e.style.transitionDelay="0",this._resizeCheck=this.resizeCheck.bind(this),this.document.addEventListener("transitionend",this._resizeCheck)}mediaQueryListeners(){for(var e=this.document.styleSheets,t=function(o){o.matches&&!this._expanding&&setTimeout(this.expand.bind(this),1)}.bind(this),n=0;n<e.length;n+=1){var i;try{i=e[n].cssRules}catch{return}if(!i)return;for(var s=0;s<i.length;s+=1)if(i[s].media){var a=this.window.matchMedia(i[s].media.mediaText);a.addListener(t)}}}resizeObservers(){this.observer=new ResizeObserver(e=>{requestAnimationFrame(this.resizeCheck.bind(this))}),this.observer.observe(this.document.documentElement)}mutationObservers(){this.observer=new MutationObserver(t=>{this.resizeCheck()});let e={attributes:!0,childList:!0,characterData:!0,subtree:!0};this.observer.observe(this.document,e)}imageLoadListeners(){for(var e=this.document.querySelectorAll("img"),t,n=0;n<e.length;n++)t=e[n],typeof t.naturalWidth<"u"&&t.naturalWidth===0&&(t.onload=this.expand.bind(this))}fontLoadListeners(){!this.document||!this.document.fonts||this.document.fonts.ready.then(function(){this.resizeCheck()}.bind(this))}root(){return this.document?this.document.documentElement:null}locationOf(e,t){var n,i={left:0,top:0};if(!this.document)return i;if(this.epubcfi.isCfiString(e)){let s=new _s.default(e).toRange(this.document,t);if(s){try{if(!s.endContainer||s.startContainer==s.endContainer&&s.startOffset==s.endOffset){let a=s.startContainer.textContent.indexOf(" ",s.startOffset);a==-1&&(a=s.startContainer.textContent.length),s.setEnd(s.startContainer,a)}}catch(a){console.error("setting end offset to start container length failed",a)}if(s.startContainer.nodeType===Node.ELEMENT_NODE)n=s.startContainer.getBoundingClientRect(),i.left=n.left,i.top=n.top;else if(Rm){let a=s.startContainer,o=new Range;try{a.nodeType===ib?n=a.getBoundingClientRect():s.startOffset+2<a.length?(o.setStart(a,s.startOffset),o.setEnd(a,s.startOffset+2),n=o.getBoundingClientRect()):s.startOffset-2>0?(o.setStart(a,s.startOffset-2),o.setEnd(a,s.startOffset),n=o.getBoundingClientRect()):n=a.parentNode.getBoundingClientRect()}catch(u){console.error(u,u.stack)}}else n=s.getBoundingClientRect()}}else if(typeof e=="string"&&e.indexOf("#")>-1){let s=e.substring(e.indexOf("#")+1),a=this.document.getElementById(s);if(a)if(Rm){let o=new Range;o.selectNode(a),n=o.getBoundingClientRect()}else n=a.getBoundingClientRect()}return n&&(i.left=n.left,i.top=n.top),i}addStylesheet(e){return new Promise(function(t,n){var i,s=!1;if(!this.document){t(!1);return}if(i=this.document.querySelector("link[href='"+e+"']"),i){t(!0);return}i=this.document.createElement("link"),i.type="text/css",i.rel="stylesheet",i.href=e,i.onload=i.onreadystatechange=function(){!s&&(!this.readyState||this.readyState=="complete")&&(s=!0,setTimeout(()=>{t(!0)},1))},this.document.head.appendChild(i)}.bind(this))}_getStylesheetNode(e){var t;return e="epubjs-inserted-css-"+(e||""),this.document?(t=this.document.getElementById(e),t||(t=this.document.createElement("style"),t.id=e,this.document.head.appendChild(t)),t):!1}addStylesheetCss(e,t){if(!this.document||!e)return!1;var n;return n=this._getStylesheetNode(t),n.innerHTML=e,!0}addStylesheetRules(e,t){var n;if(!(!this.document||!e||e.length===0))if(n=this._getStylesheetNode(t).sheet,Object.prototype.toString.call(e)==="[object Array]")for(var i=0,s=e.length;i<s;i++){var a=1,o=e[i],u=e[i][0],l="";Object.prototype.toString.call(o[1][0])==="[object Array]"&&(o=o[1],a=0);for(var c=o.length;a<c;a++){var h=o[a];l+=h[0]+":"+h[1]+(h[2]?" !important":"")+`;
`}n.insertRule(u+"{"+l+"}",n.cssRules.length)}else Object.keys(e).forEach(d=>{const m=e[d];if(Array.isArray(m))m.forEach(E=>{const g=Object.keys(E).map(v=>`${v}:${E[v]}`).join(";");n.insertRule(`${d}{${g}}`,n.cssRules.length)});else{const p=Object.keys(m).map(g=>`${g}:${m[g]}`).join(";");n.insertRule(`${d}{${p}}`,n.cssRules.length)}})}addScript(e){return new Promise(function(t,n){var i,s=!1;if(!this.document){t(!1);return}i=this.document.createElement("script"),i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){!s&&(!this.readyState||this.readyState=="complete")&&(s=!0,setTimeout(function(){t(!0)},1))},this.document.head.appendChild(i)}.bind(this))}addClass(e){var t;!this.document||(t=this.content||this.document.body,t&&t.classList.add(e))}removeClass(e){var t;!this.document||(t=this.content||this.document.body,t&&t.classList.remove(e))}addEventListeners(){!this.document||(this._triggerEvent=this.triggerEvent.bind(this),Pn.DOM_EVENTS.forEach(function(e){this.document.addEventListener(e,this._triggerEvent,{passive:!0})},this))}removeEventListeners(){!this.document||(Pn.DOM_EVENTS.forEach(function(e){this.document.removeEventListener(e,this._triggerEvent,{passive:!0})},this),this._triggerEvent=void 0)}triggerEvent(e){this.emit(e.type,e)}addSelectionListeners(){!this.document||(this._onSelectionChange=this.onSelectionChange.bind(this),this.document.addEventListener("selectionchange",this._onSelectionChange,{passive:!0}))}removeSelectionListeners(){!this.document||(this.document.removeEventListener("selectionchange",this._onSelectionChange,{passive:!0}),this._onSelectionChange=void 0)}onSelectionChange(e){this.selectionEndTimeout&&clearTimeout(this.selectionEndTimeout),this.selectionEndTimeout=setTimeout(function(){var t=this.window.getSelection();this.triggerSelectedEvent(t)}.bind(this),250)}triggerSelectedEvent(e){var t,n;e&&e.rangeCount>0&&(t=e.getRangeAt(0),t.collapsed||(n=new _s.default(t,this.cfiBase).toString(),this.emit(Pn.EVENTS.CONTENTS.SELECTED,n),this.emit(Pn.EVENTS.CONTENTS.SELECTED_RANGE,t)))}range(e,t){var n=new _s.default(e);return n.toRange(this.document,t)}cfiFromRange(e,t){return new _s.default(e,this.cfiBase,t).toString()}cfiFromNode(e,t){return new _s.default(e,this.cfiBase,t).toString()}map(e){var t=new bm.default(e);return t.section()}size(e,t){var n={scale:1,scalable:"no"};this.layoutStyle("scrolling"),e>=0&&(this.width(e),n.width=e,this.css("padding","0 "+e/12+"px")),t>=0&&(this.height(t),n.height=t),this.css("margin","0"),this.css("box-sizing","border-box"),this.viewport(n)}columns(e,t,n,i,s){let a=(0,nn.prefixed)("column-axis"),o=(0,nn.prefixed)("column-gap"),u=(0,nn.prefixed)("column-width"),l=(0,nn.prefixed)("column-fill"),h=this.writingMode().indexOf("vertical")===0?"vertical":"horizontal";this.layoutStyle("paginated"),s==="rtl"&&h==="horizontal"&&this.direction(s),this.width(e),this.height(t),this.viewport({width:e,height:t,scale:1,scalable:"no"}),this.css("overflow-y","hidden"),this.css("margin","0",!0),h==="vertical"?(this.css("padding-top",i/2+"px",!0),this.css("padding-bottom",i/2+"px",!0),this.css("padding-left","20px"),this.css("padding-right","20px"),this.css(a,"vertical")):(this.css("padding-top","20px"),this.css("padding-bottom","20px"),this.css("padding-left",i/2+"px",!0),this.css("padding-right",i/2+"px",!0),this.css(a,"horizontal")),this.css("box-sizing","border-box"),this.css("max-width","inherit"),this.css(l,"auto"),this.css(o,i+"px"),this.css(u,n+"px"),this.css("-webkit-line-box-contain","block glyphs replaced")}scaler(e,t,n){var i="scale("+e+")",s="";this.css("transform-origin","top left"),(t>=0||n>=0)&&(s=" translate("+(t||0)+"px, "+(n||0)+"px )"),this.css("transform",i+s)}fit(e,t,n){var i=this.viewport(),s=parseInt(i.width),a=parseInt(i.height),o=e/s,u=t/a,l=o<u?o:u;if(this.layoutStyle("paginated"),this.width(s),this.height(a),this.overflow("hidden"),this.scaler(l,0,0),this.css("background-size",s*l+"px "+a*l+"px"),this.css("background-color","transparent"),n&&n.properties.includes("page-spread-left")){var c=e-s*l;this.css("margin-left",c+"px")}}direction(e){this.documentElement&&(this.documentElement.style.direction=e)}mapPage(e,t,n,i,s){var a=new bm.default(t,s);return a.page(this,e,n,i)}linksHandler(){(0,rb.replaceLinks)(this.content,e=>{this.emit(Pn.EVENTS.CONTENTS.LINK_CLICKED,e)})}writingMode(e){let t=(0,nn.prefixed)("writing-mode");return e&&this.documentElement&&(this.documentElement.style[t]=e),this.window.getComputedStyle(this.documentElement)[t]||""}layoutStyle(e){return e&&(this._layoutStyle=e,navigator.epubReadingSystem.layoutStyle=this._layoutStyle),this._layoutStyle||"paginated"}epubReadingSystem(e,t){return navigator.epubReadingSystem={name:e,version:t,layoutStyle:this.layoutStyle(),hasFeature:function(n){switch(n){case"dom-manipulation":return!0;case"layout-changes":return!0;case"touch-events":return!0;case"mouse-events":return!0;case"keyboard-events":return!0;case"spine-scripting":return!1;default:return!1}}},navigator.epubReadingSystem}destroy(){this.removeListeners()}}(0,tb.default)(x2.prototype);var sb=x2;cs.default=sb;var hc={};Object.defineProperty(hc,"__esModule",{value:!0});hc.default=void 0;var ab=A2(Yr.exports),ob=A2(ar),Lm=kt;function A2(r){return r&&r.__esModule?r:{default:r}}class ub{constructor(e){this.rendition=e,this.highlights=[],this.underlines=[],this.marks=[],this._annotations={},this._annotationsBySectionIndex={},this.rendition.hooks.render.register(this.inject.bind(this)),this.rendition.hooks.unloaded.register(this.clear.bind(this))}add(e,t,n,i,s,a){let o=encodeURI(t+e),l=new ob.default(t).spinePos,c=new C2({type:e,cfiRange:t,data:n,sectionIndex:l,cb:i,className:s,styles:a});return this._annotations[o]=c,l in this._annotationsBySectionIndex?this._annotationsBySectionIndex[l].push(o):this._annotationsBySectionIndex[l]=[o],this.rendition.views().forEach(f=>{c.sectionIndex===f.index&&c.attach(f)}),c}remove(e,t){let n=encodeURI(e+t);if(n in this._annotations){let i=this._annotations[n];if(t&&i.type!==t)return;this.rendition.views().forEach(a=>{this._removeFromAnnotationBySectionIndex(i.sectionIndex,n),i.sectionIndex===a.index&&i.detach(a)}),delete this._annotations[n]}}_removeFromAnnotationBySectionIndex(e,t){this._annotationsBySectionIndex[e]=this._annotationsAt(e).filter(n=>n!==t)}_annotationsAt(e){return this._annotationsBySectionIndex[e]}highlight(e,t,n,i,s){return this.add("highlight",e,t,n,i,s)}underline(e,t,n,i,s){return this.add("underline",e,t,n,i,s)}mark(e,t,n){return this.add("mark",e,t,n)}each(){return this._annotations.forEach.apply(this._annotations,arguments)}inject(e){let t=e.index;t in this._annotationsBySectionIndex&&this._annotationsBySectionIndex[t].forEach(i=>{this._annotations[i].attach(e)})}clear(e){let t=e.index;t in this._annotationsBySectionIndex&&this._annotationsBySectionIndex[t].forEach(i=>{this._annotations[i].detach(e)})}show(){}hide(){}}class C2{constructor({type:e,cfiRange:t,data:n,sectionIndex:i,cb:s,className:a,styles:o}){this.type=e,this.cfiRange=t,this.data=n,this.sectionIndex=i,this.mark=void 0,this.cb=s,this.className=a,this.styles=o}update(e){this.data=e}attach(e){let{cfiRange:t,data:n,type:i,mark:s,cb:a,className:o,styles:u}=this,l;return i==="highlight"?l=e.highlight(t,n,a,o,u):i==="underline"?l=e.underline(t,n,a,o,u):i==="mark"&&(l=e.mark(t,n,a)),this.mark=l,this.emit(Lm.EVENTS.ANNOTATION.ATTACH,l),l}detach(e){let{cfiRange:t,type:n}=this,i;return e&&(n==="highlight"?i=e.unhighlight(t):n==="underline"?i=e.ununderline(t):n==="mark"&&(i=e.unmark(t))),this.mark=void 0,this.emit(Lm.EVENTS.ANNOTATION.DETACH,i),i}text(){}}(0,ab.default)(C2.prototype);var lb=ub;hc.default=lb;var Vo={},Dn={},fc={};Object.defineProperty(fc,"__esModule",{value:!0});fc.createElement=T2;function T2(r){return document.createElementNS("http://www.w3.org/2000/svg",r)}fc.default={createElement:T2};var Go={};Object.defineProperty(Go,"__esModule",{value:!0});Go.proxyMouse=S2;Go.clone=D2;Go.default={proxyMouse:S2};function S2(r,e){function t(a){for(var o=e.length-1;o>=0;o--){var u=e[o],l=a.clientX,c=a.clientY;if(a.touches&&a.touches.length&&(l=a.touches[0].clientX,c=a.touches[0].clientY),!!cb(u,r,l,c)){u.dispatchEvent(D2(a));break}}}if(r.nodeName==="iframe"||r.nodeName==="IFRAME")try{this.target=r.contentDocument}catch{this.target=r}else this.target=r;for(var n=["mouseup","mousedown","click","touchstart"],i=0;i<n.length;i++){var s=n[i];this.target.addEventListener(s,function(a){return t(a)},!1)}}function D2(r){var e=Object.assign({},r,{bubbles:!1});try{return new MouseEvent(r.type,e)}catch{var t=document.createEvent("MouseEvents");return t.initMouseEvent(r.type,!1,e.cancelable,e.view,e.detail,e.screenX,e.screenY,e.clientX,e.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.button,e.relatedTarget),t}}function cb(r,e,t,n){var i=e.getBoundingClientRect();function s(c,h,f){var d=c.top-i.top,m=c.left-i.left,E=d+c.height,p=m+c.width;return d<=f&&m<=h&&E>f&&p>h}var a=r.getBoundingClientRect();if(!s(a,t,n))return!1;for(var o=r.getClientRects(),u=0,l=o.length;u<l;u++)if(s(o[u],t,n))return!0;return!1}Object.defineProperty(Dn,"__esModule",{value:!0});Dn.Underline=Dn.Highlight=Dn.Mark=Dn.Pane=void 0;var hb=function r(e,t,n){e===null&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(i===void 0){var s=Object.getPrototypeOf(e);return s===null?void 0:r(s,t,n)}else{if("value"in i)return i.value;var a=i.get;return a===void 0?void 0:a.call(n)}},dc=function(){function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),fb=fc,So=w2(fb),db=Go,pb=w2(db);function w2(r){return r&&r.__esModule?r:{default:r}}function _2(r,e){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:r}function F2(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(r,e):r.__proto__=e)}function pc(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}Dn.Pane=function(){function r(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:document.body;pc(this,r),this.target=e,this.element=So.default.createElement("svg"),this.marks=[],this.element.style.position="absolute",this.element.setAttribute("pointer-events","none"),pb.default.proxyMouse(this.target,this.marks),this.container=t,this.container.appendChild(this.element),this.render()}return dc(r,[{key:"addMark",value:function(t){var n=So.default.createElement("g");return this.element.appendChild(n),t.bind(n,this.container),this.marks.push(t),t.render(),t}},{key:"removeMark",value:function(t){var n=this.marks.indexOf(t);if(n!==-1){var i=t.unbind();this.element.removeChild(i),this.marks.splice(n,1)}}},{key:"render",value:function(){Eb(this.element,vb(this.target,this.container));var t=!0,n=!1,i=void 0;try{for(var s=this.marks[Symbol.iterator](),a;!(t=(a=s.next()).done);t=!0){var o=a.value;o.render()}}catch(u){n=!0,i=u}finally{try{!t&&s.return&&s.return()}finally{if(n)throw i}}}}]),r}();var gb=Dn.Mark=function(){function r(){pc(this,r),this.element=null}return dc(r,[{key:"bind",value:function(t,n){this.element=t,this.container=n}},{key:"unbind",value:function(){var t=this.element;return this.element=null,t}},{key:"render",value:function(){}},{key:"dispatchEvent",value:function(t){!this.element||this.element.dispatchEvent(t)}},{key:"getBoundingClientRect",value:function(){return this.element.getBoundingClientRect()}},{key:"getClientRects",value:function(){for(var t=[],n=this.element.firstChild;n;)t.push(n.getBoundingClientRect()),n=n.nextSibling;return t}},{key:"filteredRanges",value:function(){var t=Array.from(this.range.getClientRects());return t.filter(function(n){for(var i=0;i<t.length;i++){if(t[i]===n)return!0;var s=yb(t[i],n);if(s)return!1}return!0})}}]),r}(),mb=Dn.Highlight=function(r){F2(e,r);function e(t,n,i,s){pc(this,e);var a=_2(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return a.range=t,a.className=n,a.data=i||{},a.attributes=s||{},a}return dc(e,[{key:"bind",value:function(n,i){hb(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"bind",this).call(this,n,i);for(var s in this.data)this.data.hasOwnProperty(s)&&(this.element.dataset[s]=this.data[s]);for(var s in this.attributes)this.attributes.hasOwnProperty(s)&&this.element.setAttribute(s,this.attributes[s]);this.className&&this.element.classList.add(this.className)}},{key:"render",value:function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);for(var n=this.element.ownerDocument.createDocumentFragment(),i=this.filteredRanges(),s=this.element.getBoundingClientRect(),a=this.container.getBoundingClientRect(),o=0,u=i.length;o<u;o++){var l=i[o],c=So.default.createElement("rect");c.setAttribute("x",l.left-s.left+a.left),c.setAttribute("y",l.top-s.top+a.top),c.setAttribute("height",l.height),c.setAttribute("width",l.width),n.appendChild(c)}this.element.appendChild(n)}}]),e}(gb);Dn.Underline=function(r){F2(e,r);function e(t,n,i,s){return pc(this,e),_2(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,i,s))}return dc(e,[{key:"render",value:function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);for(var n=this.element.ownerDocument.createDocumentFragment(),i=this.filteredRanges(),s=this.element.getBoundingClientRect(),a=this.container.getBoundingClientRect(),o=0,u=i.length;o<u;o++){var l=i[o],c=So.default.createElement("rect");c.setAttribute("x",l.left-s.left+a.left),c.setAttribute("y",l.top-s.top+a.top),c.setAttribute("height",l.height),c.setAttribute("width",l.width),c.setAttribute("fill","none");var h=So.default.createElement("line");h.setAttribute("x1",l.left-s.left+a.left),h.setAttribute("x2",l.left-s.left+a.left+l.width),h.setAttribute("y1",l.top-s.top+a.top+l.height-1),h.setAttribute("y2",l.top-s.top+a.top+l.height-1),h.setAttribute("stroke-width",1),h.setAttribute("stroke","black"),h.setAttribute("stroke-linecap","square"),n.appendChild(c),n.appendChild(h)}this.element.appendChild(n)}}]),e}(mb);function vb(r,e){var t=e.getBoundingClientRect(),n=r.getBoundingClientRect();return{top:n.top-t.top,left:n.left-t.left,height:r.scrollHeight,width:r.scrollWidth}}function Eb(r,e){r.style.setProperty("top",e.top+"px","important"),r.style.setProperty("left",e.left+"px","important"),r.style.setProperty("height",e.height+"px","important"),r.style.setProperty("width",e.width+"px","important")}function yb(r,e){return e.right<=r.right&&e.left>=r.left&&e.top>=r.top&&e.bottom<=r.bottom}Object.defineProperty(Vo,"__esModule",{value:!0});Vo.default=void 0;var xb=O0(Yr.exports),Nt=xe,Ab=O0(ar),Cb=O0(cs),wr=kt,Fu=Dn;function O0(r){return r&&r.__esModule?r:{default:r}}class b2{constructor(e,t){this.settings=(0,Nt.extend)({ignoreClass:"",axis:void 0,direction:void 0,width:0,height:0,layout:void 0,globalLayoutProperties:{},method:void 0,forceRight:!1,allowScriptedContent:!1,allowPopups:!1},t||{}),this.id="epubjs-view-"+(0,Nt.uuid)(),this.section=e,this.index=e.index,this.element=this.container(this.settings.axis),this.added=!1,this.displayed=!1,this.rendered=!1,this.fixedWidth=0,this.fixedHeight=0,this.epubcfi=new Ab.default,this.layout=this.settings.layout,this.pane=void 0,this.highlights={},this.underlines={},this.marks={}}container(e){var t=document.createElement("div");return t.classList.add("epub-view"),t.style.height="0px",t.style.width="0px",t.style.overflow="hidden",t.style.position="relative",t.style.display="block",e&&e=="horizontal"?t.style.flex="none":t.style.flex="initial",t}create(){return this.iframe?this.iframe:(this.element||(this.element=this.createContainer()),this.iframe=document.createElement("iframe"),this.iframe.id=this.id,this.iframe.scrolling="no",this.iframe.style.overflow="hidden",this.iframe.seamless="seamless",this.iframe.style.border="none",this.iframe.sandbox="allow-same-origin",this.settings.allowScriptedContent&&(this.iframe.sandbox+=" allow-scripts"),this.settings.allowPopups&&(this.iframe.sandbox+=" allow-popups"),this.iframe.setAttribute("enable-annotation","true"),this.resizing=!0,this.element.style.visibility="hidden",this.iframe.style.visibility="hidden",this.iframe.style.width="0",this.iframe.style.height="0",this._width=0,this._height=0,this.element.setAttribute("ref",this.index),this.added=!0,this.elementBounds=(0,Nt.bounds)(this.element),"srcdoc"in this.iframe?this.supportsSrcdoc=!0:this.supportsSrcdoc=!1,this.settings.method||(this.settings.method=this.supportsSrcdoc?"srcdoc":"write"),this.iframe)}render(e,t){return this.create(),this.size(),this.sectionRender||(this.sectionRender=this.section.render(e)),this.sectionRender.then(function(n){return this.load(n)}.bind(this)).then(function(){let n=this.contents.writingMode(),i;return this.settings.flow==="scrolled"?i=n.indexOf("vertical")===0?"horizontal":"vertical":i=n.indexOf("vertical")===0?"vertical":"horizontal",n.indexOf("vertical")===0&&this.settings.flow==="paginated"&&(this.layout.delta=this.layout.height),this.setAxis(i),this.emit(wr.EVENTS.VIEWS.AXIS,i),this.setWritingMode(n),this.emit(wr.EVENTS.VIEWS.WRITING_MODE,n),this.layout.format(this.contents,this.section,this.axis),this.addListeners(),new Promise((s,a)=>{this.expand(),this.settings.forceRight&&(this.element.style.marginLeft=this.width()+"px"),s()})}.bind(this),function(n){return this.emit(wr.EVENTS.VIEWS.LOAD_ERROR,n),new Promise((i,s)=>{s(n)})}.bind(this)).then(function(){this.emit(wr.EVENTS.VIEWS.RENDERED,this.section)}.bind(this))}reset(){this.iframe&&(this.iframe.style.width="0",this.iframe.style.height="0",this._width=0,this._height=0,this._textWidth=void 0,this._contentWidth=void 0,this._textHeight=void 0,this._contentHeight=void 0),this._needsReframe=!0}size(e,t){var n=e||this.settings.width,i=t||this.settings.height;this.layout.name==="pre-paginated"?this.lock("both",n,i):this.settings.axis==="horizontal"?this.lock("height",n,i):this.lock("width",n,i),this.settings.width=n,this.settings.height=i}lock(e,t,n){var i=(0,Nt.borders)(this.element),s;this.iframe?s=(0,Nt.borders)(this.iframe):s={width:0,height:0},e=="width"&&(0,Nt.isNumber)(t)&&(this.lockedWidth=t-i.width-s.width),e=="height"&&(0,Nt.isNumber)(n)&&(this.lockedHeight=n-i.height-s.height),e==="both"&&(0,Nt.isNumber)(t)&&(0,Nt.isNumber)(n)&&(this.lockedWidth=t-i.width-s.width,this.lockedHeight=n-i.height-s.height),this.displayed&&this.iframe&&this.expand()}expand(e){var t=this.lockedWidth,n=this.lockedHeight,i;!this.iframe||this._expanding||(this._expanding=!0,this.layout.name==="pre-paginated"?(t=this.layout.columnWidth,n=this.layout.height):this.settings.axis==="horizontal"?(t=this.contents.textWidth(),t%this.layout.pageWidth>0&&(t=Math.ceil(t/this.layout.pageWidth)*this.layout.pageWidth),this.settings.forceEvenPages&&(i=t/this.layout.pageWidth,this.layout.divisor>1&&this.layout.name==="reflowable"&&i%2>0&&(t+=this.layout.pageWidth))):this.settings.axis==="vertical"&&(n=this.contents.textHeight(),this.settings.flow==="paginated"&&n%this.layout.height>0&&(n=Math.ceil(n/this.layout.height)*this.layout.height)),(this._needsReframe||t!=this._width||n!=this._height)&&this.reframe(t,n),this._expanding=!1)}reframe(e,t){var n;(0,Nt.isNumber)(e)&&(this.element.style.width=e+"px",this.iframe.style.width=e+"px",this._width=e),(0,Nt.isNumber)(t)&&(this.element.style.height=t+"px",this.iframe.style.height=t+"px",this._height=t);let i=this.prevBounds?e-this.prevBounds.width:e,s=this.prevBounds?t-this.prevBounds.height:t;n={width:e,height:t,widthDelta:i,heightDelta:s},this.pane&&this.pane.render(),requestAnimationFrame(()=>{let a;for(let o in this.marks)this.marks.hasOwnProperty(o)&&(a=this.marks[o],this.placeMark(a.element,a.range))}),this.onResize(this,n),this.emit(wr.EVENTS.VIEWS.RESIZED,n),this.prevBounds=n,this.elementBounds=(0,Nt.bounds)(this.element)}load(e){var t=new Nt.defer,n=t.promise;if(!this.iframe)return t.reject(new Error("No Iframe Available")),n;if(this.iframe.onload=function(s){this.onLoad(s,t)}.bind(this),this.settings.method==="blobUrl")this.blobUrl=(0,Nt.createBlobUrl)(e,"application/xhtml+xml"),this.iframe.src=this.blobUrl,this.element.appendChild(this.iframe);else if(this.settings.method==="srcdoc")this.iframe.srcdoc=e,this.element.appendChild(this.iframe);else{if(this.element.appendChild(this.iframe),this.document=this.iframe.contentDocument,!this.document)return t.reject(new Error("No Document Available")),n;if(this.iframe.contentDocument.open(),window.MSApp&&MSApp.execUnsafeLocalFunction){var i=this;MSApp.execUnsafeLocalFunction(function(){i.iframe.contentDocument.write(e)})}else this.iframe.contentDocument.write(e);this.iframe.contentDocument.close()}return n}onLoad(e,t){this.window=this.iframe.contentWindow,this.document=this.iframe.contentDocument,this.contents=new Cb.default(this.document,this.document.body,this.section.cfiBase,this.section.index),this.rendering=!1;var n=this.document.querySelector("link[rel='canonical']");n?n.setAttribute("href",this.section.canonical):(n=this.document.createElement("link"),n.setAttribute("rel","canonical"),n.setAttribute("href",this.section.canonical),this.document.querySelector("head").appendChild(n)),this.contents.on(wr.EVENTS.CONTENTS.EXPAND,()=>{this.displayed&&this.iframe&&(this.expand(),this.contents&&this.layout.format(this.contents))}),this.contents.on(wr.EVENTS.CONTENTS.RESIZE,i=>{this.displayed&&this.iframe&&(this.expand(),this.contents&&this.layout.format(this.contents))}),t.resolve(this.contents)}setLayout(e){this.layout=e,this.contents&&(this.layout.format(this.contents),this.expand())}setAxis(e){this.settings.axis=e,e=="horizontal"?this.element.style.flex="none":this.element.style.flex="initial",this.size()}setWritingMode(e){this.writingMode=e}addListeners(){}removeListeners(e){}display(e){var t=new Nt.defer;return this.displayed?t.resolve(this):this.render(e).then(function(){this.emit(wr.EVENTS.VIEWS.DISPLAYED,this),this.onDisplayed(this),this.displayed=!0,t.resolve(this)}.bind(this),function(n){t.reject(n,this)}),t.promise}show(){this.element.style.visibility="visible",this.iframe&&(this.iframe.style.visibility="visible",this.iframe.style.transform="translateZ(0)",this.iframe.offsetWidth,this.iframe.style.transform=null),this.emit(wr.EVENTS.VIEWS.SHOWN,this)}hide(){this.element.style.visibility="hidden",this.iframe.style.visibility="hidden",this.stopExpanding=!0,this.emit(wr.EVENTS.VIEWS.HIDDEN,this)}offset(){return{top:this.element.offsetTop,left:this.element.offsetLeft}}width(){return this._width}height(){return this._height}position(){return this.element.getBoundingClientRect()}locationOf(e){this.iframe.getBoundingClientRect();var t=this.contents.locationOf(e,this.settings.ignoreClass);return{left:t.left,top:t.top}}onDisplayed(e){}onResize(e,t){}bounds(e){return(e||!this.elementBounds)&&(this.elementBounds=(0,Nt.bounds)(this.element)),this.elementBounds}highlight(e,t={},n,i="epubjs-hl",s={}){if(!this.contents)return;const a=Object.assign({fill:"yellow","fill-opacity":"0.3","mix-blend-mode":"multiply"},s);let o=this.contents.range(e),u=()=>{this.emit(wr.EVENTS.VIEWS.MARK_CLICKED,e,t)};t.epubcfi=e,this.pane||(this.pane=new Fu.Pane(this.iframe,this.element));let l=new Fu.Highlight(o,i,t,a),c=this.pane.addMark(l);return this.highlights[e]={mark:c,element:c.element,listeners:[u,n]},c.element.setAttribute("ref",i),c.element.addEventListener("click",u),c.element.addEventListener("touchstart",u),n&&(c.element.addEventListener("click",n),c.element.addEventListener("touchstart",n)),c}underline(e,t={},n,i="epubjs-ul",s={}){if(!this.contents)return;const a=Object.assign({stroke:"black","stroke-opacity":"0.3","mix-blend-mode":"multiply"},s);let o=this.contents.range(e),u=()=>{this.emit(wr.EVENTS.VIEWS.MARK_CLICKED,e,t)};t.epubcfi=e,this.pane||(this.pane=new Fu.Pane(this.iframe,this.element));let l=new Fu.Underline(o,i,t,a),c=this.pane.addMark(l);return this.underlines[e]={mark:c,element:c.element,listeners:[u,n]},c.element.setAttribute("ref",i),c.element.addEventListener("click",u),c.element.addEventListener("touchstart",u),n&&(c.element.addEventListener("click",n),c.element.addEventListener("touchstart",n)),c}mark(e,t={},n){if(!this.contents)return;if(e in this.marks)return this.marks[e];let i=this.contents.range(e);if(!i)return;let s=i.commonAncestorContainer,a=s.nodeType===1?s:s.parentNode,o=l=>{this.emit(wr.EVENTS.VIEWS.MARK_CLICKED,e,t)};i.collapsed&&s.nodeType===1?(i=new Range,i.selectNodeContents(s)):i.collapsed&&(i=new Range,i.selectNodeContents(a));let u=this.document.createElement("a");return u.setAttribute("ref","epubjs-mk"),u.style.position="absolute",u.dataset.epubcfi=e,t&&Object.keys(t).forEach(l=>{u.dataset[l]=t[l]}),n&&(u.addEventListener("click",n),u.addEventListener("touchstart",n)),u.addEventListener("click",o),u.addEventListener("touchstart",o),this.placeMark(u,i),this.element.appendChild(u),this.marks[e]={element:u,range:i,listeners:[o,n]},a}placeMark(e,t){let n,i,s;if(this.layout.name==="pre-paginated"||this.settings.axis!=="horizontal"){let o=t.getBoundingClientRect();n=o.top,i=o.right}else{let o=t.getClientRects(),u;for(var a=0;a!=o.length;a++)u=o[a],(!s||u.left<s)&&(s=u.left,i=Math.ceil(s/this.layout.props.pageWidth)*this.layout.props.pageWidth-this.layout.gap/2,n=u.top)}e.style.top=`${n}px`,e.style.left=`${i}px`}unhighlight(e){let t;e in this.highlights&&(t=this.highlights[e],this.pane.removeMark(t.mark),t.listeners.forEach(n=>{n&&(t.element.removeEventListener("click",n),t.element.removeEventListener("touchstart",n))}),delete this.highlights[e])}ununderline(e){let t;e in this.underlines&&(t=this.underlines[e],this.pane.removeMark(t.mark),t.listeners.forEach(n=>{n&&(t.element.removeEventListener("click",n),t.element.removeEventListener("touchstart",n))}),delete this.underlines[e])}unmark(e){let t;e in this.marks&&(t=this.marks[e],this.element.removeChild(t.element),t.listeners.forEach(n=>{n&&(t.element.removeEventListener("click",n),t.element.removeEventListener("touchstart",n))}),delete this.marks[e])}destroy(){for(let e in this.highlights)this.unhighlight(e);for(let e in this.underlines)this.ununderline(e);for(let e in this.marks)this.unmark(e);this.blobUrl&&(0,Nt.revokeBlobUrl)(this.blobUrl),this.displayed&&(this.displayed=!1,this.removeListeners(),this.contents.destroy(),this.stopExpanding=!0,this.element.removeChild(this.iframe),this.pane&&(this.pane.element.remove(),this.pane=void 0),this.iframe=void 0,this.contents=void 0,this._textWidth=null,this._textHeight=null,this._width=null,this._height=null)}}(0,xb.default)(b2.prototype);var Tb=b2;Vo.default=Tb;var ga={},gc={};Object.defineProperty(gc,"__esModule",{value:!0});gc.createDefiner=R2;gc.default=Sb;function Sb(){var r="reverse",e=R2();return document.body.appendChild(e),e.scrollLeft>0?r="default":typeof Element<"u"&&Element.prototype.scrollIntoView?(e.children[0].children[1].scrollIntoView(),e.scrollLeft<0&&(r="negative")):(e.scrollLeft=1,e.scrollLeft===0&&(r="negative")),document.body.removeChild(e),r}function R2(){var r=document.createElement("div");r.dir="rtl",r.style.position="fixed",r.style.width="1px",r.style.height="1px",r.style.top="0px",r.style.left="0px",r.style.overflow="hidden";var e=document.createElement("div");e.style.width="2px";var t=document.createElement("span");t.style.width="1px",t.style.display="inline-block";var n=document.createElement("span");return n.style.width="1px",n.style.display="inline-block",e.appendChild(t),e.appendChild(n),r.appendChild(e),r}var mc={};function Db(r){var e=typeof r;return r!=null&&(e=="object"||e=="function")}var N0=Db,wb=typeof vr=="object"&&vr&&vr.Object===Object&&vr,_b=wb,Fb=_b,bb=typeof self=="object"&&self&&self.Object===Object&&self,Rb=Fb||bb||Function("return this")(),L2=Rb,Lb=L2,Ib=function(){return Lb.Date.now()},kb=Ib,Bb=/\s/;function Ob(r){for(var e=r.length;e--&&Bb.test(r.charAt(e)););return e}var Nb=Ob,Pb=Nb,Mb=/^\s+/;function Ub(r){return r&&r.slice(0,Pb(r)+1).replace(Mb,"")}var $b=Ub,zb=L2,Vb=zb.Symbol,I2=Vb,Im=I2,k2=Object.prototype,Gb=k2.hasOwnProperty,Wb=k2.toString,ka=Im?Im.toStringTag:void 0;function Hb(r){var e=Gb.call(r,ka),t=r[ka];try{r[ka]=void 0;var n=!0}catch{}var i=Wb.call(r);return n&&(e?r[ka]=t:delete r[ka]),i}var jb=Hb,Kb=Object.prototype,qb=Kb.toString;function Yb(r){return qb.call(r)}var Xb=Yb,km=I2,Zb=jb,Qb=Xb,Jb="[object Null]",e6="[object Undefined]",Bm=km?km.toStringTag:void 0;function t6(r){return r==null?r===void 0?e6:Jb:Bm&&Bm in Object(r)?Zb(r):Qb(r)}var r6=t6;function n6(r){return r!=null&&typeof r=="object"}var i6=n6,s6=r6,a6=i6,o6="[object Symbol]";function u6(r){return typeof r=="symbol"||a6(r)&&s6(r)==o6}var l6=u6,c6=$b,Om=N0,h6=l6,Nm=0/0,f6=/^[-+]0x[0-9a-f]+$/i,d6=/^0b[01]+$/i,p6=/^0o[0-7]+$/i,g6=parseInt;function m6(r){if(typeof r=="number")return r;if(h6(r))return Nm;if(Om(r)){var e=typeof r.valueOf=="function"?r.valueOf():r;r=Om(e)?e+"":e}if(typeof r!="string")return r===0?r:+r;r=c6(r);var t=d6.test(r);return t||p6.test(r)?g6(r.slice(2),t?2:8):f6.test(r)?Nm:+r}var v6=m6,E6=N0,Nh=kb,Pm=v6,y6="Expected a function",x6=Math.max,A6=Math.min;function C6(r,e,t){var n,i,s,a,o,u,l=0,c=!1,h=!1,f=!0;if(typeof r!="function")throw new TypeError(y6);e=Pm(e)||0,E6(t)&&(c=!!t.leading,h="maxWait"in t,s=h?x6(Pm(t.maxWait)||0,e):s,f="trailing"in t?!!t.trailing:f);function d(T){var S=n,F=i;return n=i=void 0,l=T,a=r.apply(F,S),a}function m(T){return l=T,o=setTimeout(g,e),c?d(T):a}function E(T){var S=T-u,F=T-l,k=e-S;return h?A6(k,s-F):k}function p(T){var S=T-u,F=T-l;return u===void 0||S>=e||S<0||h&&F>=s}function g(){var T=Nh();if(p(T))return v(T);o=setTimeout(g,E(T))}function v(T){return o=void 0,f&&n?d(T):(n=i=void 0,a)}function y(){o!==void 0&&clearTimeout(o),l=0,n=u=i=o=void 0}function C(){return o===void 0?a:v(Nh())}function A(){var T=Nh(),S=p(T);if(n=arguments,i=this,u=T,S){if(o===void 0)return m(u);if(h)return clearTimeout(o),o=setTimeout(g,e),d(u)}return o===void 0&&(o=setTimeout(g,e)),a}return A.cancel=y,A.flush=C,A}var B2=C6,T6=B2,S6=N0,D6="Expected a function";function w6(r,e,t){var n=!0,i=!0;if(typeof r!="function")throw new TypeError(D6);return S6(t)&&(n="leading"in t?!!t.leading:n,i="trailing"in t?!!t.trailing:i),T6(r,e,{leading:n,maxWait:e,trailing:i})}var _6=w6;Object.defineProperty(mc,"__esModule",{value:!0});mc.default=void 0;var _r=xe,F6=b6(_6);function b6(r){return r&&r.__esModule?r:{default:r}}class R6{constructor(e){this.settings=e||{},this.id="epubjs-container-"+(0,_r.uuid)(),this.container=this.create(this.settings),this.settings.hidden&&(this.wrapper=this.wrap(this.container))}create(e){let t=e.height,n=e.width,i=e.overflow||!1,s=e.axis||"vertical",a=e.direction;(0,_r.extend)(this.settings,e),e.height&&(0,_r.isNumber)(e.height)&&(t=e.height+"px"),e.width&&(0,_r.isNumber)(e.width)&&(n=e.width+"px");let o=document.createElement("div");return o.id=this.id,o.classList.add("epub-container"),o.style.wordSpacing="0",o.style.lineHeight="0",o.style.verticalAlign="top",o.style.position="relative",s==="horizontal"&&(o.style.display="flex",o.style.flexDirection="row",o.style.flexWrap="nowrap"),n&&(o.style.width=n),t&&(o.style.height=t),i&&(i==="scroll"&&s==="vertical"?(o.style["overflow-y"]=i,o.style["overflow-x"]="hidden"):i==="scroll"&&s==="horizontal"?(o.style["overflow-y"]="hidden",o.style["overflow-x"]=i):o.style.overflow=i),a&&(o.dir=a,o.style.direction=a),a&&this.settings.fullsize&&(document.body.style.direction=a),o}wrap(e){var t=document.createElement("div");return t.style.visibility="hidden",t.style.overflow="hidden",t.style.width="0",t.style.height="0",t.appendChild(e),t}getElement(e){var t;if((0,_r.isElement)(e)?t=e:typeof e=="string"&&(t=document.getElementById(e)),!t)throw new Error("Not an Element");return t}attachTo(e){var t=this.getElement(e),n;if(!!t)return this.settings.hidden?n=this.wrapper:n=this.container,t.appendChild(n),this.element=t,t}getContainer(){return this.container}onResize(e){(!(0,_r.isNumber)(this.settings.width)||!(0,_r.isNumber)(this.settings.height))&&(this.resizeFunc=(0,F6.default)(e,50),window.addEventListener("resize",this.resizeFunc,!1))}onOrientationChange(e){this.orientationChangeFunc=e,window.addEventListener("orientationchange",this.orientationChangeFunc,!1)}size(e,t){var n;let i=e||this.settings.width,s=t||this.settings.height;e===null?(n=this.element.getBoundingClientRect(),n.width&&(e=Math.floor(n.width),this.container.style.width=e+"px")):(0,_r.isNumber)(e)?this.container.style.width=e+"px":this.container.style.width=e,t===null?(n=n||this.element.getBoundingClientRect(),n.height&&(t=n.height,this.container.style.height=t+"px")):(0,_r.isNumber)(t)?this.container.style.height=t+"px":this.container.style.height=t,(0,_r.isNumber)(e)||(e=this.container.clientWidth),(0,_r.isNumber)(t)||(t=this.container.clientHeight),this.containerStyles=window.getComputedStyle(this.container),this.containerPadding={left:parseFloat(this.containerStyles["padding-left"])||0,right:parseFloat(this.containerStyles["padding-right"])||0,top:parseFloat(this.containerStyles["padding-top"])||0,bottom:parseFloat(this.containerStyles["padding-bottom"])||0};let a=(0,_r.windowBounds)(),o=window.getComputedStyle(document.body),u={left:parseFloat(o["padding-left"])||0,right:parseFloat(o["padding-right"])||0,top:parseFloat(o["padding-top"])||0,bottom:parseFloat(o["padding-bottom"])||0};return i||(e=a.width-u.left-u.right),(this.settings.fullsize&&!s||!s)&&(t=a.height-u.top-u.bottom),{width:e-this.containerPadding.left-this.containerPadding.right,height:t-this.containerPadding.top-this.containerPadding.bottom}}bounds(){let e;return this.container.style.overflow!=="visible"&&(e=this.container&&this.container.getBoundingClientRect()),!e||!e.width||!e.height?(0,_r.windowBounds)():e}getSheet(){var e=document.createElement("style");return e.appendChild(document.createTextNode("")),document.head.appendChild(e),e.sheet}addStyleRules(e,t){var n="#"+this.id+" ",i="";this.sheet||(this.sheet=this.getSheet()),t.forEach(function(s){for(var a in s)s.hasOwnProperty(a)&&(i+=a+":"+s[a]+";")}),this.sheet.insertRule(n+e+" {"+i+"}",0)}axis(e){e==="horizontal"?(this.container.style.display="flex",this.container.style.flexDirection="row",this.container.style.flexWrap="nowrap"):this.container.style.display="block",this.settings.axis=e}direction(e){this.container&&(this.container.dir=e,this.container.style.direction=e),this.settings.fullsize&&(document.body.style.direction=e),this.settings.dir=e}overflow(e){this.container&&(e==="scroll"&&this.settings.axis==="vertical"?(this.container.style["overflow-y"]=e,this.container.style["overflow-x"]="hidden"):e==="scroll"&&this.settings.axis==="horizontal"?(this.container.style["overflow-y"]="hidden",this.container.style["overflow-x"]=e):this.container.style.overflow=e),this.settings.overflow=e}destroy(){this.element&&(this.settings.hidden?this.wrapper:this.container,this.element.contains(this.container)&&this.element.removeChild(this.container),window.removeEventListener("resize",this.resizeFunc),window.removeEventListener("orientationChange",this.orientationChangeFunc))}}var L6=R6;mc.default=L6;var vc={};Object.defineProperty(vc,"__esModule",{value:!0});vc.default=void 0;class I6{constructor(e){this.container=e,this._views=[],this.length=0,this.hidden=!1}all(){return this._views}first(){return this._views[0]}last(){return this._views[this._views.length-1]}indexOf(e){return this._views.indexOf(e)}slice(){return this._views.slice.apply(this._views,arguments)}get(e){return this._views[e]}append(e){return this._views.push(e),this.container&&this.container.appendChild(e.element),this.length++,e}prepend(e){return this._views.unshift(e),this.container&&this.container.insertBefore(e.element,this.container.firstChild),this.length++,e}insert(e,t){return this._views.splice(t,0,e),this.container&&(t<this.container.children.length?this.container.insertBefore(e.element,this.container.children[t]):this.container.appendChild(e.element)),this.length++,e}remove(e){var t=this._views.indexOf(e);t>-1&&this._views.splice(t,1),this.destroy(e),this.length--}destroy(e){e.displayed&&e.destroy(),this.container&&this.container.removeChild(e.element),e=null}forEach(){return this._views.forEach.apply(this._views,arguments)}clear(){var e,t=this.length;if(!!this.length){for(var n=0;n<t;n++)e=this._views[n],this.destroy(e);this._views=[],this.length=0}}find(e){for(var t,n=this.length,i=0;i<n;i++)if(t=this._views[i],t.displayed&&t.section.index==e.index)return t}displayed(){for(var e=[],t,n=this.length,i=0;i<n;i++)t=this._views[i],t.displayed&&e.push(t);return e}show(){for(var e,t=this.length,n=0;n<t;n++)e=this._views[n],e.displayed&&e.show();this.hidden=!1}hide(){for(var e,t=this.length,n=0;n<t;n++)e=this._views[n],e.displayed&&e.hide();this.hidden=!0}}var k6=I6;vc.default=k6;Object.defineProperty(ga,"__esModule",{value:!0});ga.default=void 0;var B6=ma(Yr.exports),Fs=xe,O6=ma(gc),Mm=ma(zo),N6=ma(bi),P6=ma(mc),M6=ma(vc),Fr=kt;function ma(r){return r&&r.__esModule?r:{default:r}}class O2{constructor(e){this.name="default",this.optsSettings=e.settings,this.View=e.view,this.request=e.request,this.renditionQueue=e.queue,this.q=new N6.default(this),this.settings=(0,Fs.extend)(this.settings||{},{infinite:!0,hidden:!1,width:void 0,height:void 0,axis:void 0,writingMode:void 0,flow:"scrolled",ignoreClass:"",fullsize:void 0,allowScriptedContent:!1,allowPopups:!1}),(0,Fs.extend)(this.settings,e.settings||{}),this.viewSettings={ignoreClass:this.settings.ignoreClass,axis:this.settings.axis,flow:this.settings.flow,layout:this.layout,method:this.settings.method,width:0,height:0,forceEvenPages:!0,allowScriptedContent:this.settings.allowScriptedContent,allowPopups:this.settings.allowPopups},this.rendered=!1}render(e,t){let n=e.tagName;typeof this.settings.fullsize>"u"&&n&&(n.toLowerCase()=="body"||n.toLowerCase()=="html")&&(this.settings.fullsize=!0),this.settings.fullsize&&(this.settings.overflow="visible",this.overflow=this.settings.overflow),this.settings.size=t,this.settings.rtlScrollType=(0,O6.default)(),this.stage=new P6.default({width:t.width,height:t.height,overflow:this.overflow,hidden:this.settings.hidden,axis:this.settings.axis,fullsize:this.settings.fullsize,direction:this.settings.direction}),this.stage.attachTo(e),this.container=this.stage.getContainer(),this.views=new M6.default(this.container),this._bounds=this.bounds(),this._stageSize=this.stage.size(),this.viewSettings.width=this._stageSize.width,this.viewSettings.height=this._stageSize.height,this.stage.onResize(this.onResized.bind(this)),this.stage.onOrientationChange(this.onOrientationChange.bind(this)),this.addEventListeners(),this.layout&&this.updateLayout(),this.rendered=!0}addEventListeners(){var e;window.addEventListener("unload",function(t){this.destroy()}.bind(this)),this.settings.fullsize?e=window:e=this.container,this._onScroll=this.onScroll.bind(this),e.addEventListener("scroll",this._onScroll)}removeEventListeners(){var e;this.settings.fullsize?e=window:e=this.container,e.removeEventListener("scroll",this._onScroll),this._onScroll=void 0}destroy(){clearTimeout(this.orientationTimeout),clearTimeout(this.resizeTimeout),clearTimeout(this.afterScrolled),this.clear(),this.removeEventListeners(),this.stage.destroy(),this.rendered=!1}onOrientationChange(e){let{orientation:t}=window;this.optsSettings.resizeOnOrientationChange&&this.resize(),clearTimeout(this.orientationTimeout),this.orientationTimeout=setTimeout(function(){this.orientationTimeout=void 0,this.optsSettings.resizeOnOrientationChange&&this.resize(),this.emit(Fr.EVENTS.MANAGERS.ORIENTATION_CHANGE,t)}.bind(this),500)}onResized(e){this.resize()}resize(e,t,n){let i=this.stage.size(e,t);if(this.winBounds=(0,Fs.windowBounds)(),this.orientationTimeout&&this.winBounds.width===this.winBounds.height){this._stageSize=void 0;return}this._stageSize&&this._stageSize.width===i.width&&this._stageSize.height===i.height||(this._stageSize=i,this._bounds=this.bounds(),this.clear(),this.viewSettings.width=this._stageSize.width,this.viewSettings.height=this._stageSize.height,this.updateLayout(),this.emit(Fr.EVENTS.MANAGERS.RESIZED,{width:this._stageSize.width,height:this._stageSize.height},n))}createView(e,t){return new this.View(e,(0,Fs.extend)(this.viewSettings,{forceRight:t}))}handleNextPrePaginated(e,t,n){let i;if(this.layout.name==="pre-paginated"&&this.layout.divisor>1){if(e||t.index===0)return;if(i=t.next(),i&&!i.properties.includes("page-spread-left"))return n.call(this,i)}}display(e,t){var n=new Fs.defer,i=n.promise;(t===e.href||(0,Fs.isNumber)(t))&&(t=void 0);var s=this.views.find(e);if(s&&e&&this.layout.name!=="pre-paginated"){let o=s.offset();if(this.settings.direction==="ltr")this.scrollTo(o.left,o.top,!0);else{let u=s.width();this.scrollTo(o.left+u,o.top,!0)}if(t){let u=s.locationOf(t),l=s.width();this.moveTo(u,l)}return n.resolve(),i}this.clear();let a=!1;return this.layout.name==="pre-paginated"&&this.layout.divisor===2&&e.properties.includes("page-spread-right")&&(a=!0),this.add(e,a).then(function(o){if(t){let u=o.locationOf(t),l=o.width();this.moveTo(u,l)}}.bind(this),o=>{n.reject(o)}).then(function(){return this.handleNextPrePaginated(a,e,this.add)}.bind(this)).then(function(){this.views.show(),n.resolve()}.bind(this)),i}afterDisplayed(e){this.emit(Fr.EVENTS.MANAGERS.ADDED,e)}afterResized(e){this.emit(Fr.EVENTS.MANAGERS.RESIZE,e.section)}moveTo(e,t){var n=0,i=0;this.isPaginated?(n=Math.floor(e.left/this.layout.delta)*this.layout.delta,n+this.layout.delta>this.container.scrollWidth&&(n=this.container.scrollWidth-this.layout.delta),i=Math.floor(e.top/this.layout.delta)*this.layout.delta,i+this.layout.delta>this.container.scrollHeight&&(i=this.container.scrollHeight-this.layout.delta)):i=e.top,this.settings.direction==="rtl"&&(n=n+this.layout.delta,n=n-t),this.scrollTo(n,i,!0)}add(e,t){var n=this.createView(e,t);return this.views.append(n),n.onDisplayed=this.afterDisplayed.bind(this),n.onResize=this.afterResized.bind(this),n.on(Fr.EVENTS.VIEWS.AXIS,i=>{this.updateAxis(i)}),n.on(Fr.EVENTS.VIEWS.WRITING_MODE,i=>{this.updateWritingMode(i)}),n.display(this.request)}append(e,t){var n=this.createView(e,t);return this.views.append(n),n.onDisplayed=this.afterDisplayed.bind(this),n.onResize=this.afterResized.bind(this),n.on(Fr.EVENTS.VIEWS.AXIS,i=>{this.updateAxis(i)}),n.on(Fr.EVENTS.VIEWS.WRITING_MODE,i=>{this.updateWritingMode(i)}),n.display(this.request)}prepend(e,t){var n=this.createView(e,t);return n.on(Fr.EVENTS.VIEWS.RESIZED,i=>{this.counter(i)}),this.views.prepend(n),n.onDisplayed=this.afterDisplayed.bind(this),n.onResize=this.afterResized.bind(this),n.on(Fr.EVENTS.VIEWS.AXIS,i=>{this.updateAxis(i)}),n.on(Fr.EVENTS.VIEWS.WRITING_MODE,i=>{this.updateWritingMode(i)}),n.display(this.request)}counter(e){this.settings.axis==="vertical"?this.scrollBy(0,e.heightDelta,!0):this.scrollBy(e.widthDelta,0,!0)}next(){var e,t;let n=this.settings.direction;if(!!this.views.length&&(this.isPaginated&&this.settings.axis==="horizontal"&&(!n||n==="ltr")?(this.scrollLeft=this.container.scrollLeft,t=this.container.scrollLeft+this.container.offsetWidth+this.layout.delta,t<=this.container.scrollWidth?this.scrollBy(this.layout.delta,0,!0):e=this.views.last().section.next()):this.isPaginated&&this.settings.axis==="horizontal"&&n==="rtl"?(this.scrollLeft=this.container.scrollLeft,this.settings.rtlScrollType==="default"?(t=this.container.scrollLeft,t>0?this.scrollBy(this.layout.delta,0,!0):e=this.views.last().section.next()):(t=this.container.scrollLeft+this.layout.delta*-1,t>this.container.scrollWidth*-1?this.scrollBy(this.layout.delta,0,!0):e=this.views.last().section.next())):this.isPaginated&&this.settings.axis==="vertical"?(this.scrollTop=this.container.scrollTop,this.container.scrollTop+this.container.offsetHeight<this.container.scrollHeight?this.scrollBy(0,this.layout.height,!0):e=this.views.last().section.next()):e=this.views.last().section.next(),e)){this.clear(),this.updateLayout();let i=!1;return this.layout.name==="pre-paginated"&&this.layout.divisor===2&&e.properties.includes("page-spread-right")&&(i=!0),this.append(e,i).then(function(){return this.handleNextPrePaginated(i,e,this.append)}.bind(this),s=>s).then(function(){!this.isPaginated&&this.settings.axis==="horizontal"&&this.settings.direction==="rtl"&&this.settings.rtlScrollType==="default"&&this.scrollTo(this.container.scrollWidth,0,!0),this.views.show()}.bind(this))}}prev(){var e,t;let n=this.settings.direction;if(!!this.views.length&&(this.isPaginated&&this.settings.axis==="horizontal"&&(!n||n==="ltr")?(this.scrollLeft=this.container.scrollLeft,t=this.container.scrollLeft,t>0?this.scrollBy(-this.layout.delta,0,!0):e=this.views.first().section.prev()):this.isPaginated&&this.settings.axis==="horizontal"&&n==="rtl"?(this.scrollLeft=this.container.scrollLeft,this.settings.rtlScrollType==="default"?(t=this.container.scrollLeft+this.container.offsetWidth,t<this.container.scrollWidth?this.scrollBy(-this.layout.delta,0,!0):e=this.views.first().section.prev()):(t=this.container.scrollLeft,t<0?this.scrollBy(-this.layout.delta,0,!0):e=this.views.first().section.prev())):this.isPaginated&&this.settings.axis==="vertical"?(this.scrollTop=this.container.scrollTop,this.container.scrollTop>0?this.scrollBy(0,-this.layout.height,!0):e=this.views.first().section.prev()):e=this.views.first().section.prev(),e)){this.clear(),this.updateLayout();let i=!1;return this.layout.name==="pre-paginated"&&this.layout.divisor===2&&typeof e.prev()!="object"&&(i=!0),this.prepend(e,i).then(function(){var s;if(this.layout.name==="pre-paginated"&&this.layout.divisor>1&&(s=e.prev(),s))return this.prepend(s)}.bind(this),s=>s).then(function(){this.isPaginated&&this.settings.axis==="horizontal"&&(this.settings.direction==="rtl"?this.settings.rtlScrollType==="default"?this.scrollTo(0,0,!0):this.scrollTo(this.container.scrollWidth*-1+this.layout.delta,0,!0):this.scrollTo(this.container.scrollWidth-this.layout.delta,0,!0)),this.views.show()}.bind(this))}}current(){var e=this.visible();return e.length?e[e.length-1]:null}clear(){this.views&&(this.views.hide(),this.scrollTo(0,0,!0),this.views.clear())}currentLocation(){return this.updateLayout(),this.isPaginated&&this.settings.axis==="horizontal"?this.location=this.paginatedLocation():this.location=this.scrolledLocation(),this.location}scrolledLocation(){let e=this.visible(),t=this.container.getBoundingClientRect(),n=t.height<window.innerHeight?t.height:window.innerHeight,i=t.width<window.innerWidth?t.width:window.innerWidth,s=this.settings.axis==="vertical";this.settings.direction;let a=0,o=0;return this.settings.fullsize&&(a=s?window.scrollY:window.scrollX),e.map(l=>{let{index:c,href:h}=l.section,f=l.position(),d=l.width(),m=l.height(),E,p,g,v;s?(E=a+t.top-f.top+o,p=E+n-o,v=this.layout.count(m,n).pages,g=n):(E=a+t.left-f.left+o,p=E+i-o,v=this.layout.count(d,i).pages,g=i);let y=Math.ceil(E/g),C=[],A=Math.ceil(p/g);if(this.settings.direction==="rtl"&&!s){let F=y;y=v-A,A=v-F}C=[];for(var T=y;T<=A;T++){let F=T+1;C.push(F)}let S=this.mapping.page(l.contents,l.section.cfiBase,E,p);return{index:c,href:h,pages:C,totalPages:v,mapping:S}})}paginatedLocation(){let e=this.visible(),t=this.container.getBoundingClientRect(),n=0,i=0;return this.settings.fullsize&&(n=window.scrollX),e.map(a=>{let{index:o,href:u}=a.section,l,c=a.position(),h=a.width(),f,d,m;this.settings.direction==="rtl"?(l=t.right-n,m=Math.min(Math.abs(l-c.left),this.layout.width)-i,d=c.width-(c.right-l)-i,f=d-m):(l=t.left+n,m=Math.min(c.right-l,this.layout.width)-i,f=l-c.left+i,d=f+m),i+=m;let E=this.mapping.page(a.contents,a.section.cfiBase,f,d),p=this.layout.count(h).pages,g=Math.floor(f/this.layout.pageWidth),v=[],y=Math.floor(d/this.layout.pageWidth);if(g<0&&(g=0,y=y+1),this.settings.direction==="rtl"){let A=g;g=p-y,y=p-A}for(var C=g+1;C<=y;C++){let A=C;v.push(A)}return{index:o,href:u,pages:v,totalPages:p,mapping:E}})}isVisible(e,t,n,i){var s=e.position(),a=i||this.bounds();return this.settings.axis==="horizontal"&&s.right>a.left-t&&s.left<a.right+n?!0:this.settings.axis==="vertical"&&s.bottom>a.top-t&&s.top<a.bottom+n}visible(){for(var e=this.bounds(),t=this.views.displayed(),n=t.length,i=[],s,a,o=0;o<n;o++)a=t[o],s=this.isVisible(a,0,0,e),s===!0&&i.push(a);return i}scrollBy(e,t,n){let i=this.settings.direction==="rtl"?-1:1;n&&(this.ignore=!0),this.settings.fullsize?window.scrollBy(e*i,t*i):(e&&(this.container.scrollLeft+=e*i),t&&(this.container.scrollTop+=t)),this.scrolled=!0}scrollTo(e,t,n){n&&(this.ignore=!0),this.settings.fullsize?window.scrollTo(e,t):(this.container.scrollLeft=e,this.container.scrollTop=t),this.scrolled=!0}onScroll(){let e,t;this.settings.fullsize?(e=window.scrollY,t=window.scrollX):(e=this.container.scrollTop,t=this.container.scrollLeft),this.scrollTop=e,this.scrollLeft=t,this.ignore?this.ignore=!1:(this.emit(Fr.EVENTS.MANAGERS.SCROLL,{top:e,left:t}),clearTimeout(this.afterScrolled),this.afterScrolled=setTimeout(function(){this.emit(Fr.EVENTS.MANAGERS.SCROLLED,{top:this.scrollTop,left:this.scrollLeft})}.bind(this),20))}bounds(){var e;return e=this.stage.bounds(),e}applyLayout(e){this.layout=e,this.updateLayout(),this.views&&this.views.length>0&&this.layout.name==="pre-paginated"&&this.display(this.views.first().section)}updateLayout(){!this.stage||(this._stageSize=this.stage.size(),this.isPaginated?(this.layout.calculate(this._stageSize.width,this._stageSize.height,this.settings.gap),this.settings.offset=this.layout.delta/this.layout.divisor):this.layout.calculate(this._stageSize.width,this._stageSize.height),this.viewSettings.width=this.layout.width,this.viewSettings.height=this.layout.height,this.setLayout(this.layout))}setLayout(e){this.viewSettings.layout=e,this.mapping=new Mm.default(e.props,this.settings.direction,this.settings.axis),this.views&&this.views.forEach(function(t){t&&t.setLayout(e)})}updateWritingMode(e){this.writingMode=e}updateAxis(e,t){!t&&e===this.settings.axis||(this.settings.axis=e,this.stage&&this.stage.axis(e),this.viewSettings.axis=e,this.mapping&&(this.mapping=new Mm.default(this.layout.props,this.settings.direction,this.settings.axis)),this.layout&&(e==="vertical"?this.layout.spread("none"):this.layout.spread(this.layout.settings.spread)))}updateFlow(e,t="auto"){let n=e==="paginated"||e==="auto";this.isPaginated=n,e==="scrolled-doc"||e==="scrolled-continuous"||e==="scrolled"?this.updateAxis("vertical"):this.updateAxis("horizontal"),this.viewSettings.flow=e,this.settings.overflow?this.overflow=this.settings.overflow:this.overflow=n?"hidden":t,this.stage&&this.stage.overflow(this.overflow),this.updateLayout()}getContents(){var e=[];return this.views&&this.views.forEach(function(t){const n=t&&t.contents;n&&e.push(n)}),e}direction(e="ltr"){this.settings.direction=e,this.stage&&this.stage.direction(e),this.viewSettings.direction=e,this.updateLayout()}isRendered(){return this.rendered}}(0,B6.default)(O2.prototype);var U6=O2;ga.default=U6;var Wo={},Ec={};Object.defineProperty(Ec,"__esModule",{value:!0});Ec.default=void 0;var Um=xe,$m=kt,$6=z6(Yr.exports);function z6(r){return r&&r.__esModule?r:{default:r}}const V6=Math.PI/2,G6={easeOutSine:function(r){return Math.sin(r*V6)},easeInOutSine:function(r){return-.5*(Math.cos(Math.PI*r)-1)},easeInOutQuint:function(r){return(r/=.5)<1?.5*Math.pow(r,5):.5*(Math.pow(r-2,5)+2)},easeInCubic:function(r){return Math.pow(r,3)}};class N2{constructor(e,t){this.settings=(0,Um.extend)({duration:80,minVelocity:.2,minDistance:10,easing:G6.easeInCubic},t||{}),this.supportsTouch=this.supportsTouch(),this.supportsTouch&&this.setup(e)}setup(e){this.manager=e,this.layout=this.manager.layout,this.fullsize=this.manager.settings.fullsize,this.fullsize?(this.element=this.manager.stage.element,this.scroller=window,this.disableScroll()):(this.element=this.manager.stage.container,this.scroller=this.element,this.element.style.WebkitOverflowScrolling="touch"),this.manager.settings.offset=this.layout.width,this.manager.settings.afterScrolledTimeout=this.settings.duration*2,this.isVertical=this.manager.settings.axis==="vertical",!(!this.manager.isPaginated||this.isVertical)&&(this.touchCanceler=!1,this.resizeCanceler=!1,this.snapping=!1,this.scrollLeft,this.scrollTop,this.startTouchX=void 0,this.startTouchY=void 0,this.startTime=void 0,this.endTouchX=void 0,this.endTouchY=void 0,this.endTime=void 0,this.addListeners())}supportsTouch(){return!!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)}disableScroll(){this.element.style.overflow="hidden"}enableScroll(){this.element.style.overflow=""}addListeners(){this._onResize=this.onResize.bind(this),window.addEventListener("resize",this._onResize),this._onScroll=this.onScroll.bind(this),this.scroller.addEventListener("scroll",this._onScroll),this._onTouchStart=this.onTouchStart.bind(this),this.scroller.addEventListener("touchstart",this._onTouchStart,{passive:!0}),this.on("touchstart",this._onTouchStart),this._onTouchMove=this.onTouchMove.bind(this),this.scroller.addEventListener("touchmove",this._onTouchMove,{passive:!0}),this.on("touchmove",this._onTouchMove),this._onTouchEnd=this.onTouchEnd.bind(this),this.scroller.addEventListener("touchend",this._onTouchEnd,{passive:!0}),this.on("touchend",this._onTouchEnd),this._afterDisplayed=this.afterDisplayed.bind(this),this.manager.on($m.EVENTS.MANAGERS.ADDED,this._afterDisplayed)}removeListeners(){window.removeEventListener("resize",this._onResize),this._onResize=void 0,this.scroller.removeEventListener("scroll",this._onScroll),this._onScroll=void 0,this.scroller.removeEventListener("touchstart",this._onTouchStart,{passive:!0}),this.off("touchstart",this._onTouchStart),this._onTouchStart=void 0,this.scroller.removeEventListener("touchmove",this._onTouchMove,{passive:!0}),this.off("touchmove",this._onTouchMove),this._onTouchMove=void 0,this.scroller.removeEventListener("touchend",this._onTouchEnd,{passive:!0}),this.off("touchend",this._onTouchEnd),this._onTouchEnd=void 0,this.manager.off($m.EVENTS.MANAGERS.ADDED,this._afterDisplayed),this._afterDisplayed=void 0}afterDisplayed(e){let t=e.contents;["touchstart","touchmove","touchend"].forEach(n=>{t.on(n,i=>this.triggerViewEvent(i,t))})}triggerViewEvent(e,t){this.emit(e.type,e,t)}onScroll(e){this.scrollLeft=this.fullsize?window.scrollX:this.scroller.scrollLeft,this.scrollTop=this.fullsize?window.scrollY:this.scroller.scrollTop}onResize(e){this.resizeCanceler=!0}onTouchStart(e){let{screenX:t,screenY:n}=e.touches[0];this.fullsize&&this.enableScroll(),this.touchCanceler=!0,this.startTouchX||(this.startTouchX=t,this.startTouchY=n,this.startTime=this.now()),this.endTouchX=t,this.endTouchY=n,this.endTime=this.now()}onTouchMove(e){let{screenX:t,screenY:n}=e.touches[0],i=Math.abs(n-this.endTouchY);this.touchCanceler=!0,!this.fullsize&&i<10&&(this.element.scrollLeft-=t-this.endTouchX),this.endTouchX=t,this.endTouchY=n,this.endTime=this.now()}onTouchEnd(e){this.fullsize&&this.disableScroll(),this.touchCanceler=!1;let t=this.wasSwiped();t!==0?this.snap(t):this.snap(),this.startTouchX=void 0,this.startTouchY=void 0,this.startTime=void 0,this.endTouchX=void 0,this.endTouchY=void 0,this.endTime=void 0}wasSwiped(){let e=this.layout.pageWidth*this.layout.divisor,t=this.endTouchX-this.startTouchX,n=Math.abs(t),i=this.endTime-this.startTime,s=t/i,a=this.settings.minVelocity;if(n<=this.settings.minDistance||n>=e)return 0;if(s>a)return-1;if(s<-a)return 1}needsSnap(){let e=this.scrollLeft,t=this.layout.pageWidth*this.layout.divisor;return e%t!==0}snap(e=0){let t=this.scrollLeft,n=this.layout.pageWidth*this.layout.divisor,i=Math.round(t/n)*n;return e&&(i+=e*n),this.smoothScrollTo(i)}smoothScrollTo(e){const t=new Um.defer,n=this.scrollLeft,i=this.now(),s=this.settings.duration,a=this.settings.easing;this.snapping=!0;function o(){const u=this.now(),l=Math.min(1,(u-i)/s);if(a(l),this.touchCanceler||this.resizeCanceler){this.resizeCanceler=!1,this.snapping=!1,t.resolve();return}l<1?(window.requestAnimationFrame(o.bind(this)),this.scrollTo(n+(e-n)*l,0)):(this.scrollTo(e,0),this.snapping=!1,t.resolve())}return o.call(this),t.promise}scrollTo(e=0,t=0){this.fullsize?window.scroll(e,t):(this.scroller.scrollLeft=e,this.scroller.scrollTop=t)}now(){return"now"in window.performance?performance.now():new Date().getTime()}destroy(){!this.scroller||(this.fullsize&&this.enableScroll(),this.removeListeners(),this.scroller=void 0)}}(0,$6.default)(N2.prototype);var W6=N2;Ec.default=W6;Object.defineProperty(Wo,"__esModule",{value:!0});Wo.default=void 0;var Ni=xe,zm=P0(ga),Vm=P0(Ec),zr=kt,H6=P0(B2);function P0(r){return r&&r.__esModule?r:{default:r}}class j6 extends zm.default{constructor(e){super(e),this.name="continuous",this.settings=(0,Ni.extend)(this.settings||{},{infinite:!0,overflow:void 0,axis:void 0,writingMode:void 0,flow:"scrolled",offset:500,offsetDelta:250,width:void 0,height:void 0,snap:!1,afterScrolledTimeout:10,allowScriptedContent:!1,allowPopups:!1}),(0,Ni.extend)(this.settings,e.settings||{}),e.settings.gap!="undefined"&&e.settings.gap===0&&(this.settings.gap=e.settings.gap),this.viewSettings={ignoreClass:this.settings.ignoreClass,axis:this.settings.axis,flow:this.settings.flow,layout:this.layout,width:0,height:0,forceEvenPages:!1,allowScriptedContent:this.settings.allowScriptedContent,allowPopups:this.settings.allowPopups},this.scrollTop=0,this.scrollLeft=0}display(e,t){return zm.default.prototype.display.call(this,e,t).then(function(){return this.fill()}.bind(this))}fill(e){var t=e||new Ni.defer;return this.q.enqueue(()=>this.check()).then(n=>{n?this.fill(t):t.resolve()}),t.promise}moveTo(e){var t=0,n=0;this.isPaginated?(t=Math.floor(e.left/this.layout.delta)*this.layout.delta,t+this.settings.offsetDelta):(n=e.top,e.top+this.settings.offsetDelta),(t>0||n>0)&&this.scrollBy(t,n,!0)}afterResized(e){this.emit(zr.EVENTS.MANAGERS.RESIZE,e.section)}removeShownListeners(e){e.onDisplayed=function(){}}add(e){var t=this.createView(e);return this.views.append(t),t.on(zr.EVENTS.VIEWS.RESIZED,n=>{t.expanded=!0}),t.on(zr.EVENTS.VIEWS.AXIS,n=>{this.updateAxis(n)}),t.on(zr.EVENTS.VIEWS.WRITING_MODE,n=>{this.updateWritingMode(n)}),t.onDisplayed=this.afterDisplayed.bind(this),t.onResize=this.afterResized.bind(this),t.display(this.request)}append(e){var t=this.createView(e);return t.on(zr.EVENTS.VIEWS.RESIZED,n=>{t.expanded=!0}),t.on(zr.EVENTS.VIEWS.AXIS,n=>{this.updateAxis(n)}),t.on(zr.EVENTS.VIEWS.WRITING_MODE,n=>{this.updateWritingMode(n)}),this.views.append(t),t.onDisplayed=this.afterDisplayed.bind(this),t}prepend(e){var t=this.createView(e);return t.on(zr.EVENTS.VIEWS.RESIZED,n=>{this.counter(n),t.expanded=!0}),t.on(zr.EVENTS.VIEWS.AXIS,n=>{this.updateAxis(n)}),t.on(zr.EVENTS.VIEWS.WRITING_MODE,n=>{this.updateWritingMode(n)}),this.views.prepend(t),t.onDisplayed=this.afterDisplayed.bind(this),t}counter(e){this.settings.axis==="vertical"?this.scrollBy(0,e.heightDelta,!0):this.scrollBy(e.widthDelta,0,!0)}update(e){for(var t=this.bounds(),n=this.views.all(),i=n.length,s=typeof e<"u"?e:this.settings.offset||0,a,o,u=new Ni.defer,l=[],c=0;c<i;c++)if(o=n[c],a=this.isVisible(o,s,s,t),a===!0)if(o.displayed)o.show();else{let h=o.display(this.request).then(function(f){f.show()},f=>{o.hide()});l.push(h)}else this.q.enqueue(o.destroy.bind(o)),clearTimeout(this.trimTimeout),this.trimTimeout=setTimeout(function(){this.q.enqueue(this.trim.bind(this))}.bind(this),250);return l.length?Promise.all(l).catch(h=>{u.reject(h)}):(u.resolve(),u.promise)}check(e,t){var n=new Ni.defer,i=[],s=this.settings.axis==="horizontal",a=this.settings.offset||0;e&&s&&(a=e),t&&!s&&(a=t);var o=this._bounds;let u=s?this.scrollLeft:this.scrollTop,l=s?Math.floor(o.width):o.height,c=s?this.container.scrollWidth:this.container.scrollHeight,h=this.writingMode&&this.writingMode.indexOf("vertical")===0?"vertical":"horizontal",f=this.settings.rtlScrollType,d=this.settings.direction==="rtl";this.settings.fullsize?(s&&d&&f==="negative"||!s&&d&&f==="default")&&(u=u*-1):(d&&f==="default"&&h==="horizontal"&&(u=c-l-u),d&&f==="negative"&&h==="horizontal"&&(u=u*-1));let m=()=>{let y=this.views.first(),C=y&&y.section.prev();C&&i.push(this.prepend(C))},E=()=>{let y=this.views.last(),C=y&&y.section.next();C&&i.push(this.append(C))},p=u+l+a,g=u-a;p>=c&&E(),g<0&&m();let v=i.map(y=>y.display(this.request));return i.length?Promise.all(v).then(()=>this.check()).then(()=>this.update(a),y=>y):(this.q.enqueue(function(){this.update()}.bind(this)),n.resolve(!1),n.promise)}trim(){for(var e=new Ni.defer,t=this.views.displayed(),n=t[0],i=t[t.length-1],s=this.views.indexOf(n),a=this.views.indexOf(i),o=this.views.slice(0,s),u=this.views.slice(a+1),l=0;l<o.length-1;l++)this.erase(o[l],o);for(var c=1;c<u.length;c++)this.erase(u[c]);return e.resolve(),e.promise}erase(e,t){var n,i;this.settings.fullsize?(n=window.scrollY,i=window.scrollX):(n=this.container.scrollTop,i=this.container.scrollLeft);var s=e.bounds();this.views.remove(e),t&&(this.settings.axis==="vertical"?this.scrollTo(0,n-s.height,!0):this.settings.direction==="rtl"?this.settings.fullsize?this.scrollTo(i+Math.floor(s.width),0,!0):this.scrollTo(i,0,!0):this.scrollTo(i-Math.floor(s.width),0,!0))}addEventListeners(e){window.addEventListener("unload",function(t){this.ignore=!0,this.destroy()}.bind(this)),this.addScrollListeners(),this.isPaginated&&this.settings.snap&&(this.snapper=new Vm.default(this,this.settings.snap&&typeof this.settings.snap=="object"&&this.settings.snap))}addScrollListeners(){var e;this.tick=Ni.requestAnimationFrame;let t=this.settings.direction==="rtl"&&this.settings.rtlScrollType==="default"?-1:1;this.scrollDeltaVert=0,this.scrollDeltaHorz=0,this.settings.fullsize?(e=window,this.scrollTop=window.scrollY*t,this.scrollLeft=window.scrollX*t):(e=this.container,this.scrollTop=this.container.scrollTop,this.scrollLeft=this.container.scrollLeft),this._onScroll=this.onScroll.bind(this),e.addEventListener("scroll",this._onScroll),this._scrolled=(0,H6.default)(this.scrolled.bind(this),30),this.didScroll=!1}removeEventListeners(){var e;this.settings.fullsize?e=window:e=this.container,e.removeEventListener("scroll",this._onScroll),this._onScroll=void 0}onScroll(){let e,t,n=this.settings.direction==="rtl"&&this.settings.rtlScrollType==="default"?-1:1;this.settings.fullsize?(e=window.scrollY*n,t=window.scrollX*n):(e=this.container.scrollTop,t=this.container.scrollLeft),this.scrollTop=e,this.scrollLeft=t,this.ignore?this.ignore=!1:this._scrolled(),this.scrollDeltaVert+=Math.abs(e-this.prevScrollTop),this.scrollDeltaHorz+=Math.abs(t-this.prevScrollLeft),this.prevScrollTop=e,this.prevScrollLeft=t,clearTimeout(this.scrollTimeout),this.scrollTimeout=setTimeout(function(){this.scrollDeltaVert=0,this.scrollDeltaHorz=0}.bind(this),150),clearTimeout(this.afterScrolled),this.didScroll=!1}scrolled(){this.q.enqueue(function(){return this.check()}.bind(this)),this.emit(zr.EVENTS.MANAGERS.SCROLL,{top:this.scrollTop,left:this.scrollLeft}),clearTimeout(this.afterScrolled),this.afterScrolled=setTimeout(function(){this.snapper&&this.snapper.supportsTouch&&this.snapper.needsSnap()||this.emit(zr.EVENTS.MANAGERS.SCROLLED,{top:this.scrollTop,left:this.scrollLeft})}.bind(this),this.settings.afterScrolledTimeout)}next(){let e=this.layout.props.name==="pre-paginated"&&this.layout.props.spread?this.layout.props.delta*2:this.layout.props.delta;!this.views.length||(this.isPaginated&&this.settings.axis==="horizontal"?this.scrollBy(e,0,!0):this.scrollBy(0,this.layout.height,!0),this.q.enqueue(function(){return this.check()}.bind(this)))}prev(){let e=this.layout.props.name==="pre-paginated"&&this.layout.props.spread?this.layout.props.delta*2:this.layout.props.delta;!this.views.length||(this.isPaginated&&this.settings.axis==="horizontal"?this.scrollBy(-e,0,!0):this.scrollBy(0,-this.layout.height,!0),this.q.enqueue(function(){return this.check()}.bind(this)))}updateFlow(e){this.rendered&&this.snapper&&(this.snapper.destroy(),this.snapper=void 0),super.updateFlow(e,"scroll"),this.rendered&&this.isPaginated&&this.settings.snap&&(this.snapper=new Vm.default(this,this.settings.snap&&typeof this.settings.snap=="object"&&this.settings.snap))}destroy(){super.destroy(),this.snapper&&this.snapper.destroy()}}var K6=j6;Wo.default=K6;Object.defineProperty(pa,"__esModule",{value:!0});pa.default=void 0;var q6=En(Yr.exports),Ba=xe,Pi=En(fa),Gm=En(ar),Y6=En(bi),X6=En($o),Z6=En(cc);En(cs);var Q6=En(hc),Qe=kt,J6=En(Vo),eR=En(ga),tR=En(Wo);function En(r){return r&&r.__esModule?r:{default:r}}class P2{constructor(e,t){this.settings=(0,Ba.extend)(this.settings||{},{width:null,height:null,ignoreClass:"",manager:"default",view:"iframe",flow:null,layout:null,spread:null,minSpreadWidth:800,stylesheet:null,resizeOnOrientationChange:!0,script:null,snap:!1,defaultDirection:"ltr",allowScriptedContent:!1,allowPopups:!1}),(0,Ba.extend)(this.settings,t),typeof this.settings.manager=="object"&&(this.manager=this.settings.manager),this.book=e,this.hooks={},this.hooks.display=new Pi.default(this),this.hooks.serialize=new Pi.default(this),this.hooks.content=new Pi.default(this),this.hooks.unloaded=new Pi.default(this),this.hooks.layout=new Pi.default(this),this.hooks.render=new Pi.default(this),this.hooks.show=new Pi.default(this),this.hooks.content.register(this.handleLinks.bind(this)),this.hooks.content.register(this.passEvents.bind(this)),this.hooks.content.register(this.adjustImages.bind(this)),this.book.spine.hooks.content.register(this.injectIdentifier.bind(this)),this.settings.stylesheet&&this.book.spine.hooks.content.register(this.injectStylesheet.bind(this)),this.settings.script&&this.book.spine.hooks.content.register(this.injectScript.bind(this)),this.themes=new Z6.default(this),this.annotations=new Q6.default(this),this.epubcfi=new Gm.default,this.q=new Y6.default(this),this.location=void 0,this.q.enqueue(this.book.opened),this.starting=new Ba.defer,this.started=this.starting.promise,this.q.enqueue(this.start)}setManager(e){this.manager=e}requireManager(e){var t;return typeof e=="string"&&e==="default"?t=eR.default:typeof e=="string"&&e==="continuous"?t=tR.default:t=e,t}requireView(e){var t;return typeof e=="string"&&e==="iframe"?t=J6.default:t=e,t}start(){switch(!this.settings.layout&&(this.book.package.metadata.layout==="pre-paginated"||this.book.displayOptions.fixedLayout==="true")&&(this.settings.layout="pre-paginated"),this.book.package.metadata.spread){case"none":this.settings.spread="none";break;case"both":this.settings.spread=!0;break}this.manager||(this.ViewManager=this.requireManager(this.settings.manager),this.View=this.requireView(this.settings.view),this.manager=new this.ViewManager({view:this.View,queue:this.q,request:this.book.load.bind(this.book),settings:this.settings})),this.direction(this.book.package.metadata.direction||this.settings.defaultDirection),this.settings.globalLayoutProperties=this.determineLayoutProperties(this.book.package.metadata),this.flow(this.settings.globalLayoutProperties.flow),this.layout(this.settings.globalLayoutProperties),this.manager.on(Qe.EVENTS.MANAGERS.ADDED,this.afterDisplayed.bind(this)),this.manager.on(Qe.EVENTS.MANAGERS.REMOVED,this.afterRemoved.bind(this)),this.manager.on(Qe.EVENTS.MANAGERS.RESIZED,this.onResized.bind(this)),this.manager.on(Qe.EVENTS.MANAGERS.ORIENTATION_CHANGE,this.onOrientationChange.bind(this)),this.manager.on(Qe.EVENTS.MANAGERS.SCROLLED,this.reportLocation.bind(this)),this.emit(Qe.EVENTS.RENDITION.STARTED),this.starting.resolve()}attachTo(e){return this.q.enqueue(function(){this.manager.render(e,{width:this.settings.width,height:this.settings.height}),this.emit(Qe.EVENTS.RENDITION.ATTACHED)}.bind(this))}display(e){return this.displaying&&this.displaying.resolve(),this.q.enqueue(this._display,e)}_display(e){if(!!this.book){this.epubcfi.isCfiString(e);var t=new Ba.defer,n=t.promise,i;return this.displaying=t,this.book.locations.length()&&(0,Ba.isFloat)(e)&&(e=this.book.locations.cfiFromPercentage(parseFloat(e))),i=this.book.spine.get(e),i?(this.manager.display(i,e).then(()=>{t.resolve(i),this.displaying=void 0,this.emit(Qe.EVENTS.RENDITION.DISPLAYED,i),this.reportLocation()},s=>{this.emit(Qe.EVENTS.RENDITION.DISPLAY_ERROR,s)}),n):(t.reject(new Error("No Section Found")),n)}}afterDisplayed(e){e.on(Qe.EVENTS.VIEWS.MARK_CLICKED,(t,n)=>this.triggerMarkEvent(t,n,e.contents)),this.hooks.render.trigger(e,this).then(()=>{e.contents?this.hooks.content.trigger(e.contents,this).then(()=>{this.emit(Qe.EVENTS.RENDITION.RENDERED,e.section,e)}):this.emit(Qe.EVENTS.RENDITION.RENDERED,e.section,e)})}afterRemoved(e){this.hooks.unloaded.trigger(e,this).then(()=>{this.emit(Qe.EVENTS.RENDITION.REMOVED,e.section,e)})}onResized(e,t){this.emit(Qe.EVENTS.RENDITION.RESIZED,{width:e.width,height:e.height},t),this.location&&this.location.start&&this.display(t||this.location.start.cfi)}onOrientationChange(e){this.emit(Qe.EVENTS.RENDITION.ORIENTATION_CHANGE,e)}moveTo(e){this.manager.moveTo(e)}resize(e,t,n){e&&(this.settings.width=e),t&&(this.settings.height=t),this.manager.resize(e,t,n)}clear(){this.manager.clear()}next(){return this.q.enqueue(this.manager.next.bind(this.manager)).then(this.reportLocation.bind(this))}prev(){return this.q.enqueue(this.manager.prev.bind(this.manager)).then(this.reportLocation.bind(this))}determineLayoutProperties(e){var t,n=this.settings.layout||e.layout||"reflowable",i=this.settings.spread||e.spread||"auto",s=this.settings.orientation||e.orientation||"auto",a=this.settings.flow||e.flow||"auto",o=e.viewport||"",u=this.settings.minSpreadWidth||e.minSpreadWidth||800,l=this.settings.direction||e.direction||"ltr";return(this.settings.width===0||this.settings.width>0)&&(this.settings.height===0||this.settings.height>0),t={layout:n,spread:i,orientation:s,flow:a,viewport:o,minSpreadWidth:u,direction:l},t}flow(e){var t=e;(e==="scrolled"||e==="scrolled-doc"||e==="scrolled-continuous")&&(t="scrolled"),(e==="auto"||e==="paginated")&&(t="paginated"),this.settings.flow=e,this._layout&&this._layout.flow(t),this.manager&&this._layout&&this.manager.applyLayout(this._layout),this.manager&&this.manager.updateFlow(t),this.manager&&this.manager.isRendered()&&this.location&&(this.manager.clear(),this.display(this.location.start.cfi))}layout(e){return e&&(this._layout=new X6.default(e),this._layout.spread(e.spread,this.settings.minSpreadWidth),this._layout.on(Qe.EVENTS.LAYOUT.UPDATED,(t,n)=>{this.emit(Qe.EVENTS.RENDITION.LAYOUT,t,n)})),this.manager&&this._layout&&this.manager.applyLayout(this._layout),this._layout}spread(e,t){this.settings.spread=e,t&&(this.settings.minSpreadWidth=t),this._layout&&this._layout.spread(e,t),this.manager&&this.manager.isRendered()&&this.manager.updateLayout()}direction(e){this.settings.direction=e||"ltr",this.manager&&this.manager.direction(this.settings.direction),this.manager&&this.manager.isRendered()&&this.location&&(this.manager.clear(),this.display(this.location.start.cfi))}reportLocation(){return this.q.enqueue(function(){requestAnimationFrame(function(){var n=this.manager.currentLocation();if(n&&n.then&&typeof n.then=="function")n.then(function(i){let s=this.located(i);!s||!s.start||!s.end||(this.location=s,this.emit(Qe.EVENTS.RENDITION.LOCATION_CHANGED,{index:this.location.start.index,href:this.location.start.href,start:this.location.start.cfi,end:this.location.end.cfi,percentage:this.location.start.percentage}),this.emit(Qe.EVENTS.RENDITION.RELOCATED,this.location))}.bind(this));else if(n){let i=this.located(n);if(!i||!i.start||!i.end)return;this.location=i,this.emit(Qe.EVENTS.RENDITION.LOCATION_CHANGED,{index:this.location.start.index,href:this.location.start.href,start:this.location.start.cfi,end:this.location.end.cfi,percentage:this.location.start.percentage}),this.emit(Qe.EVENTS.RENDITION.RELOCATED,this.location)}}.bind(this))}.bind(this))}currentLocation(){var e=this.manager.currentLocation();if(e&&e.then&&typeof e.then=="function")e.then(function(t){return this.located(t)}.bind(this));else if(e)return this.located(e)}located(e){if(!e.length)return{};let t=e[0],n=e[e.length-1],i={start:{index:t.index,href:t.href,cfi:t.mapping.start,displayed:{page:t.pages[0]||1,total:t.totalPages}},end:{index:n.index,href:n.href,cfi:n.mapping.end,displayed:{page:n.pages[n.pages.length-1]||1,total:n.totalPages}}},s=this.book.locations.locationFromCfi(t.mapping.start),a=this.book.locations.locationFromCfi(n.mapping.end);s!=null&&(i.start.location=s,i.start.percentage=this.book.locations.percentageFromLocation(s)),a!=null&&(i.end.location=a,i.end.percentage=this.book.locations.percentageFromLocation(a));let o=this.book.pageList.pageFromCfi(t.mapping.start),u=this.book.pageList.pageFromCfi(n.mapping.end);return o!=-1&&(i.start.page=o),u!=-1&&(i.end.page=u),n.index===this.book.spine.last().index&&i.end.displayed.page>=i.end.displayed.total&&(i.atEnd=!0),t.index===this.book.spine.first().index&&i.start.displayed.page===1&&(i.atStart=!0),i}destroy(){this.manager&&this.manager.destroy(),this.book=void 0}passEvents(e){Qe.DOM_EVENTS.forEach(t=>{e.on(t,n=>this.triggerViewEvent(n,e))}),e.on(Qe.EVENTS.CONTENTS.SELECTED,t=>this.triggerSelectedEvent(t,e))}triggerViewEvent(e,t){this.emit(e.type,e,t)}triggerSelectedEvent(e,t){this.emit(Qe.EVENTS.RENDITION.SELECTED,e,t)}triggerMarkEvent(e,t,n){this.emit(Qe.EVENTS.RENDITION.MARK_CLICKED,e,t,n)}getRange(e,t){var n=new Gm.default(e),i=this.manager.visible().filter(function(s){if(n.spinePos===s.index)return!0});if(i.length)return i[0].contents.range(n,t)}adjustImages(e){if(this._layout.name==="pre-paginated")return new Promise(function(s){s()});let t=e.window.getComputedStyle(e.content,null),n=(e.content.offsetHeight-(parseFloat(t.paddingTop)+parseFloat(t.paddingBottom)))*.95,i=parseFloat(t.paddingLeft)+parseFloat(t.paddingRight);return e.addStylesheetRules({img:{"max-width":(this._layout.columnWidth?this._layout.columnWidth-i+"px":"100%")+"!important","max-height":n+"px!important","object-fit":"contain","page-break-inside":"avoid","break-inside":"avoid","box-sizing":"border-box"},svg:{"max-width":(this._layout.columnWidth?this._layout.columnWidth-i+"px":"100%")+"!important","max-height":n+"px!important","page-break-inside":"avoid","break-inside":"avoid"}}),new Promise(function(s,a){setTimeout(function(){s()},1)})}getContents(){return this.manager?this.manager.getContents():[]}views(){return(this.manager?this.manager.views:void 0)||[]}handleLinks(e){e&&e.on(Qe.EVENTS.CONTENTS.LINK_CLICKED,t=>{let n=this.book.path.relative(t);this.display(n)})}injectStylesheet(e,t){let n=e.createElement("link");n.setAttribute("type","text/css"),n.setAttribute("rel","stylesheet"),n.setAttribute("href",this.settings.stylesheet),e.getElementsByTagName("head")[0].appendChild(n)}injectScript(e,t){let n=e.createElement("script");n.setAttribute("type","text/javascript"),n.setAttribute("src",this.settings.script),n.textContent=" ",e.getElementsByTagName("head")[0].appendChild(n)}injectIdentifier(e,t){let n=this.book.packaging.metadata.identifier,i=e.createElement("meta");i.setAttribute("name","dc.relation.ispartof"),n&&i.setAttribute("content",n),e.getElementsByTagName("head")[0].appendChild(i)}}(0,q6.default)(P2.prototype);var rR=P2;pa.default=rR;var yc={};function Ei(r){throw new Error('Could not dynamically require "'+r+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var M2={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(r,e){(function(t){r.exports=t()})(function(){return function t(n,i,s){function a(l,c){if(!i[l]){if(!n[l]){var h=typeof Ei=="function"&&Ei;if(!c&&h)return h(l,!0);if(o)return o(l,!0);var f=new Error("Cannot find module '"+l+"'");throw f.code="MODULE_NOT_FOUND",f}var d=i[l]={exports:{}};n[l][0].call(d.exports,function(m){var E=n[l][1][m];return a(E||m)},d,d.exports,t,n,i,s)}return i[l].exports}for(var o=typeof Ei=="function"&&Ei,u=0;u<s.length;u++)a(s[u]);return a}({1:[function(t,n,i){var s=t("./utils"),a=t("./support"),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.encode=function(u){for(var l=[],c,h,f,d,m,E,p,g=0,v=u.length,y=v,C=s.getTypeOf(u)!=="string";g<u.length;)y=v-g,C?(c=u[g++],h=g<v?u[g++]:0,f=g<v?u[g++]:0):(c=u.charCodeAt(g++),h=g<v?u.charCodeAt(g++):0,f=g<v?u.charCodeAt(g++):0),d=c>>2,m=(c&3)<<4|h>>4,E=y>1?(h&15)<<2|f>>6:64,p=y>2?f&63:64,l.push(o.charAt(d)+o.charAt(m)+o.charAt(E)+o.charAt(p));return l.join("")},i.decode=function(u){var l,c,h,f,d,m,E,p=0,g=0,v="data:";if(u.substr(0,v.length)===v)throw new Error("Invalid base64 input, it looks like a data url.");u=u.replace(/[^A-Za-z0-9+/=]/g,"");var y=u.length*3/4;if(u.charAt(u.length-1)===o.charAt(64)&&y--,u.charAt(u.length-2)===o.charAt(64)&&y--,y%1!==0)throw new Error("Invalid base64 input, bad content length.");var C;for(a.uint8array?C=new Uint8Array(y|0):C=new Array(y|0);p<u.length;)f=o.indexOf(u.charAt(p++)),d=o.indexOf(u.charAt(p++)),m=o.indexOf(u.charAt(p++)),E=o.indexOf(u.charAt(p++)),l=f<<2|d>>4,c=(d&15)<<4|m>>2,h=(m&3)<<6|E,C[g++]=l,m!==64&&(C[g++]=c),E!==64&&(C[g++]=h);return C}},{"./support":30,"./utils":32}],2:[function(t,n,i){var s=t("./external"),a=t("./stream/DataWorker"),o=t("./stream/Crc32Probe"),u=t("./stream/DataLengthProbe");function l(c,h,f,d,m){this.compressedSize=c,this.uncompressedSize=h,this.crc32=f,this.compression=d,this.compressedContent=m}l.prototype={getContentWorker:function(){var c=new a(s.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new u("data_length")),h=this;return c.on("end",function(){if(this.streamInfo.data_length!==h.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),c},getCompressedWorker:function(){return new a(s.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},l.createWorkerFrom=function(c,h,f){return c.pipe(new o).pipe(new u("uncompressedSize")).pipe(h.compressWorker(f)).pipe(new u("compressedSize")).withStreamInfo("compression",h)},n.exports=l},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,n,i){var s=t("./stream/GenericWorker");i.STORE={magic:"\0\0",compressWorker:function(){return new s("STORE compression")},uncompressWorker:function(){return new s("STORE decompression")}},i.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,n,i){var s=t("./utils");function a(){for(var c,h=[],f=0;f<256;f++){c=f;for(var d=0;d<8;d++)c=c&1?3988292384^c>>>1:c>>>1;h[f]=c}return h}var o=a();function u(c,h,f,d){var m=o,E=d+f;c=c^-1;for(var p=d;p<E;p++)c=c>>>8^m[(c^h[p])&255];return c^-1}function l(c,h,f,d){var m=o,E=d+f;c=c^-1;for(var p=d;p<E;p++)c=c>>>8^m[(c^h.charCodeAt(p))&255];return c^-1}n.exports=function(h,f){if(typeof h>"u"||!h.length)return 0;var d=s.getTypeOf(h)!=="string";return d?u(f|0,h,h.length,0):l(f|0,h,h.length,0)}},{"./utils":32}],5:[function(t,n,i){i.base64=!1,i.binary=!1,i.dir=!1,i.createFolders=!0,i.date=null,i.compression=null,i.compressionOptions=null,i.comment=null,i.unixPermissions=null,i.dosPermissions=null},{}],6:[function(t,n,i){var s=null;typeof Promise<"u"?s=Promise:s=t("lie"),n.exports={Promise:s}},{lie:37}],7:[function(t,n,i){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",a=t("pako"),o=t("./utils"),u=t("./stream/GenericWorker"),l=s?"uint8array":"array";i.magic="\b\0";function c(h,f){u.call(this,"FlateWorker/"+h),this._pako=null,this._pakoAction=h,this._pakoOptions=f,this.meta={}}o.inherits(c,u),c.prototype.processChunk=function(h){this.meta=h.meta,this._pako===null&&this._createPako(),this._pako.push(o.transformTo(l,h.data),!1)},c.prototype.flush=function(){u.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},c.prototype.cleanUp=function(){u.prototype.cleanUp.call(this),this._pako=null},c.prototype._createPako=function(){this._pako=new a[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var h=this;this._pako.onData=function(f){h.push({data:f,meta:h.meta})}},i.compressWorker=function(h){return new c("Deflate",h)},i.uncompressWorker=function(){return new c("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,n,i){var s=t("../utils"),a=t("../stream/GenericWorker"),o=t("../utf8"),u=t("../crc32"),l=t("../signature"),c=function(g,v){var y="",C;for(C=0;C<v;C++)y+=String.fromCharCode(g&255),g=g>>>8;return y},h=function(g,v){var y=g;return g||(y=v?16893:33204),(y&65535)<<16},f=function(g){return(g||0)&63},d=function(g,v,y,C,A,T){var S=g.file,F=g.compression,k=T!==o.utf8encode,R=s.transformTo("string",T(S.name)),V=s.transformTo("string",o.utf8encode(S.name)),$=S.comment,ne=s.transformTo("string",T($)),ve=s.transformTo("string",o.utf8encode($)),H=V.length!==S.name.length,j=ve.length!==$.length,X,B,U="",Z="",oe="",re=S.dir,ge=S.date,Ce={crc32:0,compressedSize:0,uncompressedSize:0};(!v||y)&&(Ce.crc32=g.crc32,Ce.compressedSize=g.compressedSize,Ce.uncompressedSize=g.uncompressedSize);var ke=0;v&&(ke|=8),!k&&(H||j)&&(ke|=2048);var Ie=0,Oe=0;re&&(Ie|=16),A==="UNIX"?(Oe=798,Ie|=h(S.unixPermissions,re)):(Oe=20,Ie|=f(S.dosPermissions)),X=ge.getUTCHours(),X=X<<6,X=X|ge.getUTCMinutes(),X=X<<5,X=X|ge.getUTCSeconds()/2,B=ge.getUTCFullYear()-1980,B=B<<4,B=B|ge.getUTCMonth()+1,B=B<<5,B=B|ge.getUTCDate(),H&&(Z=c(1,1)+c(u(R),4)+V,U+="up"+c(Z.length,2)+Z),j&&(oe=c(1,1)+c(u(ne),4)+ve,U+="uc"+c(oe.length,2)+oe);var Le="";Le+=`
\0`,Le+=c(ke,2),Le+=F.magic,Le+=c(X,2),Le+=c(B,2),Le+=c(Ce.crc32,4),Le+=c(Ce.compressedSize,4),Le+=c(Ce.uncompressedSize,4),Le+=c(R.length,2),Le+=c(U.length,2);var pt=l.LOCAL_FILE_HEADER+Le+R+U,nt=l.CENTRAL_FILE_HEADER+c(Oe,2)+Le+c(ne.length,2)+"\0\0\0\0"+c(Ie,4)+c(C,4)+R+U+ne;return{fileRecord:pt,dirRecord:nt}},m=function(g,v,y,C,A){var T="",S=s.transformTo("string",A(C));return T=l.CENTRAL_DIRECTORY_END+"\0\0\0\0"+c(g,2)+c(g,2)+c(v,4)+c(y,4)+c(S.length,2)+S,T},E=function(g){var v="";return v=l.DATA_DESCRIPTOR+c(g.crc32,4)+c(g.compressedSize,4)+c(g.uncompressedSize,4),v};function p(g,v,y,C){a.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=v,this.zipPlatform=y,this.encodeFileName=C,this.streamFiles=g,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}s.inherits(p,a),p.prototype.push=function(g){var v=g.meta.percent||0,y=this.entriesCount,C=this._sources.length;this.accumulate?this.contentBuffer.push(g):(this.bytesWritten+=g.data.length,a.prototype.push.call(this,{data:g.data,meta:{currentFile:this.currentFile,percent:y?(v+100*(y-C-1))/y:100}}))},p.prototype.openedSource=function(g){this.currentSourceOffset=this.bytesWritten,this.currentFile=g.file.name;var v=this.streamFiles&&!g.file.dir;if(v){var y=d(g,v,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:y.fileRecord,meta:{percent:0}})}else this.accumulate=!0},p.prototype.closedSource=function(g){this.accumulate=!1;var v=this.streamFiles&&!g.file.dir,y=d(g,v,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(y.dirRecord),v)this.push({data:E(g),meta:{percent:100}});else for(this.push({data:y.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},p.prototype.flush=function(){for(var g=this.bytesWritten,v=0;v<this.dirRecords.length;v++)this.push({data:this.dirRecords[v],meta:{percent:100}});var y=this.bytesWritten-g,C=m(this.dirRecords.length,y,g,this.zipComment,this.encodeFileName);this.push({data:C,meta:{percent:100}})},p.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},p.prototype.registerPrevious=function(g){this._sources.push(g);var v=this;return g.on("data",function(y){v.processChunk(y)}),g.on("end",function(){v.closedSource(v.previous.streamInfo),v._sources.length?v.prepareNextSource():v.end()}),g.on("error",function(y){v.error(y)}),this},p.prototype.resume=function(){if(!a.prototype.resume.call(this))return!1;if(!this.previous&&this._sources.length)return this.prepareNextSource(),!0;if(!this.previous&&!this._sources.length&&!this.generatedError)return this.end(),!0},p.prototype.error=function(g){var v=this._sources;if(!a.prototype.error.call(this,g))return!1;for(var y=0;y<v.length;y++)try{v[y].error(g)}catch{}return!0},p.prototype.lock=function(){a.prototype.lock.call(this);for(var g=this._sources,v=0;v<g.length;v++)g[v].lock()},n.exports=p},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,n,i){var s=t("../compressions"),a=t("./ZipFileWorker"),o=function(u,l){var c=u||l,h=s[c];if(!h)throw new Error(c+" is not a valid compression method !");return h};i.generateWorker=function(u,l,c){var h=new a(l.streamFiles,c,l.platform,l.encodeFileName),f=0;try{u.forEach(function(d,m){f++;var E=o(m.options.compression,l.compression),p=m.options.compressionOptions||l.compressionOptions||{},g=m.dir,v=m.date;m._compressWorker(E,p).withStreamInfo("file",{name:d,dir:g,date:v,comment:m.comment||"",unixPermissions:m.unixPermissions,dosPermissions:m.dosPermissions}).pipe(h)}),h.entriesCount=f}catch(d){h.error(d)}return h}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,n,i){function s(){if(!(this instanceof s))return new s;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var a=new s;for(var o in this)typeof this[o]!="function"&&(a[o]=this[o]);return a}}s.prototype=t("./object"),s.prototype.loadAsync=t("./load"),s.support=t("./support"),s.defaults=t("./defaults"),s.version="3.10.1",s.loadAsync=function(a,o){return new s().loadAsync(a,o)},s.external=t("./external"),n.exports=s},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,n,i){var s=t("./utils"),a=t("./external"),o=t("./utf8"),u=t("./zipEntries"),l=t("./stream/Crc32Probe"),c=t("./nodejsUtils");function h(f){return new a.Promise(function(d,m){var E=f.decompressed.getContentWorker().pipe(new l);E.on("error",function(p){m(p)}).on("end",function(){E.streamInfo.crc32!==f.decompressed.crc32?m(new Error("Corrupted zip : CRC32 mismatch")):d()}).resume()})}n.exports=function(f,d){var m=this;return d=s.extend(d||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),c.isNode&&c.isStream(f)?a.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):s.prepareContent("the loaded zip file",f,!0,d.optimizedBinaryString,d.base64).then(function(E){var p=new u(d);return p.load(E),p}).then(function(p){var g=[a.Promise.resolve(p)],v=p.files;if(d.checkCRC32)for(var y=0;y<v.length;y++)g.push(h(v[y]));return a.Promise.all(g)}).then(function(p){for(var g=p.shift(),v=g.files,y=0;y<v.length;y++){var C=v[y],A=C.fileNameStr,T=s.resolve(C.fileNameStr);m.file(T,C.decompressed,{binary:!0,optimizedBinaryString:!0,date:C.date,dir:C.dir,comment:C.fileCommentStr.length?C.fileCommentStr:null,unixPermissions:C.unixPermissions,dosPermissions:C.dosPermissions,createFolders:d.createFolders}),C.dir||(m.file(T).unsafeOriginalName=A)}return g.zipComment.length&&(m.comment=g.zipComment),m})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,n,i){var s=t("../utils"),a=t("../stream/GenericWorker");function o(u,l){a.call(this,"Nodejs stream input adapter for "+u),this._upstreamEnded=!1,this._bindStream(l)}s.inherits(o,a),o.prototype._bindStream=function(u){var l=this;this._stream=u,u.pause(),u.on("data",function(c){l.push({data:c,meta:{percent:0}})}).on("error",function(c){l.isPaused?this.generatedError=c:l.error(c)}).on("end",function(){l.isPaused?l._upstreamEnded=!0:l.end()})},o.prototype.pause=function(){return a.prototype.pause.call(this)?(this._stream.pause(),!0):!1},o.prototype.resume=function(){return a.prototype.resume.call(this)?(this._upstreamEnded?this.end():this._stream.resume(),!0):!1},n.exports=o},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,n,i){var s=t("readable-stream").Readable,a=t("../utils");a.inherits(o,s);function o(u,l,c){s.call(this,l),this._helper=u;var h=this;u.on("data",function(f,d){h.push(f)||h._helper.pause(),c&&c(d)}).on("error",function(f){h.emit("error",f)}).on("end",function(){h.push(null)})}o.prototype._read=function(){this._helper.resume()},n.exports=o},{"../utils":32,"readable-stream":16}],14:[function(t,n,i){n.exports={isNode:typeof Buffer<"u",newBufferFrom:function(s,a){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(s,a);if(typeof s=="number")throw new Error('The "data" argument must not be a number');return new Buffer(s,a)},allocBuffer:function(s){if(Buffer.alloc)return Buffer.alloc(s);var a=new Buffer(s);return a.fill(0),a},isBuffer:function(s){return Buffer.isBuffer(s)},isStream:function(s){return s&&typeof s.on=="function"&&typeof s.pause=="function"&&typeof s.resume=="function"}}},{}],15:[function(t,n,i){var s=t("./utf8"),a=t("./utils"),o=t("./stream/GenericWorker"),u=t("./stream/StreamHelper"),l=t("./defaults"),c=t("./compressedObject"),h=t("./zipObject"),f=t("./generate"),d=t("./nodejsUtils"),m=t("./nodejs/NodejsStreamInputAdapter"),E=function(A,T,S){var F=a.getTypeOf(T),k,R=a.extend(S||{},l);R.date=R.date||new Date,R.compression!==null&&(R.compression=R.compression.toUpperCase()),typeof R.unixPermissions=="string"&&(R.unixPermissions=parseInt(R.unixPermissions,8)),R.unixPermissions&&R.unixPermissions&16384&&(R.dir=!0),R.dosPermissions&&R.dosPermissions&16&&(R.dir=!0),R.dir&&(A=g(A)),R.createFolders&&(k=p(A))&&v.call(this,k,!0);var V=F==="string"&&R.binary===!1&&R.base64===!1;(!S||typeof S.binary>"u")&&(R.binary=!V);var $=T instanceof c&&T.uncompressedSize===0;($||R.dir||!T||T.length===0)&&(R.base64=!1,R.binary=!0,T="",R.compression="STORE",F="string");var ne=null;T instanceof c||T instanceof o?ne=T:d.isNode&&d.isStream(T)?ne=new m(A,T):ne=a.prepareContent(A,T,R.binary,R.optimizedBinaryString,R.base64);var ve=new h(A,ne,R);this.files[A]=ve},p=function(A){A.slice(-1)==="/"&&(A=A.substring(0,A.length-1));var T=A.lastIndexOf("/");return T>0?A.substring(0,T):""},g=function(A){return A.slice(-1)!=="/"&&(A+="/"),A},v=function(A,T){return T=typeof T<"u"?T:l.createFolders,A=g(A),this.files[A]||E.call(this,A,null,{dir:!0,createFolders:T}),this.files[A]};function y(A){return Object.prototype.toString.call(A)==="[object RegExp]"}var C={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(A){var T,S,F;for(T in this.files)F=this.files[T],S=T.slice(this.root.length,T.length),S&&T.slice(0,this.root.length)===this.root&&A(S,F)},filter:function(A){var T=[];return this.forEach(function(S,F){A(S,F)&&T.push(F)}),T},file:function(A,T,S){if(arguments.length===1)if(y(A)){var F=A;return this.filter(function(R,V){return!V.dir&&F.test(R)})}else{var k=this.files[this.root+A];return k&&!k.dir?k:null}else A=this.root+A,E.call(this,A,T,S);return this},folder:function(A){if(!A)return this;if(y(A))return this.filter(function(k,R){return R.dir&&A.test(k)});var T=this.root+A,S=v.call(this,T),F=this.clone();return F.root=S.name,F},remove:function(A){A=this.root+A;var T=this.files[A];if(T||(A.slice(-1)!=="/"&&(A+="/"),T=this.files[A]),T&&!T.dir)delete this.files[A];else for(var S=this.filter(function(k,R){return R.name.slice(0,A.length)===A}),F=0;F<S.length;F++)delete this.files[S[F].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(A){var T,S={};try{if(S=a.extend(A||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:s.utf8encode}),S.type=S.type.toLowerCase(),S.compression=S.compression.toUpperCase(),S.type==="binarystring"&&(S.type="string"),!S.type)throw new Error("No output type specified.");a.checkSupport(S.type),(S.platform==="darwin"||S.platform==="freebsd"||S.platform==="linux"||S.platform==="sunos")&&(S.platform="UNIX"),S.platform==="win32"&&(S.platform="DOS");var F=S.comment||this.comment||"";T=f.generateWorker(this,S,F)}catch(k){T=new o("error"),T.error(k)}return new u(T,S.type||"string",S.mimeType)},generateAsync:function(A,T){return this.generateInternalStream(A).accumulate(T)},generateNodeStream:function(A,T){return A=A||{},A.type||(A.type="nodebuffer"),this.generateInternalStream(A).toNodejsStream(T)}};n.exports=C},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,n,i){n.exports=t("stream")},{stream:void 0}],17:[function(t,n,i){var s=t("./DataReader"),a=t("../utils");function o(u){s.call(this,u);for(var l=0;l<this.data.length;l++)u[l]=u[l]&255}a.inherits(o,s),o.prototype.byteAt=function(u){return this.data[this.zero+u]},o.prototype.lastIndexOfSignature=function(u){for(var l=u.charCodeAt(0),c=u.charCodeAt(1),h=u.charCodeAt(2),f=u.charCodeAt(3),d=this.length-4;d>=0;--d)if(this.data[d]===l&&this.data[d+1]===c&&this.data[d+2]===h&&this.data[d+3]===f)return d-this.zero;return-1},o.prototype.readAndCheckSignature=function(u){var l=u.charCodeAt(0),c=u.charCodeAt(1),h=u.charCodeAt(2),f=u.charCodeAt(3),d=this.readData(4);return l===d[0]&&c===d[1]&&h===d[2]&&f===d[3]},o.prototype.readData=function(u){if(this.checkOffset(u),u===0)return[];var l=this.data.slice(this.zero+this.index,this.zero+this.index+u);return this.index+=u,l},n.exports=o},{"../utils":32,"./DataReader":18}],18:[function(t,n,i){var s=t("../utils");function a(o){this.data=o,this.length=o.length,this.index=0,this.zero=0}a.prototype={checkOffset:function(o){this.checkIndex(this.index+o)},checkIndex:function(o){if(this.length<this.zero+o||o<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+o+"). Corrupted zip ?")},setIndex:function(o){this.checkIndex(o),this.index=o},skip:function(o){this.setIndex(this.index+o)},byteAt:function(){},readInt:function(o){var u=0,l;for(this.checkOffset(o),l=this.index+o-1;l>=this.index;l--)u=(u<<8)+this.byteAt(l);return this.index+=o,u},readString:function(o){return s.transformTo("string",this.readData(o))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var o=this.readInt(4);return new Date(Date.UTC((o>>25&127)+1980,(o>>21&15)-1,o>>16&31,o>>11&31,o>>5&63,(o&31)<<1))}},n.exports=a},{"../utils":32}],19:[function(t,n,i){var s=t("./Uint8ArrayReader"),a=t("../utils");function o(u){s.call(this,u)}a.inherits(o,s),o.prototype.readData=function(u){this.checkOffset(u);var l=this.data.slice(this.zero+this.index,this.zero+this.index+u);return this.index+=u,l},n.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,n,i){var s=t("./DataReader"),a=t("../utils");function o(u){s.call(this,u)}a.inherits(o,s),o.prototype.byteAt=function(u){return this.data.charCodeAt(this.zero+u)},o.prototype.lastIndexOfSignature=function(u){return this.data.lastIndexOf(u)-this.zero},o.prototype.readAndCheckSignature=function(u){var l=this.readData(4);return u===l},o.prototype.readData=function(u){this.checkOffset(u);var l=this.data.slice(this.zero+this.index,this.zero+this.index+u);return this.index+=u,l},n.exports=o},{"../utils":32,"./DataReader":18}],21:[function(t,n,i){var s=t("./ArrayReader"),a=t("../utils");function o(u){s.call(this,u)}a.inherits(o,s),o.prototype.readData=function(u){if(this.checkOffset(u),u===0)return new Uint8Array(0);var l=this.data.subarray(this.zero+this.index,this.zero+this.index+u);return this.index+=u,l},n.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(t,n,i){var s=t("../utils"),a=t("../support"),o=t("./ArrayReader"),u=t("./StringReader"),l=t("./NodeBufferReader"),c=t("./Uint8ArrayReader");n.exports=function(h){var f=s.getTypeOf(h);return s.checkSupport(f),f==="string"&&!a.uint8array?new u(h):f==="nodebuffer"?new l(h):a.uint8array?new c(s.transformTo("uint8array",h)):new o(s.transformTo("array",h))}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,n,i){i.LOCAL_FILE_HEADER="PK",i.CENTRAL_FILE_HEADER="PK",i.CENTRAL_DIRECTORY_END="PK",i.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",i.ZIP64_CENTRAL_DIRECTORY_END="PK",i.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(t,n,i){var s=t("./GenericWorker"),a=t("../utils");function o(u){s.call(this,"ConvertWorker to "+u),this.destType=u}a.inherits(o,s),o.prototype.processChunk=function(u){this.push({data:a.transformTo(this.destType,u.data),meta:u.meta})},n.exports=o},{"../utils":32,"./GenericWorker":28}],25:[function(t,n,i){var s=t("./GenericWorker"),a=t("../crc32"),o=t("../utils");function u(){s.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}o.inherits(u,s),u.prototype.processChunk=function(l){this.streamInfo.crc32=a(l.data,this.streamInfo.crc32||0),this.push(l)},n.exports=u},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,n,i){var s=t("../utils"),a=t("./GenericWorker");function o(u){a.call(this,"DataLengthProbe for "+u),this.propName=u,this.withStreamInfo(u,0)}s.inherits(o,a),o.prototype.processChunk=function(u){if(u){var l=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=l+u.data.length}a.prototype.processChunk.call(this,u)},n.exports=o},{"../utils":32,"./GenericWorker":28}],27:[function(t,n,i){var s=t("../utils"),a=t("./GenericWorker"),o=16*1024;function u(l){a.call(this,"DataWorker");var c=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,l.then(function(h){c.dataIsReady=!0,c.data=h,c.max=h&&h.length||0,c.type=s.getTypeOf(h),c.isPaused||c._tickAndRepeat()},function(h){c.error(h)})}s.inherits(u,a),u.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this.data=null},u.prototype.resume=function(){return a.prototype.resume.call(this)?(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,s.delay(this._tickAndRepeat,[],this)),!0):!1},u.prototype._tickAndRepeat=function(){this._tickScheduled=!1,!(this.isPaused||this.isFinished)&&(this._tick(),this.isFinished||(s.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},u.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var l=o,c=null,h=Math.min(this.max,this.index+l);if(this.index>=this.max)return this.end();switch(this.type){case"string":c=this.data.substring(this.index,h);break;case"uint8array":c=this.data.subarray(this.index,h);break;case"array":case"nodebuffer":c=this.data.slice(this.index,h);break}return this.index=h,this.push({data:c,meta:{percent:this.max?this.index/this.max*100:0}})},n.exports=u},{"../utils":32,"./GenericWorker":28}],28:[function(t,n,i){function s(a){this.name=a||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}s.prototype={push:function(a){this.emit("data",a)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(a){this.emit("error",a)}return!0},error:function(a){return this.isFinished?!1:(this.isPaused?this.generatedError=a:(this.isFinished=!0,this.emit("error",a),this.previous&&this.previous.error(a),this.cleanUp()),!0)},on:function(a,o){return this._listeners[a].push(o),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(a,o){if(this._listeners[a])for(var u=0;u<this._listeners[a].length;u++)this._listeners[a][u].call(this,o)},pipe:function(a){return a.registerPrevious(this)},registerPrevious:function(a){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=a.streamInfo,this.mergeStreamInfo(),this.previous=a;var o=this;return a.on("data",function(u){o.processChunk(u)}),a.on("end",function(){o.end()}),a.on("error",function(u){o.error(u)}),this},pause:function(){return this.isPaused||this.isFinished?!1:(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;this.isPaused=!1;var a=!1;return this.generatedError&&(this.error(this.generatedError),a=!0),this.previous&&this.previous.resume(),!a},flush:function(){},processChunk:function(a){this.push(a)},withStreamInfo:function(a,o){return this.extraStreamInfo[a]=o,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var a in this.extraStreamInfo)!Object.prototype.hasOwnProperty.call(this.extraStreamInfo,a)||(this.streamInfo[a]=this.extraStreamInfo[a])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var a="Worker "+this.name;return this.previous?this.previous+" -> "+a:a}},n.exports=s},{}],29:[function(t,n,i){var s=t("../utils"),a=t("./ConvertWorker"),o=t("./GenericWorker"),u=t("../base64"),l=t("../support"),c=t("../external"),h=null;if(l.nodestream)try{h=t("../nodejs/NodejsStreamOutputAdapter")}catch{}function f(p,g,v){switch(p){case"blob":return s.newBlob(s.transformTo("arraybuffer",g),v);case"base64":return u.encode(g);default:return s.transformTo(p,g)}}function d(p,g){var v,y=0,C=null,A=0;for(v=0;v<g.length;v++)A+=g[v].length;switch(p){case"string":return g.join("");case"array":return Array.prototype.concat.apply([],g);case"uint8array":for(C=new Uint8Array(A),v=0;v<g.length;v++)C.set(g[v],y),y+=g[v].length;return C;case"nodebuffer":return Buffer.concat(g);default:throw new Error("concat : unsupported type '"+p+"'")}}function m(p,g){return new c.Promise(function(v,y){var C=[],A=p._internalType,T=p._outputType,S=p._mimeType;p.on("data",function(F,k){C.push(F),g&&g(k)}).on("error",function(F){C=[],y(F)}).on("end",function(){try{var F=f(T,d(A,C),S);v(F)}catch(k){y(k)}C=[]}).resume()})}function E(p,g,v){var y=g;switch(g){case"blob":case"arraybuffer":y="uint8array";break;case"base64":y="string";break}try{this._internalType=y,this._outputType=g,this._mimeType=v,s.checkSupport(y),this._worker=p.pipe(new a(y)),p.lock()}catch(C){this._worker=new o("error"),this._worker.error(C)}}E.prototype={accumulate:function(p){return m(this,p)},on:function(p,g){var v=this;return p==="data"?this._worker.on(p,function(y){g.call(v,y.data,y.meta)}):this._worker.on(p,function(){s.delay(g,arguments,v)}),this},resume:function(){return s.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(p){if(s.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new h(this,{objectMode:this._outputType!=="nodebuffer"},p)}},n.exports=E},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,n,i){if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",i.nodebuffer=typeof Buffer<"u",i.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")i.blob=!1;else{var s=new ArrayBuffer(0);try{i.blob=new Blob([s],{type:"application/zip"}).size===0}catch{try{var a=self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder,o=new a;o.append(s),i.blob=o.getBlob("application/zip").size===0}catch{i.blob=!1}}}try{i.nodestream=!!t("readable-stream").Readable}catch{i.nodestream=!1}},{"readable-stream":16}],31:[function(t,n,i){for(var s=t("./utils"),a=t("./support"),o=t("./nodejsUtils"),u=t("./stream/GenericWorker"),l=new Array(256),c=0;c<256;c++)l[c]=c>=252?6:c>=248?5:c>=240?4:c>=224?3:c>=192?2:1;l[254]=l[254]=1;var h=function(p){var g,v,y,C,A,T=p.length,S=0;for(C=0;C<T;C++)v=p.charCodeAt(C),(v&64512)===55296&&C+1<T&&(y=p.charCodeAt(C+1),(y&64512)===56320&&(v=65536+(v-55296<<10)+(y-56320),C++)),S+=v<128?1:v<2048?2:v<65536?3:4;for(a.uint8array?g=new Uint8Array(S):g=new Array(S),A=0,C=0;A<S;C++)v=p.charCodeAt(C),(v&64512)===55296&&C+1<T&&(y=p.charCodeAt(C+1),(y&64512)===56320&&(v=65536+(v-55296<<10)+(y-56320),C++)),v<128?g[A++]=v:v<2048?(g[A++]=192|v>>>6,g[A++]=128|v&63):v<65536?(g[A++]=224|v>>>12,g[A++]=128|v>>>6&63,g[A++]=128|v&63):(g[A++]=240|v>>>18,g[A++]=128|v>>>12&63,g[A++]=128|v>>>6&63,g[A++]=128|v&63);return g},f=function(p,g){var v;for(g=g||p.length,g>p.length&&(g=p.length),v=g-1;v>=0&&(p[v]&192)===128;)v--;return v<0||v===0?g:v+l[p[v]]>g?v:g},d=function(p){var g,v,y,C,A=p.length,T=new Array(A*2);for(v=0,g=0;g<A;){if(y=p[g++],y<128){T[v++]=y;continue}if(C=l[y],C>4){T[v++]=65533,g+=C-1;continue}for(y&=C===2?31:C===3?15:7;C>1&&g<A;)y=y<<6|p[g++]&63,C--;if(C>1){T[v++]=65533;continue}y<65536?T[v++]=y:(y-=65536,T[v++]=55296|y>>10&1023,T[v++]=56320|y&1023)}return T.length!==v&&(T.subarray?T=T.subarray(0,v):T.length=v),s.applyFromCharCode(T)};i.utf8encode=function(g){return a.nodebuffer?o.newBufferFrom(g,"utf-8"):h(g)},i.utf8decode=function(g){return a.nodebuffer?s.transformTo("nodebuffer",g).toString("utf-8"):(g=s.transformTo(a.uint8array?"uint8array":"array",g),d(g))};function m(){u.call(this,"utf-8 decode"),this.leftOver=null}s.inherits(m,u),m.prototype.processChunk=function(p){var g=s.transformTo(a.uint8array?"uint8array":"array",p.data);if(this.leftOver&&this.leftOver.length){if(a.uint8array){var v=g;g=new Uint8Array(v.length+this.leftOver.length),g.set(this.leftOver,0),g.set(v,this.leftOver.length)}else g=this.leftOver.concat(g);this.leftOver=null}var y=f(g),C=g;y!==g.length&&(a.uint8array?(C=g.subarray(0,y),this.leftOver=g.subarray(y,g.length)):(C=g.slice(0,y),this.leftOver=g.slice(y,g.length))),this.push({data:i.utf8decode(C),meta:p.meta})},m.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:i.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},i.Utf8DecodeWorker=m;function E(){u.call(this,"utf-8 encode")}s.inherits(E,u),E.prototype.processChunk=function(p){this.push({data:i.utf8encode(p.data),meta:p.meta})},i.Utf8EncodeWorker=E},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,n,i){var s=t("./support"),a=t("./base64"),o=t("./nodejsUtils"),u=t("./external");t("setimmediate");function l(p){var g=null;return s.uint8array?g=new Uint8Array(p.length):g=new Array(p.length),h(p,g)}i.newBlob=function(p,g){i.checkSupport("blob");try{return new Blob([p],{type:g})}catch{try{var v=self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder,y=new v;return y.append(p),y.getBlob(g)}catch{throw new Error("Bug : can't construct the Blob.")}}};function c(p){return p}function h(p,g){for(var v=0;v<p.length;++v)g[v]=p.charCodeAt(v)&255;return g}var f={stringifyByChunk:function(p,g,v){var y=[],C=0,A=p.length;if(A<=v)return String.fromCharCode.apply(null,p);for(;C<A;)g==="array"||g==="nodebuffer"?y.push(String.fromCharCode.apply(null,p.slice(C,Math.min(C+v,A)))):y.push(String.fromCharCode.apply(null,p.subarray(C,Math.min(C+v,A)))),C+=v;return y.join("")},stringifyByChar:function(p){for(var g="",v=0;v<p.length;v++)g+=String.fromCharCode(p[v]);return g},applyCanBeUsed:{uint8array:function(){try{return s.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return s.nodebuffer&&String.fromCharCode.apply(null,o.allocBuffer(1)).length===1}catch{return!1}}()}};function d(p){var g=65536,v=i.getTypeOf(p),y=!0;if(v==="uint8array"?y=f.applyCanBeUsed.uint8array:v==="nodebuffer"&&(y=f.applyCanBeUsed.nodebuffer),y)for(;g>1;)try{return f.stringifyByChunk(p,v,g)}catch{g=Math.floor(g/2)}return f.stringifyByChar(p)}i.applyFromCharCode=d;function m(p,g){for(var v=0;v<p.length;v++)g[v]=p[v];return g}var E={};E.string={string:c,array:function(p){return h(p,new Array(p.length))},arraybuffer:function(p){return E.string.uint8array(p).buffer},uint8array:function(p){return h(p,new Uint8Array(p.length))},nodebuffer:function(p){return h(p,o.allocBuffer(p.length))}},E.array={string:d,array:c,arraybuffer:function(p){return new Uint8Array(p).buffer},uint8array:function(p){return new Uint8Array(p)},nodebuffer:function(p){return o.newBufferFrom(p)}},E.arraybuffer={string:function(p){return d(new Uint8Array(p))},array:function(p){return m(new Uint8Array(p),new Array(p.byteLength))},arraybuffer:c,uint8array:function(p){return new Uint8Array(p)},nodebuffer:function(p){return o.newBufferFrom(new Uint8Array(p))}},E.uint8array={string:d,array:function(p){return m(p,new Array(p.length))},arraybuffer:function(p){return p.buffer},uint8array:c,nodebuffer:function(p){return o.newBufferFrom(p)}},E.nodebuffer={string:d,array:function(p){return m(p,new Array(p.length))},arraybuffer:function(p){return E.nodebuffer.uint8array(p).buffer},uint8array:function(p){return m(p,new Uint8Array(p.length))},nodebuffer:c},i.transformTo=function(p,g){if(g||(g=""),!p)return g;i.checkSupport(p);var v=i.getTypeOf(g),y=E[v][p](g);return y},i.resolve=function(p){for(var g=p.split("/"),v=[],y=0;y<g.length;y++){var C=g[y];C==="."||C===""&&y!==0&&y!==g.length-1||(C===".."?v.pop():v.push(C))}return v.join("/")},i.getTypeOf=function(p){if(typeof p=="string")return"string";if(Object.prototype.toString.call(p)==="[object Array]")return"array";if(s.nodebuffer&&o.isBuffer(p))return"nodebuffer";if(s.uint8array&&p instanceof Uint8Array)return"uint8array";if(s.arraybuffer&&p instanceof ArrayBuffer)return"arraybuffer"},i.checkSupport=function(p){var g=s[p.toLowerCase()];if(!g)throw new Error(p+" is not supported by this platform")},i.MAX_VALUE_16BITS=65535,i.MAX_VALUE_32BITS=-1,i.pretty=function(p){var g="",v,y;for(y=0;y<(p||"").length;y++)v=p.charCodeAt(y),g+="\\x"+(v<16?"0":"")+v.toString(16).toUpperCase();return g},i.delay=function(p,g,v){setImmediate(function(){p.apply(v||null,g||[])})},i.inherits=function(p,g){var v=function(){};v.prototype=g.prototype,p.prototype=new v},i.extend=function(){var p={},g,v;for(g=0;g<arguments.length;g++)for(v in arguments[g])Object.prototype.hasOwnProperty.call(arguments[g],v)&&typeof p[v]>"u"&&(p[v]=arguments[g][v]);return p},i.prepareContent=function(p,g,v,y,C){var A=u.Promise.resolve(g).then(function(T){var S=s.blob&&(T instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(T))!==-1);return S&&typeof FileReader<"u"?new u.Promise(function(F,k){var R=new FileReader;R.onload=function(V){F(V.target.result)},R.onerror=function(V){k(V.target.error)},R.readAsArrayBuffer(T)}):T});return A.then(function(T){var S=i.getTypeOf(T);return S?(S==="arraybuffer"?T=i.transformTo("uint8array",T):S==="string"&&(C?T=a.decode(T):v&&y!==!0&&(T=l(T))),T):u.Promise.reject(new Error("Can't read the data of '"+p+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(t,n,i){var s=t("./reader/readerFor"),a=t("./utils"),o=t("./signature"),u=t("./zipEntry"),l=t("./support");function c(h){this.files=[],this.loadOptions=h}c.prototype={checkSignature:function(h){if(!this.reader.readAndCheckSignature(h)){this.reader.index-=4;var f=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+a.pretty(f)+", expected "+a.pretty(h)+")")}},isSignature:function(h,f){var d=this.reader.index;this.reader.setIndex(h);var m=this.reader.readString(4),E=m===f;return this.reader.setIndex(d),E},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var h=this.reader.readData(this.zipCommentLength),f=l.uint8array?"uint8array":"array",d=a.transformTo(f,h);this.zipComment=this.loadOptions.decodeFileName(d)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var h=this.zip64EndOfCentralSize-44,f=0,d,m,E;f<h;)d=this.reader.readInt(2),m=this.reader.readInt(4),E=this.reader.readData(m),this.zip64ExtensibleData[d]={id:d,length:m,value:E}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),this.disksCount>1)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var h,f;for(h=0;h<this.files.length;h++)f=this.files[h],this.reader.setIndex(f.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),f.readLocalPart(this.reader),f.handleUTF8(),f.processAttributes()},readCentralDir:function(){var h;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)h=new u({zip64:this.zip64},this.loadOptions),h.readCentralPart(this.reader),this.files.push(h);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var h=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(h<0){var f=!this.isSignature(0,o.LOCAL_FILE_HEADER);throw f?new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html"):new Error("Corrupted zip: can't find end of central directory")}this.reader.setIndex(h);var d=h;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===a.MAX_VALUE_16BITS||this.diskWithCentralDirStart===a.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===a.MAX_VALUE_16BITS||this.centralDirRecords===a.MAX_VALUE_16BITS||this.centralDirSize===a.MAX_VALUE_32BITS||this.centralDirOffset===a.MAX_VALUE_32BITS){if(this.zip64=!0,h=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),h<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(h),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var m=this.centralDirOffset+this.centralDirSize;this.zip64&&(m+=20,m+=12+this.zip64EndOfCentralSize);var E=d-m;if(E>0)this.isSignature(d,o.CENTRAL_FILE_HEADER)||(this.reader.zero=E);else if(E<0)throw new Error("Corrupted zip: missing "+Math.abs(E)+" bytes.")},prepareReader:function(h){this.reader=s(h)},load:function(h){this.prepareReader(h),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},n.exports=c},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(t,n,i){var s=t("./reader/readerFor"),a=t("./utils"),o=t("./compressedObject"),u=t("./crc32"),l=t("./utf8"),c=t("./compressions"),h=t("./support"),f=0,d=3,m=function(p){for(var g in c)if(!!Object.prototype.hasOwnProperty.call(c,g)&&c[g].magic===p)return c[g];return null};function E(p,g){this.options=p,this.loadOptions=g}E.prototype={isEncrypted:function(){return(this.bitFlag&1)===1},useUTF8:function(){return(this.bitFlag&2048)===2048},readLocalPart:function(p){var g,v;if(p.skip(22),this.fileNameLength=p.readInt(2),v=p.readInt(2),this.fileName=p.readData(this.fileNameLength),p.skip(v),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(g=m(this.compressionMethod),g===null)throw new Error("Corrupted zip : compression "+a.pretty(this.compressionMethod)+" unknown (inner file : "+a.transformTo("string",this.fileName)+")");this.decompressed=new o(this.compressedSize,this.uncompressedSize,this.crc32,g,p.readData(this.compressedSize))},readCentralPart:function(p){this.versionMadeBy=p.readInt(2),p.skip(2),this.bitFlag=p.readInt(2),this.compressionMethod=p.readString(2),this.date=p.readDate(),this.crc32=p.readInt(4),this.compressedSize=p.readInt(4),this.uncompressedSize=p.readInt(4);var g=p.readInt(2);if(this.extraFieldsLength=p.readInt(2),this.fileCommentLength=p.readInt(2),this.diskNumberStart=p.readInt(2),this.internalFileAttributes=p.readInt(2),this.externalFileAttributes=p.readInt(4),this.localHeaderOffset=p.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");p.skip(g),this.readExtraFields(p),this.parseZIP64ExtraField(p),this.fileComment=p.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var p=this.versionMadeBy>>8;this.dir=!!(this.externalFileAttributes&16),p===f&&(this.dosPermissions=this.externalFileAttributes&63),p===d&&(this.unixPermissions=this.externalFileAttributes>>16&65535),!this.dir&&this.fileNameStr.slice(-1)==="/"&&(this.dir=!0)},parseZIP64ExtraField:function(){if(!!this.extraFields[1]){var p=s(this.extraFields[1].value);this.uncompressedSize===a.MAX_VALUE_32BITS&&(this.uncompressedSize=p.readInt(8)),this.compressedSize===a.MAX_VALUE_32BITS&&(this.compressedSize=p.readInt(8)),this.localHeaderOffset===a.MAX_VALUE_32BITS&&(this.localHeaderOffset=p.readInt(8)),this.diskNumberStart===a.MAX_VALUE_32BITS&&(this.diskNumberStart=p.readInt(4))}},readExtraFields:function(p){var g=p.index+this.extraFieldsLength,v,y,C;for(this.extraFields||(this.extraFields={});p.index+4<g;)v=p.readInt(2),y=p.readInt(2),C=p.readData(y),this.extraFields[v]={id:v,length:y,value:C};p.setIndex(g)},handleUTF8:function(){var p=h.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=l.utf8decode(this.fileName),this.fileCommentStr=l.utf8decode(this.fileComment);else{var g=this.findExtraFieldUnicodePath();if(g!==null)this.fileNameStr=g;else{var v=a.transformTo(p,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(v)}var y=this.findExtraFieldUnicodeComment();if(y!==null)this.fileCommentStr=y;else{var C=a.transformTo(p,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(C)}}},findExtraFieldUnicodePath:function(){var p=this.extraFields[28789];if(p){var g=s(p.value);return g.readInt(1)!==1||u(this.fileName)!==g.readInt(4)?null:l.utf8decode(g.readData(p.length-5))}return null},findExtraFieldUnicodeComment:function(){var p=this.extraFields[25461];if(p){var g=s(p.value);return g.readInt(1)!==1||u(this.fileComment)!==g.readInt(4)?null:l.utf8decode(g.readData(p.length-5))}return null}},n.exports=E},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,n,i){var s=t("./stream/StreamHelper"),a=t("./stream/DataWorker"),o=t("./utf8"),u=t("./compressedObject"),l=t("./stream/GenericWorker"),c=function(m,E,p){this.name=m,this.dir=p.dir,this.date=p.date,this.comment=p.comment,this.unixPermissions=p.unixPermissions,this.dosPermissions=p.dosPermissions,this._data=E,this._dataBinary=p.binary,this.options={compression:p.compression,compressionOptions:p.compressionOptions}};c.prototype={internalStream:function(m){var E=null,p="string";try{if(!m)throw new Error("No output type specified.");p=m.toLowerCase();var g=p==="string"||p==="text";(p==="binarystring"||p==="text")&&(p="string"),E=this._decompressWorker();var v=!this._dataBinary;v&&!g&&(E=E.pipe(new o.Utf8EncodeWorker)),!v&&g&&(E=E.pipe(new o.Utf8DecodeWorker))}catch(y){E=new l("error"),E.error(y)}return new s(E,p,"")},async:function(m,E){return this.internalStream(m).accumulate(E)},nodeStream:function(m,E){return this.internalStream(m||"nodebuffer").toNodejsStream(E)},_compressWorker:function(m,E){if(this._data instanceof u&&this._data.compression.magic===m.magic)return this._data.getCompressedWorker();var p=this._decompressWorker();return this._dataBinary||(p=p.pipe(new o.Utf8EncodeWorker)),u.createWorkerFrom(p,m,E)},_decompressWorker:function(){return this._data instanceof u?this._data.getContentWorker():this._data instanceof l?this._data:new a(this._data)}};for(var h=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],f=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},d=0;d<h.length;d++)c.prototype[h[d]]=f;n.exports=c},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,n,i){(function(s){var a=s.MutationObserver||s.WebKitMutationObserver,o;if(a){var u=0,l=new a(m),c=s.document.createTextNode("");l.observe(c,{characterData:!0}),o=function(){c.data=u=++u%2}}else if(!s.setImmediate&&typeof s.MessageChannel<"u"){var h=new s.MessageChannel;h.port1.onmessage=m,o=function(){h.port2.postMessage(0)}}else"document"in s&&"onreadystatechange"in s.document.createElement("script")?o=function(){var p=s.document.createElement("script");p.onreadystatechange=function(){m(),p.onreadystatechange=null,p.parentNode.removeChild(p),p=null},s.document.documentElement.appendChild(p)}:o=function(){setTimeout(m,0)};var f,d=[];function m(){f=!0;for(var p,g,v=d.length;v;){for(g=d,d=[],p=-1;++p<v;)g[p]();v=d.length}f=!1}n.exports=E;function E(p){d.push(p)===1&&!f&&o()}}).call(this,typeof vr<"u"?vr:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(t,n,i){var s=t("immediate");function a(){}var o={},u=["REJECTED"],l=["FULFILLED"],c=["PENDING"];n.exports=h;function h(A){if(typeof A!="function")throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,A!==a&&E(this,A)}h.prototype.finally=function(A){if(typeof A!="function")return this;var T=this.constructor;return this.then(S,F);function S(k){function R(){return k}return T.resolve(A()).then(R)}function F(k){function R(){throw k}return T.resolve(A()).then(R)}},h.prototype.catch=function(A){return this.then(null,A)},h.prototype.then=function(A,T){if(typeof A!="function"&&this.state===l||typeof T!="function"&&this.state===u)return this;var S=new this.constructor(a);if(this.state!==c){var F=this.state===l?A:T;d(S,F,this.outcome)}else this.queue.push(new f(S,A,T));return S};function f(A,T,S){this.promise=A,typeof T=="function"&&(this.onFulfilled=T,this.callFulfilled=this.otherCallFulfilled),typeof S=="function"&&(this.onRejected=S,this.callRejected=this.otherCallRejected)}f.prototype.callFulfilled=function(A){o.resolve(this.promise,A)},f.prototype.otherCallFulfilled=function(A){d(this.promise,this.onFulfilled,A)},f.prototype.callRejected=function(A){o.reject(this.promise,A)},f.prototype.otherCallRejected=function(A){d(this.promise,this.onRejected,A)};function d(A,T,S){s(function(){var F;try{F=T(S)}catch(k){return o.reject(A,k)}F===A?o.reject(A,new TypeError("Cannot resolve promise with itself")):o.resolve(A,F)})}o.resolve=function(A,T){var S=p(m,T);if(S.status==="error")return o.reject(A,S.value);var F=S.value;if(F)E(A,F);else{A.state=l,A.outcome=T;for(var k=-1,R=A.queue.length;++k<R;)A.queue[k].callFulfilled(T)}return A},o.reject=function(A,T){A.state=u,A.outcome=T;for(var S=-1,F=A.queue.length;++S<F;)A.queue[S].callRejected(T);return A};function m(A){var T=A&&A.then;if(A&&(typeof A=="object"||typeof A=="function")&&typeof T=="function")return function(){T.apply(A,arguments)}}function E(A,T){var S=!1;function F($){S||(S=!0,o.reject(A,$))}function k($){S||(S=!0,o.resolve(A,$))}function R(){T(k,F)}var V=p(R);V.status==="error"&&F(V.value)}function p(A,T){var S={};try{S.value=A(T),S.status="success"}catch(F){S.status="error",S.value=F}return S}h.resolve=g;function g(A){return A instanceof this?A:o.resolve(new this(a),A)}h.reject=v;function v(A){var T=new this(a);return o.reject(T,A)}h.all=y;function y(A){var T=this;if(Object.prototype.toString.call(A)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=A.length,F=!1;if(!S)return this.resolve([]);for(var k=new Array(S),R=0,V=-1,$=new this(a);++V<S;)ne(A[V],V);return $;function ne(ve,H){T.resolve(ve).then(j,function(X){F||(F=!0,o.reject($,X))});function j(X){k[H]=X,++R===S&&!F&&(F=!0,o.resolve($,k))}}}h.race=C;function C(A){var T=this;if(Object.prototype.toString.call(A)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=A.length,F=!1;if(!S)return this.resolve([]);for(var k=-1,R=new this(a);++k<S;)V(A[k]);return R;function V($){T.resolve($).then(function(ne){F||(F=!0,o.resolve(R,ne))},function(ne){F||(F=!0,o.reject(R,ne))})}}},{immediate:36}],38:[function(t,n,i){var s=t("./lib/utils/common").assign,a=t("./lib/deflate"),o=t("./lib/inflate"),u=t("./lib/zlib/constants"),l={};s(l,a,o,u),n.exports=l},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,n,i){var s=t("./zlib/deflate"),a=t("./utils/common"),o=t("./utils/strings"),u=t("./zlib/messages"),l=t("./zlib/zstream"),c=Object.prototype.toString,h=0,f=4,d=0,m=1,E=2,p=-1,g=0,v=8;function y(S){if(!(this instanceof y))return new y(S);this.options=a.assign({level:p,method:v,chunkSize:16384,windowBits:15,memLevel:8,strategy:g,to:""},S||{});var F=this.options;F.raw&&F.windowBits>0?F.windowBits=-F.windowBits:F.gzip&&F.windowBits>0&&F.windowBits<16&&(F.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var k=s.deflateInit2(this.strm,F.level,F.method,F.windowBits,F.memLevel,F.strategy);if(k!==d)throw new Error(u[k]);if(F.header&&s.deflateSetHeader(this.strm,F.header),F.dictionary){var R;if(typeof F.dictionary=="string"?R=o.string2buf(F.dictionary):c.call(F.dictionary)==="[object ArrayBuffer]"?R=new Uint8Array(F.dictionary):R=F.dictionary,k=s.deflateSetDictionary(this.strm,R),k!==d)throw new Error(u[k]);this._dict_set=!0}}y.prototype.push=function(S,F){var k=this.strm,R=this.options.chunkSize,V,$;if(this.ended)return!1;$=F===~~F?F:F===!0?f:h,typeof S=="string"?k.input=o.string2buf(S):c.call(S)==="[object ArrayBuffer]"?k.input=new Uint8Array(S):k.input=S,k.next_in=0,k.avail_in=k.input.length;do{if(k.avail_out===0&&(k.output=new a.Buf8(R),k.next_out=0,k.avail_out=R),V=s.deflate(k,$),V!==m&&V!==d)return this.onEnd(V),this.ended=!0,!1;(k.avail_out===0||k.avail_in===0&&($===f||$===E))&&(this.options.to==="string"?this.onData(o.buf2binstring(a.shrinkBuf(k.output,k.next_out))):this.onData(a.shrinkBuf(k.output,k.next_out)))}while((k.avail_in>0||k.avail_out===0)&&V!==m);return $===f?(V=s.deflateEnd(this.strm),this.onEnd(V),this.ended=!0,V===d):($===E&&(this.onEnd(d),k.avail_out=0),!0)},y.prototype.onData=function(S){this.chunks.push(S)},y.prototype.onEnd=function(S){S===d&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=S,this.msg=this.strm.msg};function C(S,F){var k=new y(F);if(k.push(S,!0),k.err)throw k.msg||u[k.err];return k.result}function A(S,F){return F=F||{},F.raw=!0,C(S,F)}function T(S,F){return F=F||{},F.gzip=!0,C(S,F)}i.Deflate=y,i.deflate=C,i.deflateRaw=A,i.gzip=T},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,n,i){var s=t("./zlib/inflate"),a=t("./utils/common"),o=t("./utils/strings"),u=t("./zlib/constants"),l=t("./zlib/messages"),c=t("./zlib/zstream"),h=t("./zlib/gzheader"),f=Object.prototype.toString;function d(p){if(!(this instanceof d))return new d(p);this.options=a.assign({chunkSize:16384,windowBits:0,to:""},p||{});var g=this.options;g.raw&&g.windowBits>=0&&g.windowBits<16&&(g.windowBits=-g.windowBits,g.windowBits===0&&(g.windowBits=-15)),g.windowBits>=0&&g.windowBits<16&&!(p&&p.windowBits)&&(g.windowBits+=32),g.windowBits>15&&g.windowBits<48&&(g.windowBits&15)===0&&(g.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var v=s.inflateInit2(this.strm,g.windowBits);if(v!==u.Z_OK)throw new Error(l[v]);this.header=new h,s.inflateGetHeader(this.strm,this.header)}d.prototype.push=function(p,g){var v=this.strm,y=this.options.chunkSize,C=this.options.dictionary,A,T,S,F,k,R,V=!1;if(this.ended)return!1;T=g===~~g?g:g===!0?u.Z_FINISH:u.Z_NO_FLUSH,typeof p=="string"?v.input=o.binstring2buf(p):f.call(p)==="[object ArrayBuffer]"?v.input=new Uint8Array(p):v.input=p,v.next_in=0,v.avail_in=v.input.length;do{if(v.avail_out===0&&(v.output=new a.Buf8(y),v.next_out=0,v.avail_out=y),A=s.inflate(v,u.Z_NO_FLUSH),A===u.Z_NEED_DICT&&C&&(typeof C=="string"?R=o.string2buf(C):f.call(C)==="[object ArrayBuffer]"?R=new Uint8Array(C):R=C,A=s.inflateSetDictionary(this.strm,R)),A===u.Z_BUF_ERROR&&V===!0&&(A=u.Z_OK,V=!1),A!==u.Z_STREAM_END&&A!==u.Z_OK)return this.onEnd(A),this.ended=!0,!1;v.next_out&&(v.avail_out===0||A===u.Z_STREAM_END||v.avail_in===0&&(T===u.Z_FINISH||T===u.Z_SYNC_FLUSH))&&(this.options.to==="string"?(S=o.utf8border(v.output,v.next_out),F=v.next_out-S,k=o.buf2string(v.output,S),v.next_out=F,v.avail_out=y-F,F&&a.arraySet(v.output,v.output,S,F,0),this.onData(k)):this.onData(a.shrinkBuf(v.output,v.next_out))),v.avail_in===0&&v.avail_out===0&&(V=!0)}while((v.avail_in>0||v.avail_out===0)&&A!==u.Z_STREAM_END);return A===u.Z_STREAM_END&&(T=u.Z_FINISH),T===u.Z_FINISH?(A=s.inflateEnd(this.strm),this.onEnd(A),this.ended=!0,A===u.Z_OK):(T===u.Z_SYNC_FLUSH&&(this.onEnd(u.Z_OK),v.avail_out=0),!0)},d.prototype.onData=function(p){this.chunks.push(p)},d.prototype.onEnd=function(p){p===u.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=p,this.msg=this.strm.msg};function m(p,g){var v=new d(g);if(v.push(p,!0),v.err)throw v.msg||l[v.err];return v.result}function E(p,g){return g=g||{},g.raw=!0,m(p,g)}i.Inflate=d,i.inflate=m,i.inflateRaw=E,i.ungzip=m},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,n,i){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";i.assign=function(u){for(var l=Array.prototype.slice.call(arguments,1);l.length;){var c=l.shift();if(!!c){if(typeof c!="object")throw new TypeError(c+"must be non-object");for(var h in c)c.hasOwnProperty(h)&&(u[h]=c[h])}}return u},i.shrinkBuf=function(u,l){return u.length===l?u:u.subarray?u.subarray(0,l):(u.length=l,u)};var a={arraySet:function(u,l,c,h,f){if(l.subarray&&u.subarray){u.set(l.subarray(c,c+h),f);return}for(var d=0;d<h;d++)u[f+d]=l[c+d]},flattenChunks:function(u){var l,c,h,f,d,m;for(h=0,l=0,c=u.length;l<c;l++)h+=u[l].length;for(m=new Uint8Array(h),f=0,l=0,c=u.length;l<c;l++)d=u[l],m.set(d,f),f+=d.length;return m}},o={arraySet:function(u,l,c,h,f){for(var d=0;d<h;d++)u[f+d]=l[c+d]},flattenChunks:function(u){return[].concat.apply([],u)}};i.setTyped=function(u){u?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,a)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,o))},i.setTyped(s)},{}],42:[function(t,n,i){var s=t("./common"),a=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch{a=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{o=!1}for(var u=new s.Buf8(256),l=0;l<256;l++)u[l]=l>=252?6:l>=248?5:l>=240?4:l>=224?3:l>=192?2:1;u[254]=u[254]=1,i.string2buf=function(h){var f,d,m,E,p,g=h.length,v=0;for(E=0;E<g;E++)d=h.charCodeAt(E),(d&64512)===55296&&E+1<g&&(m=h.charCodeAt(E+1),(m&64512)===56320&&(d=65536+(d-55296<<10)+(m-56320),E++)),v+=d<128?1:d<2048?2:d<65536?3:4;for(f=new s.Buf8(v),p=0,E=0;p<v;E++)d=h.charCodeAt(E),(d&64512)===55296&&E+1<g&&(m=h.charCodeAt(E+1),(m&64512)===56320&&(d=65536+(d-55296<<10)+(m-56320),E++)),d<128?f[p++]=d:d<2048?(f[p++]=192|d>>>6,f[p++]=128|d&63):d<65536?(f[p++]=224|d>>>12,f[p++]=128|d>>>6&63,f[p++]=128|d&63):(f[p++]=240|d>>>18,f[p++]=128|d>>>12&63,f[p++]=128|d>>>6&63,f[p++]=128|d&63);return f};function c(h,f){if(f<65537&&(h.subarray&&o||!h.subarray&&a))return String.fromCharCode.apply(null,s.shrinkBuf(h,f));for(var d="",m=0;m<f;m++)d+=String.fromCharCode(h[m]);return d}i.buf2binstring=function(h){return c(h,h.length)},i.binstring2buf=function(h){for(var f=new s.Buf8(h.length),d=0,m=f.length;d<m;d++)f[d]=h.charCodeAt(d);return f},i.buf2string=function(h,f){var d,m,E,p,g=f||h.length,v=new Array(g*2);for(m=0,d=0;d<g;){if(E=h[d++],E<128){v[m++]=E;continue}if(p=u[E],p>4){v[m++]=65533,d+=p-1;continue}for(E&=p===2?31:p===3?15:7;p>1&&d<g;)E=E<<6|h[d++]&63,p--;if(p>1){v[m++]=65533;continue}E<65536?v[m++]=E:(E-=65536,v[m++]=55296|E>>10&1023,v[m++]=56320|E&1023)}return c(v,m)},i.utf8border=function(h,f){var d;for(f=f||h.length,f>h.length&&(f=h.length),d=f-1;d>=0&&(h[d]&192)===128;)d--;return d<0||d===0?f:d+u[h[d]]>f?d:f}},{"./common":41}],43:[function(t,n,i){function s(a,o,u,l){for(var c=a&65535|0,h=a>>>16&65535|0,f=0;u!==0;){f=u>2e3?2e3:u,u-=f;do c=c+o[l++]|0,h=h+c|0;while(--f);c%=65521,h%=65521}return c|h<<16|0}n.exports=s},{}],44:[function(t,n,i){n.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,n,i){function s(){for(var u,l=[],c=0;c<256;c++){u=c;for(var h=0;h<8;h++)u=u&1?3988292384^u>>>1:u>>>1;l[c]=u}return l}var a=s();function o(u,l,c,h){var f=a,d=h+c;u^=-1;for(var m=h;m<d;m++)u=u>>>8^f[(u^l[m])&255];return u^-1}n.exports=o},{}],46:[function(t,n,i){var s=t("../utils/common"),a=t("./trees"),o=t("./adler32"),u=t("./crc32"),l=t("./messages"),c=0,h=1,f=3,d=4,m=5,E=0,p=1,g=-2,v=-3,y=-5,C=-1,A=1,T=2,S=3,F=4,k=0,R=2,V=8,$=9,ne=15,ve=8,H=29,j=256,X=j+1+H,B=30,U=19,Z=2*X+1,oe=15,re=3,ge=258,Ce=ge+re+1,ke=32,Ie=42,Oe=69,Le=73,pt=91,nt=103,He=113,it=666,Ve=1,bt=2,gt=3,or=4,We=3;function Ct(x,Y){return x.msg=l[Y],Y}function Xr(x){return(x<<1)-(x>4?9:0)}function Gt(x){for(var Y=x.length;--Y>=0;)x[Y]=0}function Ot(x){var Y=x.state,Q=Y.pending;Q>x.avail_out&&(Q=x.avail_out),Q!==0&&(s.arraySet(x.output,Y.pending_buf,Y.pending_out,Q,x.next_out),x.next_out+=Q,Y.pending_out+=Q,x.total_out+=Q,x.avail_out-=Q,Y.pending-=Q,Y.pending===0&&(Y.pending_out=0))}function Ze(x,Y){a._tr_flush_block(x,x.block_start>=0?x.block_start:-1,x.strstart-x.block_start,Y),x.block_start=x.strstart,Ot(x.strm)}function Be(x,Y){x.pending_buf[x.pending++]=Y}function Jt(x,Y){x.pending_buf[x.pending++]=Y>>>8&255,x.pending_buf[x.pending++]=Y&255}function kn(x,Y,Q,_){var N=x.avail_in;return N>_&&(N=_),N===0?0:(x.avail_in-=N,s.arraySet(Y,x.input,x.next_in,N,Q),x.state.wrap===1?x.adler=o(x.adler,Y,N,Q):x.state.wrap===2&&(x.adler=u(x.adler,Y,N,Q)),x.next_in+=N,x.total_in+=N,N)}function Zr(x,Y){var Q=x.max_chain_length,_=x.strstart,N,K,Te=x.prev_length,me=x.nice_match,ye=x.strstart>x.w_size-Ce?x.strstart-(x.w_size-Ce):0,Pe=x.window,en=x.w_mask,st=x.prev,Ue=x.strstart+ge,mt=Pe[_+Te-1],Rt=Pe[_+Te];x.prev_length>=x.good_match&&(Q>>=2),me>x.lookahead&&(me=x.lookahead);do if(N=Y,!(Pe[N+Te]!==Rt||Pe[N+Te-1]!==mt||Pe[N]!==Pe[_]||Pe[++N]!==Pe[_+1])){_+=2,N++;do;while(Pe[++_]===Pe[++N]&&Pe[++_]===Pe[++N]&&Pe[++_]===Pe[++N]&&Pe[++_]===Pe[++N]&&Pe[++_]===Pe[++N]&&Pe[++_]===Pe[++N]&&Pe[++_]===Pe[++N]&&Pe[++_]===Pe[++N]&&_<Ue);if(K=ge-(Ue-_),_=Ue-ge,K>Te){if(x.match_start=Y,Te=K,K>=me)break;mt=Pe[_+Te-1],Rt=Pe[_+Te]}}while((Y=st[Y&en])>ye&&--Q!==0);return Te<=x.lookahead?Te:x.lookahead}function er(x){var Y=x.w_size,Q,_,N,K,Te;do{if(K=x.window_size-x.lookahead-x.strstart,x.strstart>=Y+(Y-Ce)){s.arraySet(x.window,x.window,Y,Y,0),x.match_start-=Y,x.strstart-=Y,x.block_start-=Y,_=x.hash_size,Q=_;do N=x.head[--Q],x.head[Q]=N>=Y?N-Y:0;while(--_);_=Y,Q=_;do N=x.prev[--Q],x.prev[Q]=N>=Y?N-Y:0;while(--_);K+=Y}if(x.strm.avail_in===0)break;if(_=kn(x.strm,x.window,x.strstart+x.lookahead,K),x.lookahead+=_,x.lookahead+x.insert>=re)for(Te=x.strstart-x.insert,x.ins_h=x.window[Te],x.ins_h=(x.ins_h<<x.hash_shift^x.window[Te+1])&x.hash_mask;x.insert&&(x.ins_h=(x.ins_h<<x.hash_shift^x.window[Te+re-1])&x.hash_mask,x.prev[Te&x.w_mask]=x.head[x.ins_h],x.head[x.ins_h]=Te,Te++,x.insert--,!(x.lookahead+x.insert<re)););}while(x.lookahead<Ce&&x.strm.avail_in!==0)}function Bn(x,Y){var Q=65535;for(Q>x.pending_buf_size-5&&(Q=x.pending_buf_size-5);;){if(x.lookahead<=1){if(er(x),x.lookahead===0&&Y===c)return Ve;if(x.lookahead===0)break}x.strstart+=x.lookahead,x.lookahead=0;var _=x.block_start+Q;if((x.strstart===0||x.strstart>=_)&&(x.lookahead=x.strstart-_,x.strstart=_,Ze(x,!1),x.strm.avail_out===0)||x.strstart-x.block_start>=x.w_size-Ce&&(Ze(x,!1),x.strm.avail_out===0))return Ve}return x.insert=0,Y===d?(Ze(x,!0),x.strm.avail_out===0?gt:or):(x.strstart>x.block_start&&(Ze(x,!1),x.strm.avail_out===0),Ve)}function Qr(x,Y){for(var Q,_;;){if(x.lookahead<Ce){if(er(x),x.lookahead<Ce&&Y===c)return Ve;if(x.lookahead===0)break}if(Q=0,x.lookahead>=re&&(x.ins_h=(x.ins_h<<x.hash_shift^x.window[x.strstart+re-1])&x.hash_mask,Q=x.prev[x.strstart&x.w_mask]=x.head[x.ins_h],x.head[x.ins_h]=x.strstart),Q!==0&&x.strstart-Q<=x.w_size-Ce&&(x.match_length=Zr(x,Q)),x.match_length>=re)if(_=a._tr_tally(x,x.strstart-x.match_start,x.match_length-re),x.lookahead-=x.match_length,x.match_length<=x.max_lazy_match&&x.lookahead>=re){x.match_length--;do x.strstart++,x.ins_h=(x.ins_h<<x.hash_shift^x.window[x.strstart+re-1])&x.hash_mask,Q=x.prev[x.strstart&x.w_mask]=x.head[x.ins_h],x.head[x.ins_h]=x.strstart;while(--x.match_length!==0);x.strstart++}else x.strstart+=x.match_length,x.match_length=0,x.ins_h=x.window[x.strstart],x.ins_h=(x.ins_h<<x.hash_shift^x.window[x.strstart+1])&x.hash_mask;else _=a._tr_tally(x,0,x.window[x.strstart]),x.lookahead--,x.strstart++;if(_&&(Ze(x,!1),x.strm.avail_out===0))return Ve}return x.insert=x.strstart<re-1?x.strstart:re-1,Y===d?(Ze(x,!0),x.strm.avail_out===0?gt:or):x.last_lit&&(Ze(x,!1),x.strm.avail_out===0)?Ve:bt}function ur(x,Y){for(var Q,_,N;;){if(x.lookahead<Ce){if(er(x),x.lookahead<Ce&&Y===c)return Ve;if(x.lookahead===0)break}if(Q=0,x.lookahead>=re&&(x.ins_h=(x.ins_h<<x.hash_shift^x.window[x.strstart+re-1])&x.hash_mask,Q=x.prev[x.strstart&x.w_mask]=x.head[x.ins_h],x.head[x.ins_h]=x.strstart),x.prev_length=x.match_length,x.prev_match=x.match_start,x.match_length=re-1,Q!==0&&x.prev_length<x.max_lazy_match&&x.strstart-Q<=x.w_size-Ce&&(x.match_length=Zr(x,Q),x.match_length<=5&&(x.strategy===A||x.match_length===re&&x.strstart-x.match_start>4096)&&(x.match_length=re-1)),x.prev_length>=re&&x.match_length<=x.prev_length){N=x.strstart+x.lookahead-re,_=a._tr_tally(x,x.strstart-1-x.prev_match,x.prev_length-re),x.lookahead-=x.prev_length-1,x.prev_length-=2;do++x.strstart<=N&&(x.ins_h=(x.ins_h<<x.hash_shift^x.window[x.strstart+re-1])&x.hash_mask,Q=x.prev[x.strstart&x.w_mask]=x.head[x.ins_h],x.head[x.ins_h]=x.strstart);while(--x.prev_length!==0);if(x.match_available=0,x.match_length=re-1,x.strstart++,_&&(Ze(x,!1),x.strm.avail_out===0))return Ve}else if(x.match_available){if(_=a._tr_tally(x,0,x.window[x.strstart-1]),_&&Ze(x,!1),x.strstart++,x.lookahead--,x.strm.avail_out===0)return Ve}else x.match_available=1,x.strstart++,x.lookahead--}return x.match_available&&(_=a._tr_tally(x,0,x.window[x.strstart-1]),x.match_available=0),x.insert=x.strstart<re-1?x.strstart:re-1,Y===d?(Ze(x,!0),x.strm.avail_out===0?gt:or):x.last_lit&&(Ze(x,!1),x.strm.avail_out===0)?Ve:bt}function On(x,Y){for(var Q,_,N,K,Te=x.window;;){if(x.lookahead<=ge){if(er(x),x.lookahead<=ge&&Y===c)return Ve;if(x.lookahead===0)break}if(x.match_length=0,x.lookahead>=re&&x.strstart>0&&(N=x.strstart-1,_=Te[N],_===Te[++N]&&_===Te[++N]&&_===Te[++N])){K=x.strstart+ge;do;while(_===Te[++N]&&_===Te[++N]&&_===Te[++N]&&_===Te[++N]&&_===Te[++N]&&_===Te[++N]&&_===Te[++N]&&_===Te[++N]&&N<K);x.match_length=ge-(K-N),x.match_length>x.lookahead&&(x.match_length=x.lookahead)}if(x.match_length>=re?(Q=a._tr_tally(x,1,x.match_length-re),x.lookahead-=x.match_length,x.strstart+=x.match_length,x.match_length=0):(Q=a._tr_tally(x,0,x.window[x.strstart]),x.lookahead--,x.strstart++),Q&&(Ze(x,!1),x.strm.avail_out===0))return Ve}return x.insert=0,Y===d?(Ze(x,!0),x.strm.avail_out===0?gt:or):x.last_lit&&(Ze(x,!1),x.strm.avail_out===0)?Ve:bt}function Jr(x,Y){for(var Q;;){if(x.lookahead===0&&(er(x),x.lookahead===0)){if(Y===c)return Ve;break}if(x.match_length=0,Q=a._tr_tally(x,0,x.window[x.strstart]),x.lookahead--,x.strstart++,Q&&(Ze(x,!1),x.strm.avail_out===0))return Ve}return x.insert=0,Y===d?(Ze(x,!0),x.strm.avail_out===0?gt:or):x.last_lit&&(Ze(x,!1),x.strm.avail_out===0)?Ve:bt}function Tt(x,Y,Q,_,N){this.good_length=x,this.max_lazy=Y,this.nice_length=Q,this.max_chain=_,this.func=N}var lr;lr=[new Tt(0,0,0,0,Bn),new Tt(4,4,8,4,Qr),new Tt(4,5,16,8,Qr),new Tt(4,6,32,32,Qr),new Tt(4,4,16,16,ur),new Tt(8,16,32,32,ur),new Tt(8,16,128,128,ur),new Tt(8,32,128,256,ur),new Tt(32,128,258,1024,ur),new Tt(32,258,258,4096,ur)];function ri(x){x.window_size=2*x.w_size,Gt(x.head),x.max_lazy_match=lr[x.level].max_lazy,x.good_match=lr[x.level].good_length,x.nice_match=lr[x.level].nice_length,x.max_chain_length=lr[x.level].max_chain,x.strstart=0,x.block_start=0,x.lookahead=0,x.insert=0,x.match_length=x.prev_length=re-1,x.match_available=0,x.ins_h=0}function L(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=V,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new s.Buf16(Z*2),this.dyn_dtree=new s.Buf16((2*B+1)*2),this.bl_tree=new s.Buf16((2*U+1)*2),Gt(this.dyn_ltree),Gt(this.dyn_dtree),Gt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new s.Buf16(oe+1),this.heap=new s.Buf16(2*X+1),Gt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new s.Buf16(2*X+1),Gt(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ie(x){var Y;return!x||!x.state?Ct(x,g):(x.total_in=x.total_out=0,x.data_type=R,Y=x.state,Y.pending=0,Y.pending_out=0,Y.wrap<0&&(Y.wrap=-Y.wrap),Y.status=Y.wrap?Ie:He,x.adler=Y.wrap===2?0:1,Y.last_flush=c,a._tr_init(Y),E)}function le(x){var Y=ie(x);return Y===E&&ri(x.state),Y}function Ee(x,Y){return!x||!x.state||x.state.wrap!==2?g:(x.state.gzhead=Y,E)}function P(x,Y,Q,_,N,K){if(!x)return g;var Te=1;if(Y===C&&(Y=6),_<0?(Te=0,_=-_):_>15&&(Te=2,_-=16),N<1||N>$||Q!==V||_<8||_>15||Y<0||Y>9||K<0||K>F)return Ct(x,g);_===8&&(_=9);var me=new L;return x.state=me,me.strm=x,me.wrap=Te,me.gzhead=null,me.w_bits=_,me.w_size=1<<me.w_bits,me.w_mask=me.w_size-1,me.hash_bits=N+7,me.hash_size=1<<me.hash_bits,me.hash_mask=me.hash_size-1,me.hash_shift=~~((me.hash_bits+re-1)/re),me.window=new s.Buf8(me.w_size*2),me.head=new s.Buf16(me.hash_size),me.prev=new s.Buf16(me.w_size),me.lit_bufsize=1<<N+6,me.pending_buf_size=me.lit_bufsize*4,me.pending_buf=new s.Buf8(me.pending_buf_size),me.d_buf=1*me.lit_bufsize,me.l_buf=(1+2)*me.lit_bufsize,me.level=Y,me.strategy=K,me.method=Q,le(x)}function ee(x,Y){return P(x,Y,V,ne,ve,k)}function w(x,Y){var Q,_,N,K;if(!x||!x.state||Y>m||Y<0)return x?Ct(x,g):g;if(_=x.state,!x.output||!x.input&&x.avail_in!==0||_.status===it&&Y!==d)return Ct(x,x.avail_out===0?y:g);if(_.strm=x,Q=_.last_flush,_.last_flush=Y,_.status===Ie)if(_.wrap===2)x.adler=0,Be(_,31),Be(_,139),Be(_,8),_.gzhead?(Be(_,(_.gzhead.text?1:0)+(_.gzhead.hcrc?2:0)+(_.gzhead.extra?4:0)+(_.gzhead.name?8:0)+(_.gzhead.comment?16:0)),Be(_,_.gzhead.time&255),Be(_,_.gzhead.time>>8&255),Be(_,_.gzhead.time>>16&255),Be(_,_.gzhead.time>>24&255),Be(_,_.level===9?2:_.strategy>=T||_.level<2?4:0),Be(_,_.gzhead.os&255),_.gzhead.extra&&_.gzhead.extra.length&&(Be(_,_.gzhead.extra.length&255),Be(_,_.gzhead.extra.length>>8&255)),_.gzhead.hcrc&&(x.adler=u(x.adler,_.pending_buf,_.pending,0)),_.gzindex=0,_.status=Oe):(Be(_,0),Be(_,0),Be(_,0),Be(_,0),Be(_,0),Be(_,_.level===9?2:_.strategy>=T||_.level<2?4:0),Be(_,We),_.status=He);else{var Te=V+(_.w_bits-8<<4)<<8,me=-1;_.strategy>=T||_.level<2?me=0:_.level<6?me=1:_.level===6?me=2:me=3,Te|=me<<6,_.strstart!==0&&(Te|=ke),Te+=31-Te%31,_.status=He,Jt(_,Te),_.strstart!==0&&(Jt(_,x.adler>>>16),Jt(_,x.adler&65535)),x.adler=1}if(_.status===Oe)if(_.gzhead.extra){for(N=_.pending;_.gzindex<(_.gzhead.extra.length&65535)&&!(_.pending===_.pending_buf_size&&(_.gzhead.hcrc&&_.pending>N&&(x.adler=u(x.adler,_.pending_buf,_.pending-N,N)),Ot(x),N=_.pending,_.pending===_.pending_buf_size));)Be(_,_.gzhead.extra[_.gzindex]&255),_.gzindex++;_.gzhead.hcrc&&_.pending>N&&(x.adler=u(x.adler,_.pending_buf,_.pending-N,N)),_.gzindex===_.gzhead.extra.length&&(_.gzindex=0,_.status=Le)}else _.status=Le;if(_.status===Le)if(_.gzhead.name){N=_.pending;do{if(_.pending===_.pending_buf_size&&(_.gzhead.hcrc&&_.pending>N&&(x.adler=u(x.adler,_.pending_buf,_.pending-N,N)),Ot(x),N=_.pending,_.pending===_.pending_buf_size)){K=1;break}_.gzindex<_.gzhead.name.length?K=_.gzhead.name.charCodeAt(_.gzindex++)&255:K=0,Be(_,K)}while(K!==0);_.gzhead.hcrc&&_.pending>N&&(x.adler=u(x.adler,_.pending_buf,_.pending-N,N)),K===0&&(_.gzindex=0,_.status=pt)}else _.status=pt;if(_.status===pt)if(_.gzhead.comment){N=_.pending;do{if(_.pending===_.pending_buf_size&&(_.gzhead.hcrc&&_.pending>N&&(x.adler=u(x.adler,_.pending_buf,_.pending-N,N)),Ot(x),N=_.pending,_.pending===_.pending_buf_size)){K=1;break}_.gzindex<_.gzhead.comment.length?K=_.gzhead.comment.charCodeAt(_.gzindex++)&255:K=0,Be(_,K)}while(K!==0);_.gzhead.hcrc&&_.pending>N&&(x.adler=u(x.adler,_.pending_buf,_.pending-N,N)),K===0&&(_.status=nt)}else _.status=nt;if(_.status===nt&&(_.gzhead.hcrc?(_.pending+2>_.pending_buf_size&&Ot(x),_.pending+2<=_.pending_buf_size&&(Be(_,x.adler&255),Be(_,x.adler>>8&255),x.adler=0,_.status=He)):_.status=He),_.pending!==0){if(Ot(x),x.avail_out===0)return _.last_flush=-1,E}else if(x.avail_in===0&&Xr(Y)<=Xr(Q)&&Y!==d)return Ct(x,y);if(_.status===it&&x.avail_in!==0)return Ct(x,y);if(x.avail_in!==0||_.lookahead!==0||Y!==c&&_.status!==it){var ye=_.strategy===T?Jr(_,Y):_.strategy===S?On(_,Y):lr[_.level].func(_,Y);if((ye===gt||ye===or)&&(_.status=it),ye===Ve||ye===gt)return x.avail_out===0&&(_.last_flush=-1),E;if(ye===bt&&(Y===h?a._tr_align(_):Y!==m&&(a._tr_stored_block(_,0,0,!1),Y===f&&(Gt(_.head),_.lookahead===0&&(_.strstart=0,_.block_start=0,_.insert=0))),Ot(x),x.avail_out===0))return _.last_flush=-1,E}return Y!==d?E:_.wrap<=0?p:(_.wrap===2?(Be(_,x.adler&255),Be(_,x.adler>>8&255),Be(_,x.adler>>16&255),Be(_,x.adler>>24&255),Be(_,x.total_in&255),Be(_,x.total_in>>8&255),Be(_,x.total_in>>16&255),Be(_,x.total_in>>24&255)):(Jt(_,x.adler>>>16),Jt(_,x.adler&65535)),Ot(x),_.wrap>0&&(_.wrap=-_.wrap),_.pending!==0?E:p)}function ae(x){var Y;return!x||!x.state?g:(Y=x.state.status,Y!==Ie&&Y!==Oe&&Y!==Le&&Y!==pt&&Y!==nt&&Y!==He&&Y!==it?Ct(x,g):(x.state=null,Y===He?Ct(x,v):E))}function we(x,Y){var Q=Y.length,_,N,K,Te,me,ye,Pe,en;if(!x||!x.state||(_=x.state,Te=_.wrap,Te===2||Te===1&&_.status!==Ie||_.lookahead))return g;for(Te===1&&(x.adler=o(x.adler,Y,Q,0)),_.wrap=0,Q>=_.w_size&&(Te===0&&(Gt(_.head),_.strstart=0,_.block_start=0,_.insert=0),en=new s.Buf8(_.w_size),s.arraySet(en,Y,Q-_.w_size,_.w_size,0),Y=en,Q=_.w_size),me=x.avail_in,ye=x.next_in,Pe=x.input,x.avail_in=Q,x.next_in=0,x.input=Y,er(_);_.lookahead>=re;){N=_.strstart,K=_.lookahead-(re-1);do _.ins_h=(_.ins_h<<_.hash_shift^_.window[N+re-1])&_.hash_mask,_.prev[N&_.w_mask]=_.head[_.ins_h],_.head[_.ins_h]=N,N++;while(--K);_.strstart=N,_.lookahead=re-1,er(_)}return _.strstart+=_.lookahead,_.block_start=_.strstart,_.insert=_.lookahead,_.lookahead=0,_.match_length=_.prev_length=re-1,_.match_available=0,x.next_in=ye,x.input=Pe,x.avail_in=me,_.wrap=Te,E}i.deflateInit=ee,i.deflateInit2=P,i.deflateReset=le,i.deflateResetKeep=ie,i.deflateSetHeader=Ee,i.deflate=w,i.deflateEnd=ae,i.deflateSetDictionary=we,i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,n,i){function s(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}n.exports=s},{}],48:[function(t,n,i){var s=30,a=12;n.exports=function(u,l){var c,h,f,d,m,E,p,g,v,y,C,A,T,S,F,k,R,V,$,ne,ve,H,j,X,B;c=u.state,h=u.next_in,X=u.input,f=h+(u.avail_in-5),d=u.next_out,B=u.output,m=d-(l-u.avail_out),E=d+(u.avail_out-257),p=c.dmax,g=c.wsize,v=c.whave,y=c.wnext,C=c.window,A=c.hold,T=c.bits,S=c.lencode,F=c.distcode,k=(1<<c.lenbits)-1,R=(1<<c.distbits)-1;e:do{T<15&&(A+=X[h++]<<T,T+=8,A+=X[h++]<<T,T+=8),V=S[A&k];t:for(;;){if($=V>>>24,A>>>=$,T-=$,$=V>>>16&255,$===0)B[d++]=V&65535;else if($&16){ne=V&65535,$&=15,$&&(T<$&&(A+=X[h++]<<T,T+=8),ne+=A&(1<<$)-1,A>>>=$,T-=$),T<15&&(A+=X[h++]<<T,T+=8,A+=X[h++]<<T,T+=8),V=F[A&R];r:for(;;){if($=V>>>24,A>>>=$,T-=$,$=V>>>16&255,$&16){if(ve=V&65535,$&=15,T<$&&(A+=X[h++]<<T,T+=8,T<$&&(A+=X[h++]<<T,T+=8)),ve+=A&(1<<$)-1,ve>p){u.msg="invalid distance too far back",c.mode=s;break e}if(A>>>=$,T-=$,$=d-m,ve>$){if($=ve-$,$>v&&c.sane){u.msg="invalid distance too far back",c.mode=s;break e}if(H=0,j=C,y===0){if(H+=g-$,$<ne){ne-=$;do B[d++]=C[H++];while(--$);H=d-ve,j=B}}else if(y<$){if(H+=g+y-$,$-=y,$<ne){ne-=$;do B[d++]=C[H++];while(--$);if(H=0,y<ne){$=y,ne-=$;do B[d++]=C[H++];while(--$);H=d-ve,j=B}}}else if(H+=y-$,$<ne){ne-=$;do B[d++]=C[H++];while(--$);H=d-ve,j=B}for(;ne>2;)B[d++]=j[H++],B[d++]=j[H++],B[d++]=j[H++],ne-=3;ne&&(B[d++]=j[H++],ne>1&&(B[d++]=j[H++]))}else{H=d-ve;do B[d++]=B[H++],B[d++]=B[H++],B[d++]=B[H++],ne-=3;while(ne>2);ne&&(B[d++]=B[H++],ne>1&&(B[d++]=B[H++]))}}else if(($&64)===0){V=F[(V&65535)+(A&(1<<$)-1)];continue r}else{u.msg="invalid distance code",c.mode=s;break e}break}}else if(($&64)===0){V=S[(V&65535)+(A&(1<<$)-1)];continue t}else if($&32){c.mode=a;break e}else{u.msg="invalid literal/length code",c.mode=s;break e}break}}while(h<f&&d<E);ne=T>>3,h-=ne,T-=ne<<3,A&=(1<<T)-1,u.next_in=h,u.next_out=d,u.avail_in=h<f?5+(f-h):5-(h-f),u.avail_out=d<E?257+(E-d):257-(d-E),c.hold=A,c.bits=T}},{}],49:[function(t,n,i){var s=t("../utils/common"),a=t("./adler32"),o=t("./crc32"),u=t("./inffast"),l=t("./inftrees"),c=0,h=1,f=2,d=4,m=5,E=6,p=0,g=1,v=2,y=-2,C=-3,A=-4,T=-5,S=8,F=1,k=2,R=3,V=4,$=5,ne=6,ve=7,H=8,j=9,X=10,B=11,U=12,Z=13,oe=14,re=15,ge=16,Ce=17,ke=18,Ie=19,Oe=20,Le=21,pt=22,nt=23,He=24,it=25,Ve=26,bt=27,gt=28,or=29,We=30,Ct=31,Xr=32,Gt=852,Ot=592,Ze=15,Be=Ze;function Jt(P){return(P>>>24&255)+(P>>>8&65280)+((P&65280)<<8)+((P&255)<<24)}function kn(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new s.Buf16(320),this.work=new s.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function Zr(P){var ee;return!P||!P.state?y:(ee=P.state,P.total_in=P.total_out=ee.total=0,P.msg="",ee.wrap&&(P.adler=ee.wrap&1),ee.mode=F,ee.last=0,ee.havedict=0,ee.dmax=32768,ee.head=null,ee.hold=0,ee.bits=0,ee.lencode=ee.lendyn=new s.Buf32(Gt),ee.distcode=ee.distdyn=new s.Buf32(Ot),ee.sane=1,ee.back=-1,p)}function er(P){var ee;return!P||!P.state?y:(ee=P.state,ee.wsize=0,ee.whave=0,ee.wnext=0,Zr(P))}function Bn(P,ee){var w,ae;return!P||!P.state||(ae=P.state,ee<0?(w=0,ee=-ee):(w=(ee>>4)+1,ee<48&&(ee&=15)),ee&&(ee<8||ee>15))?y:(ae.window!==null&&ae.wbits!==ee&&(ae.window=null),ae.wrap=w,ae.wbits=ee,er(P))}function Qr(P,ee){var w,ae;return P?(ae=new kn,P.state=ae,ae.window=null,w=Bn(P,ee),w!==p&&(P.state=null),w):y}function ur(P){return Qr(P,Be)}var On=!0,Jr,Tt;function lr(P){if(On){var ee;for(Jr=new s.Buf32(512),Tt=new s.Buf32(32),ee=0;ee<144;)P.lens[ee++]=8;for(;ee<256;)P.lens[ee++]=9;for(;ee<280;)P.lens[ee++]=7;for(;ee<288;)P.lens[ee++]=8;for(l(h,P.lens,0,288,Jr,0,P.work,{bits:9}),ee=0;ee<32;)P.lens[ee++]=5;l(f,P.lens,0,32,Tt,0,P.work,{bits:5}),On=!1}P.lencode=Jr,P.lenbits=9,P.distcode=Tt,P.distbits=5}function ri(P,ee,w,ae){var we,x=P.state;return x.window===null&&(x.wsize=1<<x.wbits,x.wnext=0,x.whave=0,x.window=new s.Buf8(x.wsize)),ae>=x.wsize?(s.arraySet(x.window,ee,w-x.wsize,x.wsize,0),x.wnext=0,x.whave=x.wsize):(we=x.wsize-x.wnext,we>ae&&(we=ae),s.arraySet(x.window,ee,w-ae,we,x.wnext),ae-=we,ae?(s.arraySet(x.window,ee,w-ae,ae,0),x.wnext=ae,x.whave=x.wsize):(x.wnext+=we,x.wnext===x.wsize&&(x.wnext=0),x.whave<x.wsize&&(x.whave+=we))),0}function L(P,ee){var w,ae,we,x,Y,Q,_,N,K,Te,me,ye,Pe,en,st=0,Ue,mt,Rt,Wt,ds,ps,ft,cr,St=new s.Buf8(4),tn,Or,qo=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!P||!P.state||!P.output||!P.input&&P.avail_in!==0)return y;w=P.state,w.mode===U&&(w.mode=Z),Y=P.next_out,we=P.output,_=P.avail_out,x=P.next_in,ae=P.input,Q=P.avail_in,N=w.hold,K=w.bits,Te=Q,me=_,cr=p;e:for(;;)switch(w.mode){case F:if(w.wrap===0){w.mode=Z;break}for(;K<16;){if(Q===0)break e;Q--,N+=ae[x++]<<K,K+=8}if(w.wrap&2&&N===35615){w.check=0,St[0]=N&255,St[1]=N>>>8&255,w.check=o(w.check,St,2,0),N=0,K=0,w.mode=k;break}if(w.flags=0,w.head&&(w.head.done=!1),!(w.wrap&1)||(((N&255)<<8)+(N>>8))%31){P.msg="incorrect header check",w.mode=We;break}if((N&15)!==S){P.msg="unknown compression method",w.mode=We;break}if(N>>>=4,K-=4,ft=(N&15)+8,w.wbits===0)w.wbits=ft;else if(ft>w.wbits){P.msg="invalid window size",w.mode=We;break}w.dmax=1<<ft,P.adler=w.check=1,w.mode=N&512?X:U,N=0,K=0;break;case k:for(;K<16;){if(Q===0)break e;Q--,N+=ae[x++]<<K,K+=8}if(w.flags=N,(w.flags&255)!==S){P.msg="unknown compression method",w.mode=We;break}if(w.flags&57344){P.msg="unknown header flags set",w.mode=We;break}w.head&&(w.head.text=N>>8&1),w.flags&512&&(St[0]=N&255,St[1]=N>>>8&255,w.check=o(w.check,St,2,0)),N=0,K=0,w.mode=R;case R:for(;K<32;){if(Q===0)break e;Q--,N+=ae[x++]<<K,K+=8}w.head&&(w.head.time=N),w.flags&512&&(St[0]=N&255,St[1]=N>>>8&255,St[2]=N>>>16&255,St[3]=N>>>24&255,w.check=o(w.check,St,4,0)),N=0,K=0,w.mode=V;case V:for(;K<16;){if(Q===0)break e;Q--,N+=ae[x++]<<K,K+=8}w.head&&(w.head.xflags=N&255,w.head.os=N>>8),w.flags&512&&(St[0]=N&255,St[1]=N>>>8&255,w.check=o(w.check,St,2,0)),N=0,K=0,w.mode=$;case $:if(w.flags&1024){for(;K<16;){if(Q===0)break e;Q--,N+=ae[x++]<<K,K+=8}w.length=N,w.head&&(w.head.extra_len=N),w.flags&512&&(St[0]=N&255,St[1]=N>>>8&255,w.check=o(w.check,St,2,0)),N=0,K=0}else w.head&&(w.head.extra=null);w.mode=ne;case ne:if(w.flags&1024&&(ye=w.length,ye>Q&&(ye=Q),ye&&(w.head&&(ft=w.head.extra_len-w.length,w.head.extra||(w.head.extra=new Array(w.head.extra_len)),s.arraySet(w.head.extra,ae,x,ye,ft)),w.flags&512&&(w.check=o(w.check,ae,ye,x)),Q-=ye,x+=ye,w.length-=ye),w.length))break e;w.length=0,w.mode=ve;case ve:if(w.flags&2048){if(Q===0)break e;ye=0;do ft=ae[x+ye++],w.head&&ft&&w.length<65536&&(w.head.name+=String.fromCharCode(ft));while(ft&&ye<Q);if(w.flags&512&&(w.check=o(w.check,ae,ye,x)),Q-=ye,x+=ye,ft)break e}else w.head&&(w.head.name=null);w.length=0,w.mode=H;case H:if(w.flags&4096){if(Q===0)break e;ye=0;do ft=ae[x+ye++],w.head&&ft&&w.length<65536&&(w.head.comment+=String.fromCharCode(ft));while(ft&&ye<Q);if(w.flags&512&&(w.check=o(w.check,ae,ye,x)),Q-=ye,x+=ye,ft)break e}else w.head&&(w.head.comment=null);w.mode=j;case j:if(w.flags&512){for(;K<16;){if(Q===0)break e;Q--,N+=ae[x++]<<K,K+=8}if(N!==(w.check&65535)){P.msg="header crc mismatch",w.mode=We;break}N=0,K=0}w.head&&(w.head.hcrc=w.flags>>9&1,w.head.done=!0),P.adler=w.check=0,w.mode=U;break;case X:for(;K<32;){if(Q===0)break e;Q--,N+=ae[x++]<<K,K+=8}P.adler=w.check=Jt(N),N=0,K=0,w.mode=B;case B:if(w.havedict===0)return P.next_out=Y,P.avail_out=_,P.next_in=x,P.avail_in=Q,w.hold=N,w.bits=K,v;P.adler=w.check=1,w.mode=U;case U:if(ee===m||ee===E)break e;case Z:if(w.last){N>>>=K&7,K-=K&7,w.mode=bt;break}for(;K<3;){if(Q===0)break e;Q--,N+=ae[x++]<<K,K+=8}switch(w.last=N&1,N>>>=1,K-=1,N&3){case 0:w.mode=oe;break;case 1:if(lr(w),w.mode=Oe,ee===E){N>>>=2,K-=2;break e}break;case 2:w.mode=Ce;break;case 3:P.msg="invalid block type",w.mode=We}N>>>=2,K-=2;break;case oe:for(N>>>=K&7,K-=K&7;K<32;){if(Q===0)break e;Q--,N+=ae[x++]<<K,K+=8}if((N&65535)!==(N>>>16^65535)){P.msg="invalid stored block lengths",w.mode=We;break}if(w.length=N&65535,N=0,K=0,w.mode=re,ee===E)break e;case re:w.mode=ge;case ge:if(ye=w.length,ye){if(ye>Q&&(ye=Q),ye>_&&(ye=_),ye===0)break e;s.arraySet(we,ae,x,ye,Y),Q-=ye,x+=ye,_-=ye,Y+=ye,w.length-=ye;break}w.mode=U;break;case Ce:for(;K<14;){if(Q===0)break e;Q--,N+=ae[x++]<<K,K+=8}if(w.nlen=(N&31)+257,N>>>=5,K-=5,w.ndist=(N&31)+1,N>>>=5,K-=5,w.ncode=(N&15)+4,N>>>=4,K-=4,w.nlen>286||w.ndist>30){P.msg="too many length or distance symbols",w.mode=We;break}w.have=0,w.mode=ke;case ke:for(;w.have<w.ncode;){for(;K<3;){if(Q===0)break e;Q--,N+=ae[x++]<<K,K+=8}w.lens[qo[w.have++]]=N&7,N>>>=3,K-=3}for(;w.have<19;)w.lens[qo[w.have++]]=0;if(w.lencode=w.lendyn,w.lenbits=7,tn={bits:w.lenbits},cr=l(c,w.lens,0,19,w.lencode,0,w.work,tn),w.lenbits=tn.bits,cr){P.msg="invalid code lengths set",w.mode=We;break}w.have=0,w.mode=Ie;case Ie:for(;w.have<w.nlen+w.ndist;){for(;st=w.lencode[N&(1<<w.lenbits)-1],Ue=st>>>24,mt=st>>>16&255,Rt=st&65535,!(Ue<=K);){if(Q===0)break e;Q--,N+=ae[x++]<<K,K+=8}if(Rt<16)N>>>=Ue,K-=Ue,w.lens[w.have++]=Rt;else{if(Rt===16){for(Or=Ue+2;K<Or;){if(Q===0)break e;Q--,N+=ae[x++]<<K,K+=8}if(N>>>=Ue,K-=Ue,w.have===0){P.msg="invalid bit length repeat",w.mode=We;break}ft=w.lens[w.have-1],ye=3+(N&3),N>>>=2,K-=2}else if(Rt===17){for(Or=Ue+3;K<Or;){if(Q===0)break e;Q--,N+=ae[x++]<<K,K+=8}N>>>=Ue,K-=Ue,ft=0,ye=3+(N&7),N>>>=3,K-=3}else{for(Or=Ue+7;K<Or;){if(Q===0)break e;Q--,N+=ae[x++]<<K,K+=8}N>>>=Ue,K-=Ue,ft=0,ye=11+(N&127),N>>>=7,K-=7}if(w.have+ye>w.nlen+w.ndist){P.msg="invalid bit length repeat",w.mode=We;break}for(;ye--;)w.lens[w.have++]=ft}}if(w.mode===We)break;if(w.lens[256]===0){P.msg="invalid code -- missing end-of-block",w.mode=We;break}if(w.lenbits=9,tn={bits:w.lenbits},cr=l(h,w.lens,0,w.nlen,w.lencode,0,w.work,tn),w.lenbits=tn.bits,cr){P.msg="invalid literal/lengths set",w.mode=We;break}if(w.distbits=6,w.distcode=w.distdyn,tn={bits:w.distbits},cr=l(f,w.lens,w.nlen,w.ndist,w.distcode,0,w.work,tn),w.distbits=tn.bits,cr){P.msg="invalid distances set",w.mode=We;break}if(w.mode=Oe,ee===E)break e;case Oe:w.mode=Le;case Le:if(Q>=6&&_>=258){P.next_out=Y,P.avail_out=_,P.next_in=x,P.avail_in=Q,w.hold=N,w.bits=K,u(P,me),Y=P.next_out,we=P.output,_=P.avail_out,x=P.next_in,ae=P.input,Q=P.avail_in,N=w.hold,K=w.bits,w.mode===U&&(w.back=-1);break}for(w.back=0;st=w.lencode[N&(1<<w.lenbits)-1],Ue=st>>>24,mt=st>>>16&255,Rt=st&65535,!(Ue<=K);){if(Q===0)break e;Q--,N+=ae[x++]<<K,K+=8}if(mt&&(mt&240)===0){for(Wt=Ue,ds=mt,ps=Rt;st=w.lencode[ps+((N&(1<<Wt+ds)-1)>>Wt)],Ue=st>>>24,mt=st>>>16&255,Rt=st&65535,!(Wt+Ue<=K);){if(Q===0)break e;Q--,N+=ae[x++]<<K,K+=8}N>>>=Wt,K-=Wt,w.back+=Wt}if(N>>>=Ue,K-=Ue,w.back+=Ue,w.length=Rt,mt===0){w.mode=Ve;break}if(mt&32){w.back=-1,w.mode=U;break}if(mt&64){P.msg="invalid literal/length code",w.mode=We;break}w.extra=mt&15,w.mode=pt;case pt:if(w.extra){for(Or=w.extra;K<Or;){if(Q===0)break e;Q--,N+=ae[x++]<<K,K+=8}w.length+=N&(1<<w.extra)-1,N>>>=w.extra,K-=w.extra,w.back+=w.extra}w.was=w.length,w.mode=nt;case nt:for(;st=w.distcode[N&(1<<w.distbits)-1],Ue=st>>>24,mt=st>>>16&255,Rt=st&65535,!(Ue<=K);){if(Q===0)break e;Q--,N+=ae[x++]<<K,K+=8}if((mt&240)===0){for(Wt=Ue,ds=mt,ps=Rt;st=w.distcode[ps+((N&(1<<Wt+ds)-1)>>Wt)],Ue=st>>>24,mt=st>>>16&255,Rt=st&65535,!(Wt+Ue<=K);){if(Q===0)break e;Q--,N+=ae[x++]<<K,K+=8}N>>>=Wt,K-=Wt,w.back+=Wt}if(N>>>=Ue,K-=Ue,w.back+=Ue,mt&64){P.msg="invalid distance code",w.mode=We;break}w.offset=Rt,w.extra=mt&15,w.mode=He;case He:if(w.extra){for(Or=w.extra;K<Or;){if(Q===0)break e;Q--,N+=ae[x++]<<K,K+=8}w.offset+=N&(1<<w.extra)-1,N>>>=w.extra,K-=w.extra,w.back+=w.extra}if(w.offset>w.dmax){P.msg="invalid distance too far back",w.mode=We;break}w.mode=it;case it:if(_===0)break e;if(ye=me-_,w.offset>ye){if(ye=w.offset-ye,ye>w.whave&&w.sane){P.msg="invalid distance too far back",w.mode=We;break}ye>w.wnext?(ye-=w.wnext,Pe=w.wsize-ye):Pe=w.wnext-ye,ye>w.length&&(ye=w.length),en=w.window}else en=we,Pe=Y-w.offset,ye=w.length;ye>_&&(ye=_),_-=ye,w.length-=ye;do we[Y++]=en[Pe++];while(--ye);w.length===0&&(w.mode=Le);break;case Ve:if(_===0)break e;we[Y++]=w.length,_--,w.mode=Le;break;case bt:if(w.wrap){for(;K<32;){if(Q===0)break e;Q--,N|=ae[x++]<<K,K+=8}if(me-=_,P.total_out+=me,w.total+=me,me&&(P.adler=w.check=w.flags?o(w.check,we,me,Y-me):a(w.check,we,me,Y-me)),me=_,(w.flags?N:Jt(N))!==w.check){P.msg="incorrect data check",w.mode=We;break}N=0,K=0}w.mode=gt;case gt:if(w.wrap&&w.flags){for(;K<32;){if(Q===0)break e;Q--,N+=ae[x++]<<K,K+=8}if(N!==(w.total&4294967295)){P.msg="incorrect length check",w.mode=We;break}N=0,K=0}w.mode=or;case or:cr=g;break e;case We:cr=C;break e;case Ct:return A;case Xr:default:return y}return P.next_out=Y,P.avail_out=_,P.next_in=x,P.avail_in=Q,w.hold=N,w.bits=K,(w.wsize||me!==P.avail_out&&w.mode<We&&(w.mode<bt||ee!==d))&&ri(P,P.output,P.next_out,me-P.avail_out),Te-=P.avail_in,me-=P.avail_out,P.total_in+=Te,P.total_out+=me,w.total+=me,w.wrap&&me&&(P.adler=w.check=w.flags?o(w.check,we,me,P.next_out-me):a(w.check,we,me,P.next_out-me)),P.data_type=w.bits+(w.last?64:0)+(w.mode===U?128:0)+(w.mode===Oe||w.mode===re?256:0),(Te===0&&me===0||ee===d)&&cr===p&&(cr=T),cr}function ie(P){if(!P||!P.state)return y;var ee=P.state;return ee.window&&(ee.window=null),P.state=null,p}function le(P,ee){var w;return!P||!P.state||(w=P.state,(w.wrap&2)===0)?y:(w.head=ee,ee.done=!1,p)}function Ee(P,ee){var w=ee.length,ae,we,x;return!P||!P.state||(ae=P.state,ae.wrap!==0&&ae.mode!==B)?y:ae.mode===B&&(we=1,we=a(we,ee,w,0),we!==ae.check)?C:(x=ri(P,ee,w,w),x?(ae.mode=Ct,A):(ae.havedict=1,p))}i.inflateReset=er,i.inflateReset2=Bn,i.inflateResetKeep=Zr,i.inflateInit=ur,i.inflateInit2=Qr,i.inflate=L,i.inflateEnd=ie,i.inflateGetHeader=le,i.inflateSetDictionary=Ee,i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,n,i){var s=t("../utils/common"),a=15,o=852,u=592,l=0,c=1,h=2,f=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],d=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],m=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],E=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];n.exports=function(g,v,y,C,A,T,S,F){var k=F.bits,R=0,V=0,$=0,ne=0,ve=0,H=0,j=0,X=0,B=0,U=0,Z,oe,re,ge,Ce,ke=null,Ie=0,Oe,Le=new s.Buf16(a+1),pt=new s.Buf16(a+1),nt=null,He=0,it,Ve,bt;for(R=0;R<=a;R++)Le[R]=0;for(V=0;V<C;V++)Le[v[y+V]]++;for(ve=k,ne=a;ne>=1&&Le[ne]===0;ne--);if(ve>ne&&(ve=ne),ne===0)return A[T++]=1<<24|64<<16|0,A[T++]=1<<24|64<<16|0,F.bits=1,0;for($=1;$<ne&&Le[$]===0;$++);for(ve<$&&(ve=$),X=1,R=1;R<=a;R++)if(X<<=1,X-=Le[R],X<0)return-1;if(X>0&&(g===l||ne!==1))return-1;for(pt[1]=0,R=1;R<a;R++)pt[R+1]=pt[R]+Le[R];for(V=0;V<C;V++)v[y+V]!==0&&(S[pt[v[y+V]]++]=V);if(g===l?(ke=nt=S,Oe=19):g===c?(ke=f,Ie-=257,nt=d,He-=257,Oe=256):(ke=m,nt=E,Oe=-1),U=0,V=0,R=$,Ce=T,H=ve,j=0,re=-1,B=1<<ve,ge=B-1,g===c&&B>o||g===h&&B>u)return 1;for(;;){it=R-j,S[V]<Oe?(Ve=0,bt=S[V]):S[V]>Oe?(Ve=nt[He+S[V]],bt=ke[Ie+S[V]]):(Ve=32+64,bt=0),Z=1<<R-j,oe=1<<H,$=oe;do oe-=Z,A[Ce+(U>>j)+oe]=it<<24|Ve<<16|bt|0;while(oe!==0);for(Z=1<<R-1;U&Z;)Z>>=1;if(Z!==0?(U&=Z-1,U+=Z):U=0,V++,--Le[R]===0){if(R===ne)break;R=v[y+S[V]]}if(R>ve&&(U&ge)!==re){for(j===0&&(j=ve),Ce+=$,H=R-j,X=1<<H;H+j<ne&&(X-=Le[H+j],!(X<=0));)H++,X<<=1;if(B+=1<<H,g===c&&B>o||g===h&&B>u)return 1;re=U&ge,A[re]=ve<<24|H<<16|Ce-T|0}}return U!==0&&(A[Ce+U]=R-j<<24|64<<16|0),F.bits=ve,0}},{"../utils/common":41}],51:[function(t,n,i){n.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,n,i){var s=t("../utils/common"),a=4,o=0,u=1,l=2;function c(L){for(var ie=L.length;--ie>=0;)L[ie]=0}var h=0,f=1,d=2,m=3,E=258,p=29,g=256,v=g+1+p,y=30,C=19,A=2*v+1,T=15,S=16,F=7,k=256,R=16,V=17,$=18,ne=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],ve=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],H=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],j=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],X=512,B=new Array((v+2)*2);c(B);var U=new Array(y*2);c(U);var Z=new Array(X);c(Z);var oe=new Array(E-m+1);c(oe);var re=new Array(p);c(re);var ge=new Array(y);c(ge);function Ce(L,ie,le,Ee,P){this.static_tree=L,this.extra_bits=ie,this.extra_base=le,this.elems=Ee,this.max_length=P,this.has_stree=L&&L.length}var ke,Ie,Oe;function Le(L,ie){this.dyn_tree=L,this.max_code=0,this.stat_desc=ie}function pt(L){return L<256?Z[L]:Z[256+(L>>>7)]}function nt(L,ie){L.pending_buf[L.pending++]=ie&255,L.pending_buf[L.pending++]=ie>>>8&255}function He(L,ie,le){L.bi_valid>S-le?(L.bi_buf|=ie<<L.bi_valid&65535,nt(L,L.bi_buf),L.bi_buf=ie>>S-L.bi_valid,L.bi_valid+=le-S):(L.bi_buf|=ie<<L.bi_valid&65535,L.bi_valid+=le)}function it(L,ie,le){He(L,le[ie*2],le[ie*2+1])}function Ve(L,ie){var le=0;do le|=L&1,L>>>=1,le<<=1;while(--ie>0);return le>>>1}function bt(L){L.bi_valid===16?(nt(L,L.bi_buf),L.bi_buf=0,L.bi_valid=0):L.bi_valid>=8&&(L.pending_buf[L.pending++]=L.bi_buf&255,L.bi_buf>>=8,L.bi_valid-=8)}function gt(L,ie){var le=ie.dyn_tree,Ee=ie.max_code,P=ie.stat_desc.static_tree,ee=ie.stat_desc.has_stree,w=ie.stat_desc.extra_bits,ae=ie.stat_desc.extra_base,we=ie.stat_desc.max_length,x,Y,Q,_,N,K,Te=0;for(_=0;_<=T;_++)L.bl_count[_]=0;for(le[L.heap[L.heap_max]*2+1]=0,x=L.heap_max+1;x<A;x++)Y=L.heap[x],_=le[le[Y*2+1]*2+1]+1,_>we&&(_=we,Te++),le[Y*2+1]=_,!(Y>Ee)&&(L.bl_count[_]++,N=0,Y>=ae&&(N=w[Y-ae]),K=le[Y*2],L.opt_len+=K*(_+N),ee&&(L.static_len+=K*(P[Y*2+1]+N)));if(Te!==0){do{for(_=we-1;L.bl_count[_]===0;)_--;L.bl_count[_]--,L.bl_count[_+1]+=2,L.bl_count[we]--,Te-=2}while(Te>0);for(_=we;_!==0;_--)for(Y=L.bl_count[_];Y!==0;)Q=L.heap[--x],!(Q>Ee)&&(le[Q*2+1]!==_&&(L.opt_len+=(_-le[Q*2+1])*le[Q*2],le[Q*2+1]=_),Y--)}}function or(L,ie,le){var Ee=new Array(T+1),P=0,ee,w;for(ee=1;ee<=T;ee++)Ee[ee]=P=P+le[ee-1]<<1;for(w=0;w<=ie;w++){var ae=L[w*2+1];ae!==0&&(L[w*2]=Ve(Ee[ae]++,ae))}}function We(){var L,ie,le,Ee,P,ee=new Array(T+1);for(le=0,Ee=0;Ee<p-1;Ee++)for(re[Ee]=le,L=0;L<1<<ne[Ee];L++)oe[le++]=Ee;for(oe[le-1]=Ee,P=0,Ee=0;Ee<16;Ee++)for(ge[Ee]=P,L=0;L<1<<ve[Ee];L++)Z[P++]=Ee;for(P>>=7;Ee<y;Ee++)for(ge[Ee]=P<<7,L=0;L<1<<ve[Ee]-7;L++)Z[256+P++]=Ee;for(ie=0;ie<=T;ie++)ee[ie]=0;for(L=0;L<=143;)B[L*2+1]=8,L++,ee[8]++;for(;L<=255;)B[L*2+1]=9,L++,ee[9]++;for(;L<=279;)B[L*2+1]=7,L++,ee[7]++;for(;L<=287;)B[L*2+1]=8,L++,ee[8]++;for(or(B,v+1,ee),L=0;L<y;L++)U[L*2+1]=5,U[L*2]=Ve(L,5);ke=new Ce(B,ne,g+1,v,T),Ie=new Ce(U,ve,0,y,T),Oe=new Ce(new Array(0),H,0,C,F)}function Ct(L){var ie;for(ie=0;ie<v;ie++)L.dyn_ltree[ie*2]=0;for(ie=0;ie<y;ie++)L.dyn_dtree[ie*2]=0;for(ie=0;ie<C;ie++)L.bl_tree[ie*2]=0;L.dyn_ltree[k*2]=1,L.opt_len=L.static_len=0,L.last_lit=L.matches=0}function Xr(L){L.bi_valid>8?nt(L,L.bi_buf):L.bi_valid>0&&(L.pending_buf[L.pending++]=L.bi_buf),L.bi_buf=0,L.bi_valid=0}function Gt(L,ie,le,Ee){Xr(L),Ee&&(nt(L,le),nt(L,~le)),s.arraySet(L.pending_buf,L.window,ie,le,L.pending),L.pending+=le}function Ot(L,ie,le,Ee){var P=ie*2,ee=le*2;return L[P]<L[ee]||L[P]===L[ee]&&Ee[ie]<=Ee[le]}function Ze(L,ie,le){for(var Ee=L.heap[le],P=le<<1;P<=L.heap_len&&(P<L.heap_len&&Ot(ie,L.heap[P+1],L.heap[P],L.depth)&&P++,!Ot(ie,Ee,L.heap[P],L.depth));)L.heap[le]=L.heap[P],le=P,P<<=1;L.heap[le]=Ee}function Be(L,ie,le){var Ee,P,ee=0,w,ae;if(L.last_lit!==0)do Ee=L.pending_buf[L.d_buf+ee*2]<<8|L.pending_buf[L.d_buf+ee*2+1],P=L.pending_buf[L.l_buf+ee],ee++,Ee===0?it(L,P,ie):(w=oe[P],it(L,w+g+1,ie),ae=ne[w],ae!==0&&(P-=re[w],He(L,P,ae)),Ee--,w=pt(Ee),it(L,w,le),ae=ve[w],ae!==0&&(Ee-=ge[w],He(L,Ee,ae)));while(ee<L.last_lit);it(L,k,ie)}function Jt(L,ie){var le=ie.dyn_tree,Ee=ie.stat_desc.static_tree,P=ie.stat_desc.has_stree,ee=ie.stat_desc.elems,w,ae,we=-1,x;for(L.heap_len=0,L.heap_max=A,w=0;w<ee;w++)le[w*2]!==0?(L.heap[++L.heap_len]=we=w,L.depth[w]=0):le[w*2+1]=0;for(;L.heap_len<2;)x=L.heap[++L.heap_len]=we<2?++we:0,le[x*2]=1,L.depth[x]=0,L.opt_len--,P&&(L.static_len-=Ee[x*2+1]);for(ie.max_code=we,w=L.heap_len>>1;w>=1;w--)Ze(L,le,w);x=ee;do w=L.heap[1],L.heap[1]=L.heap[L.heap_len--],Ze(L,le,1),ae=L.heap[1],L.heap[--L.heap_max]=w,L.heap[--L.heap_max]=ae,le[x*2]=le[w*2]+le[ae*2],L.depth[x]=(L.depth[w]>=L.depth[ae]?L.depth[w]:L.depth[ae])+1,le[w*2+1]=le[ae*2+1]=x,L.heap[1]=x++,Ze(L,le,1);while(L.heap_len>=2);L.heap[--L.heap_max]=L.heap[1],gt(L,ie),or(le,we,L.bl_count)}function kn(L,ie,le){var Ee,P=-1,ee,w=ie[0*2+1],ae=0,we=7,x=4;for(w===0&&(we=138,x=3),ie[(le+1)*2+1]=65535,Ee=0;Ee<=le;Ee++)ee=w,w=ie[(Ee+1)*2+1],!(++ae<we&&ee===w)&&(ae<x?L.bl_tree[ee*2]+=ae:ee!==0?(ee!==P&&L.bl_tree[ee*2]++,L.bl_tree[R*2]++):ae<=10?L.bl_tree[V*2]++:L.bl_tree[$*2]++,ae=0,P=ee,w===0?(we=138,x=3):ee===w?(we=6,x=3):(we=7,x=4))}function Zr(L,ie,le){var Ee,P=-1,ee,w=ie[0*2+1],ae=0,we=7,x=4;for(w===0&&(we=138,x=3),Ee=0;Ee<=le;Ee++)if(ee=w,w=ie[(Ee+1)*2+1],!(++ae<we&&ee===w)){if(ae<x)do it(L,ee,L.bl_tree);while(--ae!==0);else ee!==0?(ee!==P&&(it(L,ee,L.bl_tree),ae--),it(L,R,L.bl_tree),He(L,ae-3,2)):ae<=10?(it(L,V,L.bl_tree),He(L,ae-3,3)):(it(L,$,L.bl_tree),He(L,ae-11,7));ae=0,P=ee,w===0?(we=138,x=3):ee===w?(we=6,x=3):(we=7,x=4)}}function er(L){var ie;for(kn(L,L.dyn_ltree,L.l_desc.max_code),kn(L,L.dyn_dtree,L.d_desc.max_code),Jt(L,L.bl_desc),ie=C-1;ie>=3&&L.bl_tree[j[ie]*2+1]===0;ie--);return L.opt_len+=3*(ie+1)+5+5+4,ie}function Bn(L,ie,le,Ee){var P;for(He(L,ie-257,5),He(L,le-1,5),He(L,Ee-4,4),P=0;P<Ee;P++)He(L,L.bl_tree[j[P]*2+1],3);Zr(L,L.dyn_ltree,ie-1),Zr(L,L.dyn_dtree,le-1)}function Qr(L){var ie=4093624447,le;for(le=0;le<=31;le++,ie>>>=1)if(ie&1&&L.dyn_ltree[le*2]!==0)return o;if(L.dyn_ltree[9*2]!==0||L.dyn_ltree[10*2]!==0||L.dyn_ltree[13*2]!==0)return u;for(le=32;le<g;le++)if(L.dyn_ltree[le*2]!==0)return u;return o}var ur=!1;function On(L){ur||(We(),ur=!0),L.l_desc=new Le(L.dyn_ltree,ke),L.d_desc=new Le(L.dyn_dtree,Ie),L.bl_desc=new Le(L.bl_tree,Oe),L.bi_buf=0,L.bi_valid=0,Ct(L)}function Jr(L,ie,le,Ee){He(L,(h<<1)+(Ee?1:0),3),Gt(L,ie,le,!0)}function Tt(L){He(L,f<<1,3),it(L,k,B),bt(L)}function lr(L,ie,le,Ee){var P,ee,w=0;L.level>0?(L.strm.data_type===l&&(L.strm.data_type=Qr(L)),Jt(L,L.l_desc),Jt(L,L.d_desc),w=er(L),P=L.opt_len+3+7>>>3,ee=L.static_len+3+7>>>3,ee<=P&&(P=ee)):P=ee=le+5,le+4<=P&&ie!==-1?Jr(L,ie,le,Ee):L.strategy===a||ee===P?(He(L,(f<<1)+(Ee?1:0),3),Be(L,B,U)):(He(L,(d<<1)+(Ee?1:0),3),Bn(L,L.l_desc.max_code+1,L.d_desc.max_code+1,w+1),Be(L,L.dyn_ltree,L.dyn_dtree)),Ct(L),Ee&&Xr(L)}function ri(L,ie,le){return L.pending_buf[L.d_buf+L.last_lit*2]=ie>>>8&255,L.pending_buf[L.d_buf+L.last_lit*2+1]=ie&255,L.pending_buf[L.l_buf+L.last_lit]=le&255,L.last_lit++,ie===0?L.dyn_ltree[le*2]++:(L.matches++,ie--,L.dyn_ltree[(oe[le]+g+1)*2]++,L.dyn_dtree[pt(ie)*2]++),L.last_lit===L.lit_bufsize-1}i._tr_init=On,i._tr_stored_block=Jr,i._tr_flush_block=lr,i._tr_tally=ri,i._tr_align=Tt},{"../utils/common":41}],53:[function(t,n,i){function s(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}n.exports=s},{}],54:[function(t,n,i){(function(s){(function(a,o){if(a.setImmediate)return;var u=1,l={},c=!1,h=a.document,f;function d(F){typeof F!="function"&&(F=new Function(""+F));for(var k=new Array(arguments.length-1),R=0;R<k.length;R++)k[R]=arguments[R+1];var V={callback:F,args:k};return l[u]=V,f(u),u++}function m(F){delete l[F]}function E(F){var k=F.callback,R=F.args;switch(R.length){case 0:k();break;case 1:k(R[0]);break;case 2:k(R[0],R[1]);break;case 3:k(R[0],R[1],R[2]);break;default:k.apply(o,R);break}}function p(F){if(c)setTimeout(p,0,F);else{var k=l[F];if(k){c=!0;try{E(k)}finally{m(F),c=!1}}}}function g(){f=function(F){process.nextTick(function(){p(F)})}}function v(){if(a.postMessage&&!a.importScripts){var F=!0,k=a.onmessage;return a.onmessage=function(){F=!1},a.postMessage("","*"),a.onmessage=k,F}}function y(){var F="setImmediate$"+Math.random()+"$",k=function(R){R.source===a&&typeof R.data=="string"&&R.data.indexOf(F)===0&&p(+R.data.slice(F.length))};a.addEventListener?a.addEventListener("message",k,!1):a.attachEvent("onmessage",k),f=function(R){a.postMessage(F+R,"*")}}function C(){var F=new MessageChannel;F.port1.onmessage=function(k){var R=k.data;p(R)},f=function(k){F.port2.postMessage(k)}}function A(){var F=h.documentElement;f=function(k){var R=h.createElement("script");R.onreadystatechange=function(){p(k),R.onreadystatechange=null,F.removeChild(R),R=null},F.appendChild(R)}}function T(){f=function(F){setTimeout(p,0,F)}}var S=Object.getPrototypeOf&&Object.getPrototypeOf(a);S=S&&S.setTimeout?S:a,{}.toString.call(a.process)==="[object process]"?g():v()?y():a.MessageChannel?C():h&&"onreadystatechange"in h.createElement("script")?A():T(),S.setImmediate=d,S.clearImmediate=m})(typeof self>"u"?typeof s>"u"?this:s:self)}).call(this,typeof vr<"u"?vr:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(M2);Object.defineProperty(yc,"__esModule",{value:!0});yc.default=void 0;var bs=xe,nR=xc(ls),Wm=xc(da),iR=xc(Ln),sR=xc(M2.exports);function xc(r){return r&&r.__esModule?r:{default:r}}class aR{constructor(){this.zip=void 0,this.urlCache={},this.checkRequirements()}checkRequirements(){try{this.zip=new sR.default}catch{throw new Error("JSZip lib not loaded")}}open(e,t){return this.zip.loadAsync(e,{base64:t})}openUrl(e,t){return(0,nR.default)(e,"binary").then(function(n){return this.zip.loadAsync(n,{base64:t})}.bind(this))}request(e,t){var n=new bs.defer,i,s=new iR.default(e);return t||(t=s.extension),t=="blob"?i=this.getBlob(e):i=this.getText(e),i?i.then(function(a){let o=this.handleResponse(a,t);n.resolve(o)}.bind(this)):n.reject({message:"File not found in the epub: "+e,stack:new Error().stack}),n.promise}handleResponse(e,t){var n;return t=="json"?n=JSON.parse(e):(0,bs.isXml)(t)?n=(0,bs.parse)(e,"text/xml"):t=="xhtml"?n=(0,bs.parse)(e,"application/xhtml+xml"):t=="html"||t=="htm"?n=(0,bs.parse)(e,"text/html"):n=e,n}getBlob(e,t){var n=window.decodeURIComponent(e.substr(1)),i=this.zip.file(n);if(i)return t=t||Wm.default.lookup(i.name),i.async("uint8array").then(function(s){return new Blob([s],{type:t})})}getText(e,t){var n=window.decodeURIComponent(e.substr(1)),i=this.zip.file(n);if(i)return i.async("string").then(function(s){return s})}getBase64(e,t){var n=window.decodeURIComponent(e.substr(1)),i=this.zip.file(n);if(i)return t=t||Wm.default.lookup(i.name),i.async("base64").then(function(s){return"data:"+t+";base64,"+s})}createUrl(e,t){var n=new bs.defer,i=window.URL||window.webkitURL||window.mozURL,s,a,o=t&&t.base64;return e in this.urlCache?(n.resolve(this.urlCache[e]),n.promise):(o?(a=this.getBase64(e),a&&a.then(function(u){this.urlCache[e]=u,n.resolve(u)}.bind(this))):(a=this.getBlob(e),a&&a.then(function(u){s=i.createObjectURL(u),this.urlCache[e]=s,n.resolve(s)}.bind(this))),a||n.reject({message:"File not found in the epub: "+e,stack:new Error().stack}),n.promise)}revokeUrl(e){var t=window.URL||window.webkitURL||window.mozURL,n=this.urlCache[e];n&&t.revokeObjectURL(n)}destroy(){var e=window.URL||window.webkitURL||window.mozURL;for(let t in this.urlCache)e.revokeObjectURL(t);this.zip=void 0,this.urlCache={}}}var oR=aR;yc.default=oR;var Ac={},U2={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(r,e){(function(t){r.exports=t()})(function(){return function t(n,i,s){function a(l,c){if(!i[l]){if(!n[l]){var h=typeof Ei=="function"&&Ei;if(!c&&h)return h(l,!0);if(o)return o(l,!0);var f=new Error("Cannot find module '"+l+"'");throw f.code="MODULE_NOT_FOUND",f}var d=i[l]={exports:{}};n[l][0].call(d.exports,function(m){var E=n[l][1][m];return a(E||m)},d,d.exports,t,n,i,s)}return i[l].exports}for(var o=typeof Ei=="function"&&Ei,u=0;u<s.length;u++)a(s[u]);return a}({1:[function(t,n,i){(function(s){var a=s.MutationObserver||s.WebKitMutationObserver,o;if(a){var u=0,l=new a(m),c=s.document.createTextNode("");l.observe(c,{characterData:!0}),o=function(){c.data=u=++u%2}}else if(!s.setImmediate&&typeof s.MessageChannel<"u"){var h=new s.MessageChannel;h.port1.onmessage=m,o=function(){h.port2.postMessage(0)}}else"document"in s&&"onreadystatechange"in s.document.createElement("script")?o=function(){var p=s.document.createElement("script");p.onreadystatechange=function(){m(),p.onreadystatechange=null,p.parentNode.removeChild(p),p=null},s.document.documentElement.appendChild(p)}:o=function(){setTimeout(m,0)};var f,d=[];function m(){f=!0;for(var p,g,v=d.length;v;){for(g=d,d=[],p=-1;++p<v;)g[p]();v=d.length}f=!1}n.exports=E;function E(p){d.push(p)===1&&!f&&o()}}).call(this,typeof vr<"u"?vr:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(t,n,i){var s=t(1);function a(){}var o={},u=["REJECTED"],l=["FULFILLED"],c=["PENDING"];n.exports=h;function h(A){if(typeof A!="function")throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,A!==a&&E(this,A)}h.prototype.catch=function(A){return this.then(null,A)},h.prototype.then=function(A,T){if(typeof A!="function"&&this.state===l||typeof T!="function"&&this.state===u)return this;var S=new this.constructor(a);if(this.state!==c){var F=this.state===l?A:T;d(S,F,this.outcome)}else this.queue.push(new f(S,A,T));return S};function f(A,T,S){this.promise=A,typeof T=="function"&&(this.onFulfilled=T,this.callFulfilled=this.otherCallFulfilled),typeof S=="function"&&(this.onRejected=S,this.callRejected=this.otherCallRejected)}f.prototype.callFulfilled=function(A){o.resolve(this.promise,A)},f.prototype.otherCallFulfilled=function(A){d(this.promise,this.onFulfilled,A)},f.prototype.callRejected=function(A){o.reject(this.promise,A)},f.prototype.otherCallRejected=function(A){d(this.promise,this.onRejected,A)};function d(A,T,S){s(function(){var F;try{F=T(S)}catch(k){return o.reject(A,k)}F===A?o.reject(A,new TypeError("Cannot resolve promise with itself")):o.resolve(A,F)})}o.resolve=function(A,T){var S=p(m,T);if(S.status==="error")return o.reject(A,S.value);var F=S.value;if(F)E(A,F);else{A.state=l,A.outcome=T;for(var k=-1,R=A.queue.length;++k<R;)A.queue[k].callFulfilled(T)}return A},o.reject=function(A,T){A.state=u,A.outcome=T;for(var S=-1,F=A.queue.length;++S<F;)A.queue[S].callRejected(T);return A};function m(A){var T=A&&A.then;if(A&&(typeof A=="object"||typeof A=="function")&&typeof T=="function")return function(){T.apply(A,arguments)}}function E(A,T){var S=!1;function F($){S||(S=!0,o.reject(A,$))}function k($){S||(S=!0,o.resolve(A,$))}function R(){T(k,F)}var V=p(R);V.status==="error"&&F(V.value)}function p(A,T){var S={};try{S.value=A(T),S.status="success"}catch(F){S.status="error",S.value=F}return S}h.resolve=g;function g(A){return A instanceof this?A:o.resolve(new this(a),A)}h.reject=v;function v(A){var T=new this(a);return o.reject(T,A)}h.all=y;function y(A){var T=this;if(Object.prototype.toString.call(A)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=A.length,F=!1;if(!S)return this.resolve([]);for(var k=new Array(S),R=0,V=-1,$=new this(a);++V<S;)ne(A[V],V);return $;function ne(ve,H){T.resolve(ve).then(j,function(X){F||(F=!0,o.reject($,X))});function j(X){k[H]=X,++R===S&&!F&&(F=!0,o.resolve($,k))}}}h.race=C;function C(A){var T=this;if(Object.prototype.toString.call(A)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=A.length,F=!1;if(!S)return this.resolve([]);for(var k=-1,R=new this(a);++k<S;)V(A[k]);return R;function V($){T.resolve($).then(function(ne){F||(F=!0,o.resolve(R,ne))},function(ne){F||(F=!0,o.reject(R,ne))})}}},{1:1}],3:[function(t,n,i){(function(s){typeof s.Promise!="function"&&(s.Promise=t(2))}).call(this,typeof vr<"u"?vr:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(t,n,i){var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b};function a(b,O){if(!(b instanceof O))throw new TypeError("Cannot call a class as a function")}function o(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var u=o();function l(){try{if(!u||!u.open)return!1;var b=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),O=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!b||O)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function c(b,O){b=b||[],O=O||{};try{return new Blob(b,O)}catch(M){if(M.name!=="TypeError")throw M;for(var I=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,z=new I,W=0;W<b.length;W+=1)z.append(b[W]);return z.getBlob(O.type)}}typeof Promise>"u"&&t(3);var h=Promise;function f(b,O){O&&b.then(function(I){O(null,I)},function(I){O(I)})}function d(b,O,I){typeof O=="function"&&b.then(O),typeof I=="function"&&b.catch(I)}function m(b){return typeof b!="string"&&(console.warn(b+" used as a key, but it is not a string."),b=String(b)),b}function E(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var p="local-forage-detect-blob-support",g=void 0,v={},y=Object.prototype.toString,C="readonly",A="readwrite";function T(b){for(var O=b.length,I=new ArrayBuffer(O),z=new Uint8Array(I),W=0;W<O;W++)z[W]=b.charCodeAt(W);return I}function S(b){return new h(function(O){var I=b.transaction(p,A),z=c([""]);I.objectStore(p).put(z,"key"),I.onabort=function(W){W.preventDefault(),W.stopPropagation(),O(!1)},I.oncomplete=function(){var W=navigator.userAgent.match(/Chrome\/(\d+)/),M=navigator.userAgent.match(/Edge\//);O(M||!W||parseInt(W[1],10)>=43)}}).catch(function(){return!1})}function F(b){return typeof g=="boolean"?h.resolve(g):S(b).then(function(O){return g=O,g})}function k(b){var O=v[b.name],I={};I.promise=new h(function(z,W){I.resolve=z,I.reject=W}),O.deferredOperations.push(I),O.dbReady?O.dbReady=O.dbReady.then(function(){return I.promise}):O.dbReady=I.promise}function R(b){var O=v[b.name],I=O.deferredOperations.pop();if(I)return I.resolve(),I.promise}function V(b,O){var I=v[b.name],z=I.deferredOperations.pop();if(z)return z.reject(O),z.promise}function $(b,O){return new h(function(I,z){if(v[b.name]=v[b.name]||re(),b.db)if(O)k(b),b.db.close();else return I(b.db);var W=[b.name];O&&W.push(b.version);var M=u.open.apply(u,W);O&&(M.onupgradeneeded=function(te){var ue=M.result;try{ue.createObjectStore(b.storeName),te.oldVersion<=1&&ue.createObjectStore(p)}catch(he){if(he.name==="ConstraintError")console.warn('The database "'+b.name+'" has been upgraded from version '+te.oldVersion+" to version "+te.newVersion+', but the storage "'+b.storeName+'" already exists.');else throw he}}),M.onerror=function(te){te.preventDefault(),z(M.error)},M.onsuccess=function(){var te=M.result;te.onversionchange=function(ue){ue.target.close()},I(te),R(b)}})}function ne(b){return $(b,!1)}function ve(b){return $(b,!0)}function H(b,O){if(!b.db)return!0;var I=!b.db.objectStoreNames.contains(b.storeName),z=b.version<b.db.version,W=b.version>b.db.version;if(z&&(b.version!==O&&console.warn('The database "'+b.name+`" can't be downgraded from version `+b.db.version+" to version "+b.version+"."),b.version=b.db.version),W||I){if(I){var M=b.db.version+1;M>b.version&&(b.version=M)}return!0}return!1}function j(b){return new h(function(O,I){var z=new FileReader;z.onerror=I,z.onloadend=function(W){var M=btoa(W.target.result||"");O({__local_forage_encoded_blob:!0,data:M,type:b.type})},z.readAsBinaryString(b)})}function X(b){var O=T(atob(b.data));return c([O],{type:b.type})}function B(b){return b&&b.__local_forage_encoded_blob}function U(b){var O=this,I=O._initReady().then(function(){var z=v[O._dbInfo.name];if(z&&z.dbReady)return z.dbReady});return d(I,b,b),I}function Z(b){k(b);for(var O=v[b.name],I=O.forages,z=0;z<I.length;z++){var W=I[z];W._dbInfo.db&&(W._dbInfo.db.close(),W._dbInfo.db=null)}return b.db=null,ne(b).then(function(M){return b.db=M,H(b)?ve(b):M}).then(function(M){b.db=O.db=M;for(var te=0;te<I.length;te++)I[te]._dbInfo.db=M}).catch(function(M){throw V(b,M),M})}function oe(b,O,I,z){z===void 0&&(z=1);try{var W=b.db.transaction(b.storeName,O);I(null,W)}catch(M){if(z>0&&(!b.db||M.name==="InvalidStateError"||M.name==="NotFoundError"))return h.resolve().then(function(){if(!b.db||M.name==="NotFoundError"&&!b.db.objectStoreNames.contains(b.storeName)&&b.version<=b.db.version)return b.db&&(b.version=b.db.version+1),ve(b)}).then(function(){return Z(b).then(function(){oe(b,O,I,z-1)})}).catch(I);I(M)}}function re(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function ge(b){var O=this,I={db:null};if(b)for(var z in b)I[z]=b[z];var W=v[I.name];W||(W=re(),v[I.name]=W),W.forages.push(O),O._initReady||(O._initReady=O.ready,O.ready=U);var M=[];function te(){return h.resolve()}for(var ue=0;ue<W.forages.length;ue++){var he=W.forages[ue];he!==O&&M.push(he._initReady().catch(te))}var fe=W.forages.slice(0);return h.all(M).then(function(){return I.db=W.db,ne(I)}).then(function(de){return I.db=de,H(I,O._defaultConfig.version)?ve(I):de}).then(function(de){I.db=W.db=de,O._dbInfo=I;for(var Se=0;Se<fe.length;Se++){var Ne=fe[Se];Ne!==O&&(Ne._dbInfo.db=I.db,Ne._dbInfo.version=I.version)}})}function Ce(b,O){var I=this;b=m(b);var z=new h(function(W,M){I.ready().then(function(){oe(I._dbInfo,C,function(te,ue){if(te)return M(te);try{var he=ue.objectStore(I._dbInfo.storeName),fe=he.get(b);fe.onsuccess=function(){var de=fe.result;de===void 0&&(de=null),B(de)&&(de=X(de)),W(de)},fe.onerror=function(){M(fe.error)}}catch(de){M(de)}})}).catch(M)});return f(z,O),z}function ke(b,O){var I=this,z=new h(function(W,M){I.ready().then(function(){oe(I._dbInfo,C,function(te,ue){if(te)return M(te);try{var he=ue.objectStore(I._dbInfo.storeName),fe=he.openCursor(),de=1;fe.onsuccess=function(){var Se=fe.result;if(Se){var Ne=Se.value;B(Ne)&&(Ne=X(Ne));var je=b(Ne,Se.key,de++);je!==void 0?W(je):Se.continue()}else W()},fe.onerror=function(){M(fe.error)}}catch(Se){M(Se)}})}).catch(M)});return f(z,O),z}function Ie(b,O,I){var z=this;b=m(b);var W=new h(function(M,te){var ue;z.ready().then(function(){return ue=z._dbInfo,y.call(O)==="[object Blob]"?F(ue.db).then(function(he){return he?O:j(O)}):O}).then(function(he){oe(z._dbInfo,A,function(fe,de){if(fe)return te(fe);try{var Se=de.objectStore(z._dbInfo.storeName);he===null&&(he=void 0);var Ne=Se.put(he,b);de.oncomplete=function(){he===void 0&&(he=null),M(he)},de.onabort=de.onerror=function(){var je=Ne.error?Ne.error:Ne.transaction.error;te(je)}}catch(je){te(je)}})}).catch(te)});return f(W,I),W}function Oe(b,O){var I=this;b=m(b);var z=new h(function(W,M){I.ready().then(function(){oe(I._dbInfo,A,function(te,ue){if(te)return M(te);try{var he=ue.objectStore(I._dbInfo.storeName),fe=he.delete(b);ue.oncomplete=function(){W()},ue.onerror=function(){M(fe.error)},ue.onabort=function(){var de=fe.error?fe.error:fe.transaction.error;M(de)}}catch(de){M(de)}})}).catch(M)});return f(z,O),z}function Le(b){var O=this,I=new h(function(z,W){O.ready().then(function(){oe(O._dbInfo,A,function(M,te){if(M)return W(M);try{var ue=te.objectStore(O._dbInfo.storeName),he=ue.clear();te.oncomplete=function(){z()},te.onabort=te.onerror=function(){var fe=he.error?he.error:he.transaction.error;W(fe)}}catch(fe){W(fe)}})}).catch(W)});return f(I,b),I}function pt(b){var O=this,I=new h(function(z,W){O.ready().then(function(){oe(O._dbInfo,C,function(M,te){if(M)return W(M);try{var ue=te.objectStore(O._dbInfo.storeName),he=ue.count();he.onsuccess=function(){z(he.result)},he.onerror=function(){W(he.error)}}catch(fe){W(fe)}})}).catch(W)});return f(I,b),I}function nt(b,O){var I=this,z=new h(function(W,M){if(b<0){W(null);return}I.ready().then(function(){oe(I._dbInfo,C,function(te,ue){if(te)return M(te);try{var he=ue.objectStore(I._dbInfo.storeName),fe=!1,de=he.openKeyCursor();de.onsuccess=function(){var Se=de.result;if(!Se){W(null);return}b===0||fe?W(Se.key):(fe=!0,Se.advance(b))},de.onerror=function(){M(de.error)}}catch(Se){M(Se)}})}).catch(M)});return f(z,O),z}function He(b){var O=this,I=new h(function(z,W){O.ready().then(function(){oe(O._dbInfo,C,function(M,te){if(M)return W(M);try{var ue=te.objectStore(O._dbInfo.storeName),he=ue.openKeyCursor(),fe=[];he.onsuccess=function(){var de=he.result;if(!de){z(fe);return}fe.push(de.key),de.continue()},he.onerror=function(){W(he.error)}}catch(de){W(de)}})}).catch(W)});return f(I,b),I}function it(b,O){O=E.apply(this,arguments);var I=this.config();b=typeof b!="function"&&b||{},b.name||(b.name=b.name||I.name,b.storeName=b.storeName||I.storeName);var z=this,W;if(!b.name)W=h.reject("Invalid arguments");else{var M=b.name===I.name&&z._dbInfo.db,te=M?h.resolve(z._dbInfo.db):ne(b).then(function(ue){var he=v[b.name],fe=he.forages;he.db=ue;for(var de=0;de<fe.length;de++)fe[de]._dbInfo.db=ue;return ue});b.storeName?W=te.then(function(ue){if(!!ue.objectStoreNames.contains(b.storeName)){var he=ue.version+1;k(b);var fe=v[b.name],de=fe.forages;ue.close();for(var Se=0;Se<de.length;Se++){var Ne=de[Se];Ne._dbInfo.db=null,Ne._dbInfo.version=he}var je=new h(function(Ke,xt){var vt=u.open(b.name,he);vt.onerror=function(Nr){var Ea=vt.result;Ea.close(),xt(Nr)},vt.onupgradeneeded=function(){var Nr=vt.result;Nr.deleteObjectStore(b.storeName)},vt.onsuccess=function(){var Nr=vt.result;Nr.close(),Ke(Nr)}});return je.then(function(Ke){fe.db=Ke;for(var xt=0;xt<de.length;xt++){var vt=de[xt];vt._dbInfo.db=Ke,R(vt._dbInfo)}}).catch(function(Ke){throw(V(b,Ke)||h.resolve()).catch(function(){}),Ke})}}):W=te.then(function(ue){k(b);var he=v[b.name],fe=he.forages;ue.close();for(var de=0;de<fe.length;de++){var Se=fe[de];Se._dbInfo.db=null}var Ne=new h(function(je,Ke){var xt=u.deleteDatabase(b.name);xt.onerror=function(){var vt=xt.result;vt&&vt.close(),Ke(xt.error)},xt.onblocked=function(){console.warn('dropInstance blocked for database "'+b.name+'" until all open connections are closed')},xt.onsuccess=function(){var vt=xt.result;vt&&vt.close(),je(vt)}});return Ne.then(function(je){he.db=je;for(var Ke=0;Ke<fe.length;Ke++){var xt=fe[Ke];R(xt._dbInfo)}}).catch(function(je){throw(V(b,je)||h.resolve()).catch(function(){}),je})})}return f(W,O),W}var Ve={_driver:"asyncStorage",_initStorage:ge,_support:l(),iterate:ke,getItem:Ce,setItem:Ie,removeItem:Oe,clear:Le,length:pt,key:nt,keys:He,dropInstance:it};function bt(){return typeof openDatabase=="function"}var gt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",or="~~local_forage_type~",We=/^~~local_forage_type~([^~]+)~/,Ct="__lfsc__:",Xr=Ct.length,Gt="arbf",Ot="blob",Ze="si08",Be="ui08",Jt="uic8",kn="si16",Zr="si32",er="ur16",Bn="ui32",Qr="fl32",ur="fl64",On=Xr+Gt.length,Jr=Object.prototype.toString;function Tt(b){var O=b.length*.75,I=b.length,z,W=0,M,te,ue,he;b[b.length-1]==="="&&(O--,b[b.length-2]==="="&&O--);var fe=new ArrayBuffer(O),de=new Uint8Array(fe);for(z=0;z<I;z+=4)M=gt.indexOf(b[z]),te=gt.indexOf(b[z+1]),ue=gt.indexOf(b[z+2]),he=gt.indexOf(b[z+3]),de[W++]=M<<2|te>>4,de[W++]=(te&15)<<4|ue>>2,de[W++]=(ue&3)<<6|he&63;return fe}function lr(b){var O=new Uint8Array(b),I="",z;for(z=0;z<O.length;z+=3)I+=gt[O[z]>>2],I+=gt[(O[z]&3)<<4|O[z+1]>>4],I+=gt[(O[z+1]&15)<<2|O[z+2]>>6],I+=gt[O[z+2]&63];return O.length%3===2?I=I.substring(0,I.length-1)+"=":O.length%3===1&&(I=I.substring(0,I.length-2)+"=="),I}function ri(b,O){var I="";if(b&&(I=Jr.call(b)),b&&(I==="[object ArrayBuffer]"||b.buffer&&Jr.call(b.buffer)==="[object ArrayBuffer]")){var z,W=Ct;b instanceof ArrayBuffer?(z=b,W+=Gt):(z=b.buffer,I==="[object Int8Array]"?W+=Ze:I==="[object Uint8Array]"?W+=Be:I==="[object Uint8ClampedArray]"?W+=Jt:I==="[object Int16Array]"?W+=kn:I==="[object Uint16Array]"?W+=er:I==="[object Int32Array]"?W+=Zr:I==="[object Uint32Array]"?W+=Bn:I==="[object Float32Array]"?W+=Qr:I==="[object Float64Array]"?W+=ur:O(new Error("Failed to get type for BinaryArray"))),O(W+lr(z))}else if(I==="[object Blob]"){var M=new FileReader;M.onload=function(){var te=or+b.type+"~"+lr(this.result);O(Ct+Ot+te)},M.readAsArrayBuffer(b)}else try{O(JSON.stringify(b))}catch(te){console.error("Couldn't convert value into a JSON string: ",b),O(null,te)}}function L(b){if(b.substring(0,Xr)!==Ct)return JSON.parse(b);var O=b.substring(On),I=b.substring(Xr,On),z;if(I===Ot&&We.test(O)){var W=O.match(We);z=W[1],O=O.substring(W[0].length)}var M=Tt(O);switch(I){case Gt:return M;case Ot:return c([M],{type:z});case Ze:return new Int8Array(M);case Be:return new Uint8Array(M);case Jt:return new Uint8ClampedArray(M);case kn:return new Int16Array(M);case er:return new Uint16Array(M);case Zr:return new Int32Array(M);case Bn:return new Uint32Array(M);case Qr:return new Float32Array(M);case ur:return new Float64Array(M);default:throw new Error("Unkown type: "+I)}}var ie={serialize:ri,deserialize:L,stringToBuffer:Tt,bufferToString:lr};function le(b,O,I,z){b.executeSql("CREATE TABLE IF NOT EXISTS "+O.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],I,z)}function Ee(b){var O=this,I={db:null};if(b)for(var z in b)I[z]=typeof b[z]!="string"?b[z].toString():b[z];var W=new h(function(M,te){try{I.db=openDatabase(I.name,String(I.version),I.description,I.size)}catch(ue){return te(ue)}I.db.transaction(function(ue){le(ue,I,function(){O._dbInfo=I,M()},function(he,fe){te(fe)})},te)});return I.serializer=ie,W}function P(b,O,I,z,W,M){b.executeSql(I,z,W,function(te,ue){ue.code===ue.SYNTAX_ERR?te.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[O.storeName],function(he,fe){fe.rows.length?M(he,ue):le(he,O,function(){he.executeSql(I,z,W,M)},M)},M):M(te,ue)},M)}function ee(b,O){var I=this;b=m(b);var z=new h(function(W,M){I.ready().then(function(){var te=I._dbInfo;te.db.transaction(function(ue){P(ue,te,"SELECT * FROM "+te.storeName+" WHERE key = ? LIMIT 1",[b],function(he,fe){var de=fe.rows.length?fe.rows.item(0).value:null;de&&(de=te.serializer.deserialize(de)),W(de)},function(he,fe){M(fe)})})}).catch(M)});return f(z,O),z}function w(b,O){var I=this,z=new h(function(W,M){I.ready().then(function(){var te=I._dbInfo;te.db.transaction(function(ue){P(ue,te,"SELECT * FROM "+te.storeName,[],function(he,fe){for(var de=fe.rows,Se=de.length,Ne=0;Ne<Se;Ne++){var je=de.item(Ne),Ke=je.value;if(Ke&&(Ke=te.serializer.deserialize(Ke)),Ke=b(Ke,je.key,Ne+1),Ke!==void 0){W(Ke);return}}W()},function(he,fe){M(fe)})})}).catch(M)});return f(z,O),z}function ae(b,O,I,z){var W=this;b=m(b);var M=new h(function(te,ue){W.ready().then(function(){O===void 0&&(O=null);var he=O,fe=W._dbInfo;fe.serializer.serialize(O,function(de,Se){Se?ue(Se):fe.db.transaction(function(Ne){P(Ne,fe,"INSERT OR REPLACE INTO "+fe.storeName+" (key, value) VALUES (?, ?)",[b,de],function(){te(he)},function(je,Ke){ue(Ke)})},function(Ne){if(Ne.code===Ne.QUOTA_ERR){if(z>0){te(ae.apply(W,[b,he,I,z-1]));return}ue(Ne)}})})}).catch(ue)});return f(M,I),M}function we(b,O,I){return ae.apply(this,[b,O,I,1])}function x(b,O){var I=this;b=m(b);var z=new h(function(W,M){I.ready().then(function(){var te=I._dbInfo;te.db.transaction(function(ue){P(ue,te,"DELETE FROM "+te.storeName+" WHERE key = ?",[b],function(){W()},function(he,fe){M(fe)})})}).catch(M)});return f(z,O),z}function Y(b){var O=this,I=new h(function(z,W){O.ready().then(function(){var M=O._dbInfo;M.db.transaction(function(te){P(te,M,"DELETE FROM "+M.storeName,[],function(){z()},function(ue,he){W(he)})})}).catch(W)});return f(I,b),I}function Q(b){var O=this,I=new h(function(z,W){O.ready().then(function(){var M=O._dbInfo;M.db.transaction(function(te){P(te,M,"SELECT COUNT(key) as c FROM "+M.storeName,[],function(ue,he){var fe=he.rows.item(0).c;z(fe)},function(ue,he){W(he)})})}).catch(W)});return f(I,b),I}function _(b,O){var I=this,z=new h(function(W,M){I.ready().then(function(){var te=I._dbInfo;te.db.transaction(function(ue){P(ue,te,"SELECT key FROM "+te.storeName+" WHERE id = ? LIMIT 1",[b+1],function(he,fe){var de=fe.rows.length?fe.rows.item(0).key:null;W(de)},function(he,fe){M(fe)})})}).catch(M)});return f(z,O),z}function N(b){var O=this,I=new h(function(z,W){O.ready().then(function(){var M=O._dbInfo;M.db.transaction(function(te){P(te,M,"SELECT key FROM "+M.storeName,[],function(ue,he){for(var fe=[],de=0;de<he.rows.length;de++)fe.push(he.rows.item(de).key);z(fe)},function(ue,he){W(he)})})}).catch(W)});return f(I,b),I}function K(b){return new h(function(O,I){b.transaction(function(z){z.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(W,M){for(var te=[],ue=0;ue<M.rows.length;ue++)te.push(M.rows.item(ue).name);O({db:b,storeNames:te})},function(W,M){I(M)})},function(z){I(z)})})}function Te(b,O){O=E.apply(this,arguments);var I=this.config();b=typeof b!="function"&&b||{},b.name||(b.name=b.name||I.name,b.storeName=b.storeName||I.storeName);var z=this,W;return b.name?W=new h(function(M){var te;b.name===I.name?te=z._dbInfo.db:te=openDatabase(b.name,"","",0),b.storeName?M({db:te,storeNames:[b.storeName]}):M(K(te))}).then(function(M){return new h(function(te,ue){M.db.transaction(function(he){function fe(je){return new h(function(Ke,xt){he.executeSql("DROP TABLE IF EXISTS "+je,[],function(){Ke()},function(vt,Nr){xt(Nr)})})}for(var de=[],Se=0,Ne=M.storeNames.length;Se<Ne;Se++)de.push(fe(M.storeNames[Se]));h.all(de).then(function(){te()}).catch(function(je){ue(je)})},function(he){ue(he)})})}):W=h.reject("Invalid arguments"),f(W,O),W}var me={_driver:"webSQLStorage",_initStorage:Ee,_support:bt(),iterate:w,getItem:ee,setItem:we,removeItem:x,clear:Y,length:Q,key:_,keys:N,dropInstance:Te};function ye(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function Pe(b,O){var I=b.name+"/";return b.storeName!==O.storeName&&(I+=b.storeName+"/"),I}function en(){var b="_localforage_support_test";try{return localStorage.setItem(b,!0),localStorage.removeItem(b),!1}catch{return!0}}function st(){return!en()||localStorage.length>0}function Ue(b){var O=this,I={};if(b)for(var z in b)I[z]=b[z];return I.keyPrefix=Pe(b,O._defaultConfig),st()?(O._dbInfo=I,I.serializer=ie,h.resolve()):h.reject()}function mt(b){var O=this,I=O.ready().then(function(){for(var z=O._dbInfo.keyPrefix,W=localStorage.length-1;W>=0;W--){var M=localStorage.key(W);M.indexOf(z)===0&&localStorage.removeItem(M)}});return f(I,b),I}function Rt(b,O){var I=this;b=m(b);var z=I.ready().then(function(){var W=I._dbInfo,M=localStorage.getItem(W.keyPrefix+b);return M&&(M=W.serializer.deserialize(M)),M});return f(z,O),z}function Wt(b,O){var I=this,z=I.ready().then(function(){for(var W=I._dbInfo,M=W.keyPrefix,te=M.length,ue=localStorage.length,he=1,fe=0;fe<ue;fe++){var de=localStorage.key(fe);if(de.indexOf(M)===0){var Se=localStorage.getItem(de);if(Se&&(Se=W.serializer.deserialize(Se)),Se=b(Se,de.substring(te),he++),Se!==void 0)return Se}}});return f(z,O),z}function ds(b,O){var I=this,z=I.ready().then(function(){var W=I._dbInfo,M;try{M=localStorage.key(b)}catch{M=null}return M&&(M=M.substring(W.keyPrefix.length)),M});return f(z,O),z}function ps(b){var O=this,I=O.ready().then(function(){for(var z=O._dbInfo,W=localStorage.length,M=[],te=0;te<W;te++){var ue=localStorage.key(te);ue.indexOf(z.keyPrefix)===0&&M.push(ue.substring(z.keyPrefix.length))}return M});return f(I,b),I}function ft(b){var O=this,I=O.keys().then(function(z){return z.length});return f(I,b),I}function cr(b,O){var I=this;b=m(b);var z=I.ready().then(function(){var W=I._dbInfo;localStorage.removeItem(W.keyPrefix+b)});return f(z,O),z}function St(b,O,I){var z=this;b=m(b);var W=z.ready().then(function(){O===void 0&&(O=null);var M=O;return new h(function(te,ue){var he=z._dbInfo;he.serializer.serialize(O,function(fe,de){if(de)ue(de);else try{localStorage.setItem(he.keyPrefix+b,fe),te(M)}catch(Se){(Se.name==="QuotaExceededError"||Se.name==="NS_ERROR_DOM_QUOTA_REACHED")&&ue(Se),ue(Se)}})})});return f(W,I),W}function tn(b,O){if(O=E.apply(this,arguments),b=typeof b!="function"&&b||{},!b.name){var I=this.config();b.name=b.name||I.name,b.storeName=b.storeName||I.storeName}var z=this,W;return b.name?W=new h(function(M){b.storeName?M(Pe(b,z._defaultConfig)):M(b.name+"/")}).then(function(M){for(var te=localStorage.length-1;te>=0;te--){var ue=localStorage.key(te);ue.indexOf(M)===0&&localStorage.removeItem(ue)}}):W=h.reject("Invalid arguments"),f(W,O),W}var Or={_driver:"localStorageWrapper",_initStorage:Ue,_support:ye(),iterate:Wt,getItem:Rt,setItem:St,removeItem:cr,clear:mt,length:ft,key:ds,keys:ps,dropInstance:tn},qo=function(O,I){return O===I||typeof O=="number"&&typeof I=="number"&&isNaN(O)&&isNaN(I)},J2=function(O,I){for(var z=O.length,W=0;W<z;){if(qo(O[W],I))return!0;W++}return!1},U0=Array.isArray||function(b){return Object.prototype.toString.call(b)==="[object Array]"},va={},$0={},gs={INDEXEDDB:Ve,WEBSQL:me,LOCALSTORAGE:Or},ex=[gs.INDEXEDDB._driver,gs.WEBSQL._driver,gs.LOCALSTORAGE._driver],Yo=["dropInstance"],Sc=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Yo),tx={description:"",driver:ex.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function rx(b,O){b[O]=function(){var I=arguments;return b.ready().then(function(){return b[O].apply(b,I)})}}function Dc(){for(var b=1;b<arguments.length;b++){var O=arguments[b];if(O)for(var I in O)O.hasOwnProperty(I)&&(U0(O[I])?arguments[0][I]=O[I].slice():arguments[0][I]=O[I])}return arguments[0]}var nx=function(){function b(O){a(this,b);for(var I in gs)if(gs.hasOwnProperty(I)){var z=gs[I],W=z._driver;this[I]=W,va[W]||this.defineDriver(z)}this._defaultConfig=Dc({},tx),this._config=Dc({},this._defaultConfig,O),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return b.prototype.config=function(I){if((typeof I>"u"?"undefined":s(I))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var z in I){if(z==="storeName"&&(I[z]=I[z].replace(/\W/g,"_")),z==="version"&&typeof I[z]!="number")return new Error("Database version must be a number.");this._config[z]=I[z]}return"driver"in I&&I.driver?this.setDriver(this._config.driver):!0}else return typeof I=="string"?this._config[I]:this._config},b.prototype.defineDriver=function(I,z,W){var M=new h(function(te,ue){try{var he=I._driver,fe=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!I._driver){ue(fe);return}for(var de=Sc.concat("_initStorage"),Se=0,Ne=de.length;Se<Ne;Se++){var je=de[Se],Ke=!J2(Yo,je);if((Ke||I[je])&&typeof I[je]!="function"){ue(fe);return}}var xt=function(){for(var Ea=function(ax){return function(){var ox=new Error("Method "+ax+" is not implemented by the current driver"),z0=h.reject(ox);return f(z0,arguments[arguments.length-1]),z0}},wc=0,sx=Yo.length;wc<sx;wc++){var _c=Yo[wc];I[_c]||(I[_c]=Ea(_c))}};xt();var vt=function(Ea){va[he]&&console.info("Redefining LocalForage driver: "+he),va[he]=I,$0[he]=Ea,te()};"_support"in I?I._support&&typeof I._support=="function"?I._support().then(vt,ue):vt(!!I._support):vt(!0)}catch(Nr){ue(Nr)}});return d(M,z,W),M},b.prototype.driver=function(){return this._driver||null},b.prototype.getDriver=function(I,z,W){var M=va[I]?h.resolve(va[I]):h.reject(new Error("Driver not found."));return d(M,z,W),M},b.prototype.getSerializer=function(I){var z=h.resolve(ie);return d(z,I),z},b.prototype.ready=function(I){var z=this,W=z._driverSet.then(function(){return z._ready===null&&(z._ready=z._initDriver()),z._ready});return d(W,I,I),W},b.prototype.setDriver=function(I,z,W){var M=this;U0(I)||(I=[I]);var te=this._getSupportedDrivers(I);function ue(){M._config.driver=M.driver()}function he(Se){return M._extend(Se),ue(),M._ready=M._initStorage(M._config),M._ready}function fe(Se){return function(){var Ne=0;function je(){for(;Ne<Se.length;){var Ke=Se[Ne];return Ne++,M._dbInfo=null,M._ready=null,M.getDriver(Ke).then(he).catch(je)}ue();var xt=new Error("No available storage method found.");return M._driverSet=h.reject(xt),M._driverSet}return je()}}var de=this._driverSet!==null?this._driverSet.catch(function(){return h.resolve()}):h.resolve();return this._driverSet=de.then(function(){var Se=te[0];return M._dbInfo=null,M._ready=null,M.getDriver(Se).then(function(Ne){M._driver=Ne._driver,ue(),M._wrapLibraryMethodsWithReady(),M._initDriver=fe(te)})}).catch(function(){ue();var Se=new Error("No available storage method found.");return M._driverSet=h.reject(Se),M._driverSet}),d(this._driverSet,z,W),this._driverSet},b.prototype.supports=function(I){return!!$0[I]},b.prototype._extend=function(I){Dc(this,I)},b.prototype._getSupportedDrivers=function(I){for(var z=[],W=0,M=I.length;W<M;W++){var te=I[W];this.supports(te)&&z.push(te)}return z},b.prototype._wrapLibraryMethodsWithReady=function(){for(var I=0,z=Sc.length;I<z;I++)rx(this,Sc[I])},b.prototype.createInstance=function(I){return new b(I)},b}(),ix=new nx;n.exports=ix},{3:3}]},{},[4])(4)})})(U2);Object.defineProperty(Ac,"__esModule",{value:!0});Ac.default=void 0;var Mn=xe,uR=Ho(ls),Ph=Ho(da),lR=Ho(Ln),cR=Ho(Yr.exports),Hm=Ho(U2.exports);function Ho(r){return r&&r.__esModule?r:{default:r}}class $2{constructor(e,t,n){this.urlCache={},this.storage=void 0,this.name=e,this.requester=t||uR.default,this.resolver=n,this.online=!0,this.checkRequirements(),this.addListeners()}checkRequirements(){try{let e;typeof Hm.default>"u"&&(e=Hm.default),this.storage=e.createInstance({name:this.name})}catch{throw new Error("localForage lib not loaded")}}addListeners(){this._status=this.status.bind(this),window.addEventListener("online",this._status),window.addEventListener("offline",this._status)}removeListeners(){window.removeEventListener("online",this._status),window.removeEventListener("offline",this._status),this._status=void 0}status(e){let t=navigator.onLine;this.online=t,t?this.emit("online",this):this.emit("offline",this)}add(e,t){let n=e.resources.map(i=>{let{href:s}=i,a=this.resolver(s),o=window.encodeURIComponent(a);return this.storage.getItem(o).then(u=>!u||t?this.requester(a,"binary").then(l=>this.storage.setItem(o,l)):u)});return Promise.all(n)}put(e,t,n){let i=window.encodeURIComponent(e);return this.storage.getItem(i).then(s=>s||this.requester(e,"binary",t,n).then(a=>this.storage.setItem(i,a)))}request(e,t,n,i){return this.online?this.requester(e,t,n,i).then(s=>(this.put(e),s)):this.retrieve(e,t)}retrieve(e,t){new Mn.defer;var n,i=new lR.default(e);return t||(t=i.extension),t=="blob"?n=this.getBlob(e):n=this.getText(e),n.then(s=>{var a=new Mn.defer,o;return s?(o=this.handleResponse(s,t),a.resolve(o)):a.reject({message:"File not found in storage: "+e,stack:new Error().stack}),a.promise})}handleResponse(e,t){var n;return t=="json"?n=JSON.parse(e):(0,Mn.isXml)(t)?n=(0,Mn.parse)(e,"text/xml"):t=="xhtml"?n=(0,Mn.parse)(e,"application/xhtml+xml"):t=="html"||t=="htm"?n=(0,Mn.parse)(e,"text/html"):n=e,n}getBlob(e,t){let n=window.encodeURIComponent(e);return this.storage.getItem(n).then(function(i){if(!!i)return t=t||Ph.default.lookup(e),new Blob([i],{type:t})})}getText(e,t){let n=window.encodeURIComponent(e);return t=t||Ph.default.lookup(e),this.storage.getItem(n).then(function(i){var s=new Mn.defer,a=new FileReader,o;if(!!i)return o=new Blob([i],{type:t}),a.addEventListener("loadend",()=>{s.resolve(a.result)}),a.readAsText(o,t),s.promise})}getBase64(e,t){let n=window.encodeURIComponent(e);return t=t||Ph.default.lookup(e),this.storage.getItem(n).then(i=>{var s=new Mn.defer,a=new FileReader,o;if(!!i)return o=new Blob([i],{type:t}),a.addEventListener("loadend",()=>{s.resolve(a.result)}),a.readAsDataURL(o,t),s.promise})}createUrl(e,t){var n=new Mn.defer,i=window.URL||window.webkitURL||window.mozURL,s,a,o=t&&t.base64;return e in this.urlCache?(n.resolve(this.urlCache[e]),n.promise):(o?(a=this.getBase64(e),a&&a.then(function(u){this.urlCache[e]=u,n.resolve(u)}.bind(this))):(a=this.getBlob(e),a&&a.then(function(u){s=i.createObjectURL(u),this.urlCache[e]=s,n.resolve(s)}.bind(this))),a||n.reject({message:"File not found in storage: "+e,stack:new Error().stack}),n.promise)}revokeUrl(e){var t=window.URL||window.webkitURL||window.mozURL,n=this.urlCache[e];n&&t.revokeObjectURL(n)}destroy(){var e=window.URL||window.webkitURL||window.mozURL;for(let t in this.urlCache)e.revokeObjectURL(t);this.urlCache={},this.removeListeners()}}(0,cR.default)($2.prototype);var hR=$2;Ac.default=hR;var Cc={};Object.defineProperty(Cc,"__esModule",{value:!0});Cc.default=void 0;var jm=xe;class fR{constructor(e){this.interactive="",this.fixedLayout="",this.openToSpread="",this.orientationLock="",e&&this.parse(e)}parse(e){if(!e)return this;const t=(0,jm.qs)(e,"display_options");return t?((0,jm.qsa)(t,"option").forEach(i=>{let s="";switch(i.childNodes.length&&(s=i.childNodes[0].nodeValue),i.attributes.name.value){case"interactive":this.interactive=s;break;case"fixed-layout":this.fixedLayout=s;break;case"open-to-spread":this.openToSpread=s;break;case"orientation-lock":this.orientationLock=s;break}}),this):this}destroy(){this.interactive=void 0,this.fixedLayout=void 0,this.openToSpread=void 0,this.orientationLock=void 0}}var dR=fR;Cc.default=dR;Object.defineProperty(ko,"__esModule",{value:!0});ko.default=void 0;var pR=Qt(Yr.exports),sn=xe,ui=Qt(us),Km=Qt(Ln),gR=Qt(tc),mR=Qt(nc),vR=Qt(ic),qm=Qt(sc),Mh=Qt(ac),ER=Qt(oc),Uh=Qt(lc),yR=Qt(pa),xR=Qt(yc),Ym=Qt(ls),AR=Qt(ar),CR=Qt(Ac),$h=Qt(Cc),Xm=kt;function Qt(r){return r&&r.__esModule?r:{default:r}}const Zm="META-INF/container.xml",TR="META-INF/com.apple.ibooks.display-options.xml",an={BINARY:"binary",BASE64:"base64",EPUB:"epub",OPF:"opf",MANIFEST:"json",DIRECTORY:"directory"};class z2{constructor(e,t){typeof t>"u"&&typeof e!="string"&&!(e instanceof Blob)&&!(e instanceof ArrayBuffer)&&(t=e,e=void 0),this.settings=(0,sn.extend)(this.settings||{},{requestMethod:void 0,requestCredentials:void 0,requestHeaders:void 0,encoding:void 0,replacements:void 0,canonical:void 0,openAs:void 0,store:void 0}),(0,sn.extend)(this.settings,t),this.opening=new sn.defer,this.opened=this.opening.promise,this.isOpen=!1,this.loading={manifest:new sn.defer,spine:new sn.defer,metadata:new sn.defer,cover:new sn.defer,navigation:new sn.defer,pageList:new sn.defer,resources:new sn.defer,displayOptions:new sn.defer},this.loaded={manifest:this.loading.manifest.promise,spine:this.loading.spine.promise,metadata:this.loading.metadata.promise,cover:this.loading.cover.promise,navigation:this.loading.navigation.promise,pageList:this.loading.pageList.promise,resources:this.loading.resources.promise,displayOptions:this.loading.displayOptions.promise},this.ready=Promise.all([this.loaded.manifest,this.loaded.spine,this.loaded.metadata,this.loaded.cover,this.loaded.navigation,this.loaded.resources,this.loaded.displayOptions]),this.isRendered=!1,this.request=this.settings.requestMethod||Ym.default,this.spine=new gR.default,this.locations=new mR.default(this.spine,this.load.bind(this)),this.navigation=void 0,this.pageList=void 0,this.url=void 0,this.path=void 0,this.archived=!1,this.archive=void 0,this.storage=void 0,this.resources=void 0,this.rendition=void 0,this.container=void 0,this.packaging=void 0,this.displayOptions=void 0,this.settings.store&&this.store(this.settings.store),e&&this.open(e,this.settings.openAs).catch(n=>{var i=new Error("Cannot load book at "+e);this.emit(Xm.EVENTS.BOOK.OPEN_FAILED,i)})}open(e,t){var n,i=t||this.determineType(e);return i===an.BINARY?(this.archived=!0,this.url=new ui.default("/",""),n=this.openEpub(e)):i===an.BASE64?(this.archived=!0,this.url=new ui.default("/",""),n=this.openEpub(e,i)):i===an.EPUB?(this.archived=!0,this.url=new ui.default("/",""),n=this.request(e,"binary",this.settings.requestCredentials,this.settings.requestHeaders).then(this.openEpub.bind(this))):i==an.OPF?(this.url=new ui.default(e),n=this.openPackaging(this.url.Path.toString())):i==an.MANIFEST?(this.url=new ui.default(e),n=this.openManifest(this.url.Path.toString())):(this.url=new ui.default(e),n=this.openContainer(Zm).then(this.openPackaging.bind(this))),n}openEpub(e,t){return this.unarchive(e,t||this.settings.encoding).then(()=>this.openContainer(Zm)).then(n=>this.openPackaging(n))}openContainer(e){return this.load(e).then(t=>(this.container=new vR.default(t),this.resolve(this.container.packagePath)))}openPackaging(e){return this.path=new Km.default(e),this.load(e).then(t=>(this.packaging=new qm.default(t),this.unpack(this.packaging)))}openManifest(e){return this.path=new Km.default(e),this.load(e).then(t=>(this.packaging=new qm.default,this.packaging.load(t),this.unpack(this.packaging)))}load(e){var t=this.resolve(e);return this.archived?this.archive.request(t):this.request(t,null,this.settings.requestCredentials,this.settings.requestHeaders)}resolve(e,t){if(!!e){var n=e,i=e.indexOf("://")>-1;return i?e:(this.path&&(n=this.path.resolve(e)),t!=!1&&this.url&&(n=this.url.resolve(n)),n)}}canonical(e){var t=e;return e?(this.settings.canonical?t=this.settings.canonical(e):t=this.resolve(e,!0),t):""}determineType(e){var t,n,i;if(this.settings.encoding==="base64")return an.BASE64;if(typeof e!="string")return an.BINARY;if(t=new ui.default(e),n=t.path(),i=n.extension,i&&(i=i.replace(/\?.*$/,"")),!i)return an.DIRECTORY;if(i==="epub")return an.EPUB;if(i==="opf")return an.OPF;if(i==="json")return an.MANIFEST}unpack(e){this.package=e,this.packaging.metadata.layout===""?this.load(this.url.resolve(TR)).then(t=>{this.displayOptions=new $h.default(t),this.loading.displayOptions.resolve(this.displayOptions)}).catch(t=>{this.displayOptions=new $h.default,this.loading.displayOptions.resolve(this.displayOptions)}):(this.displayOptions=new $h.default,this.loading.displayOptions.resolve(this.displayOptions)),this.spine.unpack(this.packaging,this.resolve.bind(this),this.canonical.bind(this)),this.resources=new ER.default(this.packaging.manifest,{archive:this.archive,resolver:this.resolve.bind(this),request:this.request.bind(this),replacements:this.settings.replacements||(this.archived?"blobUrl":"base64")}),this.loadNavigation(this.packaging).then(()=>{this.loading.navigation.resolve(this.navigation)}),this.packaging.coverPath&&(this.cover=this.resolve(this.packaging.coverPath)),this.loading.manifest.resolve(this.packaging.manifest),this.loading.metadata.resolve(this.packaging.metadata),this.loading.spine.resolve(this.spine),this.loading.cover.resolve(this.cover),this.loading.resources.resolve(this.resources),this.loading.pageList.resolve(this.pageList),this.isOpen=!0,this.archived||this.settings.replacements&&this.settings.replacements!="none"?this.replacements().then(()=>{this.loaded.displayOptions.then(()=>{this.opening.resolve(this)})}).catch(t=>{console.error(t)}):this.loaded.displayOptions.then(()=>{this.opening.resolve(this)})}loadNavigation(e){let t=e.navPath||e.ncxPath,n=e.toc;return n?new Promise((i,s)=>{this.navigation=new Mh.default(n),e.pageList&&(this.pageList=new Uh.default(e.pageList)),i(this.navigation)}):t?this.load(t,"xml").then(i=>(this.navigation=new Mh.default(i),this.pageList=new Uh.default(i),this.navigation)):new Promise((i,s)=>{this.navigation=new Mh.default,this.pageList=new Uh.default,i(this.navigation)})}section(e){return this.spine.get(e)}renderTo(e,t){return this.rendition=new yR.default(this,t),this.rendition.attachTo(e),this.rendition}setRequestCredentials(e){this.settings.requestCredentials=e}setRequestHeaders(e){this.settings.requestHeaders=e}unarchive(e,t){return this.archive=new xR.default,this.archive.open(e,t)}store(e){let t=this.settings.replacements&&this.settings.replacements!=="none",n=this.url,i=this.settings.requestMethod||Ym.default.bind(this);return this.storage=new CR.default(e,i,this.resolve.bind(this)),this.request=this.storage.request.bind(this.storage),this.opened.then(()=>{this.archived&&(this.storage.requester=this.archive.request.bind(this.archive));let s=(a,o)=>{o.output=this.resources.substitute(a,o.url)};this.resources.settings.replacements=t||"blobUrl",this.resources.replacements().then(()=>this.resources.replaceCss()),this.storage.on("offline",()=>{this.url=new ui.default("/",""),this.spine.hooks.serialize.register(s)}),this.storage.on("online",()=>{this.url=n,this.spine.hooks.serialize.deregister(s)})}),this.storage}coverUrl(){return this.loaded.cover.then(()=>this.cover?this.archived?this.archive.createUrl(this.cover):this.cover:null)}replacements(){return this.spine.hooks.serialize.register((e,t)=>{t.output=this.resources.substitute(e,t.url)}),this.resources.replacements().then(()=>this.resources.replaceCss())}getRange(e){var t=new AR.default(e),n=this.spine.get(t.spinePos),i=this.load.bind(this);return n?n.load(i).then(function(s){var a=t.toRange(n.document);return a}):new Promise((s,a)=>{a("CFI could not be found")})}key(e){var t=e||this.packaging.metadata.identifier||this.url.filename;return`epubjs:${Xm.EPUBJS_VERSION}:${t}`}destroy(){this.opened=void 0,this.loading=void 0,this.loaded=void 0,this.ready=void 0,this.isOpen=!1,this.isRendered=!1,this.spine&&this.spine.destroy(),this.locations&&this.locations.destroy(),this.pageList&&this.pageList.destroy(),this.archive&&this.archive.destroy(),this.resources&&this.resources.destroy(),this.container&&this.container.destroy(),this.packaging&&this.packaging.destroy(),this.rendition&&this.rendition.destroy(),this.displayOptions&&this.displayOptions.destroy(),this.spine=void 0,this.locations=void 0,this.pageList=void 0,this.archive=void 0,this.resources=void 0,this.container=void 0,this.packaging=void 0,this.rendition=void 0,this.navigation=void 0,this.url=void 0,this.path=void 0,this.archived=!1}}(0,pR.default)(z2.prototype);var SR=z2;ko.default=SR;var Tc={};Object.defineProperty(Tc,"__esModule",{value:!0});Tc.default=void 0;var V2=hs(ko),DR=hs(pa),wR=hs(ar),_R=hs(cs),FR=bR(xe),G2=kt;hs(Vo);hs(ga);hs(Wo);function W2(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(W2=function(n){return n?t:e})(r)}function bR(r,e){if(!e&&r&&r.__esModule)return r;if(r===null||typeof r!="object"&&typeof r!="function")return{default:r};var t=W2(e);if(t&&t.has(r))return t.get(r);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in r)if(s!=="default"&&Object.prototype.hasOwnProperty.call(r,s)){var a=i?Object.getOwnPropertyDescriptor(r,s):null;a&&(a.get||a.set)?Object.defineProperty(n,s,a):n[s]=r[s]}return n.default=r,t&&t.set(r,n),n}function hs(r){return r&&r.__esModule?r:{default:r}}function fs(r,e){return new V2.default(r,e)}fs.VERSION=G2.EPUBJS_VERSION;typeof vr<"u"&&(vr.EPUBJS_VERSION=G2.EPUBJS_VERSION);fs.Book=V2.default;fs.Rendition=DR.default;fs.Contents=_R.default;fs.CFI=wR.default;fs.utils=FR;var RR=fs;Tc.default=RR;(function(r){Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"Book",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(r,"Contents",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(r,"EpubCFI",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(r,"Layout",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(r,"Rendition",{enumerable:!0,get:function(){return n.default}}),r.default=void 0;var e=o(ko),t=o(ar),n=o(pa),i=o(cs),s=o($o),a=o(Tc);function o(l){return l&&l.__esModule?l:{default:l}}var u=a.default;r.default=u})(F1);var jo={};Object.defineProperty(jo,"__esModule",{value:!0});jo.EpubViewStyle=void 0;var LR={viewHolder:{position:"relative",height:"100%",width:"100%"},view:{height:"100%"}};jo.EpubViewStyle=LR;Object.defineProperty(Zl,"__esModule",{value:!0});Zl.default=void 0;var bu=BR(be.exports),tr=H2(m0.exports),IR=H2(F1),kR=jo;function H2(r){return r&&r.__esModule?r:{default:r}}function j2(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(j2=function(i){return i?t:e})(r)}function BR(r,e){if(!e&&r&&r.__esModule)return r;if(r===null||is(r)!=="object"&&typeof r!="function")return{default:r};var t=j2(e);if(t&&t.has(r))return t.get(r);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in r)if(s!=="default"&&Object.prototype.hasOwnProperty.call(r,s)){var a=i?Object.getOwnPropertyDescriptor(r,s):null;a&&(a.get||a.set)?Object.defineProperty(n,s,a):n[s]=r[s]}return n.default=r,t&&t.set(r,n),n}function is(r){return is=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},is(r)}function Qm(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function OR(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Qm(Object(t),!0).forEach(function(n){rd(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Qm(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function NR(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function Jm(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,K2(n.key),n)}}function PR(r,e,t){return e&&Jm(r.prototype,e),t&&Jm(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}function MR(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&ed(r,e)}function ed(r,e){return ed=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},ed(r,e)}function UR(r){var e=zR();return function(){var n=_l(r),i;if(e){var s=_l(this).constructor;i=Reflect.construct(n,arguments,s)}else i=n.apply(this,arguments);return $R(this,i)}}function $R(r,e){if(e&&(is(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return td(r)}function td(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function zR(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _l(r){return _l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},_l(r)}function rd(r,e,t){return e=K2(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function K2(r){var e=VR(r,"string");return is(e)==="symbol"?e:String(e)}function VR(r,e){if(is(r)!=="object"||r===null)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e||"default");if(is(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var M0=function(r){MR(t,r);var e=UR(t);function t(n){var i;return NR(this,t),i=e.call(this,n),rd(td(i),"onLocationChange",function(s){var a=i.props,o=a.location,u=a.locationChanged,l=s&&s.start;o!==l&&(i.location=l,u&&u(l))}),rd(td(i),"handleKeyPress",function(s){var a=s.key;a&&a==="ArrowRight"&&i.nextPage(),a&&a==="ArrowLeft"&&i.prevPage()}),i.state={isLoaded:!1,toc:[]},i.viewerRef=bu.default.createRef(),i.location=n.location,i.book=i.rendition=i.prevPage=i.nextPage=null,i}return PR(t,[{key:"componentDidMount",value:function(){this.initBook(!0),document.addEventListener("keyup",this.handleKeyPress,!1)}},{key:"initBook",value:function(){var i=this,s=this.props,a=s.url,o=s.tocChanged,u=s.epubInitOptions;this.book&&this.book.destroy(),this.book=new IR.default(a,u),this.book.loaded.navigation.then(function(l){var c=l.toc;i.setState({isLoaded:!0,toc:c},function(){o&&o(c),i.initReader()})})}},{key:"componentWillUnmount",value:function(){this.book&&this.book.destroy(),this.book=this.rendition=this.prevPage=this.nextPage=null,document.removeEventListener("keyup",this.handleKeyPress,!1)}},{key:"shouldComponentUpdate",value:function(i){return!this.state.isLoaded||i.location!==this.props.location||i.location!==this.props.location}},{key:"componentDidUpdate",value:function(i){i.location!==this.props.location&&this.location!==this.props.location&&this.rendition.display(this.props.location),i.url!==this.props.url&&this.initBook()}},{key:"initReader",value:function(){var i=this,s=this.state.toc,a=this.props,o=a.location,u=a.epubOptions,l=a.getRendition,c=this.viewerRef.current;this.rendition=this.book.renderTo(c,OR({contained:!0,width:"100%",height:"100%"},u)),this.prevPage=function(){i.rendition.prev()},this.nextPage=function(){i.rendition.next()},this.registerEvents(),l&&l(this.rendition),typeof o=="string"||typeof o=="number"?this.rendition.display(o):s.length>0&&s[0].href?this.rendition.display(s[0].href):this.rendition.display()}},{key:"registerEvents",value:function(){var i=this.props,s=i.handleKeyPress,a=i.handleTextSelected;this.rendition.on("locationChanged",this.onLocationChange),this.rendition.on("keyup",s||this.handleKeyPress),a&&this.rendition.on("selected",a)}},{key:"renderBook",value:function(){var i=this.props.epubViewStyles;return bu.default.createElement("div",{ref:this.viewerRef,style:i.view})}},{key:"render",value:function(){var i=this.state.isLoaded,s=this.props,a=s.loadingView,o=s.epubViewStyles;return bu.default.createElement("div",{style:o.viewHolder},i&&this.renderBook()||a)}}]),t}(bu.Component);M0.defaultProps={loadingView:null,locationChanged:null,tocChanged:null,epubViewStyles:kR.EpubViewStyle,epubOptions:{},epubInitOptions:{}};M0.propTypes={url:tr.default.oneOfType([tr.default.string,tr.default.instanceOf(ArrayBuffer)]),loadingView:tr.default.element,location:tr.default.oneOfType([tr.default.string,tr.default.number]),locationChanged:tr.default.func,tocChanged:tr.default.func,epubViewStyles:tr.default.object,epubInitOptions:tr.default.object,epubOptions:tr.default.object,getRendition:tr.default.func,handleKeyPress:tr.default.func,handleTextSelected:tr.default.func};var GR=M0;Zl.default=GR;var Oa={};const q2="Left",Y2="Right",X2="Up",Z2="Down",Ws={delta:10,preventScrollOnSwipe:!1,rotationAngle:0,trackMouse:!1,trackTouch:!0,swipeDuration:1/0,touchEventOptions:{passive:!0}},nd={first:!0,initial:[0,0],start:0,swiping:!1,xy:[0,0]},ev="mousemove",tv="mouseup",WR="touchend",HR="touchmove",jR="touchstart";function KR(r,e,t,n){return r>e?t>0?Y2:q2:n>0?Z2:X2}function rv(r,e){if(e===0)return r;const t=Math.PI/180*e,n=r[0]*Math.cos(t)+r[1]*Math.sin(t),i=r[1]*Math.cos(t)-r[0]*Math.sin(t);return[n,i]}function qR(r,e){const t=c=>{const h="touches"in c;h&&c.touches.length>1||r((f,d)=>{d.trackMouse&&!h&&(document.addEventListener(ev,n),document.addEventListener(tv,a));const{clientX:m,clientY:E}=h?c.touches[0]:c,p=rv([m,E],d.rotationAngle);return d.onTouchStartOrOnMouseDown&&d.onTouchStartOrOnMouseDown({event:c}),Object.assign(Object.assign(Object.assign({},f),nd),{initial:p.slice(),xy:p,start:c.timeStamp||0})})},n=c=>{r((h,f)=>{const d="touches"in c;if(d&&c.touches.length>1)return h;if(c.timeStamp-h.start>f.swipeDuration)return h.swiping?Object.assign(Object.assign({},h),{swiping:!1}):h;const{clientX:m,clientY:E}=d?c.touches[0]:c,[p,g]=rv([m,E],f.rotationAngle),v=p-h.xy[0],y=g-h.xy[1],C=Math.abs(v),A=Math.abs(y),T=(c.timeStamp||0)-h.start,S=Math.sqrt(C*C+A*A)/(T||1),F=[v/(T||1),y/(T||1)],k=KR(C,A,v,y),R=typeof f.delta=="number"?f.delta:f.delta[k.toLowerCase()]||Ws.delta;if(C<R&&A<R&&!h.swiping)return h;const V={absX:C,absY:A,deltaX:v,deltaY:y,dir:k,event:c,first:h.first,initial:h.initial,velocity:S,vxvy:F};V.first&&f.onSwipeStart&&f.onSwipeStart(V),f.onSwiping&&f.onSwiping(V);let $=!1;return(f.onSwiping||f.onSwiped||f[`onSwiped${k}`])&&($=!0),$&&f.preventScrollOnSwipe&&f.trackTouch&&c.cancelable&&c.preventDefault(),Object.assign(Object.assign({},h),{first:!1,eventData:V,swiping:!0})})},i=c=>{r((h,f)=>{let d;if(h.swiping&&h.eventData){if(c.timeStamp-h.start<f.swipeDuration){d=Object.assign(Object.assign({},h.eventData),{event:c}),f.onSwiped&&f.onSwiped(d);const m=f[`onSwiped${d.dir}`];m&&m(d)}}else f.onTap&&f.onTap({event:c});return f.onTouchEndOrOnMouseUp&&f.onTouchEndOrOnMouseUp({event:c}),Object.assign(Object.assign(Object.assign({},h),nd),{eventData:d})})},s=()=>{document.removeEventListener(ev,n),document.removeEventListener(tv,a)},a=c=>{s(),i(c)},o=(c,h)=>{let f=()=>{};if(c&&c.addEventListener){const d=Object.assign(Object.assign({},Ws.touchEventOptions),h.touchEventOptions),m=[[jR,t,d],[HR,n,Object.assign(Object.assign({},d),h.preventScrollOnSwipe?{passive:!1}:{})],[WR,i,d]];m.forEach(([E,p,g])=>c.addEventListener(E,p,g)),f=()=>m.forEach(([E,p])=>c.removeEventListener(E,p))}return f},l={ref:c=>{c!==null&&r((h,f)=>{if(h.el===c)return h;const d={};return h.el&&h.el!==c&&h.cleanUpTouch&&(h.cleanUpTouch(),d.cleanUpTouch=void 0),f.trackTouch&&c&&(d.cleanUpTouch=o(c,f)),Object.assign(Object.assign(Object.assign({},h),{el:c}),d)})}};return e.trackMouse&&(l.onMouseDown=t),[l,o]}function YR(r,e,t,n){return!e.trackTouch||!r.el?(r.cleanUpTouch&&r.cleanUpTouch(),Object.assign(Object.assign({},r),{cleanUpTouch:void 0})):r.cleanUpTouch?e.preventScrollOnSwipe!==t.preventScrollOnSwipe||e.touchEventOptions.passive!==t.touchEventOptions.passive?(r.cleanUpTouch(),Object.assign(Object.assign({},r),{cleanUpTouch:n(r.el,e)})):r:Object.assign(Object.assign({},r),{cleanUpTouch:n(r.el,e)})}function XR(r){const{trackMouse:e}=r,t=be.exports.useRef(Object.assign({},nd)),n=be.exports.useRef(Object.assign({},Ws)),i=be.exports.useRef(Object.assign({},n.current));i.current=Object.assign({},n.current),n.current=Object.assign(Object.assign({},Ws),r);let s;for(s in Ws)n.current[s]===void 0&&(n.current[s]=Ws[s]);const[a,o]=be.exports.useMemo(()=>qR(u=>t.current=u(t.current,n.current),{trackMouse:e}),[e]);return t.current=YR(t.current,n.current,i.current,o),a}const ZR=Object.freeze(Object.defineProperty({__proto__:null,DOWN:Z2,LEFT:q2,RIGHT:Y2,UP:X2,useSwipeable:XR},Symbol.toStringTag,{value:"Module"})),QR=lx(ZR);var Ko={};Object.defineProperty(Ko,"__esModule",{value:!0});Ko.ReactReaderStyle=void 0;var JR={container:{overflow:"hidden",position:"relative",height:"100%"},readerArea:{position:"relative",zIndex:1,height:"100%",width:"100%",backgroundColor:"#fff",transition:"all .3s ease"},containerExpanded:{transform:"translateX(256px)"},titleArea:{position:"absolute",top:20,left:50,right:50,textAlign:"center",color:"#999"},reader:{position:"absolute",top:50,left:50,bottom:20,right:50},swipeWrapper:{position:"absolute",top:0,left:0,bottom:0,right:0,zIndex:200},prev:{left:1},next:{right:1},arrow:{outline:"none",border:"none",background:"none",position:"absolute",top:"50%",marginTop:-32,fontSize:64,padding:"0 10px",color:"#E2E2E2",fontFamily:"arial, sans-serif",cursor:"pointer",userSelect:"none",appearance:"none",fontWeight:"normal"},arrowHover:{color:"#777"},tocBackground:{position:"absolute",left:256,top:0,bottom:0,right:0,zIndex:1},tocArea:{position:"absolute",left:0,top:0,bottom:0,zIndex:0,width:256,overflowY:"auto",WebkitOverflowScrolling:"touch",background:"#f2f2f2",padding:"10px 0"},tocAreaButton:{userSelect:"none",appearance:"none",background:"none",border:"none",display:"block",fontFamily:"sans-serif",width:"100%",fontSize:".9em",textAlign:"left",padding:".9em 1em",borderBottom:"1px solid #ddd",color:"#aaa",boxSizing:"border-box",outline:"none",cursor:"pointer"},tocButton:{background:"none",border:"none",width:32,height:32,position:"absolute",top:10,left:10,borderRadius:2,outline:"none",cursor:"pointer"},tocButtonExpanded:{background:"#f2f2f2"},tocButtonBar:{position:"absolute",width:"60%",background:"#ccc",height:2,left:"50%",margin:"-1px -30%",top:"50%",transition:"all .5s ease"},tocButtonBarTop:{top:"35%"},tocButtonBottom:{top:"66%"},loadingView:{position:"absolute",top:"50%",left:"10%",right:"10%",color:"#ccc",textAlign:"center",margintop:"-.5em"}};Ko.ReactReaderStyle=JR;var nv;function eL(){if(nv)return Oa;nv=1;function r(H){return r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(j){return typeof j}:function(j){return j&&typeof Symbol=="function"&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":typeof j},r(H)}Object.defineProperty(Oa,"__esModule",{value:!0}),Oa.default=void 0;var e=c(be.exports),t=u(m0.exports),n=QR,i=Q2(),s=Ko,a=["children"],o=["title","showToc","loadingView","readerStyles","locationChanged","swipeable","epubViewStyles"];function u(H){return H&&H.__esModule?H:{default:H}}function l(H){if(typeof WeakMap!="function")return null;var j=new WeakMap,X=new WeakMap;return(l=function(U){return U?X:j})(H)}function c(H,j){if(!j&&H&&H.__esModule)return H;if(H===null||r(H)!=="object"&&typeof H!="function")return{default:H};var X=l(j);if(X&&X.has(H))return X.get(H);var B={},U=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Z in H)if(Z!=="default"&&Object.prototype.hasOwnProperty.call(H,Z)){var oe=U?Object.getOwnPropertyDescriptor(H,Z):null;oe&&(oe.get||oe.set)?Object.defineProperty(B,Z,oe):B[Z]=H[Z]}return B.default=H,X&&X.set(H,B),B}function h(){return h=Object.assign?Object.assign.bind():function(H){for(var j=1;j<arguments.length;j++){var X=arguments[j];for(var B in X)Object.prototype.hasOwnProperty.call(X,B)&&(H[B]=X[B])}return H},h.apply(this,arguments)}function f(H,j){if(!(H instanceof j))throw new TypeError("Cannot call a class as a function")}function d(H,j){for(var X=0;X<j.length;X++){var B=j[X];B.enumerable=B.enumerable||!1,B.configurable=!0,"value"in B&&(B.writable=!0),Object.defineProperty(H,S(B.key),B)}}function m(H,j,X){return j&&d(H.prototype,j),X&&d(H,X),Object.defineProperty(H,"prototype",{writable:!1}),H}function E(H,j){if(typeof j!="function"&&j!==null)throw new TypeError("Super expression must either be null or a function");H.prototype=Object.create(j&&j.prototype,{constructor:{value:H,writable:!0,configurable:!0}}),Object.defineProperty(H,"prototype",{writable:!1}),j&&p(H,j)}function p(H,j){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(B,U){return B.__proto__=U,B},p(H,j)}function g(H){var j=C();return function(){var B=A(H),U;if(j){var Z=A(this).constructor;U=Reflect.construct(B,arguments,Z)}else U=B.apply(this,arguments);return v(this,U)}}function v(H,j){if(j&&(r(j)==="object"||typeof j=="function"))return j;if(j!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return y(H)}function y(H){if(H===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return H}function C(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function A(H){return A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(X){return X.__proto__||Object.getPrototypeOf(X)},A(H)}function T(H,j,X){return j=S(j),j in H?Object.defineProperty(H,j,{value:X,enumerable:!0,configurable:!0,writable:!0}):H[j]=X,H}function S(H){var j=F(H,"string");return r(j)==="symbol"?j:String(j)}function F(H,j){if(r(H)!=="object"||H===null)return H;var X=H[Symbol.toPrimitive];if(X!==void 0){var B=X.call(H,j||"default");if(r(B)!=="object")return B;throw new TypeError("@@toPrimitive must return a primitive value.")}return(j==="string"?String:Number)(H)}function k(H,j){if(H==null)return{};var X=R(H,j),B,U;if(Object.getOwnPropertySymbols){var Z=Object.getOwnPropertySymbols(H);for(U=0;U<Z.length;U++)B=Z[U],!(j.indexOf(B)>=0)&&(!Object.prototype.propertyIsEnumerable.call(H,B)||(X[B]=H[B]))}return X}function R(H,j){if(H==null)return{};var X={},B=Object.keys(H),U,Z;for(Z=0;Z<B.length;Z++)U=B[Z],!(j.indexOf(U)>=0)&&(X[U]=H[U]);return X}var V=function(j){var X=j.children,B=k(j,a),U=(0,n.useSwipeable)(B);return e.default.createElement("div",U,X)},$=function(H){E(X,H);var j=g(X);function X(){var B;f(this,X);for(var U=arguments.length,Z=new Array(U),oe=0;oe<U;oe++)Z[oe]=arguments[oe];return B=j.call.apply(j,[this].concat(Z)),T(y(B),"setLocation",function(){B.props.setLocation(B.props.href)}),B}return m(X,[{key:"render",value:function(){var U=this,Z=this.props,oe=Z.label,re=Z.styles,ge=Z.subitems;return e.default.createElement("div",null,e.default.createElement("button",{onClick:this.setLocation,style:re},oe),ge&&ge.length>0&&e.default.createElement("div",{style:{paddingLeft:10}},ge.map(function(Ce,ke){return e.default.createElement(X,h({key:ke},U.props,Ce))})))}}]),X}(e.PureComponent);$.propTypes={label:t.default.string,href:t.default.string,setLocation:t.default.func,styles:t.default.object};var ne=function(H){E(X,H);var j=g(X);function X(B){var U;return f(this,X),U=j.call(this,B),T(y(U),"toggleToc",function(){U.setState({expandedToc:!U.state.expandedToc})}),T(y(U),"next",function(){var Z=U.readerRef.current;Z.nextPage()}),T(y(U),"prev",function(){var Z=U.readerRef.current;Z.prevPage()}),T(y(U),"onTocChange",function(Z){var oe=U.props.tocChanged;U.setState({toc:Z},function(){return oe&&oe(Z)})}),T(y(U),"setLocation",function(Z){var oe=U.props.locationChanged;U.setState({expandedToc:!1},function(){return oe&&oe(Z)})}),U.readerRef=e.default.createRef(),U.state={expandedToc:!1,toc:!1},U}return m(X,[{key:"renderToc",value:function(){var U=this,Z=this.state,oe=Z.toc,re=Z.expandedToc,ge=this.props.readerStyles;return e.default.createElement("div",null,e.default.createElement("div",{style:ge.tocArea},e.default.createElement("div",{style:ge.toc},oe.map(function(Ce,ke){return e.default.createElement($,h({},Ce,{key:ke,setLocation:U.setLocation,styles:ge.tocAreaButton}))}))),re&&e.default.createElement("div",{style:ge.tocBackground,onClick:this.toggleToc}))}},{key:"renderTocToggle",value:function(){var U=this.state.expandedToc,Z=this.props.readerStyles;return e.default.createElement("button",{style:Object.assign({},Z.tocButton,U?Z.tocButtonExpanded:{}),onClick:this.toggleToc},e.default.createElement("span",{style:Object.assign({},Z.tocButtonBar,Z.tocButtonBarTop)}),e.default.createElement("span",{style:Object.assign({},Z.tocButtonBar,Z.tocButtonBottom)}))}},{key:"render",value:function(){var U=this.props,Z=U.title,oe=U.showToc,re=U.loadingView,ge=U.readerStyles,Ce=U.locationChanged,ke=U.swipeable,Ie=U.epubViewStyles,Oe=k(U,o),Le=this.state,pt=Le.toc,nt=Le.expandedToc;return e.default.createElement("div",{style:ge.container},e.default.createElement("div",{style:Object.assign({},ge.readerArea,nt?ge.containerExpanded:{})},oe&&this.renderTocToggle(),e.default.createElement("div",{style:ge.titleArea},Z),e.default.createElement(V,{onSwipedRight:this.prev,onSwipedLeft:this.next,trackMouse:!0},e.default.createElement("div",{style:ge.reader},e.default.createElement(i.EpubView,h({ref:this.readerRef,loadingView:re,epubViewStyles:Ie},Oe,{tocChanged:this.onTocChange,locationChanged:Ce})),ke&&e.default.createElement("div",{style:ge.swipeWrapper}))),e.default.createElement("button",{style:Object.assign({},ge.arrow,ge.prev),onClick:this.prev},"\u2039"),e.default.createElement("button",{style:Object.assign({},ge.arrow,ge.next),onClick:this.next},"\u203A")),oe&&pt&&this.renderToc())}}]),X}(e.PureComponent);ne.defaultProps={loadingView:e.default.createElement("div",{style:s.ReactReaderStyle.loadingView},"Loading\u2026"),locationChanged:null,tocChanged:null,showToc:!0,readerStyles:s.ReactReaderStyle},ne.propTypes={title:t.default.string,loadingView:t.default.element,showToc:t.default.bool,locationChanged:t.default.func,tocChanged:t.default.func,readerStyles:t.default.object,epubViewStyles:t.default.object,swipeable:t.default.bool};var ve=ne;return Oa.default=ve,Oa}var iv;function Q2(){return iv||(iv=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"EpubView",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(r,"EpubViewStyle",{enumerable:!0,get:function(){return t.EpubViewStyle}}),Object.defineProperty(r,"ReactReader",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(r,"ReactReaderStyle",{enumerable:!0,get:function(){return i.ReactReaderStyle}});var e=s(Zl),t=jo,n=s(eL()),i=Ko;function s(a){return a&&a.__esModule?a:{default:a}}}(Dh)),Dh}var tL=Q2();const rL=r=>{const{source:e}=r,[t,n]=be.exports.useState(null),i=s=>{n(s)};return pe("div",{style:{height:"100vh"},children:pe(tL.ReactReader,{location:t,locationChanged:i,url:e})})},nL=r=>{const{source:e}=r;function t(){return e.endsWith(".epub")?pe(rL,{source:e}):e.endsWith(".pdf")?(window.open(`https://${document.location.host}`+e),pe(Xt,{})):pe(Xt,{})}return t()},iL=()=>{const r=Ro()||{};return Ut(Xt,{children:[pe(Io,{list:Lo,index:1}),pe(nL,{source:S1[r.id||0].source})]})};const sL=r=>{const{id:e,name:t,cover:n,score:i}=r,s=Ty(),a=Ro(),o=()=>{console.log(a),s("/"+(a.id||"video")+"/"+e)};return pe(Xt,{children:Ut("div",{className:"simple-card",children:[pe("img",{className:"cover",src:n,onClick:()=>{o()}}),pe("div",{className:"title",onClick:()=>{o()},children:t}),pe(Dy,{score:i})]})})};const aL=r=>{const{data:e}=r;return pe(Xt,{children:pe("div",{className:"block",children:(()=>{let n=[];for(let i=0;i<e.length;i++)n.push(pe("div",{className:"card-wrap",children:pe(sL,{name:e[i].name,cover:e[i].cover,score:e[i].score,id:i+""})},i));return n})()})})},sv=()=>{const r=Ro();console.log(r);const e=()=>{switch(r.id){case void 0:case"video":return qf;case"ebook":return S1;case"game":return D1;default:return[]}};return Ut(Xt,{children:[pe(Io,{list:Lo,index:(()=>{switch(r.id){case void 0:case"video":return 0;case"ebook":return 1;case"music":return 2;case"picture":return 3;case"article":return 4;case"rss":return 5;case"game":return 6;default:return 0}})()}),pe(aL,{data:e()})]})};const oL=()=>(console.log(Xw),pe(Xt,{children:pe(Io,{list:Lo,index:2})})),uL=()=>{const r=Ro()||{};return Ut(Xt,{children:[pe(Io,{list:Lo,index:6}),pe("iframe",{src:D1[r.id||0].source,style:{width:"100%",height:"calc(100vh - 129px)",borderWidth:"0px"}})]})};function lL(){return pe(Xt,{children:pe(TT,{children:Ut(CT,{children:[pe($i,{path:"/",element:pe(sv,{})}),pe($i,{path:"/:id",element:pe(sv,{})}),pe($i,{path:"/video/:id",element:pe(Zw,{})}),pe($i,{path:"/ebook/:id",element:pe(iL,{})}),pe($i,{path:"/music",element:pe(oL,{})}),pe($i,{path:"/game/:id",element:pe(uL,{})})]})})})}zh.createRoot(document.getElementById("root")).render(pe(Dx.StrictMode,{children:pe(lL,{})}));
